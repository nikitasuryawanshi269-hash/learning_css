(()=>{var e={505:(e,t,o)=>{e.exports=o(15)},592:(e,t,o)=>{"use strict";var n=o(516),r=o(522),i=o(948),a=o(106),s=o(615),l=o(631),c=o(202),p=o(763);e.exports=function(e){return new Promise((function(t,o){var u=e.data,d=e.headers,_=e.responseType;n.isFormData(u)&&delete d["Content-Type"];var m=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",f=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";d.Authorization="Basic "+btoa(h+":"+f)}var y=s(e.baseURL,e.url);function b(){if(m){var n="getAllResponseHeaders"in m?l(m.getAllResponseHeaders()):null,i={data:_&&"text"!==_&&"json"!==_?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:n,config:e,request:m};r(t,o,i),m=null}}if(m.open(e.method.toUpperCase(),a(y,e.params,e.paramsSerializer),!0),m.timeout=e.timeout,"onloadend"in m?m.onloadend=b:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(b)},m.onabort=function(){m&&(o(p("Request aborted",e,"ECONNABORTED",m)),m=null)},m.onerror=function(){o(p("Network Error",e,null,m)),m=null},m.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),o(p(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",m)),m=null},n.isStandardBrowserEnv()){var g=(e.withCredentials||c(y))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;g&&(d[e.xsrfHeaderName]=g)}"setRequestHeader"in m&&n.forEach(d,(function(e,t){void 0===u&&"content-type"===t.toLowerCase()?delete d[t]:m.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(m.withCredentials=!!e.withCredentials),_&&"json"!==_&&(m.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&m.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&m.upload&&m.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){m&&(m.abort(),o(e),m=null)})),u||(u=null),m.send(u)}))}},15:(e,t,o)=>{"use strict";var n=o(516),r=o(12),i=o(155),a=o(343);function s(e){var t=new i(e),o=r(i.prototype.request,t);return n.extend(o,i.prototype,t),n.extend(o,t),o}var l=s(o(987));l.Axios=i,l.create=function(e){return s(a(l.defaults,e))},l.Cancel=o(928),l.CancelToken=o(191),l.isCancel=o(864),l.all=function(e){return Promise.all(e)},l.spread=o(980),l.isAxiosError=o(19),e.exports=l,e.exports.default=l},928:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},191:(e,t,o)=>{"use strict";var n=o(928);function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var o=this;e((function(e){o.reason||(o.reason=new n(e),t(o.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r((function(t){e=t})),cancel:e}},e.exports=r},864:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},155:(e,t,o)=>{"use strict";var n=o(516),r=o(106),i=o(471),a=o(490),s=o(343),l=o(841),c=l.validators;function p(e){this.defaults=e,this.interceptors={request:new i,response:new i}}p.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&l.assertOptions(t,{silentJSONParsing:c.transitional(c.boolean,"1.0.0"),forcedJSONParsing:c.transitional(c.boolean,"1.0.0"),clarifyTimeoutError:c.transitional(c.boolean,"1.0.0")},!1);var o=[],n=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(n=n&&t.synchronous,o.unshift(t.fulfilled,t.rejected))}));var r,i=[];if(this.interceptors.response.forEach((function(e){i.push(e.fulfilled,e.rejected)})),!n){var p=[a,void 0];for(Array.prototype.unshift.apply(p,o),p=p.concat(i),r=Promise.resolve(e);p.length;)r=r.then(p.shift(),p.shift());return r}for(var u=e;o.length;){var d=o.shift(),_=o.shift();try{u=d(u)}catch(e){_(e);break}}try{r=a(u)}catch(e){return Promise.reject(e)}for(;i.length;)r=r.then(i.shift(),i.shift());return r},p.prototype.getUri=function(e){return e=s(this.defaults,e),r(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(e){p.prototype[e]=function(t,o){return this.request(s(o||{},{method:e,url:t,data:(o||{}).data}))}})),n.forEach(["post","put","patch"],(function(e){p.prototype[e]=function(t,o,n){return this.request(s(n||{},{method:e,url:t,data:o}))}})),e.exports=p},471:(e,t,o)=>{"use strict";var n=o(516);function r(){this.handlers=[]}r.prototype.use=function(e,t,o){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!o&&o.synchronous,runWhen:o?o.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=r},615:(e,t,o)=>{"use strict";var n=o(137),r=o(680);e.exports=function(e,t){return e&&!n(t)?r(e,t):t}},763:(e,t,o)=>{"use strict";var n=o(449);e.exports=function(e,t,o,r,i){var a=new Error(e);return n(a,t,o,r,i)}},490:(e,t,o)=>{"use strict";var n=o(516),r=o(881),i=o(864),a=o(987);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=r.call(e,e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return s(e),t.data=r.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(s(e),t&&t.response&&(t.response.data=r.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},449:e=>{"use strict";e.exports=function(e,t,o,n,r){return e.config=t,o&&(e.code=o),e.request=n,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},343:(e,t,o)=>{"use strict";var n=o(516);e.exports=function(e,t){t=t||{};var o={},r=["url","method","data"],i=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function l(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function c(r){n.isUndefined(t[r])?n.isUndefined(e[r])||(o[r]=l(void 0,e[r])):o[r]=l(e[r],t[r])}n.forEach(r,(function(e){n.isUndefined(t[e])||(o[e]=l(void 0,t[e]))})),n.forEach(i,c),n.forEach(a,(function(r){n.isUndefined(t[r])?n.isUndefined(e[r])||(o[r]=l(void 0,e[r])):o[r]=l(void 0,t[r])})),n.forEach(s,(function(n){n in t?o[n]=l(e[n],t[n]):n in e&&(o[n]=l(void 0,e[n]))}));var p=r.concat(i).concat(a).concat(s),u=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===p.indexOf(e)}));return n.forEach(u,c),o}},522:(e,t,o)=>{"use strict";var n=o(763);e.exports=function(e,t,o){var r=o.config.validateStatus;o.status&&r&&!r(o.status)?t(n("Request failed with status code "+o.status,o.config,null,o.request,o)):e(o)}},881:(e,t,o)=>{"use strict";var n=o(516),r=o(987);e.exports=function(e,t,o){var i=this||r;return n.forEach(o,(function(o){e=o.call(i,e,t)})),e}},987:(e,t,o)=>{"use strict";var n=o(516),r=o(18),i=o(449),a={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l,c={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(l=o(592)),l),transformRequest:[function(e,t){return r(t,"Accept"),r(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)||t&&"application/json"===t["Content-Type"]?(s(t,"application/json"),function(e){if(n.isString(e))try{return(0,JSON.parse)(e),n.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,o=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,a=!o&&"json"===this.responseType;if(a||r&&n.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(a){if("SyntaxError"===e.name)throw i(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){c.headers[e]=n.merge(a)})),e.exports=c},12:e=>{"use strict";e.exports=function(e,t){return function(){for(var o=new Array(arguments.length),n=0;n<o.length;n++)o[n]=arguments[n];return e.apply(t,o)}}},106:(e,t,o)=>{"use strict";var n=o(516);function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,o){if(!t)return e;var i;if(o)i=o(t);else if(n.isURLSearchParams(t))i=t.toString();else{var a=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))})))})),i=a.join("&")}if(i){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},680:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},948:(e,t,o)=>{"use strict";var n=o(516);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,o,r,i,a){var s=[];s.push(e+"="+encodeURIComponent(t)),n.isNumber(o)&&s.push("expires="+new Date(o).toGMTString()),n.isString(r)&&s.push("path="+r),n.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},137:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},19:e=>{"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},202:(e,t,o)=>{"use strict";var n=o(516);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");function r(e){var n=e;return t&&(o.setAttribute("href",n),n=o.href),o.setAttribute("href",n),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}return e=r(window.location.href),function(t){var o=n.isString(t)?r(t):t;return o.protocol===e.protocol&&o.host===e.host}}():function(){return!0}},18:(e,t,o)=>{"use strict";var n=o(516);e.exports=function(e,t){n.forEach(e,(function(o,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=o,delete e[n])}))}},631:(e,t,o)=>{"use strict";var n=o(516),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,o,i,a={};return e?(n.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=n.trim(e.substr(0,i)).toLowerCase(),o=n.trim(e.substr(i+1)),t){if(a[t]&&r.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([o]):a[t]?a[t]+", "+o:o}})),a):a}},980:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},841:(e,t,o)=>{"use strict";var n=o(198),r={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){r[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}}));var i={},a=n.version.split(".");function s(e,t){for(var o=t?t.split("."):a,n=e.split("."),r=0;r<3;r++){if(o[r]>n[r])return!0;if(o[r]<n[r])return!1}return!1}r.transitional=function(e,t,o){var r=t&&s(t);function a(e,t){return"[Axios v"+n.version+"] Transitional option '"+e+"'"+t+(o?". "+o:"")}return function(o,n,s){if(!1===e)throw new Error(a(n," has been removed in "+t));return r&&!i[n]&&(i[n]=!0,console.warn(a(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(o,n,s)}},e.exports={isOlderVersion:s,assertOptions:function(e,t,o){if("object"!=typeof e)throw new TypeError("options must be an object");for(var n=Object.keys(e),r=n.length;r-- >0;){var i=n[r],a=t[i];if(a){var s=e[i],l=void 0===s||a(s,i,e);if(!0!==l)throw new TypeError("option "+i+" must be "+l)}else if(!0!==o)throw Error("Unknown option "+i)}},validators:r}},516:(e,t,o)=>{"use strict";var n=o(12),r=Object.prototype.toString;function i(e){return"[object Array]"===r.call(e)}function a(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function l(e){if("[object Object]"!==r.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===r.call(e)}function p(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var o=0,n=e.length;o<n;o++)t.call(null,e[o],o,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isPlainObject:l,isUndefined:a,isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:c,isStream:function(e){return s(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:p,merge:function e(){var t={};function o(o,n){l(t[n])&&l(o)?t[n]=e(t[n],o):l(o)?t[n]=e({},o):i(o)?t[n]=o.slice():t[n]=o}for(var n=0,r=arguments.length;n<r;n++)p(arguments[n],o);return t},extend:function(e,t,o){return p(t,(function(t,r){e[r]=o&&"function"==typeof t?n(t,o):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},75:e=>{var t;self,t=()=>{return e={7629:(e,t,o)=>{"use strict";const n=o(375),r=o(8571),i=o(9474),a=o(1687),s=o(8652),l=o(8160),c=o(3292),p=o(6354),u=o(8901),d=o(9708),_=o(6914),m=o(2294),h=o(6133),f=o(1152),y=o(8863),b=o(2036),g={Base:class{constructor(e){this.type=e,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new m.Ids,this._preferences=null,this._refs=new h.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return n("function"==typeof d.describe,"Manifest functionality disabled"),d.describe(this)}allow(...e){return l.verifyFlat(e,"allow"),this._values(e,"_valids")}alter(e){n(e&&"object"==typeof e&&!Array.isArray(e),"Invalid targets argument"),n(!this._inRuleset(),"Cannot set alterations inside a ruleset");const t=this.clone();t.$_terms.alterations=t.$_terms.alterations||[];for(const o in e){const r=e[o];n("function"==typeof r,"Alteration adjuster for",o,"must be a function"),t.$_terms.alterations.push({target:o,adjuster:r})}return t.$_temp.ruleset=!1,t}artifact(e){return n(void 0!==e,"Artifact cannot be undefined"),n(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",e)}cast(e){return n(!1===e||"string"==typeof e,"Invalid to value"),n(!1===e||this._definition.cast[e],"Type",this.type,"does not support casting to",e),this.$_setFlag("cast",!1===e?void 0:e)}default(e,t){return this._default("default",e,t)}description(e){return n(e&&"string"==typeof e,"Description must be a non-empty string"),this.$_setFlag("description",e)}empty(e){const t=this.clone();return void 0!==e&&(e=t.$_compile(e,{override:!1})),t.$_setFlag("empty",e,{clone:!1})}error(e){return n(e,"Missing error"),n(e instanceof Error||"function"==typeof e,"Must provide a valid Error object or a function"),this.$_setFlag("error",e)}example(e,t={}){return n(void 0!==e,"Missing example"),l.assertOptions(t,["override"]),this._inner("examples",e,{single:!0,override:t.override})}external(e,t){return"object"==typeof e&&(n(!t,"Cannot combine options with description"),t=e.description,e=e.method),n("function"==typeof e,"Method must be a function"),n(void 0===t||t&&"string"==typeof t,"Description must be a non-empty string"),this._inner("externals",{method:e,description:t},{single:!0})}failover(e,t){return this._default("failover",e,t)}forbidden(){return this.presence("forbidden")}id(e){return e?(n("string"==typeof e,"id must be a non-empty string"),n(/^[^\.]+$/.test(e),"id cannot contain period character"),this.$_setFlag("id",e)):this.$_setFlag("id",void 0)}invalid(...e){return this._values(e,"_invalids")}label(e){return n(e&&"string"==typeof e,"Label name must be a non-empty string"),this.$_setFlag("label",e)}meta(e){return n(void 0!==e,"Meta cannot be undefined"),this._inner("metas",e,{single:!0})}note(...e){n(e.length,"Missing notes");for(const t of e)n(t&&"string"==typeof t,"Notes must be non-empty strings");return this._inner("notes",e)}only(e=!0){return n("boolean"==typeof e,"Invalid mode:",e),this.$_setFlag("only",e)}optional(){return this.presence("optional")}prefs(e){n(e,"Missing preferences"),n(void 0===e.context,"Cannot override context"),n(void 0===e.externals,"Cannot override externals"),n(void 0===e.warnings,"Cannot override warnings"),n(void 0===e.debug,"Cannot override debug"),l.checkPreferences(e);const t=this.clone();return t._preferences=l.preferences(t._preferences,e),t}presence(e){return n(["optional","required","forbidden"].includes(e),"Unknown presence mode",e),this.$_setFlag("presence",e)}raw(e=!0){return this.$_setFlag("result",e?"raw":void 0)}result(e){return n(["raw","strip"].includes(e),"Unknown result mode",e),this.$_setFlag("result",e)}required(){return this.presence("required")}strict(e){const t=this.clone(),o=void 0!==e&&!e;return t._preferences=l.preferences(t._preferences,{convert:o}),t}strip(e=!0){return this.$_setFlag("result",e?"strip":void 0)}tag(...e){n(e.length,"Missing tags");for(const t of e)n(t&&"string"==typeof t,"Tags must be non-empty strings");return this._inner("tags",e)}unit(e){return n(e&&"string"==typeof e,"Unit name must be a non-empty string"),this.$_setFlag("unit",e)}valid(...e){l.verifyFlat(e,"valid");const t=this.allow(...e);return t.$_setFlag("only",!!t._valids,{clone:!1}),t}when(e,t){const o=this.clone();o.$_terms.whens||(o.$_terms.whens=[]);const r=c.when(o,e,t);if(!["any","link"].includes(o.type)){const e=r.is?[r]:r.switch;for(const t of e)n(!t.then||"any"===t.then.type||t.then.type===o.type,"Cannot combine",o.type,"with",t.then&&t.then.type),n(!t.otherwise||"any"===t.otherwise.type||t.otherwise.type===o.type,"Cannot combine",o.type,"with",t.otherwise&&t.otherwise.type)}return o.$_terms.whens.push(r),o.$_mutateRebuild()}cache(e){n(!this._inRuleset(),"Cannot set caching inside a ruleset"),n(!this._cache,"Cannot override schema cache"),n(void 0===this._flags.artifact,"Cannot cache a rule with an artifact");const t=this.clone();return t._cache=e||s.provider.provision(),t.$_temp.ruleset=!1,t}clone(){const e=Object.create(Object.getPrototypeOf(this));return this._assign(e)}concat(e){n(l.isSchema(e),"Invalid schema object"),n("any"===this.type||"any"===e.type||e.type===this.type,"Cannot merge type",this.type,"with another type:",e.type),n(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),n(!e._inRuleset(),"Cannot concatenate a schema with open ruleset");let t=this.clone();if("any"===this.type&&"any"!==e.type){const o=e.clone();for(const e of Object.keys(t))"type"!==e&&(o[e]=t[e]);t=o}t._ids.concat(e._ids),t._refs.register(e,h.toSibling),t._preferences=t._preferences?l.preferences(t._preferences,e._preferences):e._preferences,t._valids=b.merge(t._valids,e._valids,e._invalids),t._invalids=b.merge(t._invalids,e._invalids,e._valids);for(const o of e._singleRules.keys())t._singleRules.has(o)&&(t._rules=t._rules.filter((e=>e.keep||e.name!==o)),t._singleRules.delete(o));for(const o of e._rules)e._definition.rules[o.method].multi||t._singleRules.set(o.name,o),t._rules.push(o);if(t._flags.empty&&e._flags.empty){t._flags.empty=t._flags.empty.concat(e._flags.empty);const o=Object.assign({},e._flags);delete o.empty,a(t._flags,o)}else if(e._flags.empty){t._flags.empty=e._flags.empty;const o=Object.assign({},e._flags);delete o.empty,a(t._flags,o)}else a(t._flags,e._flags);for(const o in e.$_terms){const n=e.$_terms[o];n?t.$_terms[o]?t.$_terms[o]=t.$_terms[o].concat(n):t.$_terms[o]=n.slice():t.$_terms[o]||(t.$_terms[o]=n)}return this.$_root._tracer&&this.$_root._tracer._combine(t,[this,e]),t.$_mutateRebuild()}extend(e){return n(!e.base,"Cannot extend type with another base"),u.type(this,e)}extract(e){return e=Array.isArray(e)?e:e.split("."),this._ids.reach(e)}fork(e,t){n(!this._inRuleset(),"Cannot fork inside a ruleset");let o=this;for(let n of[].concat(e))n=Array.isArray(n)?n:n.split("."),o=o._ids.fork(n,t,o);return o.$_temp.ruleset=!1,o}rule(e){const t=this._definition;l.assertOptions(e,Object.keys(t.modifiers)),n(!1!==this.$_temp.ruleset,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const o=null===this.$_temp.ruleset?this._rules.length-1:this.$_temp.ruleset;n(o>=0&&o<this._rules.length,"Cannot apply rules to empty ruleset");const i=this.clone();for(let a=o;a<i._rules.length;++a){const o=i._rules[a],s=r(o);for(const r in e)t.modifiers[r](s,e[r]),n(s.name===o.name,"Cannot change rule name");i._rules[a]=s,i._singleRules.get(s.name)===o&&i._singleRules.set(s.name,s)}return i.$_temp.ruleset=!1,i.$_mutateRebuild()}get ruleset(){n(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const e=this.clone();return e.$_temp.ruleset=e._rules.length,e}get $(){return this.ruleset}tailor(e){e=[].concat(e),n(!this._inRuleset(),"Cannot tailor inside a ruleset");let t=this;if(this.$_terms.alterations)for(const{target:o,adjuster:r}of this.$_terms.alterations)e.includes(o)&&(t=r(t),n(l.isSchema(t),"Alteration adjuster for",o,"failed to return a schema object"));return t=t.$_modify({each:t=>t.tailor(e),ref:!1}),t.$_temp.ruleset=!1,t.$_mutateRebuild()}tracer(){return f.location?f.location(this):this}validate(e,t){return y.entry(e,this,t)}validateAsync(e,t){return y.entryAsync(e,this,t)}$_addRule(e){"string"==typeof e&&(e={name:e}),n(e&&"object"==typeof e,"Invalid options"),n(e.name&&"string"==typeof e.name,"Invalid rule name");for(const t in e)n("_"!==t[0],"Cannot set private rule properties");const t=Object.assign({},e);t._resolve=[],t.method=t.method||t.name;const o=this._definition.rules[t.method],r=t.args;n(o,"Unknown rule",t.method);const i=this.clone();if(r){n(1===Object.keys(r).length||Object.keys(r).length===this._definition.rules[t.name].args.length,"Invalid rule definition for",this.type,t.name);for(const e in r){let a=r[e];if(o.argsByName){const s=o.argsByName.get(e);if(s.ref&&l.isResolvable(a))t._resolve.push(e),i.$_mutateRegister(a);else if(s.normalize&&(a=s.normalize(a),r[e]=a),s.assert){const t=l.validateArg(a,e,s);n(!t,t,"or reference")}}void 0!==a?r[e]=a:delete r[e]}}return o.multi||(i._ruleRemove(t.name,{clone:!1}),i._singleRules.set(t.name,t)),!1===i.$_temp.ruleset&&(i.$_temp.ruleset=null),o.priority?i._rules.unshift(t):i._rules.push(t),i}$_compile(e,t){return c.schema(this.$_root,e,t)}$_createError(e,t,o,n,r,i={}){const a=!1!==i.flags?this._flags:{},s=i.messages?_.merge(this._definition.messages,i.messages):this._definition.messages;return new p.Report(e,t,o,a,s,n,r)}$_getFlag(e){return this._flags[e]}$_getRule(e){return this._singleRules.get(e)}$_mapLabels(e){return e=Array.isArray(e)?e:e.split("."),this._ids.labels(e)}$_match(e,t,o,n){(o=Object.assign({},o)).abortEarly=!0,o._externals=!1,t.snapshot();const r=!y.validate(e,this,t,o,n).errors;return t.restore(),r}$_modify(e){return l.assertOptions(e,["each","once","ref","schema"]),m.schema(this,e)||this}$_mutateRebuild(){return n(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(e,{source:t,name:o,path:n,key:r})=>{const i=this._definition[t][o]&&this._definition[t][o].register;!1!==i&&this.$_mutateRegister(e,{family:i,key:r})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(e,{family:t,key:o}={}){this._refs.register(e,t),this._ids.register(e,{key:o})}$_property(e){return this._definition.properties[e]}$_reach(e){return this._ids.reach(e)}$_rootReferences(){return this._refs.roots()}$_setFlag(e,t,o={}){n("_"===e[0]||!this._inRuleset(),"Cannot set flag inside a ruleset");const r=this._definition.flags[e]||{};if(i(t,r.default)&&(t=void 0),i(t,this._flags[e]))return this;const a=!1!==o.clone?this.clone():this;return void 0!==t?(a._flags[e]=t,a.$_mutateRegister(t)):delete a._flags[e],"_"!==e[0]&&(a.$_temp.ruleset=!1),a}$_parent(e,...t){return this[e][l.symbols.parent].call(this,...t)}$_validate(e,t,o){return y.validate(e,this,t,o)}_assign(e){e.type=this.type,e.$_root=this.$_root,e.$_temp=Object.assign({},this.$_temp),e.$_temp.whens={},e._ids=this._ids.clone(),e._preferences=this._preferences,e._valids=this._valids&&this._valids.clone(),e._invalids=this._invalids&&this._invalids.clone(),e._rules=this._rules.slice(),e._singleRules=r(this._singleRules,{shallow:!0}),e._refs=this._refs.clone(),e._flags=Object.assign({},this._flags),e._cache=null,e.$_terms={};for(const t in this.$_terms)e.$_terms[t]=this.$_terms[t]?this.$_terms[t].slice():null;e.$_super={};for(const t in this.$_super)e.$_super[t]=this._super[t].bind(e);return e}_bare(){const e=this.clone();e._reset();const t=e._definition.terms;for(const o in t){const n=t[o];e.$_terms[o]=n.init}return e.$_mutateRebuild()}_default(e,t,o={}){return l.assertOptions(o,"literal"),n(void 0!==t,"Missing",e,"value"),n("function"==typeof t||!o.literal,"Only function value supports literal option"),"function"==typeof t&&o.literal&&(t={[l.symbols.literal]:!0,literal:t}),this.$_setFlag(e,t)}_generate(e,t,o){if(!this.$_terms.whens)return{schema:this};const n=[],r=[];for(let i=0;i<this.$_terms.whens.length;++i){const a=this.$_terms.whens[i];if(a.concat){n.push(a.concat),r.push(`${i}.concat`);continue}const s=a.ref?a.ref.resolve(e,t,o):e,l=a.is?[a]:a.switch,c=r.length;for(let c=0;c<l.length;++c){const{is:p,then:u,otherwise:d}=l[c],_=`${i}${a.switch?"."+c:""}`;if(p.$_match(s,t.nest(p,`${_}.is`),o)){if(u){const i=t.localize([...t.path,`${_}.then`],t.ancestors,t.schemas),{schema:a,id:s}=u._generate(e,i,o);n.push(a),r.push(`${_}.then${s?`(${s})`:""}`);break}}else if(d){const i=t.localize([...t.path,`${_}.otherwise`],t.ancestors,t.schemas),{schema:a,id:s}=d._generate(e,i,o);n.push(a),r.push(`${_}.otherwise${s?`(${s})`:""}`);break}}if(a.break&&r.length>c)break}const i=r.join(", ");if(t.mainstay.tracer.debug(t,"rule","when",i),!i)return{schema:this};if(!t.mainstay.tracer.active&&this.$_temp.whens[i])return{schema:this.$_temp.whens[i],id:i};let a=this;this._definition.generate&&(a=this._definition.generate(this,e,t,o));for(const e of n)a=a.concat(e);return this.$_root._tracer&&this.$_root._tracer._combine(a,[this,...n]),this.$_temp.whens[i]=a,{schema:a,id:i}}_inner(e,t,o={}){n(!this._inRuleset(),`Cannot set ${e} inside a ruleset`);const r=this.clone();return r.$_terms[e]&&!o.override||(r.$_terms[e]=[]),o.single?r.$_terms[e].push(t):r.$_terms[e].push(...t),r.$_temp.ruleset=!1,r}_inRuleset(){return null!==this.$_temp.ruleset&&!1!==this.$_temp.ruleset}_ruleRemove(e,t={}){if(!this._singleRules.has(e))return this;const o=!1!==t.clone?this.clone():this;o._singleRules.delete(e);const n=[];for(let t=0;t<o._rules.length;++t){const r=o._rules[t];r.name!==e||r.keep?n.push(r):o._inRuleset()&&t<o.$_temp.ruleset&&--o.$_temp.ruleset}return o._rules=n,o}_values(e,t){l.verifyFlat(e,t.slice(1,-1));const o=this.clone(),r=e[0]===l.symbols.override;if(r&&(e=e.slice(1)),!o[t]&&e.length?o[t]=new b:r&&(o[t]=e.length?new b:null,o.$_mutateRebuild()),!o[t])return o;r&&o[t].override();for(const r of e){n(void 0!==r,"Cannot call allow/valid/invalid with undefined"),n(r!==l.symbols.override,"Override must be the first value");const e="_invalids"===t?"_valids":"_invalids";o[e]&&(o[e].remove(r),o[e].length||(n("_valids"===t||!o._flags.only,"Setting invalid value",r,"leaves schema rejecting all values due to previous valid rule"),o[e]=null)),o[t].add(r,o._refs)}return o}}};g.Base.prototype[l.symbols.any]={version:l.version,compile:c.compile,root:"$_root"},g.Base.prototype.isImmutable=!0,g.Base.prototype.deny=g.Base.prototype.invalid,g.Base.prototype.disallow=g.Base.prototype.invalid,g.Base.prototype.equal=g.Base.prototype.valid,g.Base.prototype.exist=g.Base.prototype.required,g.Base.prototype.not=g.Base.prototype.invalid,g.Base.prototype.options=g.Base.prototype.prefs,g.Base.prototype.preferences=g.Base.prototype.prefs,e.exports=new g.Base},8652:(e,t,o)=>{"use strict";const n=o(375),r=o(8571),i=o(8160),a={max:1e3,supported:new Set(["undefined","boolean","number","string"])};t.provider={provision:e=>new a.Cache(e)},a.Cache=class{constructor(e={}){i.assertOptions(e,["max"]),n(void 0===e.max||e.max&&e.max>0&&isFinite(e.max),"Invalid max cache size"),this._max=e.max||a.max,this._map=new Map,this._list=new a.List}get length(){return this._map.size}set(e,t){if(null!==e&&!a.supported.has(typeof e))return;let o=this._map.get(e);if(o)return o.value=t,void this._list.first(o);o=this._list.unshift({key:e,value:t}),this._map.set(e,o),this._compact()}get(e){const t=this._map.get(e);if(t)return this._list.first(t),r(t.value)}_compact(){if(this._map.size>this._max){const e=this._list.pop();this._map.delete(e.key)}}},a.List=class{constructor(){this.tail=null,this.head=null}unshift(e){return e.next=null,e.prev=this.head,this.head&&(this.head.next=e),this.head=e,this.tail||(this.tail=e),e}first(e){e!==this.head&&(this._remove(e),this.unshift(e))}pop(){return this._remove(this.tail)}_remove(e){const{next:t,prev:o}=e;return t.prev=o,o&&(o.next=t),e===this.tail&&(this.tail=t),e.prev=null,e.next=null,e}}},8160:(e,t,o)=>{"use strict";const n=o(375),r=o(7916),i=o(5934);let a,s;const l={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};t.version=i.version,t.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},t.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},t.assertOptions=function(e,t,o="Options"){n(e&&"object"==typeof e&&!Array.isArray(e),"Options must be of type object");const r=Object.keys(e).filter((e=>!t.includes(e)));n(0===r.length,`${o} contain unknown keys: ${r}`)},t.checkPreferences=function(e){s=s||o(3378);const t=s.preferences.validate(e);if(t.error)throw new r([t.error.details[0].message])},t.compare=function(e,t,o){switch(o){case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}},t.default=function(e,t){return void 0===e?t:e},t.isIsoDate=function(e){return l.isoDate.test(e)},t.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},t.isResolvable=function(e){return!!e&&(e[t.symbols.ref]||e[t.symbols.template])},t.isSchema=function(e,o={}){const r=e&&e[t.symbols.any];return!!r&&(n(o.legacy||r.version===t.version,"Cannot mix different versions of joi schemas"),!0)},t.isValues=function(e){return e[t.symbols.values]},t.limit=function(e){return Number.isSafeInteger(e)&&e>=0},t.preferences=function(e,n){a=a||o(6914),e=e||{},n=n||{};const r=Object.assign({},e,n);return n.errors&&e.errors&&(r.errors=Object.assign({},e.errors,n.errors),r.errors.wrap=Object.assign({},e.errors.wrap,n.errors.wrap)),n.messages&&(r.messages=a.compile(n.messages,e.messages)),delete r[t.symbols.prefs],r},t.tryWithPath=function(e,t,o={}){try{return e()}catch(e){throw void 0!==e.path?e.path=t+"."+e.path:e.path=t,o.append&&(e.message=`${e.message} (${e.path})`),e}},t.validateArg=function(e,o,{assert:n,message:r}){if(t.isSchema(n)){const t=n.validate(e);if(!t.error)return;return t.error.message}if(!n(e))return o?`${o} ${r}`:r},t.verifyFlat=function(e,t){for(const o of e)n(!Array.isArray(o),"Method no longer accepts array arguments:",t)}},3292:(e,t,o)=>{"use strict";const n=o(375),r=o(8160),i=o(6133),a={};t.schema=function(e,t,o={}){r.assertOptions(o,["appendPath","override"]);try{return a.schema(e,t,o)}catch(e){throw o.appendPath&&void 0!==e.path&&(e.message=`${e.message} (${e.path})`),e}},a.schema=function(e,t,o){n(void 0!==t,"Invalid undefined schema"),Array.isArray(t)&&(n(t.length,"Invalid empty array schema"),1===t.length&&(t=t[0]));const i=(t,...n)=>!1!==o.override?t.valid(e.override,...n):t.valid(...n);if(a.simple(t))return i(e,t);if("function"==typeof t)return e.custom(t);if(n("object"==typeof t,"Invalid schema content:",typeof t),r.isResolvable(t))return i(e,t);if(r.isSchema(t))return t;if(Array.isArray(t)){for(const o of t)if(!a.simple(o))return e.alternatives().try(...t);return i(e,...t)}return t instanceof RegExp?e.string().regex(t):t instanceof Date?i(e.date(),t):(n(Object.getPrototypeOf(t)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),e.object().keys(t))},t.ref=function(e,t){return i.isRef(e)?e:i.create(e,t)},t.compile=function(e,o,i={}){r.assertOptions(i,["legacy"]);const s=o&&o[r.symbols.any];if(s)return n(i.legacy||s.version===r.version,"Cannot mix different versions of joi schemas:",s.version,r.version),o;if("object"!=typeof o||!i.legacy)return t.schema(e,o,{appendPath:!0});const l=a.walk(o);return l?l.compile(l.root,o):t.schema(e,o,{appendPath:!0})},a.walk=function(e){if("object"!=typeof e)return null;if(Array.isArray(e)){for(const t of e){const e=a.walk(t);if(e)return e}return null}const t=e[r.symbols.any];if(t)return{root:e[t.root],compile:t.compile};n(Object.getPrototypeOf(e)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const t in e){const o=a.walk(e[t]);if(o)return o}return null},a.simple=function(e){return null===e||["boolean","string","number"].includes(typeof e)},t.when=function(e,o,s){if(void 0===s&&(n(o&&"object"==typeof o,"Missing options"),s=o,o=i.create(".")),Array.isArray(s)&&(s={switch:s}),r.assertOptions(s,["is","not","then","otherwise","switch","break"]),r.isSchema(o))return n(void 0===s.is,'"is" can not be used with a schema condition'),n(void 0===s.not,'"not" can not be used with a schema condition'),n(void 0===s.switch,'"switch" can not be used with a schema condition'),a.condition(e,{is:o,then:s.then,otherwise:s.otherwise,break:s.break});if(n(i.isRef(o)||"string"==typeof o,"Invalid condition:",o),n(void 0===s.not||void 0===s.is,'Cannot combine "is" with "not"'),void 0===s.switch){let l=s;void 0!==s.not&&(l={is:s.not,then:s.otherwise,otherwise:s.then,break:s.break});let c=void 0!==l.is?e.$_compile(l.is):e.$_root.invalid(null,!1,0,"").required();return n(void 0!==l.then||void 0!==l.otherwise,'options must have at least one of "then", "otherwise", or "switch"'),n(void 0===l.break||void 0===l.then||void 0===l.otherwise,"Cannot specify then, otherwise, and break all together"),void 0===s.is||i.isRef(s.is)||r.isSchema(s.is)||(c=c.required()),a.condition(e,{ref:t.ref(o),is:c,then:l.then,otherwise:l.otherwise,break:l.break})}n(Array.isArray(s.switch),'"switch" must be an array'),n(void 0===s.is,'Cannot combine "switch" with "is"'),n(void 0===s.not,'Cannot combine "switch" with "not"'),n(void 0===s.then,'Cannot combine "switch" with "then"');const l={ref:t.ref(o),switch:[],break:s.break};for(let t=0;t<s.switch.length;++t){const o=s.switch[t],a=t===s.switch.length-1;r.assertOptions(o,a?["is","then","otherwise"]:["is","then"]),n(void 0!==o.is,'Switch statement missing "is"'),n(void 0!==o.then,'Switch statement missing "then"');const c={is:e.$_compile(o.is),then:e.$_compile(o.then)};if(i.isRef(o.is)||r.isSchema(o.is)||(c.is=c.is.required()),a){n(void 0===s.otherwise||void 0===o.otherwise,'Cannot specify "otherwise" inside and outside a "switch"');const t=void 0!==s.otherwise?s.otherwise:o.otherwise;void 0!==t&&(n(void 0===l.break,"Cannot specify both otherwise and break"),c.otherwise=e.$_compile(t))}l.switch.push(c)}return l},a.condition=function(e,t){for(const o of["then","otherwise"])void 0===t[o]?delete t[o]:t[o]=e.$_compile(t[o]);return t}},6354:(e,t,o)=>{"use strict";const n=o(5688),r=o(8160),i=o(3328);t.Report=class{constructor(e,o,n,r,i,a,s){if(this.code=e,this.flags=r,this.messages=i,this.path=a.path,this.prefs=s,this.state=a,this.value=o,this.message=null,this.template=null,this.local=n||{},this.local.label=t.label(this.flags,this.state,this.prefs,this.messages),void 0===this.value||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const e=this.path[this.path.length-1];"object"!=typeof e&&(this.local.key=e)}}_setTemplate(e){if(this.template=e,!this.flags.label&&0===this.path.length){const e=this._template(this.template,"root");e&&(this.local.label=e)}}toString(){if(this.message)return this.message;const e=this.code;if(!this.prefs.errors.render)return this.code;const t=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return void 0===t?`Error code "${e}" is not defined, your custom type is missing the correct messages definition`:(this.message=t.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(e,o){return t.template(this.value,e,o||this.code,this.state,this.prefs)}},t.path=function(e){let t="";for(const o of e)"object"!=typeof o&&("string"==typeof o?(t&&(t+="."),t+=o):t+=`[${o}]`);return t},t.template=function(e,t,o,n,a){if(!t)return;if(i.isTemplate(t))return"root"!==o?t:null;let s=a.errors.language;if(r.isResolvable(s)&&(s=s.resolve(e,n,a)),s&&t[s]){if(void 0!==t[s][o])return t[s][o];if(void 0!==t[s]["*"])return t[s]["*"]}return t[o]?t[o]:t["*"]},t.label=function(e,o,n,r){if(!n.errors.label)return"";if(e.label)return e.label;let i=o.path;return"key"===n.errors.label&&o.path.length>1&&(i=o.path.slice(-1)),t.path(i)||t.template(null,n.messages,"root",o,n)||r&&t.template(null,r,"root",o,n)||"value"},t.process=function(e,o,n){if(!e)return null;const{override:r,message:i,details:a}=t.details(e);if(r)return r;if(n.errors.stack)return new t.ValidationError(i,a,o);const s=Error.stackTraceLimit;Error.stackTraceLimit=0;const l=new t.ValidationError(i,a,o);return Error.stackTraceLimit=s,l},t.details=function(e,t={}){let o=[];const n=[];for(const r of e){if(r instanceof Error){if(!1!==t.override)return{override:r};const e=r.toString();o.push(e),n.push({message:e,type:"override",context:{error:r}});continue}const e=r.toString();o.push(e),n.push({message:e,path:r.path.filter((e=>"object"!=typeof e)),type:r.code,context:r.local})}return o.length>1&&(o=[...new Set(o)]),{message:o.join(". "),details:n}},t.ValidationError=class extends Error{constructor(e,t,o){super(e),this._original=o,this.details=t}static isError(e){return e instanceof t.ValidationError}},t.ValidationError.prototype.isJoi=!0,t.ValidationError.prototype.name="ValidationError",t.ValidationError.prototype.annotate=n.error},8901:(e,t,o)=>{"use strict";const n=o(375),r=o(8571),i=o(8160),a=o(6914),s={};t.type=function(e,t){const o=Object.getPrototypeOf(e),l=r(o),c=e._assign(Object.create(l)),p=Object.assign({},t);delete p.base,l._definition=p;const u=o._definition||{};p.messages=a.merge(u.messages,p.messages),p.properties=Object.assign({},u.properties,p.properties),c.type=p.type,p.flags=Object.assign({},u.flags,p.flags);const d=Object.assign({},u.terms);if(p.terms)for(const e in p.terms){const t=p.terms[e];n(void 0===c.$_terms[e],"Invalid term override for",p.type,e),c.$_terms[e]=t.init,d[e]=t}p.terms=d,p.args||(p.args=u.args),p.prepare=s.prepare(p.prepare,u.prepare),p.coerce&&("function"==typeof p.coerce&&(p.coerce={method:p.coerce}),p.coerce.from&&!Array.isArray(p.coerce.from)&&(p.coerce={method:p.coerce.method,from:[].concat(p.coerce.from)})),p.coerce=s.coerce(p.coerce,u.coerce),p.validate=s.validate(p.validate,u.validate);const _=Object.assign({},u.rules);if(p.rules)for(const e in p.rules){const t=p.rules[e];n("object"==typeof t,"Invalid rule definition for",p.type,e);let o=t.method;if(void 0===o&&(o=function(){return this.$_addRule(e)}),o&&(n(!l[e],"Rule conflict in",p.type,e),l[e]=o),n(!_[e],"Rule conflict in",p.type,e),_[e]=t,t.alias){const e=[].concat(t.alias);for(const o of e)l[o]=t.method}t.args&&(t.argsByName=new Map,t.args=t.args.map((e=>("string"==typeof e&&(e={name:e}),n(!t.argsByName.has(e.name),"Duplicated argument name",e.name),i.isSchema(e.assert)&&(e.assert=e.assert.strict().label(e.name)),t.argsByName.set(e.name,e),e))))}p.rules=_;const m=Object.assign({},u.modifiers);if(p.modifiers)for(const e in p.modifiers){n(!l[e],"Rule conflict in",p.type,e);const t=p.modifiers[e];n("function"==typeof t,"Invalid modifier definition for",p.type,e);const o=function(t){return this.rule({[e]:t})};l[e]=o,m[e]=t}if(p.modifiers=m,p.overrides){l._super=o,c.$_super={};for(const e in p.overrides)n(o[e],"Cannot override missing",e),p.overrides[e][i.symbols.parent]=o[e],c.$_super[e]=o[e].bind(c);Object.assign(l,p.overrides)}p.cast=Object.assign({},u.cast,p.cast);const h=Object.assign({},u.manifest,p.manifest);return h.build=s.build(p.manifest&&p.manifest.build,u.manifest&&u.manifest.build),p.manifest=h,p.rebuild=s.rebuild(p.rebuild,u.rebuild),c},s.build=function(e,t){return e&&t?function(o,n){return t(e(o,n),n)}:e||t},s.coerce=function(e,t){return e&&t?{from:e.from&&t.from?[...new Set([...e.from,...t.from])]:null,method(o,n){let r;if((!t.from||t.from.includes(typeof o))&&(r=t.method(o,n),r)){if(r.errors||void 0===r.value)return r;o=r.value}if(!e.from||e.from.includes(typeof o)){const t=e.method(o,n);if(t)return t}return r}}:e||t},s.prepare=function(e,t){return e&&t?function(o,n){const r=e(o,n);if(r){if(r.errors||void 0===r.value)return r;o=r.value}return t(o,n)||r}:e||t},s.rebuild=function(e,t){return e&&t?function(o){t(o),e(o)}:e||t},s.validate=function(e,t){return e&&t?function(o,n){const r=t(o,n);if(r){if(r.errors&&(!Array.isArray(r.errors)||r.errors.length))return r;o=r.value}return e(o,n)||r}:e||t}},5107:(e,t,o)=>{"use strict";const n=o(375),r=o(8571),i=o(8652),a=o(8160),s=o(3292),l=o(6354),c=o(8901),p=o(9708),u=o(6133),d=o(3328),_=o(1152);let m;const h={types:{alternatives:o(4946),any:o(8068),array:o(546),boolean:o(4937),date:o(7500),function:o(390),link:o(8785),number:o(3832),object:o(8966),string:o(7417),symbol:o(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const e={_types:new Set(Object.keys(h.types))};for(const t of e._types)e[t]=function(...e){return n(!e.length||["alternatives","link","object"].includes(t),"The",t,"type does not allow arguments"),h.generate(this,h.types[t],e)};for(const t of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])e[t]=function(...e){return this.any()[t](...e)};Object.assign(e,h.methods);for(const t in h.aliases){const o=h.aliases[t];e[t]=e[o]}return e.x=e.expression,_.setup&&_.setup(e),e}};h.methods={ValidationError:l.ValidationError,version:a.version,cache:i.provider,assert(e,t,...o){h.assert(e,t,!0,o)},attempt:(e,t,...o)=>h.assert(e,t,!1,o),build(e){return n("function"==typeof p.build,"Manifest functionality disabled"),p.build(this,e)},checkPreferences(e){a.checkPreferences(e)},compile(e,t){return s.compile(this,e,t)},defaults(e){n("function"==typeof e,"modifier must be a function");const t=Object.assign({},this);for(const o of t._types){const r=e(t[o]());n(a.isSchema(r),"modifier must return a valid schema object"),t[o]=function(...e){return h.generate(this,r,e)}}return t},expression:(...e)=>new d(...e),extend(...e){a.verifyFlat(e,"extend"),m=m||o(3378),n(e.length,"You need to provide at least one extension"),this.assert(e,m.extensions);const t=Object.assign({},this);t._types=new Set(t._types);for(let o of e){"function"==typeof o&&(o=o(t)),this.assert(o,m.extension);const e=h.expandExtension(o,t);for(const o of e){n(void 0===t[o.type]||t._types.has(o.type),"Cannot override name",o.type);const e=o.base||this.any(),r=c.type(e,o);t._types.add(o.type),t[o.type]=function(...e){return h.generate(this,r,e)}}}return t},isError:l.ValidationError.isError,isExpression:d.isTemplate,isRef:u.isRef,isSchema:a.isSchema,in:(...e)=>u.in(...e),override:a.symbols.override,ref:(...e)=>u.create(...e),types(){const e={};for(const t of this._types)e[t]=this[t]();for(const t in h.aliases)e[t]=this[t]();return e}},h.assert=function(e,t,o,n){const i=n[0]instanceof Error||"string"==typeof n[0]?n[0]:null,s=null!==i?n[1]:n[0],c=t.validate(e,a.preferences({errors:{stack:!0}},s||{}));let p=c.error;if(!p)return c.value;if(i instanceof Error)throw i;const u=o&&"function"==typeof p.annotate?p.annotate():p.message;throw p instanceof l.ValidationError==0&&(p=r(p)),p.message=i?`${i} ${u}`:u,p},h.generate=function(e,t,o){return n(e,"Must be invoked on a Joi instance."),t.$_root=e,t._definition.args&&o.length?t._definition.args(t,...o):t},h.expandExtension=function(e,t){if("string"==typeof e.type)return[e];const o=[];for(const n of t._types)if(e.type.test(n)){const r=Object.assign({},e);r.type=n,r.base=t[n](),o.push(r)}return o},e.exports=h.root()},6914:(e,t,o)=>{"use strict";const n=o(375),r=o(8571),i=o(3328);t.compile=function(e,t){if("string"==typeof e)return n(!t,"Cannot set single message string"),new i(e);if(i.isTemplate(e))return n(!t,"Cannot set single message template"),e;n("object"==typeof e&&!Array.isArray(e),"Invalid message options"),t=t?r(t):{};for(let o in e){const r=e[o];if("root"===o||i.isTemplate(r)){t[o]=r;continue}if("string"==typeof r){t[o]=new i(r);continue}n("object"==typeof r&&!Array.isArray(r),"Invalid message for",o);const a=o;for(o in t[a]=t[a]||{},r){const e=r[o];"root"===o||i.isTemplate(e)?t[a][o]=e:(n("string"==typeof e,"Invalid message for",o,"in",a),t[a][o]=new i(e))}}return t},t.decompile=function(e){const t={};for(let o in e){const n=e[o];if("root"===o){t.root=n;continue}if(i.isTemplate(n)){t[o]=n.describe({compact:!0});continue}const r=o;for(o in t[r]={},n){const e=n[o];"root"!==o?t[r][o]=e.describe({compact:!0}):t[r].root=e}}return t},t.merge=function(e,o){if(!e)return t.compile(o);if(!o)return e;if("string"==typeof o)return new i(o);if(i.isTemplate(o))return o;const a=r(e);for(let e in o){const t=o[e];if("root"===e||i.isTemplate(t)){a[e]=t;continue}if("string"==typeof t){a[e]=new i(t);continue}n("object"==typeof t&&!Array.isArray(t),"Invalid message for",e);const r=e;for(e in a[r]=a[r]||{},t){const o=t[e];"root"===e||i.isTemplate(o)?a[r][e]=o:(n("string"==typeof o,"Invalid message for",e,"in",r),a[r][e]=new i(o))}}return a}},2294:(e,t,o)=>{"use strict";const n=o(375),r=o(8160),i=o(6133),a={};t.Ids=a.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const e=new a.Ids;return e._byId=new Map(this._byId),e._byKey=new Map(this._byKey),e._schemaChain=this._schemaChain,e}concat(e){e._schemaChain&&(this._schemaChain=!0);for(const[t,o]of e._byId.entries())n(!this._byKey.has(t),"Schema id conflicts with existing key:",t),this._byId.set(t,o);for(const[t,o]of e._byKey.entries())n(!this._byId.has(t),"Schema key conflicts with existing id:",t),this._byKey.set(t,o)}fork(e,t,o){const i=this._collect(e);i.push({schema:o});const s=i.shift();let l={id:s.id,schema:t(s.schema)};n(r.isSchema(l.schema),"adjuster function failed to return a joi schema type");for(const e of i)l={id:e.id,schema:a.fork(e.schema,l.id,l.schema)};return l.schema}labels(e,t=[]){const o=e[0],n=this._get(o);if(!n)return[...t,...e].join(".");const r=e.slice(1);return t=[...t,n.schema._flags.label||o],r.length?n.schema._ids.labels(r,t):t.join(".")}reach(e,t=[]){const o=e[0],r=this._get(o);n(r,"Schema does not contain path",[...t,...e].join("."));const i=e.slice(1);return i.length?r.schema._ids.reach(i,[...t,o]):r.schema}register(e,{key:t}={}){if(!e||!r.isSchema(e))return;(e.$_property("schemaChain")||e._ids._schemaChain)&&(this._schemaChain=!0);const o=e._flags.id;if(o){const t=this._byId.get(o);n(!t||t.schema===e,"Cannot add different schemas with the same id:",o),n(!this._byKey.has(o),"Schema id conflicts with existing key:",o),this._byId.set(o,{schema:e,id:o})}t&&(n(!this._byKey.has(t),"Schema already contains key:",t),n(!this._byId.has(t),"Schema key conflicts with existing id:",t),this._byKey.set(t,{schema:e,id:t}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(e,t=[],o=[]){const r=e[0],i=this._get(r);n(i,"Schema does not contain path",[...t,...e].join(".")),o=[i,...o];const a=e.slice(1);return a.length?i.schema._ids._collect(a,[...t,r],o):o}_get(e){return this._byId.get(e)||this._byKey.get(e)}},a.fork=function(e,o,n){const r=t.schema(e,{each:(e,{key:t})=>{if(o===(e._flags.id||t))return n},ref:!1});return r?r.$_mutateRebuild():e},t.schema=function(e,t){let o;for(const n in e._flags){if("_"===n[0])continue;const r=a.scan(e._flags[n],{source:"flags",name:n},t);void 0!==r&&(o=o||e.clone(),o._flags[n]=r)}for(let n=0;n<e._rules.length;++n){const r=e._rules[n],i=a.scan(r.args,{source:"rules",name:r.name},t);if(void 0!==i){o=o||e.clone();const t=Object.assign({},r);t.args=i,o._rules[n]=t,o._singleRules.get(r.name)===r&&o._singleRules.set(r.name,t)}}for(const n in e.$_terms){if("_"===n[0])continue;const r=a.scan(e.$_terms[n],{source:"terms",name:n},t);void 0!==r&&(o=o||e.clone(),o.$_terms[n]=r)}return o},a.scan=function(e,t,o,n,s){const l=n||[];if(null===e||"object"!=typeof e)return;let c;if(Array.isArray(e)){for(let n=0;n<e.length;++n){const r="terms"===t.source&&"keys"===t.name&&e[n].key,i=a.scan(e[n],t,o,[n,...l],r);void 0!==i&&(c=c||e.slice(),c[n]=i)}return c}if(!1!==o.schema&&r.isSchema(e)||!1!==o.ref&&i.isRef(e)){const n=o.each(e,{...t,path:l,key:s});if(n===e)return;return n}for(const n in e){if("_"===n[0])continue;const r=a.scan(e[n],t,o,[n,...l],s);void 0!==r&&(c=c||Object.assign({},e),c[n]=r)}return c}},6133:(e,t,o)=>{"use strict";const n=o(375),r=o(8571),i=o(9621),a=o(8160);let s;const l={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};t.create=function(e,t={}){n("string"==typeof e,"Invalid reference key:",e),a.assertOptions(t,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),n(!t.prefix||"object"==typeof t.prefix,"options.prefix must be of type object");const o=Object.assign({},l.defaults,t);delete o.prefix;const r=o.separator,i=l.context(e,r,t.prefix);if(o.type=i.type,e=i.key,"value"===o.type)if(i.root&&(n(!r||e[0]!==r,"Cannot specify relative path with root prefix"),o.ancestor="root",e||(e=null)),r&&r===e)e=null,o.ancestor=0;else if(void 0!==o.ancestor)n(!r||!e||e[0]!==r,"Cannot combine prefix with ancestor option");else{const[t,n]=l.ancestor(e,r);n&&""===(e=e.slice(n))&&(e=null),o.ancestor=t}return o.path=r?null===e?[]:e.split(r):[e],new l.Ref(o)},t.in=function(e,o={}){return t.create(e,{...o,in:!0})},t.isRef=function(e){return!!e&&!!e[a.symbols.ref]},l.Ref=class{constructor(e){n("object"==typeof e,"Invalid reference construction"),a.assertOptions(e,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),n([!1,void 0].includes(e.separator)||"string"==typeof e.separator&&1===e.separator.length,"Invalid separator"),n(!e.adjust||"function"==typeof e.adjust,"options.adjust must be a function"),n(!e.map||Array.isArray(e.map),"options.map must be an array"),n(!e.map||!e.adjust,"Cannot set both map and adjust options"),Object.assign(this,l.defaults,e),n("value"===this.type||void 0===this.ancestor,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(e,t,o,r,i={}){return n(!this.in||i.in,"Invalid in() reference usage"),"global"===this.type?this._resolve(o.context,t,i):"local"===this.type?this._resolve(r,t,i):this.ancestor?"root"===this.ancestor?this._resolve(t.ancestors[t.ancestors.length-1],t,i):(n(this.ancestor<=t.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(t.ancestors[this.ancestor-1],t,i)):this._resolve(e,t,i)}_resolve(e,t,o){let n;if("value"===this.type&&t.mainstay.shadow&&!1!==o.shadow&&(n=t.mainstay.shadow.get(this.absolute(t))),void 0===n&&(n=i(e,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(n=this.adjust(n)),this.map){const e=this.map.get(n);void 0!==e&&(n=e)}return t.mainstay&&t.mainstay.tracer.resolve(t,this,n),n}toString(){return this.display}absolute(e){return[...e.path.slice(0,-this.ancestor),...this.path]}clone(){return new l.Ref(this)}describe(){const e={path:this.path};"value"!==this.type&&(e.type=this.type),"."!==this.separator&&(e.separator=this.separator),"value"===this.type&&1!==this.ancestor&&(e.ancestor=this.ancestor),this.map&&(e.map=[...this.map]);for(const t of["adjust","iterables","render"])null!==this[t]&&void 0!==this[t]&&(e[t]=this[t]);return!1!==this.in&&(e.in=!0),{ref:e}}updateDisplay(){const e=null!==this.key?this.key:"";if("value"!==this.type)return void(this.display=`ref:${this.type}:${e}`);if(!this.separator)return void(this.display=`ref:${e}`);if(!this.ancestor)return void(this.display=`ref:${this.separator}${e}`);if("root"===this.ancestor)return void(this.display=`ref:root:${e}`);if(1===this.ancestor)return void(this.display=`ref:${e||".."}`);const t=new Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${t}${e||""}`}},l.Ref.prototype[a.symbols.ref]=!0,t.build=function(e){return"value"===(e=Object.assign({},l.defaults,e)).type&&void 0===e.ancestor&&(e.ancestor=1),new l.Ref(e)},l.context=function(e,t,o={}){if(e=e.trim(),o){const n=void 0===o.global?"$":o.global;if(n!==t&&e.startsWith(n))return{key:e.slice(n.length),type:"global"};const r=void 0===o.local?"#":o.local;if(r!==t&&e.startsWith(r))return{key:e.slice(r.length),type:"local"};const i=void 0===o.root?"/":o.root;if(i!==t&&e.startsWith(i))return{key:e.slice(i.length),type:"value",root:!0}}return{key:e,type:"value"}},l.ancestor=function(e,t){if(!t)return[1,0];if(e[0]!==t)return[1,0];if(e[1]!==t)return[0,1];let o=2;for(;e[o]===t;)++o;return[o-1,o]},t.toSibling=0,t.toParent=1,t.Manager=class{constructor(){this.refs=[]}register(e,n){if(e)if(n=void 0===n?t.toParent:n,Array.isArray(e))for(const t of e)this.register(t,n);else if(a.isSchema(e))for(const t of e._refs.refs)t.ancestor-n>=0&&this.refs.push({ancestor:t.ancestor-n,root:t.root});else t.isRef(e)&&"value"===e.type&&e.ancestor-n>=0&&this.refs.push({ancestor:e.ancestor-n,root:e.root}),s=s||o(3328),s.isTemplate(e)&&this.register(e.refs(),n)}get length(){return this.refs.length}clone(){const e=new t.Manager;return e.refs=r(this.refs),e}reset(){this.refs=[]}roots(){return this.refs.filter((e=>!e.ancestor)).map((e=>e.root))}}},3378:(e,t,o)=>{"use strict";const n=o(5107),r={};r.wrap=n.string().min(1).max(2).allow(!1),t.preferences=n.object({allowUnknown:n.boolean(),abortEarly:n.boolean(),artifacts:n.boolean(),cache:n.boolean(),context:n.object(),convert:n.boolean(),dateFormat:n.valid("date","iso","string","time","utc"),debug:n.boolean(),errors:{escapeHtml:n.boolean(),label:n.valid("path","key",!1),language:[n.string(),n.object().ref()],render:n.boolean(),stack:n.boolean(),wrap:{label:r.wrap,array:r.wrap,string:r.wrap}},externals:n.boolean(),messages:n.object(),noDefaults:n.boolean(),nonEnumerables:n.boolean(),presence:n.valid("required","optional","forbidden"),skipFunctions:n.boolean(),stripUnknown:n.object({arrays:n.boolean(),objects:n.boolean()}).or("arrays","objects").allow(!0,!1),warnings:n.boolean()}).strict(),r.nameRx=/^[a-zA-Z0-9]\w*$/,r.rule=n.object({alias:n.array().items(n.string().pattern(r.nameRx)).single(),args:n.array().items(n.string(),n.object({name:n.string().pattern(r.nameRx).required(),ref:n.boolean(),assert:n.alternatives([n.function(),n.object().schema()]).conditional("ref",{is:!0,then:n.required()}),normalize:n.function(),message:n.string().when("assert",{is:n.function(),then:n.required()})})),convert:n.boolean(),manifest:n.boolean(),method:n.function().allow(!1),multi:n.boolean(),validate:n.function()}),t.extension=n.object({type:n.alternatives([n.string(),n.object().regex()]).required(),args:n.function(),cast:n.object().pattern(r.nameRx,n.object({from:n.function().maxArity(1).required(),to:n.function().minArity(1).maxArity(2).required()})),base:n.object().schema().when("type",{is:n.object().regex(),then:n.forbidden()}),coerce:[n.function().maxArity(3),n.object({method:n.function().maxArity(3).required(),from:n.array().items(n.string()).single()})],flags:n.object().pattern(r.nameRx,n.object({setter:n.string(),default:n.any()})),manifest:{build:n.function().arity(2)},messages:[n.object(),n.string()],modifiers:n.object().pattern(r.nameRx,n.function().minArity(1).maxArity(2)),overrides:n.object().pattern(r.nameRx,n.function()),prepare:n.function().maxArity(3),rebuild:n.function().arity(1),rules:n.object().pattern(r.nameRx,r.rule),terms:n.object().pattern(r.nameRx,n.object({init:n.array().allow(null).required(),manifest:n.object().pattern(/.+/,[n.valid("schema","single"),n.object({mapped:n.object({from:n.string().required(),to:n.string().required()}).required()})])})),validate:n.function().maxArity(3)}).strict(),t.extensions=n.array().items(n.object(),n.function().arity(1)).strict(),r.desc={buffer:n.object({buffer:n.string()}),func:n.object({function:n.function().required(),options:{literal:!0}}),override:n.object({override:!0}),ref:n.object({ref:n.object({type:n.valid("value","global","local"),path:n.array().required(),separator:n.string().length(1).allow(!1),ancestor:n.number().min(0).integer().allow("root"),map:n.array().items(n.array().length(2)).min(1),adjust:n.function(),iterables:n.boolean(),in:n.boolean(),render:n.boolean()}).required()}),regex:n.object({regex:n.string().min(3)}),special:n.object({special:n.valid("deep").required()}),template:n.object({template:n.string().required(),options:n.object()}),value:n.object({value:n.alternatives([n.object(),n.array()]).required()})},r.desc.entity=n.alternatives([n.array().items(n.link("...")),n.boolean(),n.function(),n.number(),n.string(),r.desc.buffer,r.desc.func,r.desc.ref,r.desc.regex,r.desc.special,r.desc.template,r.desc.value,n.link("/")]),r.desc.values=n.array().items(null,n.boolean(),n.function(),n.number().allow(1/0,-1/0),n.string().allow(""),n.symbol(),r.desc.buffer,r.desc.func,r.desc.override,r.desc.ref,r.desc.regex,r.desc.template,r.desc.value),r.desc.messages=n.object().pattern(/.+/,[n.string(),r.desc.template,n.object().pattern(/.+/,[n.string(),r.desc.template])]),t.description=n.object({type:n.string().required(),flags:n.object({cast:n.string(),default:n.any(),description:n.string(),empty:n.link("/"),failover:r.desc.entity,id:n.string(),label:n.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:n.boolean(),unit:n.string()}).unknown(),preferences:{allowUnknown:n.boolean(),abortEarly:n.boolean(),artifacts:n.boolean(),cache:n.boolean(),convert:n.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:n.boolean(),label:["path","key"],language:[n.string(),r.desc.ref],wrap:{label:r.wrap,array:r.wrap}},externals:n.boolean(),messages:r.desc.messages,noDefaults:n.boolean(),nonEnumerables:n.boolean(),presence:["required","optional","forbidden"],skipFunctions:n.boolean(),stripUnknown:n.object({arrays:n.boolean(),objects:n.boolean()}).or("arrays","objects").allow(!0,!1),warnings:n.boolean()},allow:r.desc.values,invalid:r.desc.values,rules:n.array().min(1).items({name:n.string().required(),args:n.object().min(1),keep:n.boolean(),message:[n.string(),r.desc.messages],warn:n.boolean()}),keys:n.object().pattern(/.*/,n.link("/")),link:r.desc.ref}).pattern(/^[a-z]\w*$/,n.any())},493:(e,t,o)=>{"use strict";const n=o(8571),r=o(9621),i=o(8160),a={value:Symbol("value")};e.exports=a.State=class{constructor(e,t,o){this.path=e,this.ancestors=t,this.mainstay=o.mainstay,this.schemas=o.schemas,this.debug=null}localize(e,t=null,o=null){const n=new a.State(e,t,this);return o&&n.schemas&&(n.schemas=[a.schemas(o),...n.schemas]),n}nest(e,t){const o=new a.State(this.path,this.ancestors,this);return o.schemas=o.schemas&&[a.schemas(e),...o.schemas],o.debug=t,o}shadow(e,t){this.mainstay.shadow=this.mainstay.shadow||new a.Shadow,this.mainstay.shadow.set(this.path,e,t)}snapshot(){this.mainstay.shadow&&(this._snapshot=n(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.commit()}},a.schemas=function(e){return i.isSchema(e)?{schema:e}:e},a.Shadow=class{constructor(){this._values=null}set(e,t,o){if(!e.length)return;if("strip"===o&&"number"==typeof e[e.length-1])return;this._values=this._values||new Map;let n=this._values;for(let t=0;t<e.length;++t){const o=e[t];let r=n.get(o);r||(r=new Map,n.set(o,r)),n=r}n[a.value]=t}get(e){const t=this.node(e);if(t)return t[a.value]}node(e){if(this._values)return r(this._values,e,{iterables:!0})}override(e,t){if(!this._values)return;const o=e.slice(0,-1),n=e[e.length-1],i=r(this._values,o,{iterables:!0});t?i.set(n,t):i&&i.delete(n)}}},3328:(e,t,o)=>{"use strict";const n=o(375),r=o(8571),i=o(5277),a=o(1447),s=o(8160),l=o(6354),c=o(6133),p={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};e.exports=p.Template=class{constructor(e,t){if(n("string"==typeof e,"Template source must be a string"),n(!e.includes("\0")&&!e.includes(""),"Template source cannot contain reserved control characters"),this.source=e,this.rendered=e,this._template=null,t){const{functions:e,...o}=t;this._settings=Object.keys(o).length?r(o):void 0,this._functions=e,this._functions&&(n(Object.keys(this._functions).every((e=>"string"==typeof e)),"Functions keys must be strings"),n(Object.values(this._functions).every((e=>"function"==typeof e)),"Functions values must be functions"))}else this._settings=void 0,this._functions=void 0;this._parse()}_parse(){if(!this.source.includes("{"))return;const e=p.encode(this.source),t=p.split(e);let o=!1;const n=[],r=t.shift();r&&n.push(r);for(const e of t){const t="{"!==e[0],r=t?"}":"}}",i=e.indexOf(r);if(-1===i||"{"===e[1]){n.push(`{${p.decode(e)}`);continue}let a=e.slice(t?0:1,i);const s=":"===a[0];s&&(a=a.slice(1));const l=this._ref(p.decode(a),{raw:t,wrapped:s});n.push(l),"string"!=typeof l&&(o=!0);const c=e.slice(i+r.length);c&&n.push(p.decode(c))}o?this._template=n:this.rendered=n.join("")}static date(e,t){return p.dateFormat[t.dateFormat].call(e)}describe(e={}){if(!this._settings&&e.compact)return this.source;const t={template:this.source};return this._settings&&(t.options=this._settings),this._functions&&(t.functions=this._functions),t}static build(e){return new p.Template(e.template,e.options||e.functions?{...e.options,functions:e.functions}:void 0)}isDynamic(){return!!this._template}static isTemplate(e){return!!e&&!!e[s.symbols.template]}refs(){if(!this._template)return;const e=[];for(const t of this._template)"string"!=typeof t&&e.push(...t.refs);return e}resolve(e,t,o,n){return this._template&&1===this._template.length?this._part(this._template[0],e,t,o,n,{}):this.render(e,t,o,n)}_part(e,...t){return e.ref?e.ref.resolve(...t):e.formula.evaluate(t)}render(e,t,o,n,r={}){if(!this.isDynamic())return this.rendered;const a=[];for(const s of this._template)if("string"==typeof s)a.push(s);else{const l=this._part(s,e,t,o,n,r),c=p.stringify(l,e,t,o,n,r);if(void 0!==c){const e=s.raw||!1===(r.errors&&r.errors.escapeHtml)?c:i(c);a.push(p.wrap(e,s.wrapped&&o.errors.wrap.label))}}return a.join("")}_ref(e,{raw:t,wrapped:o}){const n=[],r=e=>{const t=c.create(e,this._settings);return n.push(t),e=>{const o=t.resolve(...e);return void 0!==o?o:null}};try{const t=this._functions?{...p.functions,...this._functions}:p.functions;var i=new a.Parser(e,{reference:r,functions:t,constants:p.constants})}catch(t){throw t.message=`Invalid template variable "${e}" fails due to: ${t.message}`,t}if(i.single){if("reference"===i.single.type){const e=n[0];return{ref:e,raw:t,refs:n,wrapped:o||"local"===e.type&&"label"===e.key}}return p.stringify(i.single.value)}return{formula:i,raw:t,refs:n}}toString(){return this.source}},p.Template.prototype[s.symbols.template]=!0,p.Template.prototype.isImmutable=!0,p.encode=function(e){return e.replace(/\\(\{+)/g,((e,t)=>p.opens.slice(0,t.length))).replace(/\\(\}+)/g,((e,t)=>p.closes.slice(0,t.length)))},p.decode=function(e){return e.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},p.split=function(e){const t=[];let o="";for(let n=0;n<e.length;++n){const r=e[n];if("{"===r){let r="";for(;n+1<e.length&&"{"===e[n+1];)r+="{",++n;t.push(o),o=r}else o+=r}return t.push(o),t},p.wrap=function(e,t){return t?1===t.length?`${t}${e}${t}`:`${t[0]}${e}${t[1]}`:e},p.stringify=function(e,t,o,n,r,i={}){const a=typeof e,s=n&&n.errors&&n.errors.wrap||{};let l=!1;if(c.isRef(e)&&e.render&&(l=e.in,e=e.resolve(t,o,n,r,{in:e.in,...i})),null===e)return"null";if("string"===a)return p.wrap(e,i.arrayItems&&s.string);if("number"===a||"function"===a||"symbol"===a)return e.toString();if("object"!==a)return JSON.stringify(e);if(e instanceof Date)return p.Template.date(e,n);if(e instanceof Map){const t=[];for(const[o,n]of e.entries())t.push(`${o.toString()} -> ${n.toString()}`);e=t}if(!Array.isArray(e))return e.toString();const u=[];for(const a of e)u.push(p.stringify(a,t,o,n,r,{arrayItems:!0,...i}));return p.wrap(u.join(", "),!l&&s.array)},p.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},p.functions={if:(e,t,o)=>e?t:o,length:e=>"string"==typeof e?e.length:e&&"object"==typeof e?Array.isArray(e)?e.length:Object.keys(e).length:null,msg(e){const[t,o,n,r,i]=this,a=i.messages;if(!a)return"";const s=l.template(t,a[0],e,o,n)||l.template(t,a[1],e,o,n);return s?s.render(t,o,n,r,i):""},number:e=>"number"==typeof e?e:"string"==typeof e?parseFloat(e):"boolean"==typeof e?e?1:0:e instanceof Date?e.getTime():null}},4946:(e,t,o)=>{"use strict";const n=o(375),r=o(1687),i=o(8068),a=o(8160),s=o(3292),l=o(6354),c=o(6133),p={};e.exports=i.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:c.toSibling}},args:(e,...t)=>1===t.length&&Array.isArray(t[0])?e.try(...t[0]):e.try(...t),validate(e,t){const{schema:o,error:n,state:i,prefs:a}=t;if(o._flags.match){const t=[],s=[];for(let n=0;n<o.$_terms.matches.length;++n){const r=o.$_terms.matches[n],l=i.nest(r.schema,`match.${n}`);l.snapshot();const c=r.schema.$_validate(e,l,a);c.errors?(s.push(c.errors),l.restore()):(t.push(c.value),l.commit())}if(0===t.length)return{errors:n("alternatives.any",{details:s.map((e=>l.details(e,{override:!1})))})};if("one"===o._flags.match)return 1===t.length?{value:t[0]}:{errors:n("alternatives.one")};if(t.length!==o.$_terms.matches.length)return{errors:n("alternatives.all",{details:s.map((e=>l.details(e,{override:!1})))})};const c=e=>e.$_terms.matches.some((e=>"object"===e.schema.type||"alternatives"===e.schema.type&&c(e.schema)));return c(o)?{value:t.reduce(((e,t)=>r(e,t,{mergeArrays:!1})))}:{value:t[t.length-1]}}const s=[];for(let t=0;t<o.$_terms.matches.length;++t){const n=o.$_terms.matches[t];if(n.schema){const o=i.nest(n.schema,`match.${t}`);o.snapshot();const r=n.schema.$_validate(e,o,a);if(!r.errors)return o.commit(),r;o.restore(),s.push({schema:n.schema,reports:r.errors});continue}const r=n.ref?n.ref.resolve(e,i,a):e,l=n.is?[n]:n.switch;for(let o=0;o<l.length;++o){const s=l[o],{is:c,then:p,otherwise:u}=s,d=`match.${t}${n.switch?"."+o:""}`;if(c.$_match(r,i.nest(c,`${d}.is`),a)){if(p)return p.$_validate(e,i.nest(p,`${d}.then`),a)}else if(u)return u.$_validate(e,i.nest(u,`${d}.otherwise`),a)}}return p.errors(s,t)},rules:{conditional:{method(e,t){n(!this._flags._endedSwitch,"Unreachable condition"),n(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),n(void 0===t.break,"Cannot use break option with alternatives conditional");const o=this.clone(),r=s.when(o,e,t),i=r.is?[r]:r.switch;for(const e of i)if(e.then&&e.otherwise){o.$_setFlag("_endedSwitch",!0,{clone:!1});break}return o.$_terms.matches.push(r),o.$_mutateRebuild()}},match:{method(e){if(n(["any","one","all"].includes(e),"Invalid alternatives match mode",e),"any"!==e)for(const t of this.$_terms.matches)n(t.schema,"Cannot combine match mode",e,"with conditional rules");return this.$_setFlag("match",e)}},try:{method(...e){n(e.length,"Missing alternative schemas"),a.verifyFlat(e,"try"),n(!this._flags._endedSwitch,"Unreachable condition");const t=this.clone();for(const o of e)t.$_terms.matches.push({schema:t.$_compile(o)});return t.$_mutateRebuild()}}},overrides:{label(e){return this.$_parent("label",e).$_modify({each:(t,o)=>"is"!==o.path[0]&&"string"!=typeof t._flags.label?t.label(e):void 0,ref:!1})}},rebuild(e){e.$_modify({each:t=>{a.isSchema(t)&&"array"===t.type&&e.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(e,t){if(t.matches)for(const o of t.matches){const{schema:t,ref:n,is:r,not:i,then:a,otherwise:s}=o;e=t?e.try(t):n?e.conditional(n,{is:r,then:a,not:i,otherwise:s,switch:o.switch}):e.conditional(r,{then:a,otherwise:s})}return e}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),p.errors=function(e,{error:t,state:o}){if(!e.length)return{errors:t("alternatives.any")};if(1===e.length)return{errors:e[0].reports};const n=new Set,r=[];for(const{reports:i,schema:a}of e){if(i.length>1)return p.unmatched(e,t);const s=i[0];if(s instanceof l.Report==0)return p.unmatched(e,t);if(s.state.path.length!==o.path.length){r.push({type:a.type,report:s});continue}if("any.only"===s.code){for(const e of s.local.valids)n.add(e);continue}const[c,u]=s.code.split(".");"base"!==u?r.push({type:a.type,report:s}):"object.base"===s.code?n.add(s.local.type):n.add(c)}return r.length?1===r.length?{errors:r[0].report}:p.unmatched(e,t):{errors:t("alternatives.types",{types:[...n]})}},p.unmatched=function(e,t){const o=[];for(const t of e)o.push(...t.reports);return{errors:t("alternatives.match",l.details(o,{override:!1}))}}},8068:(e,t,o)=>{"use strict";const n=o(375),r=o(7629),i=o(8160),a=o(6914);e.exports=r.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(e,t){return n("function"==typeof e,"Method must be a function"),n(void 0===t||t&&"string"==typeof t,"Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:e,description:t}})},validate(e,t,{method:o}){try{return o(e,t)}catch(e){return t.error("any.custom",{error:e})}},args:["method","description"],multi:!0},messages:{method(e){return this.prefs({messages:e})}},shared:{method(e){n(i.isSchema(e)&&e._flags.id,"Schema must be a schema with an id");const t=this.clone();return t.$_terms.shared=t.$_terms.shared||[],t.$_terms.shared.push(e),t.$_mutateRegister(e),t}},warning:{method(e,t){return n(e&&"string"==typeof e,"Invalid warning code"),this.$_addRule({name:"warning",args:{code:e,local:t},warn:!0})},validate:(e,t,{code:o,local:n})=>t.error(o,n),args:["code","local"],multi:!0}},modifiers:{keep(e,t=!0){e.keep=t},message(e,t){e.message=a.compile(t)},warn(e,t=!0){e.warn=t}},manifest:{build(e,t){for(const o in t){const n=t[o];if(["examples","externals","metas","notes","tags"].includes(o))for(const t of n)e=e[o.slice(0,-1)](t);else if("alterations"!==o)if("whens"!==o){if("shared"===o)for(const t of n)e=e.shared(t)}else for(const t of n){const{ref:o,is:n,not:r,then:i,otherwise:a,concat:s}=t;e=s?e.concat(s):o?e.when(o,{is:n,not:r,then:i,otherwise:a,switch:t.switch,break:t.break}):e.when(n,{then:i,otherwise:a,break:t.break})}else{const t={};for(const{target:e,adjuster:o}of n)t[e]=o;e=e.alter(t)}}return e}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(e,t,o)=>{"use strict";const n=o(375),r=o(9474),i=o(9621),a=o(8068),s=o(8160),l=o(3292),c={};e.exports=a.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(e,{schema:t,state:o,prefs:n}){if(!Array.isArray(e))return;const r=t.$_getRule("sort");return r?c.sort(t,e,r.args.options,o,n):void 0}},validate(e,{schema:t,error:o}){if(!Array.isArray(e)){if(t._flags.single){const t=[e];return t[s.symbols.arraySingle]=!0,{value:t}}return{errors:o("array.base")}}if(t.$_getRule("items")||t.$_terms.externals)return{value:e.slice()}},rules:{has:{method(e){e=this.$_compile(e,{appendPath:!0});const t=this.$_addRule({name:"has",args:{schema:e}});return t.$_mutateRegister(e),t},validate(e,{state:t,prefs:o,error:n},{schema:r}){const i=[e,...t.ancestors];for(let n=0;n<e.length;++n){const a=t.localize([...t.path,n],i,r);if(r.$_match(e[n],a,o))return e}const a=r._flags.label;return a?n("array.hasKnown",{patternLabel:a}):n("array.hasUnknown",null)},multi:!0},items:{method(...e){s.verifyFlat(e,"items");const t=this.$_addRule("items");for(let o=0;o<e.length;++o){const n=s.tryWithPath((()=>this.$_compile(e[o])),o,{append:!0});t.$_terms.items.push(n)}return t.$_mutateRebuild()},validate(e,{schema:t,error:o,state:n,prefs:r,errorsArray:i}){const a=t.$_terms._requireds.slice(),l=t.$_terms.ordered.slice(),p=[...t.$_terms._inclusions,...a],u=!e[s.symbols.arraySingle];delete e[s.symbols.arraySingle];const d=i();let _=e.length;for(let i=0;i<_;++i){const s=e[i];let m=!1,h=!1;const f=u?i:new Number(i),y=[...n.path,f];if(!t._flags.sparse&&void 0===s){if(d.push(o("array.sparse",{key:f,path:y,pos:i,value:void 0},n.localize(y))),r.abortEarly)return d;l.shift();continue}const b=[e,...n.ancestors];for(const e of t.$_terms._exclusions)if(e.$_match(s,n.localize(y,b,e),r,{presence:"ignore"})){if(d.push(o("array.excludes",{pos:i,value:s},n.localize(y))),r.abortEarly)return d;m=!0,l.shift();break}if(m)continue;if(t.$_terms.ordered.length){if(l.length){const a=l.shift(),p=a.$_validate(s,n.localize(y,b,a),r);if(p.errors){if(d.push(...p.errors),r.abortEarly)return d}else if("strip"===a._flags.result)c.fastSplice(e,i),--i,--_;else{if(!t._flags.sparse&&void 0===p.value){if(d.push(o("array.sparse",{key:f,path:y,pos:i,value:void 0},n.localize(y))),r.abortEarly)return d;continue}e[i]=p.value}continue}if(!t.$_terms.items.length){if(d.push(o("array.orderedLength",{pos:i,limit:t.$_terms.ordered.length})),r.abortEarly)return d;break}}const g=[];let v=a.length;for(let l=0;l<v;++l){const p=n.localize(y,b,a[l]);p.snapshot();const u=a[l].$_validate(s,p,r);if(g[l]=u,!u.errors){if(p.commit(),e[i]=u.value,h=!0,c.fastSplice(a,l),--l,--v,!t._flags.sparse&&void 0===u.value&&(d.push(o("array.sparse",{key:f,path:y,pos:i,value:void 0},n.localize(y))),r.abortEarly))return d;break}p.restore()}if(h)continue;const S=r.stripUnknown&&!!r.stripUnknown.arrays||!1;v=p.length;for(const l of p){let p;const u=a.indexOf(l);if(-1!==u)p=g[u];else{const a=n.localize(y,b,l);if(a.snapshot(),p=l.$_validate(s,a,r),!p.errors){a.commit(),"strip"===l._flags.result?(c.fastSplice(e,i),--i,--_):t._flags.sparse||void 0!==p.value?e[i]=p.value:(d.push(o("array.sparse",{key:f,path:y,pos:i,value:void 0},n.localize(y))),m=!0),h=!0;break}a.restore()}if(1===v){if(S){c.fastSplice(e,i),--i,--_,h=!0;break}if(d.push(...p.errors),r.abortEarly)return d;m=!0;break}}if(!m&&(t.$_terms._inclusions.length||t.$_terms._requireds.length)&&!h){if(S){c.fastSplice(e,i),--i,--_;continue}if(d.push(o("array.includes",{pos:i,value:s},n.localize(y))),r.abortEarly)return d}}return a.length&&c.fillMissedErrors(t,d,a,e,n,r),l.length&&(c.fillOrderedErrors(t,d,l,e,n,r),d.length||c.fillDefault(l,e,n,r)),d.length?d:e},priority:!0,manifest:!1},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate:(e,t,{limit:o},{name:n,operator:r,args:i})=>s.compare(e.length,o,r)?e:t.error("array."+n,{limit:i.limit,value:e}),args:[{name:"limit",ref:!0,assert:s.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},ordered:{method(...e){s.verifyFlat(e,"ordered");const t=this.$_addRule("items");for(let o=0;o<e.length;++o){const n=s.tryWithPath((()=>this.$_compile(e[o])),o,{append:!0});c.validateSingle(n,t),t.$_mutateRegister(n),t.$_terms.ordered.push(n)}return t.$_mutateRebuild()}},single:{method(e){const t=void 0===e||!!e;return n(!t||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",t)}},sort:{method(e={}){s.assertOptions(e,["by","order"]);const t={order:e.order||"ascending"};return e.by&&(t.by=l.ref(e.by,{ancestor:0}),n(!t.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:t}})},validate(e,{error:t,state:o,prefs:n,schema:r},{options:i}){const{value:a,errors:s}=c.sort(r,e,i,o,n);if(s)return s;for(let o=0;o<e.length;++o)if(e[o]!==a[o])return t("array.sort",{order:i.order,by:i.by?i.by.key:"value"});return e},convert:!0},sparse:{method(e){const t=void 0===e||!!e;return this._flags.sparse===t?this:(t?this.clone():this.$_addRule("items")).$_setFlag("sparse",t,{clone:!1})}},unique:{method(e,t={}){n(!e||"function"==typeof e||"string"==typeof e,"comparator must be a function or a string"),s.assertOptions(t,["ignoreUndefined","separator"]);const o={name:"unique",args:{options:t,comparator:e}};if(e)if("string"==typeof e){const n=s.default(t.separator,".");o.path=n?e.split(n):[e]}else o.comparator=e;return this.$_addRule(o)},validate(e,{state:t,error:o,schema:a},{comparator:s,options:l},{comparator:c,path:p}){const u={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),bigint:Object.create(null),object:new Map,function:new Map,custom:new Map},d=c||r,_=l.ignoreUndefined;for(let r=0;r<e.length;++r){const a=p?i(e[r],p):e[r],l=c?u.custom:u[typeof a];if(n(l,"Failed to find unique map container for type",typeof a),l instanceof Map){const n=l.entries();let i;for(;!(i=n.next()).done;)if(d(i.value[0],a)){const n=t.localize([...t.path,r],[e,...t.ancestors]),a={pos:r,value:e[r],dupePos:i.value[1],dupeValue:e[i.value[1]]};return p&&(a.path=s),o("array.unique",a,n)}l.set(a,r)}else{if((!_||void 0!==a)&&void 0!==l[a]){const n={pos:r,value:e[r],dupePos:l[a],dupeValue:e[l[a]]};return p&&(n.path=s),o("array.unique",n,t.localize([...t.path,r],[e,...t.ancestors]))}l[a]=r}}return e},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(e,t)=>new Set(e)}},rebuild(e){e.$_terms._inclusions=[],e.$_terms._exclusions=[],e.$_terms._requireds=[];for(const t of e.$_terms.items)c.validateSingle(t,e),"required"===t._flags.presence?e.$_terms._requireds.push(t):"forbidden"===t._flags.presence?e.$_terms._exclusions.push(t):e.$_terms._inclusions.push(t);for(const t of e.$_terms.ordered)c.validateSingle(t,e)},manifest:{build:(e,t)=>(t.items&&(e=e.items(...t.items)),t.ordered&&(e=e.ordered(...t.ordered)),e)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),c.fillMissedErrors=function(e,t,o,n,r,i){const a=[];let s=0;for(const e of o){const t=e._flags.label;t?a.push(t):++s}a.length?s?t.push(e.$_createError("array.includesRequiredBoth",n,{knownMisses:a,unknownMisses:s},r,i)):t.push(e.$_createError("array.includesRequiredKnowns",n,{knownMisses:a},r,i)):t.push(e.$_createError("array.includesRequiredUnknowns",n,{unknownMisses:s},r,i))},c.fillOrderedErrors=function(e,t,o,n,r,i){const a=[];for(const e of o)"required"===e._flags.presence&&a.push(e);a.length&&c.fillMissedErrors(e,t,a,n,r,i)},c.fillDefault=function(e,t,o,n){const r=[];let i=!0;for(let a=e.length-1;a>=0;--a){const s=e[a],l=[t,...o.ancestors],c=s.$_validate(void 0,o.localize(o.path,l,s),n).value;if(i){if(void 0===c)continue;i=!1}r.unshift(c)}r.length&&t.push(...r)},c.fastSplice=function(e,t){let o=t;for(;o<e.length;)e[o++]=e[o];--e.length},c.validateSingle=function(e,t){("array"===e.type||e._flags._arrayItems)&&(n(!t._flags.single,"Cannot specify array item with single rule enabled"),t.$_setFlag("_arrayItems",!0,{clone:!1}))},c.sort=function(e,t,o,n,r){const i="ascending"===o.order?1:-1,a=-1*i,s=i,l=(l,p)=>{let u=c.compare(l,p,a,s);if(null!==u)return u;if(o.by&&(l=o.by.resolve(l,n,r),p=o.by.resolve(p,n,r)),u=c.compare(l,p,a,s),null!==u)return u;const d=typeof l;if(d!==typeof p)throw e.$_createError("array.sort.mismatching",t,null,n,r);if("number"!==d&&"string"!==d)throw e.$_createError("array.sort.unsupported",t,{type:d},n,r);return"number"===d?(l-p)*i:l<p?a:s};try{return{value:t.slice().sort(l)}}catch(e){return{errors:e}}},c.compare=function(e,t,o,n){return e===t?0:void 0===e?1:void 0===t?-1:null===e?n:null===t?o:null}},4937:(e,t,o)=>{"use strict";const n=o(375),r=o(8068),i=o(8160),a=o(2036),s={isBool:function(e){return"boolean"==typeof e}};e.exports=r.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(e,{schema:t}){if("boolean"!=typeof e){if("string"==typeof e){const o=t._flags.sensitive?e:e.toLowerCase();e="true"===o||"false"!==o&&e}return"boolean"!=typeof e&&(e=t.$_terms.truthy&&t.$_terms.truthy.has(e,null,null,!t._flags.sensitive)||(!t.$_terms.falsy||!t.$_terms.falsy.has(e,null,null,!t._flags.sensitive))&&e),{value:e}}},validate(e,{error:t}){if("boolean"!=typeof e)return{value:e,errors:t("boolean.base")}},rules:{truthy:{method(...e){i.verifyFlat(e,"truthy");const t=this.clone();t.$_terms.truthy=t.$_terms.truthy||new a;for(let o=0;o<e.length;++o){const r=e[o];n(void 0!==r,"Cannot call truthy with undefined"),t.$_terms.truthy.add(r)}return t}},falsy:{method(...e){i.verifyFlat(e,"falsy");const t=this.clone();t.$_terms.falsy=t.$_terms.falsy||new a;for(let o=0;o<e.length;++o){const r=e[o];n(void 0!==r,"Cannot call falsy with undefined"),t.$_terms.falsy.add(r)}return t}},sensitive:{method(e=!0){return this.$_setFlag("sensitive",e)}}},cast:{number:{from:s.isBool,to:(e,t)=>e?1:0},string:{from:s.isBool,to:(e,t)=>e?"true":"false"}},manifest:{build:(e,t)=>(t.truthy&&(e=e.truthy(...t.truthy)),t.falsy&&(e=e.falsy(...t.falsy)),e)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(e,t,o)=>{"use strict";const n=o(375),r=o(8068),i=o(8160),a=o(3328),s={isDate:function(e){return e instanceof Date}};e.exports=r.extend({type:"date",coerce:{from:["number","string"],method:(e,{schema:t})=>({value:s.parse(e,t._flags.format)||e})},validate(e,{schema:t,error:o,prefs:n}){if(e instanceof Date&&!isNaN(e.getTime()))return;const r=t._flags.format;return n.convert&&r&&"string"==typeof e?{value:e,errors:o("date.format",{format:r})}:{value:e,errors:o("date.base")}},rules:{compare:{method:!1,validate(e,t,{date:o},{name:n,operator:r,args:a}){const s="now"===o?Date.now():o.getTime();return i.compare(e.getTime(),s,r)?e:t.error("date."+n,{limit:a.date,value:e})},args:[{name:"date",ref:!0,normalize:e=>"now"===e?e:s.parse(e),assert:e=>null!==e,message:"must have a valid date format"}]},format:{method(e){return n(["iso","javascript","unix"].includes(e),"Unknown date format",e),this.$_setFlag("format",e)}},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{date:e},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{date:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{date:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{date:e},operator:">="})}},timestamp:{method(e="javascript"){return n(["javascript","unix"].includes(e),'"type" must be one of "javascript, unix"'),this.format(e)}}},cast:{number:{from:s.isDate,to:(e,t)=>e.getTime()},string:{from:s.isDate,to:(e,{prefs:t})=>a.date(e,t)}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),s.parse=function(e,t){if(e instanceof Date)return e;if("string"!=typeof e&&(isNaN(e)||!isFinite(e)))return null;if(/^\s*$/.test(e))return null;if("iso"===t)return i.isIsoDate(e)?s.date(e.toString()):null;const o=e;if("string"==typeof e&&/^[+-]?\d+(\.\d+)?$/.test(e)&&(e=parseFloat(e)),t){if("javascript"===t)return s.date(1*e);if("unix"===t)return s.date(1e3*e);if("string"==typeof o)return null}return s.date(e)},s.date=function(e){const t=new Date(e);return isNaN(t.getTime())?null:t}},390:(e,t,o)=>{"use strict";const n=o(375),r=o(7824);e.exports=r.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(e){return n(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:e}})},validate:(e,t,{n:o})=>e.length===o?e:t.error("function.arity",{n:o})},class:{method(){return this.$_addRule("class")},validate:(e,t)=>/^\s*class\s/.test(e.toString())?e:t.error("function.class",{value:e})},minArity:{method(e){return n(Number.isSafeInteger(e)&&e>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:e}})},validate:(e,t,{n:o})=>e.length>=o?e:t.error("function.minArity",{n:o})},maxArity:{method(e){return n(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:e}})},validate:(e,t,{n:o})=>e.length<=o?e:t.error("function.maxArity",{n:o})}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(e,t,o)=>{"use strict";const n=o(978),r=o(375),i=o(8571),a=o(3652),s=o(8068),l=o(8160),c=o(3292),p=o(6354),u=o(6133),d=o(3328),_={renameDefaults:{alias:!1,multiple:!1,override:!1}};e.exports=s.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:void 0}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(e,t)=>e.keys(t),validate(e,{schema:t,error:o,state:n,prefs:r}){if(!e||typeof e!==t.$_property("typeof")||Array.isArray(e))return{value:e,errors:o("object.base",{type:t.$_property("typeof")})};if(!(t.$_terms.renames||t.$_terms.dependencies||t.$_terms.keys||t.$_terms.patterns||t.$_terms.externals))return;e=_.clone(e,r);const i=[];if(t.$_terms.renames&&!_.rename(t,e,n,r,i))return{value:e,errors:i};if(!t.$_terms.keys&&!t.$_terms.patterns&&!t.$_terms.dependencies)return{value:e,errors:i};const a=new Set(Object.keys(e));if(t.$_terms.keys){const o=[e,...n.ancestors];for(const s of t.$_terms.keys){const t=s.key,l=e[t];a.delete(t);const c=n.localize([...n.path,t],o,s),p=s.schema.$_validate(l,c,r);if(p.errors){if(r.abortEarly)return{value:e,errors:p.errors};void 0!==p.value&&(e[t]=p.value),i.push(...p.errors)}else"strip"===s.schema._flags.result||void 0===p.value&&void 0!==l?delete e[t]:void 0!==p.value&&(e[t]=p.value)}}if(a.size||t._flags._hasPatternMatch){const o=_.unknown(t,e,a,i,n,r);if(o)return o}if(t.$_terms.dependencies)for(const o of t.$_terms.dependencies){if(null!==o.key&&!1===_.isPresent(o.options)(o.key.resolve(e,n,r,null,{shadow:!1})))continue;const a=_.dependencies[o.rel](t,o,e,n,r);if(a){const o=t.$_createError(a.code,e,a.context,n,r);if(r.abortEarly)return{value:e,errors:o};i.push(o)}}return{value:e,errors:i}},rules:{and:{method(...e){return l.verifyFlat(e,"and"),_.dependency(this,"and",null,e)}},append:{method(e){return null==e||0===Object.keys(e).length?this:this.keys(e)}},assert:{method(e,t,o){d.isTemplate(e)||(e=c.ref(e)),r(void 0===o||"string"==typeof o,"Message must be a string"),t=this.$_compile(t,{appendPath:!0});const n=this.$_addRule({name:"assert",args:{subject:e,schema:t,message:o}});return n.$_mutateRegister(e),n.$_mutateRegister(t),n},validate(e,{error:t,prefs:o,state:n},{subject:r,schema:i,message:a}){const s=r.resolve(e,n,o),l=u.isRef(r)?r.absolute(n):[];return i.$_match(s,n.localize(l,[e,...n.ancestors],i),o)?e:t("object.assert",{subject:r,message:a})},args:["subject","schema","message"],multi:!0},instance:{method(e,t){return r("function"==typeof e,"constructor must be a function"),t=t||e.name,this.$_addRule({name:"instance",args:{constructor:e,name:t}})},validate:(e,t,{constructor:o,name:n})=>e instanceof o?e:t.error("object.instance",{type:n,value:e}),args:["constructor","name"]},keys:{method(e){r(void 0===e||"object"==typeof e,"Object schema must be a valid object"),r(!l.isSchema(e),"Object schema cannot be a joi schema");const t=this.clone();if(e)if(Object.keys(e).length){t.$_terms.keys=t.$_terms.keys?t.$_terms.keys.filter((t=>!e.hasOwnProperty(t.key))):new _.Keys;for(const o in e)l.tryWithPath((()=>t.$_terms.keys.push({key:o,schema:this.$_compile(e[o])})),o)}else t.$_terms.keys=new _.Keys;else t.$_terms.keys=null;return t.$_mutateRebuild()}},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate:(e,t,{limit:o},{name:n,operator:r,args:i})=>l.compare(Object.keys(e).length,o,r)?e:t.error("object."+n,{limit:i.limit,value:e}),args:[{name:"limit",ref:!0,assert:l.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},nand:{method(...e){return l.verifyFlat(e,"nand"),_.dependency(this,"nand",null,e)}},or:{method(...e){return l.verifyFlat(e,"or"),_.dependency(this,"or",null,e)}},oxor:{method(...e){return _.dependency(this,"oxor",null,e)}},pattern:{method(e,t,o={}){const n=e instanceof RegExp;n||(e=this.$_compile(e,{appendPath:!0})),r(void 0!==t,"Invalid rule"),l.assertOptions(o,["fallthrough","matches"]),n&&r(!e.flags.includes("g")&&!e.flags.includes("y"),"pattern should not use global or sticky mode"),t=this.$_compile(t,{appendPath:!0});const i=this.clone();i.$_terms.patterns=i.$_terms.patterns||[];const a={[n?"regex":"schema"]:e,rule:t};return o.matches&&(a.matches=this.$_compile(o.matches),"array"!==a.matches.type&&(a.matches=a.matches.$_root.array().items(a.matches)),i.$_mutateRegister(a.matches),i.$_setFlag("_hasPatternMatch",!0,{clone:!1})),o.fallthrough&&(a.fallthrough=!0),i.$_terms.patterns.push(a),i.$_mutateRegister(t),i}},ref:{method(){return this.$_addRule("ref")},validate:(e,t)=>u.isRef(e)?e:t.error("object.refType",{value:e})},regex:{method(){return this.$_addRule("regex")},validate:(e,t)=>e instanceof RegExp?e:t.error("object.regex",{value:e})},rename:{method(e,t,o={}){r("string"==typeof e||e instanceof RegExp,"Rename missing the from argument"),r("string"==typeof t||t instanceof d,"Invalid rename to argument"),r(t!==e,"Cannot rename key to same name:",e),l.assertOptions(o,["alias","ignoreUndefined","override","multiple"]);const i=this.clone();i.$_terms.renames=i.$_terms.renames||[];for(const t of i.$_terms.renames)r(t.from!==e,"Cannot rename the same key multiple times");return t instanceof d&&i.$_mutateRegister(t),i.$_terms.renames.push({from:e,to:t,options:n(_.renameDefaults,o)}),i}},schema:{method(e="any"){return this.$_addRule({name:"schema",args:{type:e}})},validate:(e,t,{type:o})=>!l.isSchema(e)||"any"!==o&&e.type!==o?t.error("object.schema",{type:o}):e},unknown:{method(e){return this.$_setFlag("unknown",!1!==e)}},with:{method(e,t,o={}){return _.dependency(this,"with",e,t,o)}},without:{method(e,t,o={}){return _.dependency(this,"without",e,t,o)}},xor:{method(...e){return l.verifyFlat(e,"xor"),_.dependency(this,"xor",null,e)}}},overrides:{default(e,t){return void 0===e&&(e=l.symbols.deepDefault),this.$_parent("default",e,t)}},rebuild(e){if(e.$_terms.keys){const t=new a.Sorter;for(const o of e.$_terms.keys)l.tryWithPath((()=>t.add(o,{after:o.schema.$_rootReferences(),group:o.key})),o.key);e.$_terms.keys=new _.Keys(...t.nodes)}},manifest:{build(e,t){if(t.keys&&(e=e.keys(t.keys)),t.dependencies)for(const{rel:o,key:n=null,peers:r,options:i}of t.dependencies)e=_.dependency(e,o,n,r,i);if(t.patterns)for(const{regex:o,schema:n,rule:r,fallthrough:i,matches:a}of t.patterns)e=e.pattern(o||n,r,{fallthrough:i,matches:a});if(t.renames)for(const{from:o,to:n,options:r}of t.renames)e=e.rename(o,n,r);return e}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),_.clone=function(e,t){if("object"==typeof e){if(t.nonEnumerables)return i(e,{shallow:!0});const o=Object.create(Object.getPrototypeOf(e));return Object.assign(o,e),o}const o=function(...t){return e.apply(this,t)};return o.prototype=i(e.prototype),Object.defineProperty(o,"name",{value:e.name,writable:!1}),Object.defineProperty(o,"length",{value:e.length,writable:!1}),Object.assign(o,e),o},_.dependency=function(e,t,o,n,i){r(null===o||"string"==typeof o,t,"key must be a strings"),i||(i=n.length>1&&"object"==typeof n[n.length-1]?n.pop():{}),l.assertOptions(i,["separator","isPresent"]),n=[].concat(n);const a=l.default(i.separator,"."),s=[];for(const e of n)r("string"==typeof e,t,"peers must be strings"),s.push(c.ref(e,{separator:a,ancestor:0,prefix:!1}));null!==o&&(o=c.ref(o,{separator:a,ancestor:0,prefix:!1}));const p=e.clone();return p.$_terms.dependencies=p.$_terms.dependencies||[],p.$_terms.dependencies.push(new _.Dependency(t,o,s,n,i)),p},_.dependencies={and(e,t,o,n,r){const i=[],a=[],s=t.peers.length,l=_.isPresent(t.options);for(const e of t.peers)!1===l(e.resolve(o,n,r,null,{shadow:!1}))?i.push(e.key):a.push(e.key);if(i.length!==s&&a.length!==s)return{code:"object.and",context:{present:a,presentWithLabels:_.keysToLabels(e,a),missing:i,missingWithLabels:_.keysToLabels(e,i)}}},nand(e,t,o,n,r){const i=[],a=_.isPresent(t.options);for(const e of t.peers)a(e.resolve(o,n,r,null,{shadow:!1}))&&i.push(e.key);if(i.length!==t.peers.length)return;const s=t.paths[0],l=t.paths.slice(1);return{code:"object.nand",context:{main:s,mainWithLabel:_.keysToLabels(e,s),peers:l,peersWithLabels:_.keysToLabels(e,l)}}},or(e,t,o,n,r){const i=_.isPresent(t.options);for(const e of t.peers)if(i(e.resolve(o,n,r,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:t.paths,peersWithLabels:_.keysToLabels(e,t.paths)}}},oxor(e,t,o,n,r){const i=[],a=_.isPresent(t.options);for(const e of t.peers)a(e.resolve(o,n,r,null,{shadow:!1}))&&i.push(e.key);if(!i.length||1===i.length)return;const s={peers:t.paths,peersWithLabels:_.keysToLabels(e,t.paths)};return s.present=i,s.presentWithLabels=_.keysToLabels(e,i),{code:"object.oxor",context:s}},with(e,t,o,n,r){const i=_.isPresent(t.options);for(const a of t.peers)if(!1===i(a.resolve(o,n,r,null,{shadow:!1})))return{code:"object.with",context:{main:t.key.key,mainWithLabel:_.keysToLabels(e,t.key.key),peer:a.key,peerWithLabel:_.keysToLabels(e,a.key)}}},without(e,t,o,n,r){const i=_.isPresent(t.options);for(const a of t.peers)if(i(a.resolve(o,n,r,null,{shadow:!1})))return{code:"object.without",context:{main:t.key.key,mainWithLabel:_.keysToLabels(e,t.key.key),peer:a.key,peerWithLabel:_.keysToLabels(e,a.key)}}},xor(e,t,o,n,r){const i=[],a=_.isPresent(t.options);for(const e of t.peers)a(e.resolve(o,n,r,null,{shadow:!1}))&&i.push(e.key);if(1===i.length)return;const s={peers:t.paths,peersWithLabels:_.keysToLabels(e,t.paths)};return 0===i.length?{code:"object.missing",context:s}:(s.present=i,s.presentWithLabels=_.keysToLabels(e,i),{code:"object.xor",context:s})}},_.keysToLabels=function(e,t){return Array.isArray(t)?t.map((t=>e.$_mapLabels(t))):e.$_mapLabels(t)},_.isPresent=function(e){return"function"==typeof e.isPresent?e.isPresent:e=>void 0!==e},_.rename=function(e,t,o,n,r){const i={};for(const a of e.$_terms.renames){const s=[],l="string"!=typeof a.from;if(l)for(const e in t){if(void 0===t[e]&&a.options.ignoreUndefined)continue;if(e===a.to)continue;const o=a.from.exec(e);o&&s.push({from:e,to:a.to,match:o})}else!Object.prototype.hasOwnProperty.call(t,a.from)||void 0===t[a.from]&&a.options.ignoreUndefined||s.push(a);for(const c of s){const s=c.from;let p=c.to;if(p instanceof d&&(p=p.render(t,o,n,c.match)),s!==p){if(!a.options.multiple&&i[p]&&(r.push(e.$_createError("object.rename.multiple",t,{from:s,to:p,pattern:l},o,n)),n.abortEarly))return!1;if(Object.prototype.hasOwnProperty.call(t,p)&&!a.options.override&&!i[p]&&(r.push(e.$_createError("object.rename.override",t,{from:s,to:p,pattern:l},o,n)),n.abortEarly))return!1;void 0===t[s]?delete t[p]:t[p]=t[s],i[p]=!0,a.options.alias||delete t[s]}}}return!0},_.unknown=function(e,t,o,n,r,i){if(e.$_terms.patterns){let a=!1;const s=e.$_terms.patterns.map((e=>{if(e.matches)return a=!0,[]})),l=[t,...r.ancestors];for(const a of o){const c=t[a],p=[...r.path,a];for(let u=0;u<e.$_terms.patterns.length;++u){const d=e.$_terms.patterns[u];if(d.regex){const e=d.regex.test(a);if(r.mainstay.tracer.debug(r,"rule",`pattern.${u}`,e?"pass":"error"),!e)continue}else if(!d.schema.$_match(a,r.nest(d.schema,`pattern.${u}`),i))continue;o.delete(a);const _=r.localize(p,l,{schema:d.rule,key:a}),m=d.rule.$_validate(c,_,i);if(m.errors){if(i.abortEarly)return{value:t,errors:m.errors};n.push(...m.errors)}if(d.matches&&s[u].push(a),t[a]=m.value,!d.fallthrough)break}}if(a)for(let o=0;o<s.length;++o){const a=s[o];if(!a)continue;const c=e.$_terms.patterns[o].matches,u=r.localize(r.path,l,c),d=c.$_validate(a,u,i);if(d.errors){const o=p.details(d.errors,{override:!1});o.matches=a;const s=e.$_createError("object.pattern.match",t,o,r,i);if(i.abortEarly)return{value:t,errors:s};n.push(s)}}}if(o.size&&(e.$_terms.keys||e.$_terms.patterns)){if(i.stripUnknown&&void 0===e._flags.unknown||i.skipFunctions){const e=!(!i.stripUnknown||!0!==i.stripUnknown&&!i.stripUnknown.objects);for(const n of o)e?(delete t[n],o.delete(n)):"function"==typeof t[n]&&o.delete(n)}if(!l.default(e._flags.unknown,i.allowUnknown))for(const a of o){const o=r.localize([...r.path,a],[]),s=e.$_createError("object.unknown",t[a],{child:a},o,i,{flags:!1});if(i.abortEarly)return{value:t,errors:s};n.push(s)}}},_.Dependency=class{constructor(e,t,o,n,r){this.rel=e,this.key=t,this.peers=o,this.paths=n,this.options=r}describe(){const e={rel:this.rel,peers:this.paths};return null!==this.key&&(e.key=this.key.key),"."!==this.peers[0].separator&&(e.options={...e.options,separator:this.peers[0].separator}),this.options.isPresent&&(e.options={...e.options,isPresent:this.options.isPresent}),e}},_.Keys=class extends Array{concat(e){const t=this.slice(),o=new Map;for(let e=0;e<t.length;++e)o.set(t[e].key,e);for(const n of e){const e=n.key,r=o.get(e);void 0!==r?t[r]={key:e,schema:t[r].schema.concat(n.schema)}:t.push(n)}return t}}},8785:(e,t,o)=>{"use strict";const n=o(375),r=o(8068),i=o(8160),a=o(3292),s=o(6354),l={};e.exports=r.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(e,t)=>e.ref(t),validate(e,{schema:t,state:o,prefs:r}){n(t.$_terms.link,"Uninitialized link schema");const i=l.generate(t,e,o,r),a=t.$_terms.link[0].ref;return i.$_validate(e,o.nest(i,`link:${a.display}:${i.type}`),r)},generate:(e,t,o,n)=>l.generate(e,t,o,n),rules:{ref:{method(e){n(!this.$_terms.link,"Cannot reinitialize schema"),e=a.ref(e),n("value"===e.type||"local"===e.type,"Invalid reference type:",e.type),n("local"===e.type||"root"===e.ancestor||e.ancestor>0,"Link cannot reference itself");const t=this.clone();return t.$_terms.link=[{ref:e}],t}},relative:{method(e=!0){return this.$_setFlag("relative",e)}}},overrides:{concat(e){n(this.$_terms.link,"Uninitialized link schema"),n(i.isSchema(e),"Invalid schema object"),n("link"!==e.type,"Cannot merge type link with another link");const t=this.clone();return t.$_terms.whens||(t.$_terms.whens=[]),t.$_terms.whens.push({concat:e}),t.$_mutateRebuild()}},manifest:{build:(e,t)=>(n(t.link,"Invalid link description missing link"),e.ref(t.link))}}),l.generate=function(e,t,o,n){let r=o.mainstay.links.get(e);if(r)return r._generate(t,o,n).schema;const i=e.$_terms.link[0].ref,{perspective:a,path:s}=l.perspective(i,o);l.assert(a,"which is outside of schema boundaries",i,e,o,n);try{r=s.length?a.$_reach(s):a}catch(t){l.assert(!1,"to non-existing schema",i,e,o,n)}return l.assert("link"!==r.type,"which is another link",i,e,o,n),e._flags.relative||o.mainstay.links.set(e,r),r._generate(t,o,n).schema},l.perspective=function(e,t){if("local"===e.type){for(const{schema:o,key:n}of t.schemas){if((o._flags.id||n)===e.path[0])return{perspective:o,path:e.path.slice(1)};if(o.$_terms.shared)for(const t of o.$_terms.shared)if(t._flags.id===e.path[0])return{perspective:t,path:e.path.slice(1)}}return{perspective:null,path:null}}return"root"===e.ancestor?{perspective:t.schemas[t.schemas.length-1].schema,path:e.path}:{perspective:t.schemas[e.ancestor]&&t.schemas[e.ancestor].schema,path:e.path}},l.assert=function(e,t,o,r,i,a){e||n(!1,`"${s.label(r._flags,i,a)}" contains link reference "${o.display}" ${t}`)}},3832:(e,t,o)=>{"use strict";const n=o(375),r=o(8068),i=o(8160),a={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(e){const t=e.toString(),o=t.indexOf("."),n=t.indexOf("e");return(o<0?0:(n<0?t.length:n)-o-1)+(n<0?0:Math.max(0,-parseInt(t.slice(n+1))))}};e.exports=r.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(e,{schema:t,error:o}){if(!e.match(a.numberRx))return;e=e.trim();const n={value:parseFloat(e)};if(0===n.value&&(n.value=0),!t._flags.unsafe)if(e.match(/e/i)){if(a.extractSignificantDigits(e)!==a.extractSignificantDigits(String(n.value)))return n.errors=o("number.unsafe"),n}else{const t=n.value.toString();if(t.match(/e/i))return n;if(t!==a.normalizeDecimal(e))return n.errors=o("number.unsafe"),n}return n}},validate(e,{schema:t,error:o,prefs:n}){if(e===1/0||e===-1/0)return{value:e,errors:o("number.infinity")};if(!i.isNumber(e))return{value:e,errors:o("number.base")};const r={value:e};if(n.convert){const e=t.$_getRule("precision");if(e){const t=Math.pow(10,e.args.limit);r.value=Math.round(r.value*t)/t}}return 0===r.value&&(r.value=0),!t._flags.unsafe&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&(r.errors=o("number.unsafe")),r},rules:{compare:{method:!1,validate:(e,t,{limit:o},{name:n,operator:r,args:a})=>i.compare(e,o,r)?e:t.error("number."+n,{limit:a.limit,value:e}),args:[{name:"limit",ref:!0,assert:i.isNumber,message:"must be a number"}]},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{limit:e},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(e,t)=>Math.trunc(e)-e==0?e:t.error("number.integer")},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{limit:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{limit:e},operator:">="})}},multiple:{method(e){const t="number"==typeof e?a.decimalPlaces(e):null,o=Math.pow(10,t);return this.$_addRule({name:"multiple",args:{base:e,baseDecimalPlace:t,pfactor:o}})},validate:(e,t,{base:o,baseDecimalPlace:n,pfactor:r},i)=>a.decimalPlaces(e)>n?t.error("number.multiple",{multiple:i.args.base,value:e}):Math.round(r*e)%Math.round(r*o)==0?e:t.error("number.multiple",{multiple:i.args.base,value:e}),args:[{name:"base",ref:!0,assert:e=>"number"==typeof e&&isFinite(e)&&e>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(e,t)=>Number.isSafeInteger(e)&&e>=0&&e<=65535?e:t.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(e){return n(Number.isSafeInteger(e),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:e}})},validate(e,t,{limit:o}){const n=e.toString().match(a.precisionRx);return Math.max((n[1]?n[1].length:0)-(n[2]?parseInt(n[2],10):0),0)<=o?e:t.error("number.precision",{limit:o,value:e})},convert:!0},sign:{method(e){return n(["negative","positive"].includes(e),"Invalid sign",e),this.$_addRule({name:"sign",args:{sign:e}})},validate:(e,t,{sign:o})=>"negative"===o&&e<0||"positive"===o&&e>0?e:t.error(`number.${o}`)},unsafe:{method(e=!0){return n("boolean"==typeof e,"enabled must be a boolean"),this.$_setFlag("unsafe",e)}}},cast:{string:{from:e=>"number"==typeof e,to:(e,t)=>e.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),a.extractSignificantDigits=function(e){return e.replace(a.exponentialPartRegex,"").replace(a.dotRegex,"").replace(a.trailingZerosRegex,"").replace(a.leadingSignAndZerosRegex,"")},a.normalizeDecimal=function(e){return(e=e.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&e.endsWith("0")&&(e=e.replace(/0+$/,"")),"-0"===e?"0":e}},8966:(e,t,o)=>{"use strict";const n=o(7824);e.exports=n.extend({type:"object",cast:{map:{from:e=>e&&"object"==typeof e,to:(e,t)=>new Map(Object.entries(e))}}})},7417:(e,t,o)=>{"use strict";const n=o(375),r=o(5380),i=o(1745),a=o(9959),s=o(6064),l=o(9926),c=o(5752),p=o(8068),u=o(8160),d={tlds:l instanceof Set&&{tlds:{allow:l,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:a.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};e.exports=p.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(e,{schema:t,state:o,prefs:n}){const r=t.$_getRule("normalize");r&&(e=e.normalize(r.args.form));const i=t.$_getRule("case");i&&(e="upper"===i.args.direction?e.toLocaleUpperCase():e.toLocaleLowerCase());const a=t.$_getRule("trim");if(a&&a.args.enabled&&(e=e.trim()),t.$_terms.replacements)for(const o of t.$_terms.replacements)e=e.replace(o.pattern,o.replacement);const s=t.$_getRule("hex");if(s&&s.args.options.byteAligned&&e.length%2!=0&&(e=`0${e}`),t.$_getRule("isoDate")){const t=d.isoDate(e);t&&(e=t)}if(t._flags.truncate){const r=t.$_getRule("max");if(r){let i=r.args.limit;if(u.isResolvable(i)&&(i=i.resolve(e,o,n),!u.limit(i)))return{value:e,errors:t.$_createError("any.ref",i,{ref:r.args.limit,arg:"limit",reason:"must be a positive integer"},o,n)};e=e.slice(0,i)}}return{value:e}}},validate(e,{schema:t,error:o}){if("string"!=typeof e)return{value:e,errors:o("string.base")};if(""===e){const n=t.$_getRule("min");if(n&&0===n.args.limit)return;return{value:e,errors:o("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(e,t)=>/^[a-zA-Z0-9]+$/.test(e)?e:t.error("string.alphanum")},base64:{method(e={}){return u.assertOptions(e,["paddingRequired","urlSafe"]),e={urlSafe:!1,paddingRequired:!0,...e},n("boolean"==typeof e.paddingRequired,"paddingRequired must be boolean"),n("boolean"==typeof e.urlSafe,"urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:e}})},validate:(e,t,{options:o})=>d.base64Regex[o.paddingRequired][o.urlSafe].test(e)?e:t.error("string.base64")},case:{method(e){return n(["lower","upper"].includes(e),"Invalid case:",e),this.$_addRule({name:"case",args:{direction:e}})},validate:(e,t,{direction:o})=>"lower"===o&&e===e.toLocaleLowerCase()||"upper"===o&&e===e.toLocaleUpperCase()?e:t.error(`string.${o}case`),convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(e,t){let o=e.length,n=0,r=1;for(;o--;){const t=e.charAt(o)*r;n+=t-9*(t>9),r^=3}return n>0&&n%10==0?e:t.error("string.creditCard")}},dataUri:{method(e={}){return u.assertOptions(e,["paddingRequired"]),e={paddingRequired:!0,...e},n("boolean"==typeof e.paddingRequired,"paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:e}})},validate(e,t,{options:o}){const n=e.match(d.dataUriRegex);if(n){if(!n[2])return e;if("base64"!==n[2])return e;if(d.base64Regex[o.paddingRequired].false.test(n[3]))return e}return t.error("string.dataUri")}},domain:{method(e){e&&u.assertOptions(e,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const t=d.addressOptions(e);return this.$_addRule({name:"domain",args:{options:e},address:t})},validate:(e,t,o,{address:n})=>r.isValid(e,n)?e:t.error("string.domain")},email:{method(e={}){u.assertOptions(e,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),n(void 0===e.multiple||"boolean"==typeof e.multiple,"multiple option must be an boolean");const t=d.addressOptions(e),o=new RegExp(`\\s*[${e.separator?s(e.separator):","}]\\s*`);return this.$_addRule({name:"email",args:{options:e},regex:o,address:t})},validate(e,t,{options:o},{regex:n,address:r}){const a=o.multiple?e.split(n):[e],s=[];for(const e of a)i.isValid(e,r)||s.push(e);return s.length?t.error("string.email",{value:e,invalids:s}):e}},guid:{alias:"uuid",method(e={}){u.assertOptions(e,["version","separator"]);let t="";if(e.version){const o=[].concat(e.version);n(o.length>=1,"version must have at least 1 valid version specified");const r=new Set;for(let e=0;e<o.length;++e){const i=o[e];n("string"==typeof i,"version at position "+e+" must be a string");const a=d.guidVersions[i.toLowerCase()];n(a,"version at position "+e+" must be one of "+Object.keys(d.guidVersions).join(", ")),n(!r.has(a),"version at position "+e+" must not be a duplicate"),t+=a,r.add(a)}}n(d.guidSeparators.has(e.separator),'separator must be one of true, false, "-", or ":"');const o=void 0===e.separator?"[:-]?":!0===e.separator?"[:-]":!1===e.separator?"[]?":`\\${e.separator}`,r=new RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${o})[0-9A-F]{4}\\2?[${t||"0-9A-F"}][0-9A-F]{3}\\2?[${t?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:e},regex:r})},validate(e,t,o,{regex:n}){const r=n.exec(e);return r?d.guidBrackets[r[1]]!==r[r.length-1]?t.error("string.guid"):e:t.error("string.guid")}},hex:{method(e={}){return u.assertOptions(e,["byteAligned","prefix"]),e={byteAligned:!1,prefix:!1,...e},n("boolean"==typeof e.byteAligned,"byteAligned must be boolean"),n("boolean"==typeof e.prefix||"optional"===e.prefix,'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:e}})},validate:(e,t,{options:o})=>("optional"===o.prefix?d.hexRegex.withOptionalPrefix:!0===o.prefix?d.hexRegex.withPrefix:d.hexRegex.withoutPrefix).test(e)?o.byteAligned&&e.length%2!=0?t.error("string.hexAlign"):e:t.error("string.hex")},hostname:{method(){return this.$_addRule("hostname")},validate:(e,t)=>r.isValid(e,{minDomainSegments:1})||d.ipRegex.test(e)?e:t.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(e={}){u.assertOptions(e,["cidr","version"]);const{cidr:t,versions:o,regex:n}=a.regex(e),r=e.version?o:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:t,version:r}},regex:n})},validate:(e,t,{options:o},{regex:n})=>n.test(e)?e:o.version?t.error("string.ipVersion",{value:e,cidr:o.cidr,version:o.version}):t.error("string.ip",{value:e,cidr:o.cidr})},isoDate:{method(){return this.$_addRule("isoDate")},validate:(e,{error:t})=>d.isoDate(e)?e:t("string.isoDate")},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(e,t)=>d.isoDurationRegex.test(e)?e:t.error("string.isoDuration")},length:{method(e,t){return d.length(this,"length",e,"=",t)},validate(e,t,{limit:o,encoding:n},{name:r,operator:i,args:a}){const s=!n&&e.length;return u.compare(s,o,i)?e:t.error("string."+r,{limit:a.limit,value:e,encoding:n})},args:[{name:"limit",ref:!0,assert:u.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(e,t){return d.length(this,"max",e,"<=",t)},args:["limit","encoding"]},min:{method(e,t){return d.length(this,"min",e,">=",t)},args:["limit","encoding"]},normalize:{method(e="NFC"){return n(d.normalizationForms.includes(e),"normalization form must be one of "+d.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:e}})},validate:(e,{error:t},{form:o})=>e===e.normalize(o)?e:t("string.normalize",{value:e,form:o}),convert:!0},pattern:{alias:"regex",method(e,t={}){n(e instanceof RegExp,"regex must be a RegExp"),n(!e.flags.includes("g")&&!e.flags.includes("y"),"regex should not use global or sticky mode"),"string"==typeof t&&(t={name:t}),u.assertOptions(t,["invert","name"]);const o=["string.pattern",t.invert?".invert":"",t.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:e,options:t},errorCode:o})},validate:(e,t,{regex:o,options:n},{errorCode:r})=>o.test(e)^n.invert?e:t.error(r,{name:n.name,regex:o,value:e}),args:["regex","options"],multi:!0},replace:{method(e,t){"string"==typeof e&&(e=new RegExp(s(e),"g")),n(e instanceof RegExp,"pattern must be a RegExp"),n("string"==typeof t,"replacement must be a String");const o=this.clone();return o.$_terms.replacements||(o.$_terms.replacements=[]),o.$_terms.replacements.push({pattern:e,replacement:t}),o}},token:{method(){return this.$_addRule("token")},validate:(e,t)=>/^\w+$/.test(e)?e:t.error("string.token")},trim:{method(e=!0){return n("boolean"==typeof e,"enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:e}})},validate:(e,t,{enabled:o})=>o&&e!==e.trim()?t.error("string.trim"):e,convert:!0},truncate:{method(e=!0){return n("boolean"==typeof e,"enabled must be a boolean"),this.$_setFlag("truncate",e)}},uppercase:{method(){return this.case("upper")}},uri:{method(e={}){u.assertOptions(e,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),e.domain&&u.assertOptions(e.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:t,scheme:o}=c.regex(e),n=e.domain?d.addressOptions(e.domain):null;return this.$_addRule({name:"uri",args:{options:e},regex:t,domain:n,scheme:o})},validate(e,t,{options:o},{regex:n,domain:i,scheme:a}){if(["http:/","https:/"].includes(e))return t.error("string.uri");let s=n.exec(e);if(!s&&t.prefs.convert&&o.encodeUri){const t=encodeURI(e);s=n.exec(t),s&&(e=t)}if(s){const n=s[1]||s[2];return!i||o.allowRelative&&!n||r.isValid(n,i)?e:t.error("string.domain",{value:n})}return o.relativeOnly?t.error("string.uriRelativeOnly"):o.scheme?t.error("string.uriCustomScheme",{scheme:a,value:e}):t.error("string.uri")}}},manifest:{build(e,t){if(t.replacements)for(const{pattern:o,replacement:n}of t.replacements)e=e.replace(o,n);return e}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),d.addressOptions=function(e){if(!e)return d.tlds||e;if(n(void 0===e.minDomainSegments||Number.isSafeInteger(e.minDomainSegments)&&e.minDomainSegments>0,"minDomainSegments must be a positive integer"),n(void 0===e.maxDomainSegments||Number.isSafeInteger(e.maxDomainSegments)&&e.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),!1===e.tlds)return e;if(!0===e.tlds||void 0===e.tlds)return n(d.tlds,"Built-in TLD list disabled"),Object.assign({},e,d.tlds);n("object"==typeof e.tlds,"tlds must be true, false, or an object");const t=e.tlds.deny;if(t)return Array.isArray(t)&&(e=Object.assign({},e,{tlds:{deny:new Set(t)}})),n(e.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),n(!e.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),d.validateTlds(e.tlds.deny,"tlds.deny"),e;const o=e.tlds.allow;return o?!0===o?(n(d.tlds,"Built-in TLD list disabled"),Object.assign({},e,d.tlds)):(Array.isArray(o)&&(e=Object.assign({},e,{tlds:{allow:new Set(o)}})),n(e.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),d.validateTlds(e.tlds.allow,"tlds.allow"),e):e},d.validateTlds=function(e,t){for(const o of e)n(r.isValid(o,{minDomainSegments:1,maxDomainSegments:1}),`${t} must contain valid top level domain names`)},d.isoDate=function(e){if(!u.isIsoDate(e))return null;/.*T.*[+-]\d\d$/.test(e)&&(e+="00");const t=new Date(e);return isNaN(t.getTime())?null:t.toISOString()},d.length=function(e,t,o,r,i){return n(!i||!1,"Invalid encoding:",i),e.$_addRule({name:t,method:"length",args:{limit:o,encoding:i},operator:r})}},8826:(e,t,o)=>{"use strict";const n=o(375),r=o(8068),i={};i.Map=class extends Map{slice(){return new i.Map(this)}},e.exports=r.extend({type:"symbol",terms:{map:{init:new i.Map}},coerce:{method(e,{schema:t,error:o}){const n=t.$_terms.map.get(e);return n&&(e=n),t._flags.only&&"symbol"!=typeof e?{value:e,errors:o("symbol.map",{map:t.$_terms.map})}:{value:e}}},validate(e,{error:t}){if("symbol"!=typeof e)return{value:e,errors:t("symbol.base")}},rules:{map:{method(e){e&&!e[Symbol.iterator]&&"object"==typeof e&&(e=Object.entries(e)),n(e&&e[Symbol.iterator],"Iterable must be an iterable or object");const t=this.clone(),o=[];for(const r of e){n(r&&r[Symbol.iterator],"Entry must be an iterable");const[e,i]=r;n("object"!=typeof e&&"function"!=typeof e&&"symbol"!=typeof e,"Key must not be of type object, function, or Symbol"),n("symbol"==typeof i,"Value must be a Symbol"),t.$_terms.map.set(e,i),o.push(i)}return t.valid(...o)}}},manifest:{build:(e,t)=>(t.map&&(e=e.map(t.map)),e)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(e,t,o)=>{"use strict";const n=o(375),r=o(8571),i=o(738),a=o(9621),s=o(8160),l=o(6354),c=o(493),p={result:Symbol("result")};t.entry=function(e,t,o){let r=s.defaults;o&&(n(void 0===o.warnings,"Cannot override warnings preference in synchronous validation"),n(void 0===o.artifacts,"Cannot override artifacts preference in synchronous validation"),r=s.preferences(s.defaults,o));const i=p.entry(e,t,r);n(!i.mainstay.externals.length,"Schema with external rules must use validateAsync()");const a={value:i.value};return i.error&&(a.error=i.error),i.mainstay.warnings.length&&(a.warning=l.details(i.mainstay.warnings)),i.mainstay.debug&&(a.debug=i.mainstay.debug),i.mainstay.artifacts&&(a.artifacts=i.mainstay.artifacts),a},t.entryAsync=async function(e,t,o){let n=s.defaults;o&&(n=s.preferences(s.defaults,o));const r=p.entry(e,t,n),i=r.mainstay;if(r.error)throw i.debug&&(r.error.debug=i.debug),r.error;if(i.externals.length){let t=r.value;const c=[];for(const r of i.externals){const u=r.state.path,d="link"===r.schema.type?i.links.get(r.schema):null;let _,m,h=t;const f=u.length?[t]:[],y=u.length?a(e,u):e;if(u.length){_=u[u.length-1];let e=t;for(const t of u.slice(0,-1))e=e[t],f.unshift(e);m=f[0],h=m[_]}try{const e=(e,t)=>(d||r.schema).$_createError(e,h,t,r.state,n),a=await r.method(h,{schema:r.schema,linked:d,state:r.state,prefs:o,original:y,error:e,errorsArray:p.errorsArray,warn:(e,t)=>i.warnings.push((d||r.schema).$_createError(e,h,t,r.state,n)),message:(e,t)=>(d||r.schema).$_createError("external",h,t,r.state,n,{messages:e})});if(void 0===a||a===h)continue;if(a instanceof l.Report){if(i.tracer.log(r.schema,r.state,"rule","external","error"),c.push(a),n.abortEarly)break;continue}if(Array.isArray(a)&&a[s.symbols.errors]){if(i.tracer.log(r.schema,r.state,"rule","external","error"),c.push(...a),n.abortEarly)break;continue}m?(i.tracer.value(r.state,"rule",h,a,"external"),m[_]=a):(i.tracer.value(r.state,"rule",t,a,"external"),t=a)}catch(e){throw n.errors.label&&(e.message+=` (${r.label})`),e}}if(r.value=t,c.length)throw r.error=l.process(c,e,n),i.debug&&(r.error.debug=i.debug),r.error}if(!n.warnings&&!n.debug&&!n.artifacts)return r.value;const c={value:r.value};return i.warnings.length&&(c.warning=l.details(i.warnings)),i.debug&&(c.debug=i.debug),i.artifacts&&(c.artifacts=i.artifacts),c},p.Mainstay=class{constructor(e,t,o){this.externals=[],this.warnings=[],this.tracer=e,this.debug=t,this.links=o,this.shadow=null,this.artifacts=null,this._snapshots=[]}snapshot(){this._snapshots.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const e=this._snapshots.pop();this.externals=e.externals,this.warnings=e.warnings}commit(){this._snapshots.pop()}},p.entry=function(e,o,n){const{tracer:r,cleanup:i}=p.tracer(o,n),a=n.debug?[]:null,s=o._ids._schemaChain?new Map:null,u=new p.Mainstay(r,a,s),d=o._ids._schemaChain?[{schema:o}]:null,_=new c([],[],{mainstay:u,schemas:d}),m=t.validate(e,o,_,n);i&&o.$_root.untrace();const h=l.process(m.errors,e,n);return{value:m.value,error:h,mainstay:u}},p.tracer=function(e,t){return e.$_root._tracer?{tracer:e.$_root._tracer._register(e)}:t.debug?(n(e.$_root.trace,"Debug mode not supported"),{tracer:e.$_root.trace()._register(e),cleanup:!0}):{tracer:p.ignore}},t.validate=function(e,t,o,n,r={}){if(t.$_terms.whens&&(t=t._generate(e,o,n).schema),t._preferences&&(n=p.prefs(t,n)),t._cache&&n.cache){const n=t._cache.get(e);if(o.mainstay.tracer.debug(o,"validate","cached",!!n),n)return n}const i=(r,i,a)=>t.$_createError(r,e,i,a||o,n),a={original:e,prefs:n,schema:t,state:o,error:i,errorsArray:p.errorsArray,warn:(e,t,n)=>o.mainstay.warnings.push(i(e,t,n)),message:(r,i)=>t.$_createError("custom",e,i,o,n,{messages:r})};o.mainstay.tracer.entry(t,o);const l=t._definition;if(l.prepare&&void 0!==e&&n.convert){const t=l.prepare(e,a);if(t){if(o.mainstay.tracer.value(o,"prepare",e,t.value),t.errors)return p.finalize(t.value,[].concat(t.errors),a);e=t.value}}if(l.coerce&&void 0!==e&&n.convert&&(!l.coerce.from||l.coerce.from.includes(typeof e))){const t=l.coerce.method(e,a);if(t){if(o.mainstay.tracer.value(o,"coerced",e,t.value),t.errors)return p.finalize(t.value,[].concat(t.errors),a);e=t.value}}const c=t._flags.empty;c&&c.$_match(p.trim(e,t),o.nest(c),s.defaults)&&(o.mainstay.tracer.value(o,"empty",e,void 0),e=void 0);const u=r.presence||t._flags.presence||(t._flags._endedSwitch?null:n.presence);if(void 0===e){if("forbidden"===u)return p.finalize(e,null,a);if("required"===u)return p.finalize(e,[t.$_createError("any.required",e,null,o,n)],a);if("optional"===u){if(t._flags.default!==s.symbols.deepDefault)return p.finalize(e,null,a);o.mainstay.tracer.value(o,"default",e,{}),e={}}}else if("forbidden"===u)return p.finalize(e,[t.$_createError("any.unknown",e,null,o,n)],a);const d=[];if(t._valids){const r=t._valids.get(e,o,n,t._flags.insensitive);if(r)return n.convert&&(o.mainstay.tracer.value(o,"valids",e,r.value),e=r.value),o.mainstay.tracer.filter(t,o,"valid",r),p.finalize(e,null,a);if(t._flags.only){const r=t.$_createError("any.only",e,{valids:t._valids.values({display:!0})},o,n);if(n.abortEarly)return p.finalize(e,[r],a);d.push(r)}}if(t._invalids){const r=t._invalids.get(e,o,n,t._flags.insensitive);if(r){o.mainstay.tracer.filter(t,o,"invalid",r);const i=t.$_createError("any.invalid",e,{invalids:t._invalids.values({display:!0})},o,n);if(n.abortEarly)return p.finalize(e,[i],a);d.push(i)}}if(l.validate){const t=l.validate(e,a);if(t&&(o.mainstay.tracer.value(o,"base",e,t.value),e=t.value,t.errors)){if(!Array.isArray(t.errors))return d.push(t.errors),p.finalize(e,d,a);if(t.errors.length)return d.push(...t.errors),p.finalize(e,d,a)}}return t._rules.length?p.rules(e,d,a):p.finalize(e,d,a)},p.rules=function(e,t,o){const{schema:n,state:r,prefs:i}=o;for(const a of n._rules){const l=n._definition.rules[a.method];if(l.convert&&i.convert){r.mainstay.tracer.log(n,r,"rule",a.name,"full");continue}let c,u=a.args;if(a._resolve.length){u=Object.assign({},u);for(const t of a._resolve){const o=l.argsByName.get(t),a=u[t].resolve(e,r,i),p=o.normalize?o.normalize(a):a,d=s.validateArg(p,null,o);if(d){c=n.$_createError("any.ref",a,{arg:t,ref:u[t],reason:d},r,i);break}u[t]=p}}c=c||l.validate(e,o,u,a);const d=p.rule(c,a);if(d.errors){if(r.mainstay.tracer.log(n,r,"rule",a.name,"error"),a.warn){r.mainstay.warnings.push(...d.errors);continue}if(i.abortEarly)return p.finalize(e,d.errors,o);t.push(...d.errors)}else r.mainstay.tracer.log(n,r,"rule",a.name,"pass"),r.mainstay.tracer.value(r,"rule",e,d.value,a.name),e=d.value}return p.finalize(e,t,o)},p.rule=function(e,t){return e instanceof l.Report?(p.error(e,t),{errors:[e],value:null}):Array.isArray(e)&&e[s.symbols.errors]?(e.forEach((e=>p.error(e,t))),{errors:e,value:null}):{errors:null,value:e}},p.error=function(e,t){return t.message&&e._setTemplate(t.message),e},p.finalize=function(e,t,o){t=t||[];const{schema:r,state:i,prefs:a}=o;if(t.length){const n=p.default("failover",void 0,t,o);void 0!==n&&(i.mainstay.tracer.value(i,"failover",e,n),e=n,t=[])}if(t.length&&r._flags.error)if("function"==typeof r._flags.error){t=r._flags.error(t),Array.isArray(t)||(t=[t]);for(const e of t)n(e instanceof Error||e instanceof l.Report,"error() must return an Error object")}else t=[r._flags.error];if(void 0===e){const n=p.default("default",e,t,o);i.mainstay.tracer.value(i,"default",e,n),e=n}if(r._flags.cast&&void 0!==e){const t=r._definition.cast[r._flags.cast];if(t.from(e)){const n=t.to(e,o);i.mainstay.tracer.value(i,"cast",e,n,r._flags.cast),e=n}}if(r.$_terms.externals&&a.externals&&!1!==a._externals)for(const{method:e}of r.$_terms.externals)i.mainstay.externals.push({method:e,schema:r,state:i,label:l.label(r._flags,i,a)});const s={value:e,errors:t.length?t:null};return r._flags.result&&(s.value="strip"===r._flags.result?void 0:o.original,i.mainstay.tracer.value(i,r._flags.result,e,s.value),i.shadow(e,r._flags.result)),r._cache&&!1!==a.cache&&!r._refs.length&&r._cache.set(o.original,s),void 0===e||s.errors||void 0===r._flags.artifact||(i.mainstay.artifacts=i.mainstay.artifacts||new Map,i.mainstay.artifacts.has(r._flags.artifact)||i.mainstay.artifacts.set(r._flags.artifact,[]),i.mainstay.artifacts.get(r._flags.artifact).push(i.path)),s},p.prefs=function(e,t){const o=t===s.defaults;return o&&e._preferences[s.symbols.prefs]?e._preferences[s.symbols.prefs]:(t=s.preferences(t,e._preferences),o&&(e._preferences[s.symbols.prefs]=t),t)},p.default=function(e,t,o,n){const{schema:i,state:a,prefs:l}=n,c=i._flags[e];if(l.noDefaults||void 0===c)return t;if(a.mainstay.tracer.log(i,a,"rule",e,"full"),!c)return c;if("function"==typeof c){const s=c.length?[r(a.ancestors[0]),n]:[];try{return c(...s)}catch(t){return void o.push(i.$_createError(`any.${e}`,null,{error:t},a,l))}}return"object"!=typeof c?c:c[s.symbols.literal]?c.literal:s.isResolvable(c)?c.resolve(t,a,l):r(c)},p.trim=function(e,t){if("string"!=typeof e)return e;const o=t.$_getRule("trim");return o&&o.args.enabled?e.trim():e},p.ignore={active:!1,debug:i,entry:i,filter:i,log:i,resolve:i,value:i},p.errorsArray=function(){const e=[];return e[s.symbols.errors]=!0,e}},2036:(e,t,o)=>{"use strict";const n=o(375),r=o(9474),i=o(8160),a={};e.exports=a.Values=class{constructor(e,t){this._values=new Set(e),this._refs=new Set(t),this._lowercase=a.lowercases(e),this._override=!1}get length(){return this._values.size+this._refs.size}add(e,t){i.isResolvable(e)?this._refs.has(e)||(this._refs.add(e),t&&t.register(e)):this.has(e,null,null,!1)||(this._values.add(e),"string"==typeof e&&this._lowercase.set(e.toLowerCase(),e))}static merge(e,t,o){if(e=e||new a.Values,t){if(t._override)return t.clone();for(const o of[...t._values,...t._refs])e.add(o)}if(o)for(const t of[...o._values,...o._refs])e.remove(t);return e.length?e:null}remove(e){i.isResolvable(e)?this._refs.delete(e):(this._values.delete(e),"string"==typeof e&&this._lowercase.delete(e.toLowerCase()))}has(e,t,o,n){return!!this.get(e,t,o,n)}get(e,t,o,n){if(!this.length)return!1;if(this._values.has(e))return{value:e};if("string"==typeof e&&e&&n){const t=this._lowercase.get(e.toLowerCase());if(t)return{value:t}}if(!this._refs.size&&"object"!=typeof e)return!1;if("object"==typeof e)for(const t of this._values)if(r(t,e))return{value:t};if(t)for(const i of this._refs){const a=i.resolve(e,t,o,null,{in:!0});if(void 0===a)continue;const s=i.in&&"object"==typeof a?Array.isArray(a)?a:Object.keys(a):[a];for(const t of s)if(typeof t==typeof e)if(n&&e&&"string"==typeof e){if(t.toLowerCase()===e.toLowerCase())return{value:t,ref:i}}else if(r(t,e))return{value:t,ref:i}}return!1}override(){this._override=!0}values(e){if(e&&e.display){const e=[];for(const t of[...this._values,...this._refs])void 0!==t&&e.push(t);return e}return Array.from([...this._values,...this._refs])}clone(){const e=new a.Values(this._values,this._refs);return e._override=this._override,e}concat(e){n(!e._override,"Cannot concat override set of values");const t=new a.Values([...this._values,...e._values],[...this._refs,...e._refs]);return t._override=this._override,t}describe(){const e=[];this._override&&e.push({override:!0});for(const t of this._values.values())e.push(t&&"object"==typeof t?{value:t}:t);for(const t of this._refs.values())e.push(t.describe());return e}},a.Values.prototype[i.symbols.values]=!0,a.Values.prototype.slice=a.Values.prototype.clone,a.lowercases=function(e){const t=new Map;if(e)for(const o of e)"string"==typeof o&&t.set(o.toLowerCase(),o);return t}},978:(e,t,o)=>{"use strict";const n=o(375),r=o(8571),i=o(1687),a=o(9621),s={};e.exports=function(e,t,o={}){if(n(e&&"object"==typeof e,"Invalid defaults value: must be an object"),n(!t||!0===t||"object"==typeof t,"Invalid source value: must be true, falsy or an object"),n("object"==typeof o,"Invalid options: must be an object"),!t)return null;if(o.shallow)return s.applyToDefaultsWithShallow(e,t,o);const a=r(e);if(!0===t)return a;const l=void 0!==o.nullOverride&&o.nullOverride;return i(a,t,{nullOverride:l,mergeArrays:!1})},s.applyToDefaultsWithShallow=function(e,t,o){const l=o.shallow;n(Array.isArray(l),"Invalid keys");const c=new Map,p=!0===t?null:new Set;for(let o of l){o=Array.isArray(o)?o:o.split(".");const n=a(e,o);n&&"object"==typeof n?c.set(n,p&&a(t,o)||n):p&&p.add(o)}const u=r(e,{},c);if(!p)return u;for(const e of p)s.reachCopy(u,t,e);const d=void 0!==o.nullOverride&&o.nullOverride;return i(u,t,{nullOverride:d,mergeArrays:!1})},s.reachCopy=function(e,t,o){for(const e of o){if(!(e in t))return;const o=t[e];if("object"!=typeof o||null===o)return;t=o}const n=t;let r=e;for(let e=0;e<o.length-1;++e){const t=o[e];"object"!=typeof r[t]&&(r[t]={}),r=r[t]}r[o[o.length-1]]=n}},375:(e,t,o)=>{"use strict";const n=o(7916);e.exports=function(e,...t){if(!e){if(1===t.length&&t[0]instanceof Error)throw t[0];throw new n(t)}}},8571:(e,t,o)=>{"use strict";const n=o(9621),r=o(4277),i=o(7043),a={needsProtoHack:new Set([r.set,r.map,r.weakSet,r.weakMap])};e.exports=a.clone=function(e,t={},o=null){if("object"!=typeof e||null===e)return e;let n=a.clone,s=o;if(t.shallow){if(!0!==t.shallow)return a.cloneWithShallow(e,t);n=e=>e}else if(s){const t=s.get(e);if(t)return t}else s=new Map;const l=r.getInternalProto(e);if(l===r.buffer)return!1;if(l===r.date)return new Date(e.getTime());if(l===r.regex)return new RegExp(e);const c=a.base(e,l,t);if(c===e)return e;if(s&&s.set(e,c),l===r.set)for(const o of e)c.add(n(o,t,s));else if(l===r.map)for(const[o,r]of e)c.set(o,n(r,t,s));const p=i.keys(e,t);for(const o of p){if("__proto__"===o)continue;if(l===r.array&&"length"===o){c.length=e.length;continue}const i=Object.getOwnPropertyDescriptor(e,o);i?i.get||i.set?Object.defineProperty(c,o,i):i.enumerable?c[o]=n(e[o],t,s):Object.defineProperty(c,o,{enumerable:!1,writable:!0,configurable:!0,value:n(e[o],t,s)}):Object.defineProperty(c,o,{enumerable:!0,writable:!0,configurable:!0,value:n(e[o],t,s)})}return c},a.cloneWithShallow=function(e,t){const o=t.shallow;(t=Object.assign({},t)).shallow=!1;const r=new Map;for(const t of o){const o=n(e,t);"object"!=typeof o&&"function"!=typeof o||r.set(o,o)}return a.clone(e,t,r)},a.base=function(e,t,o){if(!1===o.prototype)return a.needsProtoHack.has(t)?new t.constructor:t===r.array?[]:{};const n=Object.getPrototypeOf(e);if(n&&n.isImmutable)return e;if(t===r.array){const e=[];return n!==t&&Object.setPrototypeOf(e,n),e}if(a.needsProtoHack.has(t)){const e=new n.constructor;return n!==t&&Object.setPrototypeOf(e,n),e}return Object.create(n)}},9474:(e,t,o)=>{"use strict";const n=o(4277),r={mismatched:null};e.exports=function(e,t,o){return o=Object.assign({prototype:!0},o),!!r.isDeepEqual(e,t,o,[])},r.isDeepEqual=function(e,t,o,i){if(e===t)return 0!==e||1/e==1/t;const a=typeof e;if(a!==typeof t)return!1;if(null===e||null===t)return!1;if("function"===a){if(!o.deepFunction||e.toString()!==t.toString())return!1}else if("object"!==a)return e!=e&&t!=t;const s=r.getSharedType(e,t,!!o.prototype);switch(s){case n.buffer:return!1;case n.promise:return e===t;case n.regex:return e.toString()===t.toString();case r.mismatched:return!1}for(let o=i.length-1;o>=0;--o)if(i[o].isSame(e,t))return!0;i.push(new r.SeenEntry(e,t));try{return!!r.isDeepEqualObj(s,e,t,o,i)}finally{i.pop()}},r.getSharedType=function(e,t,o){if(o)return Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?r.mismatched:n.getInternalProto(e);const i=n.getInternalProto(e);return i!==n.getInternalProto(t)?r.mismatched:i},r.valueOf=function(e){const t=e.valueOf;if(void 0===t)return e;try{return t.call(e)}catch(e){return e}},r.hasOwnEnumerableProperty=function(e,t){return Object.prototype.propertyIsEnumerable.call(e,t)},r.isSetSimpleEqual=function(e,t){for(const o of Set.prototype.values.call(e))if(!Set.prototype.has.call(t,o))return!1;return!0},r.isDeepEqualObj=function(e,t,o,i,a){const{isDeepEqual:s,valueOf:l,hasOwnEnumerableProperty:c}=r,{keys:p,getOwnPropertySymbols:u}=Object;if(e===n.array){if(!i.part){if(t.length!==o.length)return!1;for(let e=0;e<t.length;++e)if(!s(t[e],o[e],i,a))return!1;return!0}for(const e of t)for(const t of o)if(s(e,t,i,a))return!0}else if(e===n.set){if(t.size!==o.size)return!1;if(!r.isSetSimpleEqual(t,o)){const e=new Set(Set.prototype.values.call(o));for(const o of Set.prototype.values.call(t)){if(e.delete(o))continue;let t=!1;for(const n of e)if(s(o,n,i,a)){e.delete(n),t=!0;break}if(!t)return!1}}}else if(e===n.map){if(t.size!==o.size)return!1;for(const[e,n]of Map.prototype.entries.call(t)){if(void 0===n&&!Map.prototype.has.call(o,e))return!1;if(!s(n,Map.prototype.get.call(o,e),i,a))return!1}}else if(e===n.error&&(t.name!==o.name||t.message!==o.message))return!1;const d=l(t),_=l(o);if((t!==d||o!==_)&&!s(d,_,i,a))return!1;const m=p(t);if(!i.part&&m.length!==p(o).length&&!i.skip)return!1;let h=0;for(const e of m)if(i.skip&&i.skip.includes(e))void 0===o[e]&&++h;else{if(!c(o,e))return!1;if(!s(t[e],o[e],i,a))return!1}if(!i.part&&m.length-h!==p(o).length)return!1;if(!1!==i.symbols){const e=u(t),n=new Set(u(o));for(const r of e){if(!i.skip||!i.skip.includes(r))if(c(t,r)){if(!c(o,r))return!1;if(!s(t[r],o[r],i,a))return!1}else if(c(o,r))return!1;n.delete(r)}for(const e of n)if(c(o,e))return!1}return!0},r.SeenEntry=class{constructor(e,t){this.obj=e,this.ref=t}isSame(e,t){return this.obj===e&&this.ref===t}}},7916:(e,t,o)=>{"use strict";const n=o(8761);e.exports=class extends Error{constructor(e){super(e.filter((e=>""!==e)).map((e=>"string"==typeof e?e:e instanceof Error?e.message:n(e))).join(" ")||"Unknown error"),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t.assert)}}},5277:e=>{"use strict";const t={};e.exports=function(e){if(!e)return"";let o="";for(let n=0;n<e.length;++n){const r=e.charCodeAt(n);t.isSafe(r)?o+=e[n]:o+=t.escapeHtmlChar(r)}return o},t.escapeHtmlChar=function(e){return t.namedHtml.get(e)||(e>=256?"&#"+e+";":`&#x${e.toString(16).padStart(2,"0")};`)},t.isSafe=function(e){return t.safeCharCodes.has(e)},t.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),t.safeCharCodes=function(){const e=new Set;for(let t=32;t<123;++t)(t>=97||t>=65&&t<=90||t>=48&&t<=57||32===t||46===t||44===t||45===t||58===t||95===t)&&e.add(t);return e}()},6064:e=>{"use strict";e.exports=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:e=>{"use strict";e.exports=function(){}},1687:(e,t,o)=>{"use strict";const n=o(375),r=o(8571),i=o(7043),a={};e.exports=a.merge=function(e,t,o){if(n(e&&"object"==typeof e,"Invalid target value: must be an object"),n(null==t||"object"==typeof t,"Invalid source value: must be null, undefined, or an object"),!t)return e;if(o=Object.assign({nullOverride:!0,mergeArrays:!0},o),Array.isArray(t)){n(Array.isArray(e),"Cannot merge array onto an object"),o.mergeArrays||(e.length=0);for(let n=0;n<t.length;++n)e.push(r(t[n],{symbols:o.symbols}));return e}const s=i.keys(t,o);for(let n=0;n<s.length;++n){const i=s[n];if("__proto__"===i||!Object.prototype.propertyIsEnumerable.call(t,i))continue;const l=t[i];if(l&&"object"==typeof l){if(e[i]===l)continue;!e[i]||"object"!=typeof e[i]||Array.isArray(e[i])!==Array.isArray(l)||l instanceof Date||l instanceof RegExp?e[i]=r(l,{symbols:o.symbols}):a.merge(e[i],l,o)}else(null!=l||o.nullOverride)&&(e[i]=l)}return e}},9621:(e,t,o)=>{"use strict";const n=o(375),r={};e.exports=function(e,t,o){if(!1===t||null==t)return e;"string"==typeof(o=o||{})&&(o={separator:o});const i=Array.isArray(t);n(!i||!o.separator,"Separator option is not valid for array-based chain");const a=i?t:t.split(o.separator||".");let s=e;for(let e=0;e<a.length;++e){let i=a[e];const l=o.iterables&&r.iterables(s);if(Array.isArray(s)||"set"===l){const e=Number(i);Number.isInteger(e)&&(i=e<0?s.length+e:e)}if(!s||"function"==typeof s&&!1===o.functions||!l&&void 0===s[i]){n(!o.strict||e+1===a.length,"Missing segment",i,"in reach path ",t),n("object"==typeof s||!0===o.functions||"function"!=typeof s,"Invalid segment",i,"in reach path ",t),s=o.default;break}s=l?"set"===l?[...s][i]:s.get(i):s[i]}return s},r.iterables=function(e){return e instanceof Set?"set":e instanceof Map?"map":void 0}},8761:e=>{"use strict";e.exports=function(...e){try{return JSON.stringify(...e)}catch(e){return"[Cannot display object: "+e.message+"]"}}},4277:(e,t)=>{"use strict";const o={};t=e.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},o.typeMap=new Map([["[object Error]",t.error],["[object Map]",t.map],["[object Promise]",t.promise],["[object Set]",t.set],["[object WeakMap]",t.weakMap],["[object WeakSet]",t.weakSet]]),t.getInternalProto=function(e){if(Array.isArray(e))return t.array;if(e instanceof Date)return t.date;if(e instanceof RegExp)return t.regex;if(e instanceof Error)return t.error;const n=Object.prototype.toString.call(e);return o.typeMap.get(n)||t.generic}},7043:(e,t)=>{"use strict";t.keys=function(e,t={}){return!1!==t.symbols?Reflect.ownKeys(e):Object.getOwnPropertyNames(e)}},3652:(e,t,o)=>{"use strict";const n=o(375),r={};t.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(e,t){const o=[].concat((t=t||{}).before||[]),r=[].concat(t.after||[]),i=t.group||"?",a=t.sort||0;n(!o.includes(i),`Item cannot come before itself: ${i}`),n(!o.includes("?"),"Item cannot come before unassociated items"),n(!r.includes(i),`Item cannot come after itself: ${i}`),n(!r.includes("?"),"Item cannot come after unassociated items"),Array.isArray(e)||(e=[e]);for(const t of e){const e={seq:this._items.length,sort:a,before:o,after:r,group:i,node:t};this._items.push(e)}if(!t.manual){const e=this._sort();n(e,"item","?"!==i?`added into group ${i}`:"","created a dependencies error")}return this.nodes}merge(e){Array.isArray(e)||(e=[e]);for(const t of e)if(t)for(const e of t._items)this._items.push(Object.assign({},e));this._items.sort(r.mergeSort);for(let e=0;e<this._items.length;++e)this._items[e].seq=e;const t=this._sort();return n(t,"merge created a dependencies error"),this.nodes}sort(){const e=this._sort();return n(e,"sort created a dependencies error"),this.nodes}_sort(){const e={},t=Object.create(null),o=Object.create(null);for(const n of this._items){const r=n.seq,i=n.group;o[i]=o[i]||[],o[i].push(r),e[r]=n.before;for(const e of n.after)t[e]=t[e]||[],t[e].push(r)}for(const t in e){const n=[];for(const r in e[t]){const i=e[t][r];o[i]=o[i]||[],n.push(...o[i])}e[t]=n}for(const n in t)if(o[n])for(const r of o[n])e[r].push(...t[n]);const n={};for(const t in e){const o=e[t];for(const e of o)n[e]=n[e]||[],n[e].push(t)}const r={},i=[];for(let e=0;e<this._items.length;++e){let t=e;if(n[e]){t=null;for(let e=0;e<this._items.length;++e){if(!0===r[e])continue;n[e]||(n[e]=[]);const o=n[e].length;let i=0;for(let t=0;t<o;++t)r[n[e][t]]&&++i;if(i===o){t=e;break}}}null!==t&&(r[t]=!0,i.push(t))}if(i.length!==this._items.length)return!1;const a={};for(const e of this._items)a[e.seq]=e;this._items=[],this.nodes=[];for(const e of i){const t=a[e];this.nodes.push(t.node),this._items.push(t)}return!0}},r.mergeSort=(e,t)=>e.sort===t.sort?0:e.sort<t.sort?-1:1},5380:(e,t,o)=>{"use strict";const n=o(443),r=o(2178),i={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:n.URL||URL};t.analyze=function(e,t={}){if(!e)return r.code("DOMAIN_NON_EMPTY_STRING");if("string"!=typeof e)throw new Error("Invalid input: domain must be a string");if(e.length>256)return r.code("DOMAIN_TOO_LONG");if(i.nonAsciiRx.test(e)){if(!1===t.allowUnicode)return r.code("DOMAIN_INVALID_UNICODE_CHARS");e=e.normalize("NFC")}if(i.domainControlRx.test(e))return r.code("DOMAIN_INVALID_CHARS");e=i.punycode(e),t.allowFullyQualified&&"."===e[e.length-1]&&(e=e.slice(0,-1));const o=t.minDomainSegments||i.minDomainSegments,n=e.split(".");if(n.length<o)return r.code("DOMAIN_SEGMENTS_COUNT");if(t.maxDomainSegments&&n.length>t.maxDomainSegments)return r.code("DOMAIN_SEGMENTS_COUNT_MAX");const a=t.tlds;if(a){const e=n[n.length-1].toLowerCase();if(a.deny&&a.deny.has(e)||a.allow&&!a.allow.has(e))return r.code("DOMAIN_FORBIDDEN_TLDS")}for(let e=0;e<n.length;++e){const t=n[e];if(!t.length)return r.code("DOMAIN_EMPTY_SEGMENT");if(t.length>63)return r.code("DOMAIN_LONG_SEGMENT");if(e<n.length-1){if(!i.domainSegmentRx.test(t))return r.code("DOMAIN_INVALID_CHARS")}else if(!i.tldSegmentRx.test(t))return r.code("DOMAIN_INVALID_TLDS_CHARS")}return null},t.isValid=function(e,o){return!t.analyze(e,o)},i.punycode=function(e){e.includes("%")&&(e=e.replace(/%/g,"%25"));try{return new i.URL(`http://${e}`).host}catch(t){return e}}},1745:(e,t,o)=>{"use strict";const n=o(9848),r=o(5380),i=o(2178),a={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(n.TextEncoder||TextEncoder)};t.analyze=function(e,t){return a.email(e,t)},t.isValid=function(e,t){return!a.email(e,t)},a.email=function(e,t={}){if("string"!=typeof e)throw new Error("Invalid input: email must be a string");if(!e)return i.code("EMPTY_STRING");const o=!a.nonAsciiRx.test(e);if(!o){if(!1===t.allowUnicode)return i.code("FORBIDDEN_UNICODE");e=e.normalize("NFC")}const n=e.split("@");if(2!==n.length)return n.length>2?i.code("MULTIPLE_AT_CHAR"):i.code("MISSING_AT_CHAR");const[s,l]=n;if(!s)return i.code("EMPTY_LOCAL");if(!t.ignoreLength){if(e.length>254)return i.code("ADDRESS_TOO_LONG");if(a.encoder.encode(s).length>64)return i.code("LOCAL_TOO_LONG")}return a.local(s,o)||r.analyze(l,t)},a.local=function(e,t){const o=e.split(".");for(const e of o){if(!e.length)return i.code("EMPTY_LOCAL_SEGMENT");if(t){if(!a.atextRx.test(e))return i.code("INVALID_LOCAL_CHARS")}else for(const t of e){if(a.atextRx.test(t))continue;const e=a.binary(t);if(!a.atomRx.test(e))return i.code("INVALID_LOCAL_CHARS")}}},a.binary=function(e){return Array.from(a.encoder.encode(e)).map((e=>String.fromCharCode(e))).join("")},a.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,a.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(e,t)=>{"use strict";t.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},t.code=function(e){return{code:e,error:t.codes[e]}}},9959:(e,t,o)=>{"use strict";const n=o(375),r=o(5752);t.regex=function(e={}){n(void 0===e.cidr||"string"==typeof e.cidr,"options.cidr must be a string");const t=e.cidr?e.cidr.toLowerCase():"optional";n(["required","optional","forbidden"].includes(t),"options.cidr must be one of required, optional, forbidden"),n(void 0===e.version||"string"==typeof e.version||Array.isArray(e.version),"options.version must be a string or an array of string");let o=e.version||["ipv4","ipv6","ipvfuture"];Array.isArray(o)||(o=[o]),n(o.length>=1,"options.version must have at least 1 version specified");for(let e=0;e<o.length;++e)n("string"==typeof o[e],"options.version must only contain strings"),o[e]=o[e].toLowerCase(),n(["ipv4","ipv6","ipvfuture"].includes(o[e]),"options.version contains unknown version "+o[e]+" - must be one of ipv4, ipv6, ipvfuture");o=Array.from(new Set(o));const i=`(?:${o.map((e=>{if("forbidden"===t)return r.ip[e];const o=`\\/${"ipv4"===e?r.ip.v4Cidr:r.ip.v6Cidr}`;return"required"===t?`${r.ip[e]}${o}`:`${r.ip[e]}(?:${o})?`})).join("|")})`,a=new RegExp(`^${i}$`);return{cidr:t,versions:o,regex:a,raw:i}}},5752:(e,t,o)=>{"use strict";const n=o(375),r=o(6064),i={generate:function(){const e={},t="\\dA-Fa-f",o="["+t+"]",n="\\w-\\.~",r="!\\$&'\\(\\)\\*\\+,;=",i="%"+t,a=n+i+r+":@",s="["+a+"]",l="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";e.ipv4address="(?:"+l+"\\.){3}"+l;const c=o+"{1,4}",p="(?:"+c+":"+c+"|"+e.ipv4address+")",u="(?:"+c+":){6}"+p,d="::(?:"+c+":){5}"+p,_="(?:"+c+")?::(?:"+c+":){4}"+p,m="(?:(?:"+c+":){0,1}"+c+")?::(?:"+c+":){3}"+p,h="(?:(?:"+c+":){0,2}"+c+")?::(?:"+c+":){2}"+p,f="(?:(?:"+c+":){0,3}"+c+")?::"+c+":"+p,y="(?:(?:"+c+":){0,4}"+c+")?::"+p,b="(?:(?:"+c+":){0,5}"+c+")?::"+c,g="(?:(?:"+c+":){0,6}"+c+")?::";e.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",e.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",e.ipv6address="(?:"+u+"|"+d+"|"+_+"|"+m+"|"+h+"|"+f+"|"+y+"|"+b+"|"+g+")",e.ipvFuture="v"+o+"+\\.["+n+r+":]+",e.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",e.schemeRegex=new RegExp(e.scheme);const v="["+n+i+r+":]*",S="["+n+i+r+"]{1,255}",O="(?:\\[(?:"+e.ipv6address+"|"+e.ipvFuture+")\\]|"+e.ipv4address+"|"+S+")",I="(?:"+v+"@)?"+O+"(?::\\d*)?",x="(?:"+v+"@)?("+O+")(?::\\d*)?",P=s+"*",E=s+"+",T="(?:\\/"+P+")*",C="\\/(?:"+E+T+")?",w=E+T,A="["+n+i+r+"@]+"+T,N="(?:\\/\\/\\/"+P+T+")";return e.hierPart="(?:(?:\\/\\/"+I+T+")|"+C+"|"+w+"|"+N+")",e.hierPartCapture="(?:(?:\\/\\/"+x+T+")|"+C+"|"+w+")",e.relativeRef="(?:(?:\\/\\/"+I+T+")|"+C+"|"+A+"|)",e.relativeRefCapture="(?:(?:\\/\\/"+x+T+")|"+C+"|"+A+"|)",e.query="["+a+"\\/\\?]*(?=#|$)",e.queryWithSquareBrackets="["+a+"\\[\\]\\/\\?]*(?=#|$)",e.fragment="["+a+"\\/\\?]*",e}};i.rfc3986=i.generate(),t.ip={v4Cidr:i.rfc3986.ipv4Cidr,v6Cidr:i.rfc3986.ipv6Cidr,ipv4:i.rfc3986.ipv4address,ipv6:i.rfc3986.ipv6address,ipvfuture:i.rfc3986.ipvFuture},i.createRegex=function(e){const t=i.rfc3986,o="(?:\\?"+(e.allowQuerySquareBrackets?t.queryWithSquareBrackets:t.query)+")?(?:#"+t.fragment+")?",a=e.domain?t.relativeRefCapture:t.relativeRef;if(e.relativeOnly)return i.wrap(a+o);let s="";if(e.scheme){n(e.scheme instanceof RegExp||"string"==typeof e.scheme||Array.isArray(e.scheme),"scheme must be a RegExp, String, or Array");const o=[].concat(e.scheme);n(o.length>=1,"scheme must have at least 1 scheme specified");const i=[];for(let e=0;e<o.length;++e){const a=o[e];n(a instanceof RegExp||"string"==typeof a,"scheme at position "+e+" must be a RegExp or String"),a instanceof RegExp?i.push(a.source.toString()):(n(t.schemeRegex.test(a),"scheme at position "+e+" must be a valid scheme"),i.push(r(a)))}s=i.join("|")}const l="(?:"+(s?"(?:"+s+")":t.scheme)+":"+(e.domain?t.hierPartCapture:t.hierPart)+")",c=e.allowRelative?"(?:"+l+"|"+a+")":l;return i.wrap(c+o,s)},i.wrap=function(e,t){return{raw:e=`(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])${e}`,regex:new RegExp(`^${e}$`),scheme:t}},i.uriRegex=i.createRegex({}),t.regex=function(e={}){return e.scheme||e.allowRelative||e.relativeOnly||e.allowQuerySquareBrackets||e.domain?i.createRegex(e):i.uriRegex}},1447:(e,t)=>{"use strict";const o={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};t.Parser=class{constructor(e,t={}){if(!t[o.settings]&&t.constants)for(const e in t.constants){const o=t.constants[e];if(null!==o&&!["boolean","number","string"].includes(typeof o))throw new Error(`Formula constant ${e} contains invalid ${typeof o} value type`)}this.settings=t[o.settings]?t:Object.assign({[o.settings]:!0,constants:{},functions:{}},t),this.single=null,this._parts=null,this._parse(e)}_parse(e){let n=[],r="",i=0,a=!1;const s=e=>{if(i)throw new Error("Formula missing closing parenthesis");const s=n.length?n[n.length-1]:null;if(a||r||e){if(s&&"reference"===s.type&&")"===e)return s.type="function",s.value=this._subFormula(r,s.value),void(r="");if(")"===e){const e=new t.Parser(r,this.settings);n.push({type:"segment",value:e})}else if(a){if("]"===a)return n.push({type:"reference",value:r}),void(r="");n.push({type:"literal",value:r})}else if(o.operatorCharacters.includes(r))s&&"operator"===s.type&&o.operators.includes(s.value+r)?s.value+=r:n.push({type:"operator",value:r});else if(r.match(o.numberRx))n.push({type:"constant",value:parseFloat(r)});else if(void 0!==this.settings.constants[r])n.push({type:"constant",value:this.settings.constants[r]});else{if(!r.match(o.tokenRx))throw new Error(`Formula contains invalid token: ${r}`);n.push({type:"reference",value:r})}r=""}};for(const t of e)a?t===a?(s(),a=!1):r+=t:i?"("===t?(r+=t,++i):")"===t?(--i,i?r+=t:s(t)):r+=t:t in o.literals?a=o.literals[t]:"("===t?(s(),++i):o.operatorCharacters.includes(t)?(s(),r=t,s()):" "!==t?r+=t:s();s(),n=n.map(((e,t)=>"operator"!==e.type||"-"!==e.value||t&&"operator"!==n[t-1].type?e:{type:"operator",value:"n"}));let l=!1;for(const e of n){if("operator"===e.type){if(o.operatorsPrefix.includes(e.value))continue;if(!l)throw new Error("Formula contains an operator in invalid position");if(!o.operators.includes(e.value))throw new Error(`Formula contains an unknown operator ${e.value}`)}else if(l)throw new Error("Formula missing expected operator");l=!l}if(!l)throw new Error("Formula contains invalid trailing operator");1===n.length&&["reference","literal","constant"].includes(n[0].type)&&(this.single={type:"reference"===n[0].type?"reference":"value",value:n[0].value}),this._parts=n.map((e=>{if("operator"===e.type)return o.operatorsPrefix.includes(e.value)?e:e.value;if("reference"!==e.type)return e.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(e.value))throw new Error(`Formula contains invalid reference ${e.value}`);return this.settings.reference?this.settings.reference(e.value):o.reference(e.value)}))}_subFormula(e,n){const r=this.settings.functions[n];if("function"!=typeof r)throw new Error(`Formula contains unknown function ${n}`);let i=[];if(e){let t="",r=0,a=!1;const s=()=>{if(!t)throw new Error(`Formula contains function ${n} with invalid arguments ${e}`);i.push(t),t=""};for(let n=0;n<e.length;++n){const i=e[n];a?(t+=i,i===a&&(a=!1)):i in o.literals&&!r?(t+=i,a=o.literals[i]):","!==i||r?(t+=i,"("===i?++r:")"===i&&--r):s()}s()}return i=i.map((e=>new t.Parser(e,this.settings))),function(e){const t=[];for(const o of i)t.push(o.evaluate(e));return r.call(e,...t)}}evaluate(e){const t=this._parts.slice();for(let n=t.length-2;n>=0;--n){const r=t[n];if(r&&"operator"===r.type){const i=t[n+1];t.splice(n+1,1);const a=o.evaluate(i,e);t[n]=o.single(r.value,a)}}return o.operatorsOrder.forEach((n=>{for(let r=1;r<t.length-1;)if(n.includes(t[r])){const n=t[r],i=o.evaluate(t[r-1],e),a=o.evaluate(t[r+1],e);t.splice(r,2);const s=o.calculate(n,i,a);t[r-1]=0===s?0:s}else r+=2})),o.evaluate(t[0],e)}},t.Parser.prototype[o.symbol]=!0,o.reference=function(e){return function(t){return t&&void 0!==t[e]?t[e]:null}},o.evaluate=function(e,t){return null===e?null:"function"==typeof e?e(t):e[o.symbol]?e.evaluate(t):e},o.single=function(e,t){if("!"===e)return!t;const o=-t;return 0===o?0:o},o.calculate=function(e,t,n){if("??"===e)return o.exists(t)?t:n;if("string"==typeof t||"string"==typeof n){if("+"===e)return(t=o.exists(t)?t:"")+(o.exists(n)?n:"")}else switch(e){case"^":return Math.pow(t,n);case"*":return t*n;case"/":return t/n;case"%":return t%n;case"+":return t+n;case"-":return t-n}switch(e){case"<":return t<n;case"<=":return t<=n;case">":return t>n;case">=":return t>=n;case"==":return t===n;case"!=":return t!==n;case"&&":return t&&n;case"||":return t||n}return null},o.exists=function(e){return null!=e}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:e=>{"use strict";e.exports=JSON.parse('{"version":"17.13.3"}')}},t={},function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}(5107);var e,t},e.exports=t()},32:e=>{const t=[{name:"Monday",selected:!0,allDay:!0,timeStart:"00:00",timeEnd:"23:59"},{name:"Tuesday",selected:!0,allDay:!0,timeStart:"00:00",timeEnd:"23:59"},{name:"Wednesday",selected:!0,allDay:!0,timeStart:"00:00",timeEnd:"23:59"},{name:"Thursday",selected:!0,allDay:!0,timeStart:"00:00",timeEnd:"23:59"},{name:"Friday",selected:!0,allDay:!0,timeStart:"00:00",timeEnd:"23:59"},{name:"Saturday",selected:!0,allDay:!0,timeStart:"00:00",timeEnd:"23:59"},{name:"Sunday",selected:!0,allDay:!0,timeStart:"00:00",timeEnd:"23:59"}],o={id:0,text_box_extra_price_type:0,email_box_extra_price_type:0,text_area_extra_price_type:0,number_field_extra_price_type:0,file_upload_extra_price_type:0,color_picker_extra_price_type:0,checkbox_extra_price_type:[0],dropdown_extra_price_type:[0],dropdown_thumbnail_extra_price_type:[0],radio_button_extra_price_type:[0],switch_extra_price_type:[0],swatch_extra_price_type:[0],button_extra_price_type:[0],text_box_extra_price:"",email_box_extra_price:"",text_area_extra_price:"",number_field_extra_price:"",file_upload_extra_price:"",color_picker_extra_price:"",checkbox_extra_price:[""],dropdown_extra_price:[""],dropdown_thumbnail_extra_price:[""],radio_button_extra_price:[""],switch_extra_price:[""],swatch_extra_price:[""],button_extra_price:[""],text_box_extra_variant:"",email_box_extra_variant:"",text_area_extra_variant:"",number_field_extra_variant:"",file_upload_extra_variant:"",color_picker_extra_variant:"",checkbox_extra_variant:[""],dropdown_extra_variant:[""],dropdown_thumbnail_extra_variant:[""],radio_button_extra_variant:[""],switch_extra_variant:[""],swatch_extra_variant:[""],button_extra_variant:[""]},n={id:0,option_id:0,conditional_option_label:null,conditional_option_type:null,type_contain:null,conditional_option_value:null},r={index_option:0,id:0,label_on_product:"Text box 1",label_on_cart:"Text box 1",option_type:0,placeholder_dropdown:"-- Please select --",radio_button_value:[""],checkbox_value:[""],dropdown_value:[""],dropdown_thumbnail_value:[""],swatch_label:[null],swatch_type:[0],dropdown_thumbnail_type:[0],checkbox_type:[0],radio_button_type:[0],color_value:[""],dropdown_color_value:[""],checkbox_color_value:[""],radio_button_color_value:[""],image_value:[""],checkbox_image_value:[""],radio_button_image_value:[""],dropdown_image_value:[""],cdn_image_value:[""],button_value:[""],heading_value:"",divider_value:"",popup_value:"",label_on_popup:"",switch_value:[""],required:0,hide_label:0,placeholder:"",default_value:"",help_text:"",help_text_type:0,help_text_position:0,max_value:null,min_value:null,max_selector:1,min_selector:null,inline:1,max_character:null,min_character:null,dropdown_search_bar:0,dropdown_thumbnail_search_bar:0,dropdown_multiple_select:0,extra_price:o,conditional_options_match:0,conditional_options_display:0,conditional_options:[n],disable_past_date:-1,disable_past_date_type:null,enable_cut_off_time:0,date_time_mode:"date_picker",disable_date_range:null,disable_specific_date:null,display_date_time_type:0,time_format:0,overall_format:0,date_time_config:t,helptext_option_values:[""],select_quantity:[0],sku_value:[""],min_quantity:null,max_quantity:null,file_type:"all",custom_file_type:"",instruction_value:null,max_number_file_upload:1};e.exports={defaultOptionSet:{id:0,name:"Untitled option set",priority:0,status:1,apply_to:0,customer_ids:"",customer_tags:"",product_condition_type:null,exclude_product_type:0,product_ids:"",product_collections:"",product_tags:"",exclude_product_tags:"",specific_variant_ids:"",options:[]},defaultGeneralOptionSetConfig:{customer_ids:[],customer_tags:[],product_ids:[],product_collections:[],product_tags:[],exclude_product_tags:[],specific_variant_ids:[]},defaultDateTime:{selected:!0,allDay:!0,timeStart:"00:00",timeEnd:"23:59"},defaultDateTimeConfig:t,defaultExtraPrice:o,defaultConditionalOptions:n,defaultOption:r,STOREFRONT_TOKEN_TITLE:"BSS_PO_STOREFRONT_ACCESS_TOKEN"}},694:(e,t,o)=>{const{PRICING:n}=o(338);e.exports={sortOptionsByIndexAscending:(e=[])=>e.sort(((e,t)=>e.index_option>t.index_option?1:t.index_option>e.index_option?-1:0)),isEmpty:function(e){return!(null!=e&&null!=e&&("object"!=typeof e||0!=Object.keys(e).length)&&""!=e)},toNumber:function(e,t=2){return isNaN(Number(e))?0:Number(Number(e).toFixed(t))},getDateBefore:function(e=0,t=new Date){let o=new Date(t);return new Date(o.setDate((new Date).getDate()-e))},convertUTCToGMT:function(e,t){const o=60*t,n=new Date(e.getTime()+60*o*1e3);return`${n.getUTCFullYear()}-${String(n.getUTCMonth()+1).padStart(2,"0")}-${String(n.getUTCDate()).padStart(2,"0")} ${String(n.getUTCHours()).padStart(2,"0")}:${String(n.getUTCMinutes()).padStart(2,"0")}:${String(n.getUTCSeconds()).padStart(2,"0")}`},shouldUseS3Upload:function(e){return![n.CODE.FREE,n.CODE.NEW_FREE,n.CODE.FREE_PLATINUM,n.CODE.FREE_PLATINUM_REINSTALL,n.CODE.FREE_PLATINUM_OLD,n.CODE.UNLIMITED_SPECIAL].includes(e)},isSupportFunctionExported:function(e,t){if(e){const o=e.replace(/\s+/g,"").match(/module\.exports={(.*?)}/);if(!o)return!1;const n=o[1];return new RegExp(`(?:^|[^/])${t}(,|})?`).test(n)}}}},338:e=>{const t={TEXT_BOX:0,NUMBER:1,CHECKBOX:2,DROPDOWN:3,RADIO_BUTTON:4,SWATCH:5,BUTTON:6,FILE_UPLOAD:7,DATE_PICKER:8,INSTRUCTION:9,COLOR_PICKER:10,TEXT_AREA:11,DROPDOWN_THUMBNAIL:12,EMAIL:13,HEADING:14,DIVIDER:15,POPUP:16,SWITCH:17},o={SINGLE:[t.TEXT_BOX,t.NUMBER,t.FILE_UPLOAD,t.COLOR_PICKER,t.TEXT_AREA,t.EMAIL],MULTI:[t.CHECKBOX,t.DROPDOWN,t.RADIO_BUTTON,t.SWATCH,t.BUTTON,t.DROPDOWN_THUMBNAIL,t.SWITCH],HAS_THUMBNAIL:[t.SWATCH,t.DROPDOWN_THUMBNAIL],NONE:[t.DATE_PICKER,t.INSTRUCTION,t.HEADING,t.DIVIDER,t.POPUP]},n={EXTRA_PRICE_TYPE:{[t.TEXT_BOX]:"text_box_extra_price_type",[t.NUMBER]:"number_field_extra_price_type",[t.CHECKBOX]:"checkbox_extra_price_type",[t.DROPDOWN]:"dropdown_extra_price_type",[t.RADIO_BUTTON]:"radio_button_extra_price_type",[t.SWATCH]:"swatch_extra_price_type",[t.BUTTON]:"button_extra_price_type",[t.FILE_UPLOAD]:"file_upload_extra_price_type",[t.DATE_PICKER]:"",[t.INSTRUCTION]:"",[t.COLOR_PICKER]:"color_picker_extra_price_type",[t.TEXT_AREA]:"text_area_extra_price_type",[t.DROPDOWN_THUMBNAIL]:"dropdown_thumbnail_extra_price_type",[t.EMAIL]:"email_box_extra_price_type",[t.HEADING]:"",[t.DIVIDER]:"",[t.POPUP]:"",[t.SWITCH]:"switch_extra_price_type"},EXTRA_PRICE_VALUE:{CREATE_FEE:{[t.TEXT_BOX]:"text_box_extra_price",[t.NUMBER]:"number_field_extra_price",[t.CHECKBOX]:"checkbox_extra_price",[t.DROPDOWN]:"dropdown_extra_price",[t.RADIO_BUTTON]:"radio_button_extra_price",[t.SWATCH]:"swatch_extra_price",[t.BUTTON]:"button_extra_price",[t.FILE_UPLOAD]:"file_upload_extra_price",[t.DATE_PICKER]:"",[t.INSTRUCTION]:"",[t.COLOR_PICKER]:"color_picker_extra_price",[t.TEXT_AREA]:"text_area_extra_price",[t.DROPDOWN_THUMBNAIL]:"dropdown_thumbnail_extra_price",[t.EMAIL]:"email_box_extra_price",[t.HEADING]:"",[t.DIVIDER]:"",[t.POPUP]:"",[t.SWITCH]:"switch_extra_price"},VARIANT_FEE:{[t.TEXT_BOX]:"text_box_extra_variant_price",[t.NUMBER]:"number_field_extra_variant_price",[t.CHECKBOX]:"checkbox_extra_variant_price",[t.DROPDOWN]:"dropdown_extra_variant_price",[t.RADIO_BUTTON]:"radio_button_extra_variant_price",[t.SWATCH]:"swatch_extra_variant_price",[t.BUTTON]:"button_extra_variant_price",[t.FILE_UPLOAD]:"file_upload_extra_variant_price",[t.DATE_PICKER]:"",[t.INSTRUCTION]:"",[t.COLOR_PICKER]:"color_picker_extra_variant_price",[t.TEXT_AREA]:"text_area_extra_variant_price",[t.DROPDOWN_THUMBNAIL]:"dropdown_thumbnail_extra_variant_price",[t.EMAIL]:"email_box_extra_variant_price",[t.HEADING]:"",[t.DIVIDER]:"",[t.POPUP]:"",[t.SWITCH]:"switch_extra_variant_price"},VARIANTS:{[t.TEXT_BOX]:"text_box_extra_variant",[t.NUMBER]:"number_field_extra_variant",[t.CHECKBOX]:"checkbox_extra_variant",[t.DROPDOWN]:"dropdown_extra_variant",[t.RADIO_BUTTON]:"radio_button_extra_variant",[t.SWATCH]:"swatch_extra_variant",[t.BUTTON]:"button_extra_variant",[t.FILE_UPLOAD]:"file_upload_extra_variant",[t.DATE_PICKER]:"",[t.INSTRUCTION]:"",[t.COLOR_PICKER]:"color_picker_extra_variant",[t.TEXT_AREA]:"text_area_extra_variant",[t.DROPDOWN_THUMBNAIL]:"dropdown_thumbnail_extra_variant",[t.EMAIL]:"email_box_extra_variant",[t.HEADING]:"",[t.DIVIDER]:"",[t.POPUP]:"",[t.SWITCH]:"switch_extra_variant"}},VALUES:{[t.TEXT_BOX]:"",[t.NUMBER]:"",[t.CHECKBOX]:"checkbox_value",[t.DROPDOWN]:"dropdown_value",[t.RADIO_BUTTON]:"radio_button_value",[t.SWATCH]:"swatch_label",[t.BUTTON]:"button_value",[t.FILE_UPLOAD]:"",[t.DATE_PICKER]:"",[t.INSTRUCTION]:"",[t.COLOR_PICKER]:"",[t.TEXT_AREA]:"",[t.DROPDOWN_THUMBNAIL]:"dropdown_thumbnail_value",[t.EMAIL]:"",[t.HEADING]:"",[t.DIVIDER]:"",[t.POPUP]:"",[t.SWITCH]:"switch_value"},OPTION_TYPE:{[t.TEXT_BOX]:"text_box",[t.NUMBER]:"number_field",[t.CHECKBOX]:"checkbox",[t.DROPDOWN]:"dropdown",[t.RADIO_BUTTON]:"radio_button",[t.SWATCH]:"swatch",[t.BUTTON]:"button",[t.FILE_UPLOAD]:"file_upload",[t.DATE_PICKER]:"",[t.INSTRUCTION]:"",[t.COLOR_PICKER]:"color_picker",[t.TEXT_AREA]:"text_area",[t.DROPDOWN_THUMBNAIL]:"dropdown_thumbnail",[t.EMAIL]:"email_box",[t.HEADING]:"heading",[t.DIVIDER]:"divider",[t.POPUP]:"popup",[t.SWITCH]:"switch"}};e.exports={OLD_ADDON_MARK:{CREATE_FEE:"create_fee",ASSIGN_TO_VARIANT:"assign_to_variant"},BSS_PO_ORDER_MARK:{key:"__bss_po_addons",value:"0"},EXTRA_PRICE_TYPE:{CREATE_FEE:0,ASSIGN_TO_VARIANT:1},APPLY_TO_PRODUCTS:{ALL:0,SPECIFIC_PRODUCT:1,COLLECTION:2,TAG:3,SPECIFIC_VARIANT:4},OPTION_TYPE:t,OPTION_VALUE_TYPE:o,OPTION_KEYS:n,CONDITIONAL_OPTIONS:{TYPE_CONTAIN:{IS:0,IS_NOT:1,LESS_THAN:2,GREATER_THAN:3,CONTAIN:4,NOT_CONTAIN:5},DISPLAY:{SHOW:0,HIDE:1},MATCH:{ANY:0,ALL:1}},OPTION_SETTINGS_TYPE2:{2:{valueKey:"checkbox_value",priceKey:"checkbox_extra_price",priceTypeKey:"checkbox_extra_price_type",variantKey:"checkbox_extra_variant"},3:{valueKey:"dropdown_value",priceKey:"dropdown_extra_price",priceTypeKey:"dropdown_extra_price_type",variantKey:"dropdown_extra_variant"},4:{valueKey:"radio_button_value",priceKey:"radio_button_extra_price",priceTypeKey:"radio_button_extra_price_type",variantKey:"radio_button_extra_variant"},6:{valueKey:"button_value",priceKey:"button_extra_price",priceTypeKey:"button_extra_price_type",variantKey:"button_extra_variant"},5:{valueKey:"swatch_label",priceKey:"swatch_extra_price",priceTypeKey:"swatch_extra_price_type",variantKey:"swatch_extra_variant",colorValueKey:"color_value",imageValueKey:"image_value"},12:{valueKey:"dropdown_thumbnail_value",priceKey:"dropdown_thumbnail_extra_price",priceTypeKey:"dropdown_thumbnail_extra_price_type",variantKey:"dropdown_thumbnail_extra_variant",colorValueKey:"dropdown_color_value",imageValueKey:"dropdown_image_value"},17:{valueKey:"switch_value",priceKey:"switch_extra_price",priceTypeKey:"switch_extra_price_type",variantKey:"switch_extra_variant"}},DISPLAY_STATE:{SHOW:"flex",HIDE:"none"},HELP_TEXT_TYPE:{TOOLTIP:0,TEXT:1},HELP_TEXT_POSITION:{TOP:0,BESIDE:1,BELOW:2},PRICING:{CODE:{FREE:"free",NEW_FREE:"free-2",ADVANCED:"advanced",FREE_PLATINUM:"free_platinum",FREE_PLATINUM_REINSTALL:"free_platinum_reinstall",FREE_PLATINUM_OLD:"free_platinum_old",PLATINUM:"platinum",NEW_ADVANCED:"advanced-2",NEW_PLATINUM:"platinum-2",UNLIMITED:"unlimited",UNLIMITED_SPECIAL:"unlimited-special"},PRICE:{free:0,advanced:10,platinum:20,"advanced-2":9.99,"platinum-2":19.99,unlimited:49.99,"unlimited-special":9.99},NAME:{free:"Free",advanced:"Old Advanced",platinum:"Old Platinum","advanced-2":"New Advanced","platinum-2":"New Platinum",unlimited:"Unlimited","unlimited-special":"Unlimited Special"},ID:{FREE:1,ADVANCED:2,PLATINUM:3,FREE_PLATINUM:4,FREE_PLATINUM_REINSTALL:5,NEW_ADVANCED:7,NEW_PLATINUM:8,UNLIMITED:9,UNLIMITED_SPECIAL:10,NEW_FREE:11}},ADD_ONS_DISPLAY_TYPE:{ALWAYS_SHOW:0,SHOW_AFTER_SELECTING:1},MM_EVENT_TYPE:{INSTALL:1,SUBSCRIBE:2},OPTION_WIDTH_SETTING:{WIDTH_25:"25",WIDTH_33:"33",WIDTH_50:"50",WIDTH_66:"66",WIDTH_75:"75",WIDTH_100:"100"},FILE_DISPLAY_TYPE:{MULTIPLE_FILE_PER_ROW:0,SINGLE_FILE_PER_ROW:1},DISABLE_PAST_DATE_TYPE:{MINUTES:0,HOURS:1,DAYS:2,WEEKS:3,MONTHS:4},SWATCH_TYPE:{COLOR:0,IMAGE:1},SWATCH_TITLE_DISPLAY_TYPE:{NONE:0,BELOW:1,BELOW_WITH_BORDER:2,NEXT:3,NEXT_WITH_BORDER:4}}},31:(e,t,o)=>{const n=o(75),r={parseNumber:({defaultValue:e,enumValues:t=null,min:o=0,max:r=null})=>n.alternatives().try((()=>{let e=n.number();return null!==o&&(e=e.min(o)),null!==r&&(e=e.max(r)),e})(),n.string().custom(((e,t)=>{const n=Number(e);return isNaN(n)?t.error("any.invalid"):null!==o&&n<o?t.error("number.min"):null!==r&&n>r?t.error("number.max"):n}))).valid(...Object.values(t||[])).failover(e),string:e=>n.string().trim().allow("").failover(e||"").required(),nonEmptyString:e=>n.string().trim().min(1).required().failover(e),emptyStringOrNumber:e=>n.alternatives().try(n.string().trim().allow(""),n.number()).failover(e),limitValue:(e,t,o=!0)=>{let r=n.string().trim().failover(e).valid(...Object.values(t||[]));return o?r.required():r}};e.exports=r},958:(e,t,o)=>{const n=o(75),r=o(31),{ADD_ONS_DISPLAY_TYPE:i}=o(338),a={WIDGET_ALIGNMENT:{LEFT:"left",MIDDLE:"middle",RIGHT:"right"},SWATCHES_SHAPE:{SQUARE:0,CIRCLE:1},SWATCHES_HOVER_TYPE:{TEXT_ONLY:1,IMAGE_ONLY:2,TEXT_IMAGE:3},SKU_TYPE:{BOTH:0,BSS_OPTIONS:1,VARIANTS:2},FILE_DISPLAY_TYPE:{MULTIPLE_FILE_PER_ROW:0,SINGLE_FILE_PER_ROW:1}},s={enable:1,enableInCart:1,enableDiscount:1,enableMiniCart:1,enableAddOns:1,enableDisplayProductPrice:1,option_position:"",enableFileUpload:0,enableFeaturedProduct:1,enableBaseFeature:1,enableSpecificVariant:0,installPriceAddOns:0,generals:{widget_has_limit:0,widget_height_limit:200,widget_alignment:a.WIDGET_ALIGNMENT.LEFT,value_next_to_title:0,scroll_to_error:1,show_swatch_tooltip:1,file_display_type:a.FILE_DISPLAY_TYPE.SINGLE_FILE_PER_ROW,count_character:1,swatches_hover:a.SWATCHES_HOVER_TYPE.TEXT_ONLY,swatches_shape:a.SWATCHES_SHAPE.SQUARE,sku_type:a.SKU_TYPE.BOTH,sku_separator:"-",add_ons_display_type:i.ALWAYS_SHOW},colors:{addon_text:"#B22222",required_char:"#B22222",error_msg:"#B22222",textbox_border:"#8A8787",textbox_background:"#ffffff",textbox_hover_border:"#050505",dropdown_border:"#8A8787",dropdown_background:"#ffffff",dropdown_hover_border:"#050505",checkbox_radio_hover:"#F2F2F2",checkbox_radio_active:"#191919",switch_background:"#cccccc",switch_active:"#18181b",button_text:"#000000",button_active_text:"#ffffff",button_background:"#ffffff",button_active_background:"#0B0B0B",button_border:"#0B0B0B",button_hover_border:"#A39C9C",button_active_border:"#e3e1e1",swatch_border:"#e5e5e5",swatch_hover_border:"#555555",swatch_active_border:"#040404",quantity_button:"#FFFFFF",edit_option_button:"#000000",option_title:"#000000",option_value:"#131212",text_tooltip:"#949494",text_tooltip_background:"#eaeaea",button_hover:"#EDEEF2",button_hover_text:"#050505",swatches_hover_color:"#555555",swatches_hover_text_color:"#ffffff"},borders:{input_border_size:1,input_border_radius:4,button_border_size:1,button_border_radius:3,dropdown_border_size:1,dropdown_border_radius:4,swatch_border_size:1,swatch_border_radius:8,quantity_button_border_radius:3,edit_button_border_radius:3},sizes:{addon_text_font_size:14,addon_text_font_weight:0,error_msg_font_size:13,error_msg_font_weight:0,switch_width:30,switch_height:17,textarea_width:100,textarea_height:64,thumbnail_img_width:28,thumbnail_img_height:28,button_padding_tb:5,button_padding_lr:10,checkbox_radio_image_width:50,title_font_size:14,title_font_weight:1,text_tooltip_font_size:13,text_tooltip_font_weight:0,value_font_size:13,value_font_weight:0,textbox_number_width:100,textbox_number_height:44,checkbox_radio_width:16,dropdown_width:100,dropdown_height:44,swatches_width:83,swatches_height:83},css_selectors:{buy_it_now_btn_selector:"",cart_selector:""},translations:{option_text:"",required_text:"Option {{Option name}} is required",min_character_text:"Min character",max_character_text:"Max character",characters_text:"characters",min_value_text:"Min value",max_value_text:"Max value",min_selector_text:"Min selector",max_selector_text:"Max selector",min_quantity_text:"Min quantity",max_quantity_text:"Max quantity",check_size_text:"File size must be less than",max_number_uploaded_text:"Max number of files to be uploaded",error_cut_off_time:"You can only choose time between",and_text:"and",error_date_range:"Date range is invalid. Please select the end date.",error_email_format_message:"Email format is invalid.",button_choose_file_text:"Choose file",drag_drop_file_to_upload_text:"Or drop file to upload",edit_options_text:"Edit Options",in_cart_update_button_text:"Update",in_cart_cancel_button_text:"Cancel",discount_button:"Apply",discount_input_placeholder:"Enter your discount here",discount_error_empty:"Discount field must not be blank",discount_error_invalid:"Invalid discount code",discount_value_text:"Discount",add_ons_text:"Selection extra fee for"}},l=n.object({generals:n.object({widget_has_limit:r.parseNumber({defaultValue:s.generals.widget_has_limit,enumValues:[0,1]}),widget_height_limit:r.parseNumber({defaultValue:s.generals.widget_height_limit,min:40}),widget_alignment:r.limitValue(s.generals.widget_alignment,a.WIDGET_ALIGNMENT),value_next_to_title:r.parseNumber({defaultValue:s.generals.value_next_to_title,enumValues:[0,1]}),scroll_to_error:r.parseNumber({defaultValue:s.generals.scroll_to_error,enumValues:[0,1]}),show_swatch_tooltip:r.parseNumber({defaultValue:s.generals.show_swatch_tooltip,enumValues:[0,1]}),count_character:r.parseNumber({defaultValue:s.generals.count_character,enumValues:[0,1]}),swatches_hover:r.parseNumber({defaultValue:s.generals.swatches_hover,enumValues:a.SWATCHES_HOVER_TYPE}),swatches_shape:r.parseNumber({defaultValue:s.generals.swatches_shape,enumValues:a.SWATCHES_SHAPE}),sku_type:r.parseNumber({defaultValue:s.generals.sku_type,enumValues:a.SKU_TYPE}),sku_separator:r.string(s.generals.sku_separator),add_ons_display_type:r.parseNumber({defaultValue:i.SHOW_AFTER_SELECTING,enumValues:i}),file_display_type:r.parseNumber({defaultValue:a.FILE_DISPLAY_TYPE.MULTIPLE_FILE_PER_ROW,enumValues:a.FILE_DISPLAY_TYPE})}),colors:n.object({addon_text:r.string(s.colors.addon_text),required_char:r.string(s.colors.required_char),error_msg:r.string(s.colors.error_msg),textbox_border:r.string(s.colors.textbox_border),textbox_background:r.string(s.colors.textbox_background),textbox_hover_border:r.string(s.colors.textbox_hover_border),dropdown_border:r.string(s.colors.dropdown_border),dropdown_background:r.string(s.colors.dropdown_background),dropdown_hover_border:r.string(s.colors.dropdown_hover_border),checkbox_radio_hover:r.string(s.colors.checkbox_radio_hover),checkbox_radio_active:r.string(s.colors.checkbox_radio_active),switch_background:r.string(s.colors.switch_background),switch_active:r.string(s.colors.switch_active),button_text:r.string(s.colors.button_text),button_active_text:r.string(s.colors.button_active_text),button_background:r.string(s.colors.button_background),button_active_background:r.string(s.colors.button_active_background),button_border:r.string(s.colors.button_border),button_hover_border:r.string(s.colors.button_hover_border),button_active_border:r.string(s.colors.button_active_border),swatch_border:r.string(s.colors.swatch_border),swatch_hover_border:r.string(s.colors.swatch_hover_border),swatch_active_border:r.string(s.colors.swatch_active_border),quantity_button:r.string(s.colors.quantity_button),edit_option_button:r.string(s.colors.edit_option_button),option_title:r.string(s.colors.option_title),option_value:r.string(s.colors.option_value),text_tooltip:r.string(s.colors.text_tooltip),text_tooltip_background:r.string(s.colors.text_tooltip_background),button_hover:r.string(s.colors.button_hover),button_hover_text:r.string(s.colors.button_hover_text),swatches_hover_color:r.string(s.colors.swatches_hover_color),swatches_hover_text_color:r.string(s.colors.swatches_hover_text_color)}),borders:n.object({input_border_size:r.parseNumber({defaultValue:s.borders.input_border_size}),input_border_radius:r.parseNumber({defaultValue:s.borders.input_border_radius}),button_border_size:r.parseNumber({defaultValue:s.borders.button_border_size}),button_border_radius:r.parseNumber({defaultValue:s.borders.button_border_radius}),dropdown_border_size:r.parseNumber({defaultValue:s.borders.dropdown_border_size}),dropdown_border_radius:r.parseNumber({defaultValue:s.borders.dropdown_border_radius}),swatch_border_size:r.parseNumber({defaultValue:s.borders.swatch_border_size}),swatch_border_radius:r.parseNumber({defaultValue:s.borders.swatch_border_radius}),quantity_button_border_radius:r.parseNumber({defaultValue:s.borders.quantity_button_border_radius}),edit_button_border_radius:r.parseNumber({defaultValue:s.borders.edit_button_border_radius})}),sizes:n.object({addon_text_font_size:r.parseNumber({defaultValue:s.sizes.addon_text_font_size,min:4}),addon_text_font_weight:r.parseNumber({defaultValue:s.sizes.addon_text_font_weight}),error_msg_font_size:r.parseNumber({defaultValue:s.sizes.error_msg_font_size,min:4}),error_msg_font_weight:r.parseNumber({defaultValue:s.sizes.error_msg_font_weight}),switch_width:r.parseNumber({defaultValue:s.sizes.switch_width,min:4}),switch_height:r.parseNumber({defaultValue:s.sizes.switch_height,min:4}),textarea_width:r.parseNumber({defaultValue:s.sizes.textarea_width,min:4,max:100}),textarea_height:r.parseNumber({defaultValue:s.sizes.textarea_height,min:4}),thumbnail_img_width:r.parseNumber({defaultValue:s.sizes.thumbnail_img_width,min:4}),thumbnail_img_height:r.parseNumber({defaultValue:s.sizes.thumbnail_img_height,min:4}),button_padding_tb:r.parseNumber({defaultValue:s.sizes.button_padding_tb,min:4}),button_padding_lr:r.parseNumber({defaultValue:s.sizes.button_padding_lr,min:4}),title_font_size:r.parseNumber({defaultValue:s.sizes.title_font_size,min:4}),title_font_weight:r.parseNumber({defaultValue:s.sizes.title_font_weight}),text_tooltip_font_size:r.parseNumber({defaultValue:s.sizes.text_tooltip_font_size,min:4}),text_tooltip_font_weight:r.parseNumber({defaultValue:s.sizes.text_tooltip_font_weight}),value_font_size:r.parseNumber({defaultValue:s.sizes.value_font_size,min:4}),value_font_weight:r.parseNumber({defaultValue:s.sizes.value_font_weight}),textbox_number_width:r.parseNumber({defaultValue:s.sizes.textbox_number_width,min:4,max:100}),textbox_number_height:r.parseNumber({defaultValue:s.sizes.textbox_number_height,min:4}),checkbox_radio_width:r.parseNumber({defaultValue:s.sizes.checkbox_radio_width,min:8}),checkbox_radio_image_width:r.parseNumber({defaultValue:s.sizes.checkbox_radio_image_width,min:20}),dropdown_width:r.parseNumber({defaultValue:s.sizes.dropdown_width,min:4,max:100}),dropdown_height:r.parseNumber({defaultValue:s.sizes.dropdown_height,min:4}),swatches_width:r.parseNumber({defaultValue:s.sizes.swatches_width,min:4}),swatches_height:r.parseNumber({defaultValue:s.sizes.swatches_height,min:4})}),css_selectors:n.object({buy_it_now_btn_selector:r.string(s.css_selectors.buy_it_now_btn_selector),cart_selector:r.string(s.css_selectors.cart_selector)}),translations:n.object({option_text:s.translations.option_text,required_text:r.nonEmptyString(s.translations.required_text),min_character_text:r.nonEmptyString(s.translations.min_character_text),max_character_text:r.nonEmptyString(s.translations.max_character_text),characters_text:r.nonEmptyString(s.translations.characters_text),min_value_text:r.nonEmptyString(s.translations.min_value_text),max_value_text:r.nonEmptyString(s.translations.max_value_text),min_selector_text:r.nonEmptyString(s.translations.min_selector_text),max_selector_text:r.nonEmptyString(s.translations.max_selector_text),min_quantity_text:r.nonEmptyString(s.translations.min_quantity_text),max_quantity_text:r.nonEmptyString(s.translations.max_quantity_text),check_size_text:r.nonEmptyString(s.translations.check_size_text),max_number_uploaded_text:r.nonEmptyString(s.translations.max_number_uploaded_text),error_cut_off_time:r.nonEmptyString(s.translations.error_cut_off_time),and_text:r.nonEmptyString(s.translations.and_text),error_date_range:r.nonEmptyString(s.translations.error_date_range),error_email_format_message:r.nonEmptyString(s.translations.error_email_format_message),button_choose_file_text:r.nonEmptyString(s.translations.button_choose_file_text),drag_drop_file_to_upload_text:r.nonEmptyString(s.translations.drag_drop_file_to_upload_text),edit_options_text:r.nonEmptyString(s.translations.edit_options_text),in_cart_update_button_text:r.nonEmptyString(s.translations.in_cart_update_button_text),in_cart_cancel_button_text:r.nonEmptyString(s.translations.in_cart_cancel_button_text),discount_button:r.nonEmptyString(s.translations.discount_button),discount_input_placeholder:r.nonEmptyString(s.translations.discount_input_placeholder),discount_error_empty:r.nonEmptyString(s.translations.discount_error_empty),discount_error_invalid:r.nonEmptyString(s.translations.discount_error_invalid),discount_value_text:r.nonEmptyString(s.translations.discount_value_text),add_ons_text:r.nonEmptyString(s.translations.add_ons_text)})});e.exports={SettingsConstants:a,DEFAULT_SETTINGS:s,settingsDataSchema:l,validateAndFormatAdvancedSettings:e=>l.validate(e,{presence:"required",abortEarly:!1,allowUnknown:!0,convert:!0}).value}},198:e=>{"use strict";e.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=o(505),t=o.n(e),n=o(694),r=o(338);const i=(e=0,t=0,o={})=>{if(BSS_PO&&BSS_PO.optionSets&&BSS_PO.optionSets.length){const n=BSS_PO.optionSets.find((t=>t.id===e)).variants,r=o.extra_price,i=r.dropdown_extra_price_type,a=r.dropdown_extra_variant;if(i&&i.length&&1===i[t]&&a&&a.length&&n&&n.length){const e=n.find((e=>a[t]==e.id.replace("gid://shopify/ProductVariant/","")));if(e&&e.inventoryItem&&!e.inventoryItem.tracked)return!1;if(e&&"DENY"===e.inventoryPolicy&&e.inventoryQuantity<=0)return!0}}return!1},a=(e=0,t=0,o={},n="")=>{if(BSS_PO&&BSS_PO.optionSets&&BSS_PO.optionSets.length){const r=BSS_PO.optionSets.find((t=>t.id===e)).variants,i=o.extra_price,a=i[`${n}_extra_price_type`],s=i[`${n}_extra_variant`];if(a&&a.length&&1===a[t]&&s&&s.length&&r&&r.length){const e=r.find((e=>s[t]==e.id.replace("gid://shopify/ProductVariant/","")));if(e&&e.inventoryItem&&!e.inventoryItem.tracked)return!1;if(e&&"DENY"===e.inventoryPolicy&&e.inventoryQuantity<=0)return!0}}return!1};class s{constructor(e,t,o){this.operator=Number(e),this.value=t,this.compareValue=o}isValid(){if("any"==this.compareValue&&this.value)return!0;switch(this.operator){case r.CONDITIONAL_OPTIONS.TYPE_CONTAIN.IS:return this.compareValue==this.value;case r.CONDITIONAL_OPTIONS.TYPE_CONTAIN.IS_NOT:return this.compareValue!=this.value;case r.CONDITIONAL_OPTIONS.TYPE_CONTAIN.LESS_THAN:return parseInt(this.compareValue)>parseInt(this.value);case r.CONDITIONAL_OPTIONS.TYPE_CONTAIN.GREATER_THAN:return parseInt(this.compareValue)<parseInt(this.value);case r.CONDITIONAL_OPTIONS.TYPE_CONTAIN.CONTAIN:return this.value.includes(this.compareValue);case r.CONDITIONAL_OPTIONS.TYPE_CONTAIN.NOT_CONTAIN:return!this.value.includes(this.compareValue);default:return!1}}}class l{constructor(e,t){this.label=e,this.options=t}getConditionalOptions(){return this.options.find((e=>e.label_on_product===this.label))}}class c{constructor(e,t,o=[],n=!1,r=100){this.optionSet=e,this.maxDepth=r,this.optionValueList=o,this.displayMap=t,this.cartPage=n}canShow(e,t=0,o=new Set){const n=new l(e,this.optionSet.options).getConditionalOptions();if(o.has(e)){if(n?.conditional_options_display!==r.CONDITIONAL_OPTIONS.DISPLAY.HIDE)return console.error(`Circular dependency detected for label: ${e}`),!1;if(this.checkMutualHiding(e,n))return!0}if(t>this.maxDepth)return console.warn(`Max recursion depth exceeded for label: ${e}`),!1;if(0===(n?.conditional_options?.filter((e=>null!==e.conditional_option_label))||[]).length)return!0;o.add(e);const i=this.evaluateConditions(n,t,o);return o.delete(e),i}evaluateConditions(e,t,o){const{conditional_options:n,conditional_options_match:i,conditional_options_display:a}=e;let c=!0,p=!1;for(const e of n)if(null!==e.conditional_option_label){const n=new l(e.conditional_option_label,this.optionSet.options).getConditionalOptions();let a=n?n.default_value:"";this.cartPage&&this.optionValueList.length&&(a=this.getOptionValue(n,e));let u=!1;if(this.canShow(e.conditional_option_label,t+1,o)?u=n&&new s(e.type_contain,a,e.conditional_option_value).isValid():[r.CONDITIONAL_OPTIONS.TYPE_CONTAIN.IS_NOT,r.CONDITIONAL_OPTIONS.TYPE_CONTAIN.NOT_CONTAIN].includes(e.type_contain)&&(u=!0),i!==r.CONDITIONAL_OPTIONS.MATCH.ALL||u){if(i===r.CONDITIONAL_OPTIONS.MATCH.ANY&&u){p=!0;break}}else c=!1}const u=i===r.CONDITIONAL_OPTIONS.MATCH.ANY?p:c;return a===r.CONDITIONAL_OPTIONS.DISPLAY.HIDE?!u:u}getOptionValue(e,t){const o=this.optionValueList.filter((t=>t.label===e.label_on_product));if(o.length>1){if(t&&[r.CONDITIONAL_OPTIONS.TYPE_CONTAIN.IS,r.CONDITIONAL_OPTIONS.TYPE_CONTAIN.IS_NOT].includes(t.type_contain)&&(e.option_type==r.OPTION_TYPE.CHECKBOX||e.option_type==r.OPTION_TYPE.BUTTON)){const e=o.find((e=>e.value===t.conditional_option_value));return e?e.value:""}return o.map((e=>e.value))}return 1===o.length?o[0].value:""}checkMutualHiding(e,t){for(const o of t?.conditional_options||[]){const n=o.conditional_option_label,i=new l(n,this.optionSet.options).getConditionalOptions(),a=i?.conditional_options?.some((t=>t.conditional_option_label===e));if(a&&t?.conditional_options_display===r.CONDITIONAL_OPTIONS.DISPLAY.HIDE&&i?.conditional_options_display===r.CONDITIONAL_OPTIONS.DISPLAY.HIDE)return!0}return!1}}class p{constructor(e,t,o=new Map,n,r=100){this.options=e,this.optionValueList=t,this.dependencyMap=n,this.maxDepth=r,this.displayState=o}handleChange(e,t=0,o=new Set){t>this.maxDepth?console.warn(`Max depth reached for id: ${e}`):(o.add(e),(this.dependencyMap[e]||[]).forEach((n=>{const i=this.options.find((e=>e.id===n));if(!i)return void console.warn(`Option with id: ${n} not found`);const{conditional_options:a,conditional_options_match:s,conditional_options_display:l}=i,c=a.filter((e=>null!==e.conditional_option_label));if(0===c.length)return;const{allConditionsValid:p,anyConditionValid:u}=this.evaluateConditions(c),d=s===r.CONDITIONAL_OPTIONS.MATCH.ANY?u:p,_=l===r.CONDITIONAL_OPTIONS.DISPLAY.HIDE?!d:d;this.updateDisplayState(n,i,_),o.has(n)?console.error(`Circular dependency detected for id: ${e}`):this.handleChange(n,t+1,o)})),o.delete(e))}evaluateConditions(e){const t=e.map((e=>{const t=this.getConditionValue(e);return new s(e.type_contain,t,e.conditional_option_value).isValid()}));return{allConditionsValid:t.every((e=>e)),anyConditionValid:t.some((e=>e))}}getConditionValue(e){const t=this.optionValueList.filter((t=>t.label===e.conditional_option_label&&this.displayState.get(t.id)===r.DISPLAY_STATE.SHOW));if(t.length>1){if([r.CONDITIONAL_OPTIONS.TYPE_CONTAIN.IS,r.CONDITIONAL_OPTIONS.TYPE_CONTAIN.IS_NOT].includes(e.type_contain)){const o=t.find((t=>t.value===e.conditional_option_value));return o?o.value:""}return t.map((e=>e.value))}return 1===t.length?t[0].value:""}updateDisplayState(e,t,o){const n=this.displayState.get(e)||r.DISPLAY_STATE.HIDE,i=o?r.DISPLAY_STATE.SHOW:r.DISPLAY_STATE.HIDE;n!==i&&(this.displayState.set(e,i),this.optionValueList.find((e=>e.label===t.label_on_product&&e.value===t.default_value))||this.optionValueList.find((e=>e.label===t.label_on_product))||!t.default_value||i!==r.DISPLAY_STATE.SHOW||this.optionValueList.push({label:t.label_on_product,value:t.default_value,id:e}))}}function u(e,t,o){e.po={},e.po.appliedOptionSetForOneProduct=!1,e.po.lineItems=[],e.displayMap=new Map;const s=[r.PRICING.CODE.FREE,r.PRICING.CODE.ADVANCED,r.PRICING.CODE.NEW_ADVANCED,r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan),l=!e.currentPlan||[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan);e.po.getAppliedOptionSetOnProductPage=function(o){let n=null;const r=e.optionSets,{customer:i,product:a}=t;let s,l,c;if("function"==typeof bssFixSupportCustomGetAppliedOptionSetOnProductPage){const t=bssFixSupportCustomGetAppliedOptionSetOnProductPage(e,o,s,l,c,a);s=t.productId,l=t.tags,c=t.collections}else e.page.isHomePage()?(s=o.id,l=o.tags,c=o.collections):(s=a.id,l=a.tags,c=t.collections);for(let t of r)if(n=e.common.checkAppliedOptionSet({optionSet:t,customer:i,collections:c,productId:s,tags:l}),n)break;if(n)return e.po.appliedOptionSetForOneProduct=n,e.po.idDependencyMap=e.helper.mapIdsWithDependencies(n.options),"function"==typeof bssFixSupportShowValueMenuDropdown&&bssFixSupportShowValueMenuDropdown({BSS_PO:e,mounted:!0}),n},e.po.getAppliedOptionSetOnProductPageForVariant=function({variantId:o,productData:n}){let r=null;const i=e.optionSets,{customer:a,product:s}=t;let l,c,p;if("function"==typeof bssFixSupportCustomGetAppliedOptionSetOnProductPageForVariant){const t=bssFixSupportCustomGetAppliedOptionSetOnProductPageForVariant(e,n,l,c,p,s);l=t.productId,c=t.tags,p=t.collections}else e.page.isHomePage()?(l=n.id,c=n.tags,p=n.collections):(l=s.id,c=s.tags,p=t.collections);for(let t of i)if(4===t.product_condition_type&&(r=e.common.checkAppliedOptionSet({optionSet:t,customer:a,collections:p,productId:l,tags:c,variantId:o}),r))break;return e.po.appliedOptionSetForSpecificVariant=r,r?.options&&(e.po.idDependencyMap=e.helper.mapIdsWithDependencies(r.options)),e.po.variantProductIdApplyOptionSet=o,r},e.po.getAppliedOptionSetOnQVCollectionPage=async function(){let o=null;const n=e.optionSets;let{customer:r,collections:i=[]}=t;if(e.page.isCollectionPage()&&document.querySelector(".bss-po-option-set")||6456==e.storeId||"function"==typeof bssFixSupportCustomQVInHomePage&&bssFixSupportCustomQVInHomePage()){let t="";t="function"==typeof bssFixSupportGetAppliedOptionSetOnQVCollectionPage?bssFixSupportGetAppliedOptionSetOnQVCollectionPage(e,t):document.querySelector(".bss-po-option-set").getAttribute(["data-product-id"]);const a=await e.helper.callSearchLiquidApi([`id:"${t}"`]);i=a[0].collections;const s=a[0].tags;for(let a of n)if(o=e.common.checkAppliedOptionSet({optionSet:a,customer:r,collections:i,productId:t,tags:s}),o)break;return e.po.appliedOptionSetForOneProduct=o,{data:a[0],appliedOptionSet:o}}return{}},e.po.getTextBoxHtml=function({option:t,requiredSpan:o,help_text_tooltip:n,help_text_content:r,appliedOptionSetID:i,position:a=0,optionSetConditionType:l}){let c="";return c+=`<div ${t.stylesAttr} class="po-label-container"><label class="po-label" for="po_text_box${t.id}" id="po_label${t.id}"><span >${t.label_on_product||""}`,c+=o,c+=0==t.help_text_type?n:"",c+="</span>",c+=1==t.help_text_type&&1==t.help_text_position?r:"",c+="</label></div>",c+=1==t.help_text_type&&0==t.help_text_position?r:"",c+=`<div class="po-option--container${7539==e.storeId?" custom-texbox":""}">`,c+=`<input class="po-option--type-text po-value" type="text" name="po_text_box${t.id}" id="po_text_box${t.id}" placeholder="${t.placeholder}" value="${s?t.default_value:""}" onchange="BSS_PO.po.handleChangeValue({selector: this, optionType: 'text_box', appliedOptionSetID: ${i}, optionID: ${t.id}, labelOnProduct: '${e.helper.formatOptionLabel(t.label_on_product)}', maxSelector: ${s?t.max_selector:null}, position: ${a}, optionSetConditionType: ${l}})">`,c+="</div>",c+=1==t.help_text_type&&2==t.help_text_position?r:"",c},e.po.getEmailBoxHtml=function({option:e,requiredSpan:t,help_text_tooltip:o,help_text_content:n,appliedOptionSetID:r,position:i=0,optionSetConditionType:a}){let l="";return l+=`<div ${e.stylesAttr} class="po-label-container"><label class="po-label" for="po_email_box${e.id}" id="po_label${e.id}"><span >${e.label_on_product}`,l+=t,l+=0==e.help_text_type?o:"",l+="</span>",l+=1==e.help_text_type&&1==e.help_text_position?n:"",l+="</label></div>",l+=1==e.help_text_type&&0==e.help_text_position?n:"",l+='<div class="po-option--container">',l+=`<input class="po-option--type-text po-value" type="text" name="po_email_box${e.id}" id="po_email_box${e.id}" placeholder="${e.placeholder}" value="${s?e.default_value:""}" onchange="BSS_PO.po.handleChangeValue({selector: this, optionType: 'email_box',  appliedOptionSetID: ${r}, optionID: ${e.id}, labelOnProduct: '${e.label_on_product}', maxSelector: ${s?e.max_selector:null}, position: ${i}, optionSetConditionType: ${a}})">`,l+="</div>",l+=1==e.help_text_type&&2==e.help_text_position?n:"",l},e.po.getTextAreaHtml=function({option:t,requiredSpan:o,help_text_tooltip:n,help_text_content:r,appliedOptionSetID:i,position:a=0,optionSetConditionType:l}){let c="";return c+=`<div ${t.stylesAttr} class="po-label-container"><label class="po-label" for="po_text_area${t.id}" id="po_label${t.id}"><span>${t.label_on_product}`,c+=o,c+=0==t.help_text_type?n:"",c+="</span>",c+=1==t.help_text_type&&1==t.help_text_position?r:"",c+="</label></div>",c+=1==t.help_text_type&&0==t.help_text_position?r:"",c+='<div class="po-option--container">',c+=`<textarea value="${t.default_value}" class="po-option--type-text po-value" name="po_text_area${t.id}" id="po_text_area${t.id}" placeholder="${t.placeholder}" style="box-shadow: none;" onchange="BSS_PO.po.handleChangeValue({selector: this, optionType: 'text_area', appliedOptionSetID: ${i}, optionID: ${t.id}, labelOnProduct: '${e.helper.formatOptionLabel(t.label_on_product)}', maxSelector: ${s?t.max_selector:null}, position: ${a}, optionSetConditionType: ${l}})" oninput="BSS_PO.helper.autoResizeTextArea(this)" onkeydown="BSS_PO.helper.autoResizeTextAreaOnEnter(event, this)">${s?t.default_value:""}</textarea>`,c+="</div>",c+=1==t.help_text_type&&2==t.help_text_position?r:"",c},e.po.getNumberFieldHtml=function({option:t,requiredSpan:o,help_text_tooltip:n,help_text_content:r,appliedOptionSetID:i,position:a=0,optionSetConditionType:l}){let c="";return c+=`<div ${t.stylesAttr} class="po-label-container"><label class="po-label" for="po_number_field${t.id}" id="po_label${t.id}"><span >${t.label_on_product}`,c+=o,c+=0==t.help_text_type?n:"",c+="</span>",c+=1==t.help_text_type&&1==t.help_text_position?r:"",c+="</label></div>",c+=1==t.help_text_type&&0==t.help_text_position?r:"",c+='<div class="po-option--container">',c+=`<input class="po-option--type-number po-value" type="number" name="po_number_field${t.id}" id="po_number_field${t.id}" placeholder="${t.placeholder}" value="${s?t.default_value:""}" min="${s?t.min_value:null}" max="${s?t.max_value:null}" onchange="BSS_PO.po.handleChangeValue({selector: this, optionType: 'number_field', appliedOptionSetID: ${i}, optionID: ${t.id}, labelOnProduct: '${e.helper.formatOptionLabel(t.label_on_product)}', maxSelector: ${s?t.max_selector:null}, position: ${a}, optionSetConditionType: ${l}})">`,c+="</div>",c+=1==t.help_text_type&&2==t.help_text_position?r:"",c},e.po.getCheckboxHtml=function({option:t,requiredSpan:o,help_text_tooltip:n,help_text_content:i,appliedOptionSetID:c,position:p=0,optionSetConditionType:u}){let d="";const{checkbox_value:_,default_value:m,helptext_option_values:h,cdn_image_value:f}=t;return d+=`<div ${t.stylesAttr} class="po-label-container"><label class="po-label" id="po_label${t.id}"><span>${t.label_on_product}`,d+=o,d+=0==t.help_text_type?n:"",d+="</span>",d+=1==t.help_text_type&&1==t.help_text_position?i:"",d+="</label></div>",d+=1==t.help_text_type&&0==t.help_text_position?i:"",d+=t.inline?'<div class="po-option--container po-option--container__inline po-option--checkbox-container">':'<div class="po-option--container po-option--checkbox-container">',_.forEach(((o,n)=>{let i="",_=h[n];const y=a(c,n,t,"checkbox");if(y&&(i+="disabled"),d+=`<div class="po-option--checkbox-wrapper po-option__select-quantity" id="po_checkbox${n}">`,d+='<div class="po-option--type-checkbox po-value">',d+=`<label class="po-label ${i}">\n            <input type="checkbox" name="po_checkbox${t.id}" value='${e.helper.escapeString(o)}' ${o==m&&!y&&s&&"checked"} id="po_checkbox${n}"\n            onchange="BSS_PO.po.handleChangeValue({selector: this, optionType: 'checkbox', appliedOptionSetID: ${c}, optionID: ${n}, labelOnProduct: '${e.helper.formatOptionLabel(t.label_on_product)}', maxSelector: ${s?t.max_selector:null}, position: ${p}, optionIdForCheckBoxOnly: ${t.id}, optionSetConditionType: ${u}})">\n                        `,[r.PRICING.CODE.ADVANCED,r.PRICING.CODE.NEW_ADVANCED,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)){let o=`\n                    width: ${e?.settings?.sizes?.checkbox_radio_image_width||50}px;\n                    height: ${e?.settings?.sizes?.checkbox_radio_image_width||50}px;\n                `;t?.checkbox_type?.[n]===r.SWATCH_TYPE.COLOR&&t?.checkbox_color_value?.[n]&&""!==t?.checkbox_color_value?.[n]&&"#"!==t?.checkbox_color_value?.[n]?.trim()?(o+=`background: ${t?.checkbox_color_value?.[n]}`,d+=`<div class="po-checkbox-color-shape" style="${o}"></div>`):t?.checkbox_type?.[n]===r.SWATCH_TYPE.IMAGE&&(f?.[n]&&""!==f?.[n]||t?.checkbox_image_value?.[n]&&""!==t?.checkbox_image_value?.[n])&&(o+=`\n                        background-image: url('${f?.[n]||t?.checkbox_image_value?.[n]}');\n                    `,d+=`<div class="po-checkbox-img-wrapper" style="${o}"></div>`)}d+=`\n             <div class="po_description">\n            <span class="po_option_value po-option__checkbox-value">${o}</span>\n                        ${l&&e.helper.isPrintableString(_)?`<p class="po_helptext_value">${_}</p>`:""} \n                    </div>\n                </label>`,d+="</div>",d+="</div>"})),d+="</div>",d+=1==t.help_text_type&&2==t.help_text_position?i:"",d},e.po.getSwitchHtml=function({option:t,requiredSpan:o,help_text_tooltip:n,help_text_content:i,appliedOptionSetID:c,position:p=0,optionSetConditionType:u}){const{switch_value:d,default_value:_,helptext_option_values:m}=t;let h="";return h+=`<div ${t.stylesAttr} class="po-label-container"><label class="po-label" id="po_label${t.id}"><span>${t.label_on_product}`,h+=o,h+=t.help_text_type==r.HELP_TEXT_TYPE.TOOLTIP?n:"",h+="</span>",h+=t.help_text_type==r.HELP_TEXT_TYPE.TEXT&&t.help_text_position==r.HELP_TEXT_POSITION.BESIDE?i:"",h+="</label></div>",h+=t.help_text_type==r.HELP_TEXT_TYPE.TEXT&&t.help_text_position==r.HELP_TEXT_POSITION.TOP?i:"",h+=t.inline?'<div class="po-option--container po-option--container__inline po-option--switch-container">':'<div class="po-option--container po-option--switch-container">',d.forEach(((o,n)=>{let r=m[n],i="";const d=a(c,n,t,"switch");d&&(i+="disabled"),h+=`<div class="po-option--switch-wrapper po-option__select-quantity" id="po_switch${n}">\n                            <div class="po-value po-option--type-switch">\n                                    <label class="po-label ${i}">\n                                                <label class="po-label--switch">\n                                                    <input type="checkbox" \n                                                    name="po_switch${t.id}" \n                                                    value="${e.helper.escapeString(o)}" \n                                                    key="po_${e.helper.formatOptionLabel(t.label_on_product)}" ${o==_&&!d&&s&&"checked"} \n                                                    id="po_switch${n}" \n                                                    onchange="BSS_PO.po.handleChangeValue({selector: this, optionType: 'switch', appliedOptionSetID: ${c}, optionID: ${n}, \n                                                    labelOnProduct: '${e.helper.formatOptionLabel(t.label_on_product)}', maxSelector: ${s?t.max_selector:null}, position: ${p}, \n                                                    optionIdForCheckBoxOnly: ${t.id}, optionSetConditionType: ${u}})"\n                                                    >\n                                                    <span class="po-switch-slider po-switch-round"></span>\n                                                </label>\n                                                <div class="po_description">\n                                                    <span class="po_option_value po-option__switch-value">${o}</span>\n                                                    ${l&&e.helper.isPrintableString(r)?`<p class="po_helptext_value">${r}</p>`:""} \n                                                </div>\n                                    </label>        \n                            </div>\n                        </div>`})),h+="</div>",h+=t.help_text_type==r.HELP_TEXT_TYPE.TEXT&&t.help_text_position==r.HELP_TEXT_POSITION.BELOW?i:"",h},e.po.getDropdownMenuHtml=function({option:t,requiredSpan:o,help_text_tooltip:n,help_text_content:r,appliedOptionSetID:a,position:c=0,optionSetConditionType:p}){let u="";e.po.handleDropdownKeyDown=function(o){"Enter"===o.key&&function(){e.po.handleChangeValue({selector:this,optionType:"dropdown",appliedOptionSetID:a,optionID:t.id,labelOnProduct:e.helper.formatOptionLabel(t.label_on_product),maxSelector:s?t.max_selector:null,position:c,optionSetConditionType:p,dropdown_multiple_select:t.dropdown_multiple_select})}()},u='tabindex="0" onkeydown="BSS_PO.po.handleDropdownKeyDown(event)"';let d="";const{dropdown_value:_,helptext_option_values:m}=t;let{default_value:h}=t;"function"==typeof bssFixSupportFormatDefaultValue&&(h=bssFixSupportFormatDefaultValue(e,t)),d+=`<div ${t.stylesAttr} class="po-label-container"><label class="po-label" for="po_dropdown${t.id}" id="po_label${t.id}"><span>${t.label_on_product}`,d+=o,d+=0==t.help_text_type?n:"",d+="</span>",d+=1==t.help_text_type&&1==t.help_text_position?r:"",d+="</label></div>",d+=1==t.help_text_type&&0==t.help_text_position?r:"",d+='<div class="po-option--container">',d+='<span class="form-arrow"><i class="bx bx-chevron-down"></i></span>',d+=`<div class="po-select-dropdown-thumbnail" tabindex="0" onkeydown="BSS_PO.po.handleDropdownKeyDown(event)" id="bss-po_dropdown${t.id}" onclick="BSS_PO.po.handleChangeValue({selector: this, optionType: 'dropdown', appliedOptionSetID: ${a}, optionID: ${t.id}, labelOnProduct: '${e.helper.formatOptionLabel(t.label_on_product)}', maxSelector: ${s?t.max_selector:null}, position: ${c}, optionSetConditionType: ${p}, dropdown_multiple_select: ${t.dropdown_multiple_select}})">`,d+=`<div class="po-value po-dropdown-selected-option" id="bss-po-dropdown-selected-option">${s&&h||t.placeholder_dropdown}<i class="po-dropdown-arrow po-dropdown-arrow-down"></i></div>`,d+='<div class="po-dropdown-list">',d+=`<div class="po-dropdown-option po-value" id="searchWithDropdown" style="${t.dropdown_search_bar?"":"display: none !important;"}">\n                        <i class="fa-search-custom icon-search"></i>\n                        <input tabindex="0"  type="text" placeholder="Search" id="valueSearchWithDropdown${t.id}" >\n                    </div>`,d+='<div class="bss_scroll">',d+=`<div class="po-dropdown-option po-value" data-value="${t.placeholder_dropdown}">\n                    <span>${t.placeholder_dropdown}</span>\n                  </div>`;for(let o=0;o<_.length;o++){let n=m[o],r="po-dropdown-option po-value";i(a,o,t)&&(r+=" disabled");let s=!1,c=t?.extra_price?.dropdown_extra_price?.[o];"function"==typeof bssFixSupportShowPriceInDropdown&&([s,c]=bssFixSupportShowPriceInDropdown(e,c));let p=_[o].replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;");d+=`<div class="${r}" tabindex="0" data-value="${p}">\n                            <div class="po_description">\n                                <span class="po_option_value po-option__dropdown-value">${p}</span>\n                                ${l&&e.helper.isPrintableString(n)?`<p class="po_helptext_value">${n}</p>`:""} \n                            </div>\n                            ${s&&c?`<span>${c}</span>`:""}\n                        </div>`}return d+="</div>",d+="</div>",d+="</div>",d+=`<select class = "po-option--type-dropdown-menu dropdown-search" name="po_dropdown${t.id}" style="display: none;" id="po_dropdown${t.id}" key="po_${e.helper.formatOptionLabel(t.label_on_product)}" onchange="BSS_PO.po.handleChangeValue({selector: this, optionType: 'dropdown', appliedOptionSetID: ${a}, optionID: ${t.id}, labelOnProduct: '${e.helper.formatOptionLabel(t.label_on_product)}', maxSelector: ${s?t.max_selector:null}, position: ${c}, optionSetConditionType: ${p}, dropdown_multiple_select: ${t.dropdown_multiple_select}})">`,d+=`<option>${t.placeholder_dropdown}</option>`,_.forEach(((e,o)=>{let n=e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;");d+=`<option ${n==h&&'selected="true"'} value="${n}" name="po_dropdown${t.id}" id="po_dropdown${o}">${n}</option>`})),d+="</select>",_.forEach(((e,t)=>{d+=`<div class="po-option--dropdown-wrapper po-option__select-quantity" id="po_dropdown${t}"></div>`})),d+="</div>",d+=1==t.help_text_type&&2==t.help_text_position?r:"",d},e.po.getDropdownWithThumbnailMenuHtml=function({option:t,requiredSpan:o,help_text_tooltip:n,help_text_content:r,appliedOptionSetID:i,position:c=0,optionSetConditionType:p}){let u="";e.po.handleThumbnailKeyDown=function(o){"Enter"===o.key&&function(){e.po.handleChangeValue({selector:this,optionType:"dropdown_thumbnail",appliedOptionSetID:i,optionID:t.id,labelOnProduct:e.helper.formatOptionLabel(t.label_on_product),maxSelector:s?t.max_selector:nullmax_selector,position:c,optionSetConditionType:p,optionIdForCheckBoxOnly:t.id})}()},u='tabindex="0" onkeydown="BSS_PO.po.handleThumbnailKeyDown(event)"';let d="";const{dropdown_thumbnail_value:_,dropdown_thumbnail_type:m,dropdown_color_value:h,cdn_image_value:f,default_value:y,helptext_option_values:b}=t;d+=`<div ${t.stylesAttr} class="po-label-container"><label class="po-label" for="po_dropdown_thumbnail${t.id}" id="po_label${t.id}"><span>${t.label_on_product}`,d+=o,d+=0==t.help_text_type?n:"",d+="</span>",d+=1==t.help_text_type&&1==t.help_text_position?r:"",d+="</label></div>",d+=1==t.help_text_type&&0==t.help_text_position?r:"",d+='<div class="po-option--container custom-select-thumbnail">',d+=`<div class="po-select-dropdown-thumbnail" tabindex="0" onkeydown="BSS_PO.po.handleThumbnailKeyDown(event)" id="po_dropdown_thumbnail-div${t.id}" onclick="BSS_PO.po.handleChangeValue({selector: this, optionType: 'dropdown_thumbnail', appliedOptionSetID: ${i}, optionID: ${t.id}, labelOnProduct: '${e.helper.formatOptionLabel(t.label_on_product)}', maxSelector: ${s?t.max_selector:null}, position: ${c}, optionSetConditionType: ${p}, dropdown_multiple_select: ${t.dropdown_multiple_select}})">`,d+=`<div class="po-value po-dropdown-selected-option" id="po-dropdown-selected-option">\n            ${s&&y||t.placeholder_dropdown}<i class="po-dropdown-thumbnail-arrow po-dropdown-thumbnail-arrow-down"></i>\n            </div>\n            <div class="po-dropdown-list">\n                <div class="po-value po-dropdown-thumbnail-option" id="searchWithThumbnail" style="${t.dropdown_thumbnail_search_bar?"":"display: none !important;"}">\n                    <i class="fa-search-custom icon-search"></i>\n                    <input tabindex="0" type="text" placeholder="Search" id="valueSearchWithThumbnail${t.id}" >\n                </div>\n                <div class="bss_scroll">\n                    <div class="po-value po-dropdown-thumbnail-option" data-value="${t.placeholder_dropdown}">\n                        <span>${t.placeholder_dropdown}</span>\n                    </div>`;for(let o=0;o<_.length;o++){let n=b[o],r="";a(i,o,t,"dropdown_thumbnail")&&(r+="disabled");let s=_[o].replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;"),c="";0==m[o]?c=`<div class="po-dropdown-option-shape" style="background-color: ${h[o]}"></div>`:1==m[o]&&(c=`<img src="${f[o]}" alt="">`),d+=`<div class="po-value po-dropdown-thumbnail-option ${r}" tabindex="0" data-value="${s}" >\n                                ${c}\n                                <div class="po_description">\n                                    <span class="po_option_value po-option__dropdown-thumbnail-value">${s}</span>\n                                    ${l&&e.helper.isPrintableString(n)?`<p class="po_helptext_value">${n}</p>`:""} \n                                </div>\n                            </div>`}return d+="</div>\n            </div>\n        </div>",d+=`<select class="po-option--type-dropdown-menu" name="po_dropdown_thumbnail${t.id}" style="display: none;" id="po_dropdown_thumbnail${t.id}" style="display: none;" id="po_dropdown_thumbnail${t.id}" key="po_${e.helper.formatOptionLabel(t.label_on_product)}" onchange="BSS_PO.po.handleChangeValue({selector: this, optionType: 'dropdown_thumbnail', appliedOptionSetID: ${i}, optionID: ${t.id}, labelOnProduct: '${e.helper.formatOptionLabel(t.label_on_product)}', maxSelector: ${s?t.max_selector:null}, position: ${c}, optionSetConditionType: ${p}, dropdown_multiple_select: ${t.dropdown_multiple_select}})">`,d+=`<option>${t.placeholder_dropdown}</option>`,_.forEach(((e,o)=>{let n=e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;");d+=`<option ${n==y&&s&&'selected="true"'} value="${n}"  name="po_dropdown${t.id}" id="po_dropdown${o}">${n}</option>`})),d+="</select>",_.forEach(((e,t)=>{d+=`<div class="po-option--dropdown-thumbnail-wrapper po-option__select-quantity" id="po_dropdown${t}"></div>`})),d+="</div>",d+=1==t.help_text_type&&2==t.help_text_position?r:"",d},e.po.getRadioButtonHtml=function({option:t,requiredSpan:o,help_text_tooltip:n,help_text_content:i,appliedOptionSetID:c,position:p=0,optionSetConditionType:u}){const{radio_button_value:d,default_value:_,helptext_option_values:m,cdn_image_value:h}=t;let f="";return f+=`<div ${t.stylesAttr} class="po-label-container"><label class="po-label" id="po_label${t.id}"><span>${t.label_on_product}`,f+=o,f+=0==t.help_text_type?n:"",f+="</span>",f+=1==t.help_text_type&&1==t.help_text_position?i:"",f+="</label></div>",f+=1==t.help_text_type&&0==t.help_text_position?i:"",f+=t.inline?'<div class="po-option--container po-option--container__inline po-option--radio-container">':'<div class="po-option--container po-option--radio-container">',d.forEach(((o,n)=>{let i=m[n],d="";const y=a(c,n,t,"radio_button");if(y&&(d+="disabled"),f+=`\n            <div class="po-option--radioButton-wrapper po-option__select-quantity" id="po_radio_button${n}">\n                <div class="po-option--type-radiobutton po-value">\n                    <label class="po-label ${d}">\n                    <input type="radio" name="po_radio_button${t.id}" value="${e.helper.escapeString(o)}" key="po_${e.helper.formatOptionLabel(t.label_on_product)}" ${o==_&&!y&&s&&"checked"} id="po_radio_button${n}" onchange="BSS_PO.po.handleChangeValue({selector: this, optionType: 'radio_button', appliedOptionSetID: ${c}, optionID: ${n}, labelOnProduct: '${e.helper.formatOptionLabel(t.label_on_product)}', maxSelector: ${s?t.max_selector:null}, position: ${p}, optionIdForCheckBoxOnly: ${t.id}, optionSetConditionType: ${u}})">\n                    <div class="po-radio-circle">\n                        <div class="po-circle-inside"></div>\n                    </div>\n                    `,[r.PRICING.CODE.ADVANCED,r.PRICING.CODE.NEW_ADVANCED,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)){let o=`\n                    width: ${e?.settings?.sizes?.checkbox_radio_image_width||50}px;\n                    height: ${e?.settings?.sizes?.checkbox_radio_image_width||50}px;\n                `;t?.radio_button_type?.[n]===r.SWATCH_TYPE.COLOR&&t?.radio_button_color_value?.[n]&&""!==t?.radio_button_color_value?.[n]&&"#"!==t?.radio_button_color_value?.[n].trim()?(o+=`background: ${t?.radio_button_color_value?.[n]}`,f+=`<div class="po-radiobutton-color-shape" style="${o}"></div>`):t?.radio_button_type?.[n]===r.SWATCH_TYPE.IMAGE&&(h?.[n]&&""!==h?.[n]||t?.radio_button_image_value?.[n]&&""!==t?.radio_button_image_value?.[n])&&(o+=`background-image: url('${h?.[n]||t?.radio_button_image_value?.[n]}')`,f+=`<div class="po-radiobutton-color-img-wrapper" style="${o}"></div>`)}f+=`\n                    <div class="po_description">\n                    <span class="po_option_value po-option__radio-button-value">${o}</span>\n                      ${l&&e.helper.isPrintableString(i)?`<p class="po_helptext_value">${i}</p>`:""}\n                    </div>\n                    </label>\n                </div>\n            </div>`})),f+="</div>",f+=1==t.help_text_type&&2==t.help_text_position?i:"",f},e.po.getSwatchHtml=function({option:t,requiredSpan:o,help_text_tooltip:n,help_text_content:i,appliedOptionSetID:c,appliedOptionSet:p,position:u=0,optionSetConditionType:d}){let _="",m=function(e){return t=e.settings.sizes.swatches_height-7,o=e.settings.sizes.swatches_width-7,Math.atan(t/o)*(180/Math.PI)+"deg";var t,o}(e);const h=t?.swatch_title_display_type||r.SWATCH_TITLE_DISPLAY_TYPE.NONE;let f=!1,y=!1,b=!1,g=!1;h!==r.SWATCH_TITLE_DISPLAY_TYPE.NONE&&(f=!0,g=!0,b=h===r.SWATCH_TITLE_DISPLAY_TYPE.NEXT_WITH_BORDER||h===r.SWATCH_TITLE_DISPLAY_TYPE.NEXT,y=h===r.SWATCH_TITLE_DISPLAY_TYPE.NEXT_WITH_BORDER||h===r.SWATCH_TITLE_DISPLAY_TYPE.BELOW_WITH_BORDER),t.max_selector?_=1==t.max_selector&&s?"radio":"checkbox":(t.max_selector=t.color_value.length,_="checkbox");let v="";[4610,14658].includes(e.storeId)&&(v="class='po-title-value-inline'");const{swatch_input2_style:S,swatch_tooltip_style:O}=e.common.getCssAdvancedByOptionType(t.option_type),{swatch_label:I,swatch_type:x,color_value:P,image_value:E,cdn_image_value:T,default_value:C,extra_price:w,helptext_option_values:A}=t;let N="";N+=`<div ${t.stylesAttr} class="po-label-container"><label class="po-label" id="po_label${t.id}"><span ${v}>${t.label_on_product}`,N+=o,N+=0==t.help_text_type?n:"",N+="</span>",N+=1==t.help_text_type&&1==t.help_text_position?i:"",N+="</label></div>",N+=1==t.help_text_type&&0==t.help_text_position?i:"",N+=t.inline?'<div class="po-option--container po-option--type-swatch__inline po-option--swatch-container">':'<div class="po-option--type-swatch po-option--swatch-container">';for(let o=0;o<I.length;o++){let n=A[o];l||(n="");let r="",i="";const h=a(c,o,t,"swatch");h&&(r+="disabled",i=`--degree: ${m};`),[10271].includes(e.storeId)?(N+=`<div class="po-option--swatch-wrapper" style="display: flex; align-items: center;" id="po_swatch${o}">`,N+=`<input type="${_}" name="po_swatch${t.id}" value="${e.helper.escapeString(I[o])}" ${I[o]==C&&s&&"checked"} id="po_swatch${o}" key="po_${e.helper.formatOptionLabel(t.label_on_product)}" onchange="BSS_PO.po.handleChangeValue({selector: this, optionType: 'color_swatch', appliedOptionSetID: ${c}, optionID: ${o}, optionIdForCheckBoxOnly: ${t.id}, labelOnProduct: '${e.helper.formatOptionLabel(t.label_on_product)}', maxSelector: ${s?t.max_selector:null}, position: ${u}, optionSetConditionType:${d}})">`,N+=e.po.hoverSwatchValuesElement({swatch_type:x,swatch_label:I,color_value:P,image_value:E,cdn_image_value:T,swatch_tooltip_style:O,i:o,extra_price:w,appliedOptionSet:p,helptext_option_value:n}),N+="</div>"):(N+=`<div class="po-option--swatch-wrapper ${g?"po-option--swatch-wrapper-with-title":""}  po-option__select-quantity" id="po_swatch${o}">`,N+=`<label class="po-option__value ${r} ${y?"po-option__value--showBorder":""} ${g?b?"po-option__value--horizontal":"po-option__value--vertical":""} " >`,N+=`<input type="${_}" name="po_swatch${t.id}" value="${e.helper.escapeString(I[o])}" ${I[o]==C&&!h&&s&&"checked"} id="po_swatch${o}" key="po_${e.helper.formatOptionLabel(t.label_on_product)}" onchange="BSS_PO.po.handleChangeValue({selector: this, optionType: 'color_swatch', optionIdForCheckBoxOnly: ${t.id}, appliedOptionSetID: ${c}, optionID: ${o}, labelOnProduct: '${e.helper.formatOptionLabel(t.label_on_product)}', maxSelector: ${s?t.max_selector:null}, position: ${u}, optionSetConditionType:${d}})">`,N+=`<div class="po-option__swatch-media" tabindex="0" style="${i}">`,N+=e.po.hoverSwatchValuesElement({swatch_type:x,swatch_label:I,color_value:P,image_value:E,cdn_image_value:T,swatch_tooltip_style:O,i:o,extra_price:w,appliedOptionSet:p,helptext_option_value:n}),N+="</div>","function"==typeof bssFixSupportCustomShowLabel&&(N+=bssFixSupportCustomShowLabel(N,x,I,P,E,T,S,O,o,w,t)),f&&(N+=`<div class="po_description"> \n                                <p class="po-option__swatch-label ${b?"po-option__swatch-label--horizontal":"po-option__swatch-label--vertical"}">\n                                ${I[o]}\n                                </p>\n                                ${e.helper.isPrintableString(n)?`<p class="po_helptext_value ${b?"":"po-text-center"}">${n}</p>`:""}\n                            </div>`),b&&y&&(N+=e.po.hoverSwatchValuesElement({swatch_type:x,swatch_label:I,color_value:P,image_value:E,cdn_image_value:T,swatch_tooltip_style:O,i:o,extra_price:w,appliedOptionSet:p,helptext_option_value:n})),N+="</label>",N+="</div>")}return N+="</div>",N+=1==t.help_text_type&&2==t.help_text_position?i:"",N},e.po.getButtonHtml=function({option:t,requiredSpan:o,help_text_tooltip:n,help_text_content:r,appliedOptionSetID:i,position:c=0,optionSetConditionType:p}){let u="";t.max_selector?u=1==t.max_selector&&s?"radio":"checkbox":(t.max_selector=t.button_value.length,u="checkbox");const{button_value:d,default_value:_,helptext_option_values:m}=t;let h="";return h+=`<div ${t.stylesAttr} class="po-label-container"><label class="po-label" id="po_label${t.id}"><span>${t.label_on_product}`,h+=o,h+=0==t.help_text_type?n:"",h+="</span>",h+=1==t.help_text_type&&1==t.help_text_position?r:"",h+="</label></div>",h+=1==t.help_text_type&&0==t.help_text_position?r:"",h+=t.inline?'<div class="po-option--container po-option--type-button__inline po-option--button-container">':'<div class="po-option--type-button po-option--button-container">',d.forEach(((o,n)=>{let r="",d=m[n];const f=a(i,n,t,"button");f&&(r+="disabled");let y=`'${e.helper.escapeString(o)}'`;"function"==typeof bssfixSupportEncodeOptionValue&&(y=bssfixSupportEncodeOptionValue(e,t,o)),h+=`<div class="po-option--button-wrapper po-option__select-quantity" id="po_button${n}">`,h+=`<label class="po-option__value ${r}">`,h+=`<input type="${u}" name="po_button${t.id}" value=${y} ${o==_&&!f&&s&&"checked"} id="po_button${n}" onchange="BSS_PO.po.handleChangeValue({selector: this, optionType: 'button', appliedOptionSetID: ${i}, optionID: ${n}, labelOnProduct: '${e.helper.formatOptionLabel(t.label_on_product)}', optionIdForCheckBoxOnly: ${t.id}, maxSelector: ${s?t.max_selector:null}, position: ${c}, optionSetConditionType: ${p}});">`,h+='<div class="po-option__button-media">',h+=`<div class="po_helptext_value--button">\n                        ${l&&e.helper.isPrintableString(d)?`<p class="po_helptext_value">${d}</p>`:""} \n                    </div>`,h+=`<div class="po-value po-option__button-value">${o}</div>`,h+="</div>",h+="</label>",h+="</div>"})),h+="</div>",h+=1==t.help_text_type&&2==t.help_text_position?r:"",h},e.po.getFileUploadHtml=function({option:t,requiredSpan:o,help_text_tooltip:n,help_text_content:i,position:a,optionSetConditionType:s}){let l="Uploading";const c=e?.settings?.generals?.file_display_type??r.FILE_DISPLAY_TYPE.MULTIPLE_FILE_PER_ROW;"function"==typeof bssFixSupportCustomUploading&&(l=bssFixSupportCustomUploading(e));let p="";return c===r.FILE_DISPLAY_TYPE.MULTIPLE_FILE_PER_ROW?(p+=`<div ${t.stylesAttr} class="po-label-container"><label class="po-label" id="po_label${t.id}"><span>${t.label_on_product}`,p+=o,p+=0==t.help_text_type?n:"",p+="</span>",p+=1==t.help_text_type&&1==t.help_text_position?i:"",p+="</label></div>",p+=1==t.help_text_type&&0==t.help_text_position?i:"",p+=`<div class="po-option--container po-option-uploadfile">\n                        <div class="file-uploaded file-uploaded${t.id}">\n                            <div class="po-file-loading">\n                                <div>${l} </div>\n                                <progress value="100" max="100"  style="--value: 100; --max: 100;" class="po-progress"></progress>\n                            </div>\n                        </div>`,p+=`<div class="upload-frame">\n                        <input type="file" id="file${t.id+"-"+a}" name="po_file_upload${t.id}" multiple style="display: none"/>`,"function"==typeof bssFixSupportFileUploadHTML?p=bssFixSupportFileUploadHTML(e,p,t,a):window.bss_admin_option?(p+=`<label class="btn-uploadfile" tabindex="0">\n            <div class="bss-icon">\n                <svg width="17" height="22" viewBox="0 0 17 22" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path d="M8.5 1L8.5 21M8.5 1C6.53936 1 2.87628 4.23575 1.5 5.5M8.5 1C10.4606 1 14.6237 4.23575 16 5.5" stroke="#203888" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n                </svg>\n            </div>\n             <span class="bss-uploadFile-text">\n                    <span class="bss-uploadFile-text__text"> ${e.settings.translations.button_choose_file_text} </span>\n                    <span class="bss-uploadFile-text__size">Max ${[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)?"50":"20"} MB</span>\n            </span>\n            </label>`,p+=`<span class="option-file-upload-${t.id}"></span>`,p+="</div>",p+=`<span id="errorfile${t.id}" style="display: none">${e.settings.translations.check_size_text} ${[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)?"50":"20"}MB</span>`):(p+=`<label for="file${t.id+"-"+a}" class="btn-uploadfile" tabindex="0">\n                <div class="bss-icon">\n                    <svg width="17" height="22" viewBox="0 0 17 22" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path d="M8.5 1L8.5 21M8.5 1C6.53936 1 2.87628 4.23575 1.5 5.5M8.5 1C10.4606 1 14.6237 4.23575 16 5.5" stroke="#203888" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n                    </svg>\n                </div>\n                    <span class="bss-uploadFile-text">\n                    <span class="bss-uploadFile-text__text"> ${e.settings.translations.button_choose_file_text} </span>\n                    <span class="bss-uploadFile-text__size">Max ${[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)?"50":"20"} MB</span>\n                    </span>\n            </label>`,p+=`<span class="option-file-upload-${t.id}"></span>`,p+="</div>"),p+="</div>",p+=`<span id="errorfile${t.id}" style="display: none">${e.settings.translations.check_size_text} 5MB</span>`,p+=`<span class="po-image-preview-file-upload image-preview${t.id}" style="display: none"></span>`,p+=1==t.help_text_type&&2==t.help_text_position?i:""):(p+=`<div ${t.stylesAttr} class="po-label-container"><label class="po-label" id="po_label${t.id}"><span>${t.label_on_product}`,p+=o,p+=0==t.help_text_type?n:"",p+="</span>",p+=1==t.help_text_type&&1==t.help_text_position?i:"",p+="</label></div>",p+=1==t.help_text_type&&0==t.help_text_position?i:"",p+='<div class="po-option--container po-option-uploadfile po-dropzone-option-uploadfile">',"function"==typeof bssFixSupportFileUploadHTML?p=bssFixSupportFileUploadHTML(e,p,t,a):window.bss_admin_option?p+=`<div class="po-dropzone-container">\n                            <div class="po-dropzone" id="dropzone-${t.id}-${a}">\n                                <input type="file" id="file${t.id+"-"+a}" name="po_file_upload${t.id}" multiple style="display: none"/>\n                                <div class="po-dropzone-content">\n                                    <label class="bss-dropzone-text__text dropzone-btn-uploadfile" tabindex="0"> ${e.settings.translations.button_choose_file_text} </label>\n                                    <p>${e.settings.translations.drag_drop_file_to_upload_text||"or drop file to upload"}</p>\n                                    <span class="bss-dropzone-text__size">Max ${[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)?"50":"20"} MB</span>\n                                </div>\n                            </div>\n                            <div class="file-uploaded file-uploaded${t.id} dropzone-file-uploaded">\n                                <div class="po-file-loading po-dropzone-file-loading">\n                                    <div class="po-dropzone-file-loading-container">\n                                        <div class="po-dropzone-placeholder-file-loading"></div>\n                                        <div class="po-dropzone-content-file-loading">\n                                            <div class="po-dropzone-uploading-filename-container">${l} <span class="po-dropzone-uploading-filename"></div>\n                                            <progress value="100" max="100"  style="--value: 100; --max: 100;" class="po-progress po-dropzone-progress"></progress>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="po-file-preview-container"></div>\n                            </div>\n                        </div>`:p+=`<div class="po-dropzone-container">\n                            <label for="file${t.id+"-"+a}"  class="po-dropzone" id="dropzone-${t.id}-${a}">\n                                <input type="file" id="file${t.id+"-"+a}" name="po_file_upload${t.id}" multiple style="display: none"/>\n                                <div class="po-dropzone-content">\n                                    <label for="file${t.id+"-"+a}" class="bss-dropzone-text__text dropzone-btn-uploadfile" tabindex="0"> ${e.settings.translations.button_choose_file_text} </label>\n                                    <p>${e.settings.translations.drag_drop_file_to_upload_text||"or drop file to upload"}</p>\n                                    <span class="bss-dropzone-text__size">Max ${[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)?"50":"20"} MB</span>\n                                </div>\n                            </label>\n                            <div class="file-uploaded file-uploaded${t.id} dropzone-file-uploaded">\n                                <div class="po-file-loading po-dropzone-file-loading">\n                                    <div class="po-dropzone-file-loading-container">\n                                        <div class="po-dropzone-placeholder-file-loading"></div>\n                                        <div class="po-dropzone-content-file-loading">\n                                            <div class="po-dropzone-uploading-filename-container">${l} <span class="po-dropzone-uploading-filename"></div>\n                                            <progress value="100" max="100"  style="--value: 100; --max: 100;" class="po-progress po-dropzone-progress"></progress>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="po-file-preview-container"></div>\n                            </div>\n                        </div>`,p+=`<span id="errorfile${t.id}" style="display: none">${e.settings.translations.check_size_text} ${[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)?"50":"20"}MB</span>`,p+=`<span class="po-image-preview-file-upload image-preview${t.id}" style="display: none"></span>`,p+=1==t.help_text_type&&2==t.help_text_position?i:"",p+="</div>"),p},e.po.getDateTimePickerHtml=function({option:t,requiredSpan:o,help_text_tooltip:n,help_text_content:r,optionSetConditionType:i}){let a;0==t.display_date_time_type?1==t.time_format?a=0==t.overall_format?"DD-MM-YYYY HH:mm":1==t.overall_format?"MM-DD-YYYY HH:mm":2==t.overall_format?"30th January, YYYY HH:mm":"January 30th, YYYY HH:mm":0==t.time_format&&(a=0==t.overall_format?"DD-MM-YYYY HH:mm AM/PM":1==t.overall_format?"MM-DD-YYYY HH:mm AM/PM":2==t.overall_format?"30th January, YYYY HH:mm AM/PM":"January 30th, YYYY HH:mm AM/PM"):1==t.display_date_time_type?a=0==t.overall_format?"DD-MM-YYYY":1==t.overall_format?"MM-DD-YYYY":2==t.overall_format?"30th January, YYYY":"January 30th, YYYY":2==t.display_date_time_type&&(a=0==t.time_format?"HH:mm AM/PM":"HH:mm"),1612==e.storeId&&(a=2==t.display_date_time_type?"HH:mm":1==t.display_date_time_type?"DD/MM/YYYY":"DD/MM/YYYY HH:mm"),4126==e.storeId&&(a="");let s="";return s+=`<div ${t.stylesAttr} class="po-label-container"><label class="po-label" id="po_label${t.id}"><span>${t.label_on_product}</span>`,s+=o,s+=0==t.help_text_type?n:"",s+=1==t.help_text_type&&1==t.help_text_position?r:"",s+="</label></div>",s+=1==t.help_text_type&&0==t.help_text_position?r:"",s+=`<div class="date-time-error date-range--error"></div>\n                <div class="date-time-error time-picker--error"></div>\n                <div class="po-option--container">\n                    <div class="flatpickr datetime${t.id} po-option--type-datepicker">\n                        <input type="text" class="po-option--type-text po-value po-option--type-datepicker-input" id="datetime${t.id}" \n                        placeholder="${t.placeholder||"Pick a date"}" name="po_datetime${t.id}" data-input />\n                        <a class="input-button" title="toggle" data-toggle>\n                            <i class="fa-calendar-custom"></i>\n                        </a>\n                        <a class="input-button" title="clear" data-clear>\n                            <i class="fa-cancel-custom"></i>\n                        </a>\n                    </div>\n                </div>`,s+=1==t.help_text_type&&2==t.help_text_position?r:"",s},e.po.getColorPickerHtml=function({option:e,requiredSpan:t,help_text_tooltip:o,help_text_content:n,position:r,optionSetConditionType:i}){let a="";if(a+=`<div ${e.stylesAttr} class="po-label-container"><label class="po-label" for="po_color_picker${e.id}" id="po_label${e.id}"><span>${e.label_on_product}`,a+=t,a+=0==e.help_text_type?o:"",a+="</span>",a+=1==e.help_text_type&&1==e.help_text_position?n:"",a+="</label></div>",a+=1==e.help_text_type&&0==e.help_text_position?n:"",a+='<div class="po-option--container po-option--color-picker-container"> \n                    <div class="po-option--color-picker-content">',"function"!=typeof bssfixSupportForChangeInputColor)return a+=`<input class="po-option--type-color-picker" type="color" name="po_color_picker${e.id}" id="po_color_picker${e.id}" value="#ffffff" />\n                <input class="po-value po-color-picker-value" type="text" name="po_color_picker_value${e.id}" readonly="readonly" placeholder="${e.placeholder}" value="" />\n                <a class="po-color-picker-clear-btn${e.id}" title="clear" >\n                    <i class="fa-cancel-custom"></i>\n                </a>\n            </div>\n            </div>`,a+=1==e.help_text_type&&2==e.help_text_position?n:"",a;window.handleChangeColorInput=bssfixSupportForChangeInputColor,a+=`<input class="po-option--type-color-picker" type="color" name="po_color_picker${e.id}" id="po_color_picker${e.id}" value="#ffffff" onchange="handleChangeColorInput(this.value)" />`},e.po.getInstructionHtml=function({option:e,optionSetConditionType:t}){const{instruction_value:o}=e;return`\n            <div class="po-option--container po-option--instruction-container">\n                ${o}\n            </div>`},e.po.getHeadingHtml=function({option:e,optionSetConditionType:t}){const{heading_value:o}=e;let n="";return n+='<div class="po-option--container po-option--heading-container">',n+=`${o}`,n+="</div>",n},e.po.getDividerHtml=function({option:e,optionSetConditionType:t}){const{divider_value:o}=e;let n="";return n+='<div class="po-option--container po-option--divider-container">',n+=`${o}`,n+="</div>",n},e.po.getPopupHtml=function({option:e,help_text_tooltip:t,help_text_content:o}){const{popup_value:n,label_on_product:r,label_on_popup:i}=e;return`    \n            <details class="po-option--container po-option--popup-container" id="po-popup${e.id}" po-option-id="${e.id}">\n                <summary>\n                <div class="po-option--popup__button" onclick="BSS_PO.po.openPopupModal(this)">\n                    ${r}\n                </div>\n                <span class="po-label--popup" id="po_label${e.id}">\n                    <span>\n                    ${0==e.help_text_type?t:""}\n                    </span>\n                    ${1==e.help_text_type&&1==e.help_text_position?o:""}\n                </span>\n                ${1==e.help_text_type&&0==e.help_text_position?o:""}\n                </summary>\n                <details class="po-option--container po-option--popup-container open" id="po-popup${e.id}" po-option-id="${e.id}">\n                    <summary></summary>\n                    <div class="po-option--popup__modal--container">\n                        <div class="po-option--popup__overlay"></div>\n                        <div class="po-option--popup__modal">\n                            <div class="po-option--popup__modal-close" id="po-popup${e.id}-close" onclick="BSS_PO.po.closePopupModal(this)">\n                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">\n                                <path fill-rule="evenodd" clip-rule="evenodd" d="M13.7071 1.70711C14.0976 1.31658 14.0976 0.683417 13.7071 0.292893C13.3166 -0.0976311 12.6834 -0.0976311 12.2929 0.292893L7 5.58579L1.70711 0.292893C1.31658 -0.0976311 0.683417 -0.0976311 0.292893 0.292893C-0.0976311 0.683417 -0.0976311 1.31658 0.292893 1.70711L5.58579 7L0.292893 12.2929C-0.0976311 12.6834 -0.0976311 13.3166 0.292893 13.7071C0.683417 14.0976 1.31658 14.0976 1.70711 13.7071L7 8.41421L12.2929 13.7071C12.6834 14.0976 13.3166 14.0976 13.7071 13.7071C14.0976 13.3166 14.0976 12.6834 13.7071 12.2929L8.41421 7L13.7071 1.70711Z" fill="black" />\n                                </svg>\n                            </div>\n                            <div class="po-option--popup__modal-title">\n                                <h1>${i}</h1>\n                            </div>\n                            <div class="po-option--popup__modal-content">\n                                ${n}\n                            </div>\n                        </div>\n                    </div>\n                </details>\n            </details>\n            `},e.po.openPopupModal=e=>{let t=e.closest("details.po-option--popup-container").getAttribute("po-option-id"),o=document.querySelectorAll(`[po-option-id="${t}"].open`);o[0].setAttribute("open",!0),o.length<2&&document.querySelector("body").appendChild(o[0])},e.po.closePopupModal=e=>{let t=document.querySelectorAll("details.po-option--popup-container");for(let e of t)e.removeAttribute("open")},e.po.validateOptionSetBeforeRenderHtml=function({appliedOptionSet:e}){function t(e){let t=1==e.hide_label?'style="display: none;"':"",{sku_value:o,helptext_option_values:n}=e;return"object"==typeof n&&null!=n||(n=Array(o.length).fill(null)),{...e,helptext_option_values:n,stylesAttr:t}}let o=[];for(let n of e.options)o.push(t(n));return(0,n.sortOptionsByIndexAscending)(o)},e.po.getOptionHtml=function({appliedOptionSet:t,idProductOnHomePage:n=""}){let i=0;if(e.page.isHomePage()||e.page.isCollectionPage()&&7019==e.storeId||1569==e.storeId){let e=document.querySelectorAll("[bss-po-featured-product-key]");!e.length&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(e=document.querySelectorAll('[id*="product_form"]')),e.forEach(((e,t)=>{let o=e.getAttribute("bss-po-featured-product-key");if(!o&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct){const t=e.getAttribute("id")?.match(/product_form_(\d+)/);t&&(o=t[1])}o==n&&(i=t)}))}let a=e.po.validateOptionSetBeforeRenderHtml({appliedOptionSet:t});const l=e.common.generateUniqueId();t.uniqueId||(t.uniqueId=l);const p=t.uniqueId;let u=[];a.forEach((e=>{""!=e.default_value&&s&&([r.OPTION_TYPE.TEXT_BOX,r.OPTION_TYPE.CHECKBOX,r.OPTION_TYPE.DROPDOWN,r.OPTION_TYPE.RADIO_BUTTON,r.OPTION_TYPE.SWITCH,r.OPTION_TYPE.SWATCH,r.OPTION_TYPE.BUTTON,r.OPTION_TYPE.DROPDOWN_THUMBNAIL,r.OPTION_TYPE.EMAIL].includes(e.option_type)&&u.push({label:e.label_on_product,value:e.default_value}),e.option_type==r.OPTION_TYPE.NUMBER&&u.push({label:e.label_on_product,value:parseInt(e.default_value)}))}));const d=t.product_condition_type;let _=`<div id="po_container--${t.id}" class="bss-po-product-page${4!==d||window.bss_admin_option?"":" bss-po-specific-variant"}" data-position=${p}>`;_+='<form class="po-col-span-12 po-form-option-container">';const m=new c(t,e.displayMap);a.forEach(((n,a)=>{let l="po-col-span-12";switch(n?.option_setting_width){case r.OPTION_WIDTH_SETTING.WIDTH_25:l="po-col-span-3";break;case r.OPTION_WIDTH_SETTING.WIDTH_33:l="po-col-span-4";break;case r.OPTION_WIDTH_SETTING.WIDTH_50:l="po-col-span-6";break;case r.OPTION_WIDTH_SETTING.WIDTH_66:l="po-col-span-8";break;case r.OPTION_WIDTH_SETTING.WIDTH_75:l="po-col-span-9";break;case r.OPTION_WIDTH_SETTING.WIDTH_100:default:l="po-col-span-12"}let c="flex";m.canShow(n.label_on_product)?""!=n.default_value&&s&&([r.OPTION_TYPE.TEXT_BOX,r.OPTION_TYPE.CHECKBOX,r.OPTION_TYPE.DROPDOWN,r.OPTION_TYPE.RADIO_BUTTON,r.OPTION_TYPE.SWATCH,r.OPTION_TYPE.BUTTON,r.OPTION_TYPE.DROPDOWN_THUMBNAIL,r.OPTION_TYPE.EMAIL,r.OPTION_TYPE.SWITCH].includes(n.option_type)&&o.push({label:n.label_on_product,value:n.default_value,id:n.id}),n.option_type==r.OPTION_TYPE.NUMBER&&o.push({label:n.label_on_product,value:parseInt(n.default_value),id:n.id})):c="none",e.displayMap.set(n.id,c);const p=t.id;let u=n.required?'<span class="po-required">*</span>':"",h=n.help_text&&""!==n.help_text.trim?`<div class="po-helptext-tooltip"><i class="fa-info-custom"></i><span class="tooltip-text po-helptext-tooltip-resize">${n.help_text}</span></div>`:"",f=n.help_text&&""!==n.help_text.trim?`<div class="po-helptext-content"><p>${n.help_text}</p></div>`:"";_+=`<div class="po-stack ${l} po-stack--vertical${7539!=e.storeId||n.option_type!=r.OPTION_TYPE.DROPDOWN&&n.option_type!=r.OPTION_TYPE.TEXT_BOX?"":" custom-7539"}" id="po_stack${n.id}" style="display: ${c}">`;let y=1==n.hide_label?'style="display: none;"':"";(n={...n,stylesAttr:y}).option_type==r.OPTION_TYPE.TEXT_BOX?_+=e.po.getTextBoxHtml({option:n,requiredSpan:u,help_text_tooltip:h,help_text_content:f,appliedOptionSetID:p,position:i,optionSetConditionType:d}):n.option_type==r.OPTION_TYPE.NUMBER?_+=e.po.getNumberFieldHtml({option:n,requiredSpan:u,help_text_tooltip:h,help_text_content:f,appliedOptionSetID:p,position:i,optionSetConditionType:d}):n.option_type==r.OPTION_TYPE.CHECKBOX?_+=e.po.getCheckboxHtml({option:n,requiredSpan:u,help_text_tooltip:h,help_text_content:f,appliedOptionSetID:p,position:i,optionSetConditionType:d}):n.option_type==r.OPTION_TYPE.DROPDOWN?_+=e.po.getDropdownMenuHtml({option:n,requiredSpan:u,help_text_tooltip:h,help_text_content:f,appliedOptionSetID:p,position:i,optionSetConditionType:d}):n.option_type==r.OPTION_TYPE.RADIO_BUTTON?_+=e.po.getRadioButtonHtml({option:n,requiredSpan:u,help_text_tooltip:h,help_text_content:f,appliedOptionSetID:p,position:i,optionSetConditionType:d}):n.option_type==r.OPTION_TYPE.SWATCH?_+=e.po.getSwatchHtml({option:n,requiredSpan:u,help_text_tooltip:h,help_text_content:f,appliedOptionSetID:p,appliedOptionSet:t,position:i,optionSetConditionType:d}):n.option_type==r.OPTION_TYPE.BUTTON?_+=e.po.getButtonHtml({option:n,requiredSpan:u,help_text_tooltip:h,help_text_content:f,appliedOptionSetID:p,position:i,optionSetConditionType:d}):n.option_type==r.OPTION_TYPE.FILE_UPLOAD&&(e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)||(!e.currentPlan||[r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan))&&e.storeId<=e.storeIdCustomOld)?_+=e.po.getFileUploadHtml({option:n,requiredSpan:u,help_text_tooltip:h,help_text_content:f,position:i,optionSetConditionType:d}):n.option_type==r.OPTION_TYPE.DATE_PICKER&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)?_+=e.po.getDateTimePickerHtml({option:n,requiredSpan:u,help_text_tooltip:h,help_text_content:f,position:i}):n.option_type==r.OPTION_TYPE.INSTRUCTION?_+=e.po.getInstructionHtml({option:n,optionSetConditionType:d}):n.option_type==r.OPTION_TYPE.COLOR_PICKER&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)?_+=e.po.getColorPickerHtml({option:n,requiredSpan:u,help_text_tooltip:h,help_text_content:f,appliedOptionSetID:p,position:i,optionSetConditionType:d}):n.option_type==r.OPTION_TYPE.TEXT_AREA?_+=e.po.getTextAreaHtml({option:n,requiredSpan:u,help_text_tooltip:h,help_text_content:f,appliedOptionSetID:p,position:i,optionSetConditionType:d}):n.option_type==r.OPTION_TYPE.DROPDOWN_THUMBNAIL&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)?_+=e.po.getDropdownWithThumbnailMenuHtml({option:n,requiredSpan:u,help_text_tooltip:h,help_text_content:f,appliedOptionSetID:p,position:i,optionSetConditionType:d}):n.option_type==r.OPTION_TYPE.EMAIL&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)?_+=e.po.getEmailBoxHtml({option:n,requiredSpan:u,help_text_tooltip:h,help_text_content:f,appliedOptionSetID:p,position:i,optionSetConditionType:d}):n.option_type==r.OPTION_TYPE.POPUP?_+=e.po.getPopupHtml({option:n,requiredSpan:u,help_text_tooltip:h,help_text_content:f,appliedOptionSetID:p,position:i,optionSetConditionType:d}):n.option_type==r.OPTION_TYPE.HEADING?_+=e.po.getHeadingHtml({option:n,appliedOptionSetID:p,position:i,optionSetConditionType:d}):n.option_type==r.OPTION_TYPE.DIVIDER?_+=e.po.getDividerHtml({option:n,appliedOptionSetID:p,position:i,optionSetConditionType:d}):n.option_type==r.OPTION_TYPE.SWITCH&&(_+=e.po.getSwitchHtml({option:n,requiredSpan:u,help_text_tooltip:h,help_text_content:f,appliedOptionSetID:p,position:i,optionSetConditionType:d})),_+="</div>"})),_+="</form>";const h="color: unset !important;\n                text-decoration: none !important;\n                width: fit-content !important;\n                position: unset !important;\n                clip-path: unset !important;\n                opacity: 1 !important;\n                visibility: unset !important;\n                height: unset !important;\n                max-height: unset !important;\n                max-width: unset !important;\n                min-width: unset !important;\n                min-height: unset !important;\n                margin-right: unset !important;\n                margin-bottom: unset !important;",f=`<a class="po-col-span-12" href="https://apps.shopify.com/product-options-by-bss?utm_source=powered&utm_medium=merchant-store&utm_campaign=watermark" target="_blank" style="${h} margin-top: 12px !important; margin-left: auto!important; display:flex!important; text-align: center !important;flex-direction: column !important"> <div style="${h} text-decoration: none !important; background-color: rgba(223, 252, 255, 1)!important; font-size: 13px !important; border-radius: 50px !important; padding: 4px 20px !important; width: fit-content !important; opacity: 1 !important; display: flex !important; align-items: center !important; gap: 4px !important; opacity: 1 !important; visibility: visible !important;"> <span style="${h} display:unset!important; font-weight: 600">Powered by</span> <span style="${h} display:unset!important; color: rgba(0, 188, 212, 1) !important; font-weight: 700 !important;">OPTIS Product Options</span> </div></a>`;return"function"==typeof bssFixSupportHideWaterMark&&(bssFixSupportHideWaterMark()||(_+=f)),([r.PRICING.CODE.ADVANCED,r.PRICING.CODE.NEW_ADVANCED,r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED].includes(e.currentPlan)&&!e.canUseStorefrontFeature||e.currentPlan==r.PRICING.CODE.PLATINUM)&&(_=_.replace(f,"")),_+="</div>",o&&o.length>0&&setTimeout((()=>{e.po.optionHandler&&e.po.optionHandler.updateGlobalSelectedOptions&&e.po.optionHandler.updateGlobalSelectedOptions(t.id)}),0),_},e.po.displayChosenSwatchOptionTitles=function({option:t,checkedSelectors:o,index:n=0,optionSetConditionType:i}){if(4589==e.storeId&&(t.option_type==r.OPTION_TYPE.SWATCH||t.option_type==r.OPTION_TYPE.BUTTON))return;let a=[],s=document.querySelectorAll(4!==i||window.bss_admin_option?".bss-po-product-page:not(.bss-po-specific-variant)":".bss-po-product-page.bss-po-specific-variant")[n].querySelectorAll(o),l="";if(e.page.isHomePage()||e.page.isCollectionPage()&&7019==e.storeId||1569==e.storeId){s=document.querySelectorAll(o);let e=o.match(/'(\d+)'/);!e&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(e=o?.match(/product_form_(\d+)/)),l=e?e[1]:""}s.forEach((o=>{const n=e.common.getQuantityByOptionValue(t,o,l);if(n)a.push(`${n} x ${o.value}`);else{let n=o.value;"function"==typeof bssSupportCustomSelectedValue&&(n=bssSupportCustomSelectedValue(e,t,o.value,r.OPTION_SETTINGS_TYPE2)),a.push(n)}}));let c=`<div class="po-selected-swatch"><p class="swatch_value po-value">${a.join(", ")}</p></div>`;5045==e.storeId&&(c="");let p=document.querySelectorAll("#po_stack"+t.id)[n];e.page.isHomePage()&&document.querySelector(o)&&(p=document.querySelector(o).closest("#po_stack"+t.id)),p.querySelector(".po-selected-swatch")&&p.querySelector(".po-selected-swatch").parentNode.removeChild(p.querySelector(".po-selected-swatch")),a.length&&("function"==typeof bssFixSupportChangePositionSelectedSwatch?bssFixSupportChangePositionSelectedSwatch(e,p,c):p.querySelector(".po-helptext-content")&&p.querySelector(".po-label-container").nextElementSibling.classList.contains("po-helptext-content")?p.querySelector(".po-helptext-content").insertAdjacentHTML("afterend",c):14658==e.storeId?p.querySelector(".po-title-value-inline").insertAdjacentHTML("afterend",c):p.querySelector(".po-label").insertAdjacentHTML("afterend",c))},e.po.displayPriceAddOnsForOptionValue=function({option:t,element:o,currentLabel:n,idProduct:i="",optionSetConditionType:a}){if(e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)&&e.enableAddOns){if(t.option_type==r.OPTION_TYPE.TEXT_BOX){let o=e.common.getExtraPriceByOption(t);o=e.common.convertRate(o);let r="(+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(o))+")";"function"==typeof bssFixSupportPriceAddOnTextValue&&(r=bssFixSupportPriceAddOnTextValue(e,e.money.addMoneyWithCurrencyFormat("0",parseFloat(o))));let i=`<span class="po-extra-price">${r}</span>`;o>0&&n.insertAdjacentHTML("beforeend",i)}else if(t.option_type==r.OPTION_TYPE.NUMBER){let o=e.common.getExtraPriceByOption(t);o=e.common.convertRate(o);let r="(+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(o))+")";"function"==typeof bssFixSupportPriceAddOnTextValue&&(r=bssFixSupportPriceAddOnTextValue(e,e.money.addMoneyWithCurrencyFormat("0",parseFloat(o))));let i=`<span class="po-extra-price">${r}</span>`;o>0&&n.insertAdjacentHTML("beforeend",i)}else if(t.option_type==r.OPTION_TYPE.CHECKBOX)o.forEach(((o,n)=>{let r=e.common.getExtraPriceByOption(t,n);if(r=e.common.convertRate(r),r){let t="(+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))+")";"function"==typeof bssFixSupportPriceAddOnTextValue&&(t=bssFixSupportPriceAddOnTextValue(e,e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))));let n=`<span class="po-extra-price">${t}</span>`;o.parentNode.querySelector(".po-option__checkbox-value").insertAdjacentHTML("beforeend",n)}}));else if(t.option_type==r.OPTION_TYPE.DROPDOWN){const n=o.querySelectorAll(".po-option__dropdown-value");let r=document.querySelectorAll(`#po_dropdown${t.id} option[id*="po_dropdown"]`);(e.page.isHomePage()&&i||e.page.isCollectionPage()&&7019==e.storeId||1569==e.storeId)&&(r=document.querySelectorAll(`[bss-po-featured-product-key='${i}'] #po_dropdown${t.id} option[id*="po_dropdown"]`),!r&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(r=document.querySelectorAll(`[id*='product_form_${i}'] #po_dropdown${t.id} option[id*="po_dropdown"]`))),r.forEach(((o,r)=>{let i=e.common.getExtraPriceByOption(t,r);i=e.common.convertRate(i);let a=" (+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(i))+")";o&&"function"==typeof bssFixSupportPriceAddOnTextValue&&(a=bssFixSupportPriceAddOnTextValue(e,e.money.addMoneyWithCurrencyFormat("0",parseFloat(i))));let s=`<span class="po-extra-price">${a}</span>`;i&&n[r].insertAdjacentHTML("beforeend",s)}))}else if(t.option_type==r.OPTION_TYPE.RADIO_BUTTON)o.forEach(((o,n)=>{let r=e.common.getExtraPriceByOption(t,n);if(r=e.common.convertRate(r),r){let t="(+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))+")";"function"==typeof bssFixSupportPriceAddOnTextValue&&(t=bssFixSupportPriceAddOnTextValue(e,e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))));let n=`<span class="po-extra-price">${t}</span>`;o.parentNode.querySelector(".po-option__radio-button-value").insertAdjacentHTML("beforeend",n)}}));else if(t.option_type==r.OPTION_TYPE.BUTTON)o.forEach(((o,n)=>{let r=e.common.getExtraPriceByOption(t,n);if(r=e.common.convertRate(r),r){let t="(+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))+")";"function"==typeof bssFixSupportPriceAddOnTextValue&&(t=bssFixSupportPriceAddOnTextValue(e,e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))));let n=`<span class="po-extra-price">${t}</span>`;o.parentNode.querySelector(".po-option__button-value").insertAdjacentHTML("beforeend",n)}}));else if(t.option_type==r.OPTION_TYPE.FILE_UPLOAD){let r=e.common.getExtraPriceByOption(t);r=e.common.convertRate(r),e.common.getLinkFileUploadedBySelector({selector:`#${o.id}`,optionId:t.id,optionSetConditionType:a});let i="(+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))+")";"function"==typeof bssFixSupportPriceAddOnTextValue&&(i=bssFixSupportPriceAddOnTextValue(e,e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))));let s=`<span class="po-extra-price">${i}</span>`;r&&n.insertAdjacentHTML("beforeend",s)}else if(t.option_type==r.OPTION_TYPE.COLOR_PICKER){let o=e.common.getExtraPriceByOption(t);o=e.common.convertRate(o);let r="(+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(o))+")";"function"==typeof bssFixSupportPriceAddOnTextValue&&(r=bssFixSupportPriceAddOnTextValue(e,e.money.addMoneyWithCurrencyFormat("0",parseFloat(o))));let i=`<span class="po-extra-price">${r}</span>`;o>0&&n.insertAdjacentHTML("beforeend",i)}else if(t.option_type==r.OPTION_TYPE.TEXT_AREA){let o=e.common.getExtraPriceByOption(t);o=e.common.convertRate(o);let r="(+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(o))+")";"function"==typeof bssFixSupportPriceAddOnTextValue&&(r=bssFixSupportPriceAddOnTextValue(e,e.money.addMoneyWithCurrencyFormat("0",parseFloat(o))));let i=`<span class="po-extra-price">${r}</span>`;o>0&&n.insertAdjacentHTML("beforeend",i)}else if(t.option_type==r.OPTION_TYPE.DROPDOWN_THUMBNAIL){const n=o.querySelectorAll(".po-option__dropdown-thumbnail-value");let r=document.querySelectorAll(`#po_dropdown_thumbnail${t.id} option[id*="po_dropdown"]`);(e.page.isHomePage()&&i||e.page.isCollectionPage()&&7019==e.storeId||1569==e.storeId)&&(r=document.querySelectorAll(`[bss-po-featured-product-key='${i}'] #po_dropdown_thumbnail${t.id} option[id*="po_dropdown"]`),!r&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(r=document.querySelectorAll(`[id*='product_form_${i}'] #po_dropdown_thumbnail${t.id} option[id*="po_dropdown"]`))),r.forEach(((o,r)=>{let i=e.common.getExtraPriceByOption(t,r);i=e.common.convertRate(i);let a="(+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(i))+")";"function"==typeof bssFixSupportPriceAddOnTextValue&&(a=bssFixSupportPriceAddOnTextValue(e,e.money.addMoneyWithCurrencyFormat("0",parseFloat(i))));let s=`<span class="po-extra-price">${a}</span>`;i&&n[r].insertAdjacentHTML("beforeend",s)}))}else if(t.option_type==r.OPTION_TYPE.EMAIL){let o=e.common.getExtraPriceByOption(t);o=e.common.convertRate(o);let r="(+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(o))+")";"function"==typeof bssFixSupportPriceAddOnTextValue&&(r=bssFixSupportPriceAddOnTextValue(e,e.money.addMoneyWithCurrencyFormat("0",parseFloat(o))));let i=`<span class="po-extra-price">${r}</span>`;o>0&&n.insertAdjacentHTML("beforeend",i)}else t.option_type==r.OPTION_TYPE.SWITCH&&o.forEach(((o,n)=>{let r=e.common.getExtraPriceByOption(t,n);if(r=e.common.convertRate(r),r){let t="(+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))+")";"function"==typeof bssFixSupportPriceAddOnTextValue&&(t=bssFixSupportPriceAddOnTextValue(e,e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))));let n=`<span class="po-extra-price">${t}</span>`;o.closest(".po-option--type-switch").querySelector(".po-option__switch-value").insertAdjacentHTML("beforeend",n)}}));if("function"==typeof bssFixSupportCustomPriceIncreament||[r.PRICING.CODE.ADVANCED,r.PRICING.CODE.NEW_ADVANCED,r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&e.enableDisplayProductPrice&&e.enableAddOns){let e=new Event("BSSchangeProductPrice",{bubbles:!0});document.dispatchEvent(e)}}},e.po.displayPriceAddOnsWithChosenOptions=function({option:t,element:o,currentLabel:n,idProduct:i="",optionSetConditionType:a}){if(!e.currentPlan||[r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)||!e.enableAddOns)return;const s=(e.settings?.generals?.add_ons_display_type??r.ADD_ONS_DISPLAY_TYPE.SHOW_AFTER_SELECTING)===r.ADD_ONS_DISPLAY_TYPE.ALWAYS_SHOW;if(s&&r.OPTION_VALUE_TYPE.SINGLE.includes(parseInt(t.option_type))||n.querySelector(".po-extra-price")&&n.querySelector(".po-extra-price").parentNode.removeChild(n.querySelector(".po-extra-price")),s&&r.OPTION_VALUE_TYPE.SINGLE.includes(parseInt(t.option_type)));else if(t.option_type==r.OPTION_TYPE.TEXT_BOX){let r=e.common.getExtraPriceByOption(t);r=e.common.convertRate(r);let i="(+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))+")";"function"==typeof bssFixSupportPriceAddOnTextValue&&(i=bssFixSupportPriceAddOnTextValue(e,e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))));let a=`<span class="po-extra-price">${i}</span>`;o.value.length&&r>0&&("function"==typeof bssFixSupportAddOnTextPosition?bssFixSupportAddOnTextPosition(e,n,a):n.insertAdjacentHTML("beforeend",a))}else if(t.option_type==r.OPTION_TYPE.NUMBER){let r=e.common.getExtraPriceByOption(t);r=e.common.convertRate(r);let i="(+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))+")";"function"==typeof bssFixSupportPriceAddOnTextValue&&(i=bssFixSupportPriceAddOnTextValue(e,e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))));let a=`<span class="po-extra-price">${i}</span>`;o.value.length&&r>0&&("function"==typeof bssFixSupportAddOnTextPosition?bssFixSupportAddOnTextPosition(e,n,a):n.insertAdjacentHTML("beforeend",a))}else if(t.option_type==r.OPTION_TYPE.CHECKBOX){let r=e.common.getExtraPriceByOptionValue(t,o);if(r=e.common.convertRate(r),r){let t="(+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))+")";"function"==typeof bssFixSupportPriceAddOnTextValue&&(t=bssFixSupportPriceAddOnTextValue(e,e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))));let o=`<span class="po-extra-price">${t}</span>`;"function"==typeof bssFixSupportAddOnTextPosition?bssFixSupportAddOnTextPosition(e,n,o):n.insertAdjacentHTML("beforeend",o)}}else if(t.option_type==r.OPTION_TYPE.DROPDOWN){let o=document.querySelectorAll(`#po_dropdown${t.id} option[id*="po_dropdown"][selected="true"]`);(e.page.isHomePage()&&i||e.page.isCollectionPage()&&7019==e.storeId||1569==e.storeId)&&(o=document.querySelectorAll(`[bss-po-featured-product-key='${i}'] #po_dropdown${t.id} option[id*="po_dropdown"][selected="true"]`),!o&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(o=document.querySelectorAll(`[id*='product_form_${i}'] #po_dropdown${t.id} option[id*="po_dropdown"][selected="true"]`)));let r=e.common.getExtraPriceByOptionValue(t,o,i);r=e.common.convertRate(r);let a=" (+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))+")";if(o.length){let n=parseInt(RegExp(/\d+/).exec(o[0].id)[0],10);"function"==typeof bssFixSupportPriceAddOnText&&(a=bssFixSupportPriceAddOnText(e,t,n,r,a)),"function"==typeof bssFixSupportPriceAddOnTextValue&&(a=bssFixSupportPriceAddOnTextValue(e,e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))))}let s=`<span class="po-extra-price">${a}</span>`;r&&("function"==typeof bssFixSupportAddOnTextPosition?bssFixSupportAddOnTextPosition(e,n,s):n.insertAdjacentHTML("beforeend",s))}else if(t.option_type==r.OPTION_TYPE.RADIO_BUTTON){let r=e.common.getExtraPriceByOptionValue(t,o);if(r=e.common.convertRate(r),r){let t="(+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))+")";"function"==typeof bssFixSupportPriceAddOnTextValue&&(t=bssFixSupportPriceAddOnTextValue(e,e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))));let o=`<span class="po-extra-price">${t}</span>`;"function"==typeof bssFixSupportAddOnTextPosition?bssFixSupportAddOnTextPosition(e,n,o):n.insertAdjacentHTML("beforeend",o)}}else if(t.option_type==r.OPTION_TYPE.SWATCH){let r=e.common.getExtraPriceByOptionValue(t,o);if(r=e.common.convertRate(r),r){let t="(+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))+")";"function"==typeof bssFixSupportPriceAddOnTextValue&&(t=bssFixSupportPriceAddOnTextValue(e,e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))));let o=`<span class="po-extra-price">${t}</span>`;"function"==typeof bssFixSupportAddOnTextPosition?bssFixSupportAddOnTextPosition(e,n,o):n.insertAdjacentHTML("beforeend",o)}}else if(t.option_type==r.OPTION_TYPE.BUTTON){let r=e.common.getExtraPriceByOptionValue(t,o);if(r=e.common.convertRate(r),r){let t="(+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))+")";"function"==typeof bssFixSupportPriceAddOnTextValue&&(t=bssFixSupportPriceAddOnTextValue(e,e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))));let o=`<span class="po-extra-price">${t}</span>`;"function"==typeof bssFixSupportAddOnTextPosition?bssFixSupportAddOnTextPosition(e,n,o):n.insertAdjacentHTML("beforeend",o)}}else if(t.option_type==r.OPTION_TYPE.FILE_UPLOAD){let r=e.common.getExtraPriceByOption(t);r=e.common.convertRate(r);const i=e.common.getLinkFileUploadedBySelector({selector:`#${o.id}`,optionId:t.id,optionSetConditionType:a});let s="(+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))+")";"function"==typeof bssFixSupportPriceAddOnTextValue&&(s=bssFixSupportPriceAddOnTextValue(e,e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))));let l=`<span class="po-extra-price">${s}</span>`;i?.length&&r&&("function"==typeof bssFixSupportAddOnTextPosition?bssFixSupportAddOnTextPosition(e,n,l):n.insertAdjacentHTML("beforeend",l))}else if(t.option_type==r.OPTION_TYPE.COLOR_PICKER){let r=e.common.getExtraPriceByOption(t);r=e.common.convertRate(r);let i="(+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))+")";"function"==typeof bssFixSupportPriceAddOnTextValue&&(i=bssFixSupportPriceAddOnTextValue(e,e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))));let a=`<span class="po-extra-price">${i}</span>`;o.value.length&&r>0&&("function"==typeof bssFixSupportAddOnTextPosition?bssFixSupportAddOnTextPosition(e,n,a):n.insertAdjacentHTML("beforeend",a))}else if(t.option_type==r.OPTION_TYPE.TEXT_AREA){let r=e.common.getExtraPriceByOption(t);r=e.common.convertRate(r);let i="(+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))+")";"function"==typeof bssFixSupportPriceAddOnTextValue&&(i=bssFixSupportPriceAddOnTextValue(e,e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))));let a=`<span class="po-extra-price">${i}</span>`;o.value.length&&r>0&&("function"==typeof bssFixSupportAddOnTextPosition?bssFixSupportAddOnTextPosition(e,n,a):n.insertAdjacentHTML("beforeend",a))}else if(t.option_type==r.OPTION_TYPE.DROPDOWN_THUMBNAIL){let o=document.querySelectorAll(`#po_dropdown_thumbnail${t.id} option[id*="po_dropdown"][selected="true"]`);(e.page.isHomePage()&&i||e.page.isCollectionPage()&&7019==e.storeId||1569==e.storeId)&&(o=document.querySelectorAll(`[bss-po-featured-product-key='${i}'] #po_dropdown_thumbnail${t.id} option[id*="po_dropdown"][selected="true"]`),!o&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(o=document.querySelectorAll(`[id*='product_form_${i}'] #po_dropdown_thumbnail${t.id} option[id*="po_dropdown"][selected="true"]`)));let r=e.common.getExtraPriceByOptionValue(t,o,i);r=e.common.convertRate(r);let a="(+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))+")";"function"==typeof bssFixSupportPriceAddOnTextValue&&(a=bssFixSupportPriceAddOnTextValue(e,e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))));let s=`<span class="po-extra-price">${a}</span>`;r&&("function"==typeof bssFixSupportAddOnTextPosition?bssFixSupportAddOnTextPosition(e,n,s):n.insertAdjacentHTML("beforeend",s))}else if(t.option_type==r.OPTION_TYPE.EMAIL){let r=e.common.getExtraPriceByOption(t);r=e.common.convertRate(r);let i="(+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))+")";"function"==typeof bssFixSupportPriceAddOnTextValue&&(i=bssFixSupportPriceAddOnTextValue(e,e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))));let a=`<span class="po-extra-price">${i}</span>`;o.value.length&&r>0&&("function"==typeof bssFixSupportAddOnTextPosition?bssFixSupportAddOnTextPosition(e,n,a):n.insertAdjacentHTML("beforeend",a))}else if(t.option_type==r.OPTION_TYPE.SWITCH){let r=e.common.getExtraPriceByOptionValue(t,o);if(r=e.common.convertRate(r),r){let t="(+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))+")";"function"==typeof bssFixSupportPriceAddOnTextValue&&(t=bssFixSupportPriceAddOnTextValue(e,e.money.addMoneyWithCurrencyFormat("0",parseFloat(r))));let o=`<span class="po-extra-price">${t}</span>`;"function"==typeof bssFixSupportAddOnTextPosition?bssFixSupportAddOnTextPosition(e,n,o):n.insertAdjacentHTML("beforeend",o)}}if("function"==typeof bssFixSupportCustomPriceIncreament||[r.PRICING.CODE.ADVANCED,r.PRICING.CODE.NEW_ADVANCED,r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&e.enableDisplayProductPrice&&e.enableAddOns){let e=new Event("BSSchangeProductPrice",{bubbles:!0});document.dispatchEvent(e)}},e.po.handleSelectQuantityByOptionType=function({option:t,selector:o,checkedSelectors:n,swatchSelected:i=null,optionSetConditionType:a}){if(![r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan))return;let l=`\n                <div class="quantity-control">\n                    <span class="quantity-btn quantity-minus"><svg viewBox="0 0 409.6 409.6">\n                        <g>\n                        <g>\n                            <path d="M392.533,187.733H17.067C7.641,187.733,0,195.374,0,204.8s7.641,17.067,17.067,17.067h375.467 c9.426,0,17.067-7.641,17.067-17.067S401.959,187.733,392.533,187.733z" />\n                        </g>\n                        </g>\n                    </svg></span>\n                    <input type="number" class="quantity-input" value="1" min="1" name="quantity${t.id}">\n                    <span class="quantity-btn quantity-plus"><svg viewBox="0 0 426.66667 426.66667">\n                        <path d="m405.332031 192h-170.664062v-170.667969c0-11.773437-9.558594-21.332031-21.335938-21.332031-11.773437 0-21.332031 9.558594-21.332031 21.332031v170.667969h-170.667969c-11.773437 0-21.332031 9.558594-21.332031 21.332031 0 11.777344 9.558594 21.335938 21.332031 21.335938h170.667969v170.664062c0 11.777344 9.558594 21.335938 21.332031 21.335938 11.777344 0 21.335938-9.558594 21.335938-21.335938v-170.664062h170.664062c11.777344 0 21.335938-9.558594 21.335938-21.335938 0-11.773437-9.558594-21.332031-21.335938-21.332031zm0 0" /></svg>\n                    </span>\n                </div>\n            `;const{select_quantity:c,max_selector:p}=t,u=document.querySelectorAll(o);document.querySelectorAll(n);const d={2:"po-option--checkbox-wrapper",5:"po-option--swatch-wrapper",6:"po-option--button-wrapper",3:"po-option--dropdown-wrapper",4:"po-option--radioButton-wrapper",12:"po-option--dropdown-thumbnail-wrapper",17:"po-option--switch-wrapper"};if(i&&![r.OPTION_TYPE.DROPDOWN,r.OPTION_TYPE.DROPDOWN_THUMBNAIL].includes(parseInt(t.option_type))){p&&s&&u.forEach((o=>{const n=o.closest(`.${d[t.option_type]}`),r=n.querySelector(".quantity-control");if(!o.checked&&r)return"function"==typeof bssFixSupportAutoDisplayQuantityForm?bssFixSupportAutoDisplayQuantityForm(e,i):n.removeChild(r),0}));const n=i.closest(`.${d[t.option_type]}`),r=n.querySelector(".quantity-control"),a=i.getAttribute("id").replace(/\D+/g,"");if(c[Number(a)]){if(r&&1!==p)return"function"==typeof bssFixSupportAutoDisplayQuantityForm?bssFixSupportAutoDisplayQuantityForm(e,i):n.removeChild(r),0;e.po.validateBeforeAddSelectQuantity(t,o,i)}}if([r.OPTION_TYPE.DROPDOWN,r.OPTION_TYPE.DROPDOWN_THUMBNAIL].includes(parseInt(t.option_type))){let o=t.option_type==r.OPTION_TYPE.DROPDOWN?"#po_dropdown":"#po_dropdown_thumbnail",i=document.querySelectorAll(`${o}${t.id} ~ .${d[t.option_type]}`),a=document.querySelectorAll(`${o}${t.id} option[id*="po_dropdown"]`);if(e.page.isHomePage()||e.page.isCollectionPage()&&7019==e.storeId||1569==e.storeId){let e="",r=n.match(/'(\d+)'/);!r&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(r=n?.match(/product_form_(\d+)/)),e=r?r[1]:"";let a=`[bss-po-featured-product-key='${e}'] ${o}${t.id} ~ .${d[t.option_type]}`;i=document.querySelectorAll(a),!i.length&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(a=`[id*='product_form_${e}'] ${o}${t.id} ~ .${d[t.option_type]}`,i=document.querySelectorAll(a))}try{for(let t=0;t<a.length;t++)if("false"==a[t].getAttribute("selected")){const o=i[t].querySelector(".quantity-control");if(o)return"function"==typeof bssFixSupportAutoDisplayQuantityForm?bssFixSupportAutoDisplayQuantityForm(e,a[t]):1===i[t].children.length?i[t].innerHTML="":i[t].removeChild(o),0}}catch(e){console.error(e)}}let _=document.querySelectorAll(n);if("function"==typeof bssFixSupportCustomQuantity){let{newSelectQuantityHtml:o,newSelectedSwatches:r}=bssFixSupportCustomQuantity(e,n,t,l);o&&(l=o),r&&(_=r)}function m(o,n,i,s){let l=document.querySelector("#po_label"+t.id),c="";if(e.page.isHomePage()||e.page.isCollectionPage()&&7019==e.storeId||1569==e.storeId){let e=s.match(/'(\d+)'/);!e&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(e=s?.match(/product_form_(\d+)/)),c=e?e[1]:"",l=document.querySelector(`[bss-po-featured-product-key='${c}'] #po_label${t.id}`),!l&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&document.querySelector(`[id*='product_form_${c}'] #po_label${t.id}`)}e.po.validateQuantity(o,n,t),e.po.displayPriceAddOnsWithChosenOptions({option:t,element:i,currentLabel:l,idProduct:c,optionSetConditionType:a}),[r.OPTION_TYPE.CHECKBOX,r.OPTION_TYPE.DROPDOWN,r.OPTION_TYPE.RADIO_BUTTON,r.OPTION_TYPE.SWATCH,r.OPTION_TYPE.BUTTON,r.OPTION_TYPE.DROPDOWN_THUMBNAIL,r.OPTION_TYPE.SWITCH].includes(t.option_type)&&e.po.displayChosenSwatchOptionTitles({option:t,checkedSelectors:s,optionSetConditionType:a})}_.forEach((i=>{let a=null,s=i.value,p=null,_=null;if([r.OPTION_TYPE.DROPDOWN,r.OPTION_TYPE.DROPDOWN_THUMBNAIL].includes(parseInt(t.option_type))){let o=t.option_type==r.OPTION_TYPE.DROPDOWN?"#po_dropdown":"#po_dropdown_thumbnail",a=function(e){const t=e.match(/\d+$/);return t?parseInt(t[0],10):-1}(i.id);if(p=document.querySelector(`${o}${t.id} ~ .${d[t.option_type]}#po_dropdown${a}`),_=c[Number(a)],e.page.isHomePage()||e.page.isCollectionPage()&&7019==e.storeId||1569==e.storeId){let e="",r=n.match(/'(\d+)'/);!r&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(r=n?.match(/product_form_(\d+)/)),e=r?r[1]:"",p=document.querySelector(`[bss-po-featured-product-key='${e}'] ${o}${t.id} ~ .${d[t.option_type]}#po_dropdown${a}`),!p&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(p=document.querySelector(`[id*='product_form_${e}'] ${o}${t.id} ~ .${d[t.option_type]}#po_dropdown${a}`))}}else a=i.getAttribute("id").replace(/\D+/g,""),p=i.closest(`.${d[t.option_type]}`),_=c[Number(a)];let h=null;if(_&&(h=p.querySelector(".quantity-control")),!h&&_){if(p.insertAdjacentHTML("beforeend",l),e.page.isCartPage()){const r=p.querySelector(`input[name=quantity${t.id}]`),a=e.cart.selectQuantity[t.label_on_cart];a[s]&&(r.value=a[s],m(i,o,u,n))}p.querySelector("span.quantity-btn.quantity-minus").addEventListener("click",(()=>{const e=p.querySelector(".quantity-input");let t=parseInt(e.value);t>1&&(t-=1),e.value=t,m(i,o,u,n)})),p.querySelector("span.quantity-btn.quantity-plus").addEventListener("click",(()=>{const e=p.querySelector(".quantity-input");let t=parseInt(e.value);t+=1,e.value=t,m(i,o,u,n)})),p.querySelector(`input[name=quantity${t.id}]`).addEventListener("change",(e=>{let t=parseInt(e.target.value);(isNaN(t)||t<1)&&(e.target.value=1),m(i,o,u,n)}))}}))},e.po.getSelectedOptionSet=function({appliedOptionSet:t,appliedOptionSetForSpecificVariant:o,variantProductIdApplyOptionSet:n,idProductAddToCart:r,editOptionInCart:i=!1,isATCValidate:a=!1}){let s=new Map,l=new Map,c=[],p=0,u=0,d="";const _=e.common.getOptionSelected(t,r,i,a);if(s=_.chosenOptions,l=_.chosenOptionsWithoutPriceAddOns,c=_.chosenOptionsProps,p=_.totalExtraPrice,u=_.totalVariantExtraPrice,d=_.skuOptionValueString,o){const t=e.common.getOptionSelected(o,r,i,a);if(t.chosenOptions.forEach(((e,t)=>{s.has(t)?s.set(`${t}_1`,e):s.set(t,e)})),t.chosenOptionsWithoutPriceAddOns.forEach(((e,o)=>{if(!["totalExtraPrice","totalVariantExtraPrice","skuOptionValueString"].includes(o))if(["variantData","optionQuantity"].includes(o)){const e=t.chosenOptionsWithoutPriceAddOns.get(o);Object.keys(e).forEach((t=>{Object.keys(l.get(o)).some((e=>e===t))?l.get(o)[`${t}_1`]=e[t]:l.get(o)[t]=e[t]}))}else l.has(o)?l.set(`${o}_1`,e):l.set(o,e)})),l.set("skuOptionValueString_1",t.chosenOptionsWithoutPriceAddOns.get("skuOptionValueString")),l.set("variantProductIdApplyOptionSet",n),t.chosenOptionsWithoutPriceAddOns.get("skuOptionValueString")){let o=e.settings.generals.sku_separator+t.chosenOptionsWithoutPriceAddOns.get("skuOptionValueString");"function"==typeof bssFixSupportSKUvalue&&(o=bssFixSupportSKUvalue(e,t.chosenOptionsWithoutPriceAddOns.get("skuOptionValueString"))),d+=o}p+=t.totalExtraPrice,u+=t.totalVariantExtraPrice}if("function"==typeof bssFixSupportCustomExtraPrice){const t=e.common.getCurrentQuantity(r);p=bssFixSupportCustomExtraPrice(e,p,t,c)}return{chosenOptions:s,chosenOptionsWithoutPriceAddOns:l,chosenOptionsProps:c,totalExtraPrice:p,totalVariantExtraPrice:u,skuOptionValueString:d}},e.po.getOptionDisplayStyle=function(t,o){let n="",i=0,a=e.optionSets.find((e=>e.id==t)),s=a.options.find((t=>e.helper.formatOptionLabel(t.label_on_product)==e.helper.formatOptionLabel(o))).id;return a.product_condition_type===r.APPLY_TO_PRODUCTS.SPECIFIC_VARIANT?document.querySelectorAll(".bss-po-product-page.bss-po-specific-variant")[i]&&("function"==typeof bssFixEditOptionInMiniCart&&!document.querySelectorAll(".bss-po-product-page.bss-po-specific-variant")[i].querySelector("#po_stack"+s)&&document.querySelectorAll(".bss-po-product-page.bss-po-specific-variant")[1]&&(i=1),n=document.querySelectorAll(".bss-po-product-page.bss-po-specific-variant")[i]?.querySelector("#po_stack"+s)?.style?.display):document.querySelectorAll(".bss-po-product-page:not(.bss-po-specific-variant)")[0]&&("function"==typeof bssFixEditOptionInMiniCart&&!document.querySelectorAll(".bss-po-product-page:not(.bss-po-specific-variant)")[i].querySelector("#po_stack"+s)&&document.querySelectorAll(".bss-po-product-page:not(.bss-po-specific-variant)")[1]&&(i=1),n=document.querySelectorAll(".bss-po-product-page:not(.bss-po-specific-variant)")[i]?.querySelector("#po_stack"+s)?.style?.display),n},e.po.filterchosenOptions=function(t,o,r){let i=o||r||null;return i&&(0,n.sortOptionsByIndexAscending)(i.options).forEach((o=>{"none"==e.po.getOptionDisplayStyle(i.id,o.label_on_product)&&(Array.isArray(t)?t=t.filter((e=>e.key!=o.label_on_cart)):(t.delete(o.label_on_cart),delete t?.get("variantData")?.[o.label_on_cart]))})),t}}function d(e,t,o,n){const i=[r.PRICING.CODE.FREE,r.PRICING.CODE.ADVANCED,r.PRICING.CODE.NEW_ADVANCED,r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan);e.common.isMobileSafari=function(){return/iPhone|iPad|iPod/.test(navigator.userAgent)&&/Safari/.test(navigator.userAgent)&&!/Chrome|CriOS|FxiOS/.test(navigator.userAgent)},e.po.generateOptionSetOnProductPage=async function({variantId:t=null,idProductOnHomePage:o="",dataHomePage:i=""}){Promise.all([e.po.generateOptionSetForProduct({idProductOnHomePage:o,dataHomePage:i}),e.po.generateOptionSetForVariant({variantId:t,idProductOnHomePage:o,dataHomePage:i})]).then((([t,a])=>{window.bss_admin_option||((t||a)&&e.po.handleAddToCart(o,i),(e.page.isHomePage()||1569==e.storeId)&&(e.po.buyItNow(i),n.product=i),("function"==typeof bssFixSupportCustomPriceIncreament||[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&e.enableDisplayProductPrice&&e.enableAddOns)&&e.po.handleProductPriceElement(n,o))})).catch((e=>{console.error(e)}))},e.po.generateOptionSetForProduct=async function({idProductOnHomePage:t="",dataHomePage:o=""}){document.querySelector(".bss-po-product-page:not(.bss-po-specific-variant)")&&!e.page.isHomePage()&&1569!==e.storeId&&document.querySelector(".bss-po-product-page:not(.bss-po-specific-variant)").remove();let i=null;if(i=window.bss_admin_option?window.bss_admin_option:e.po.getAppliedOptionSetOnProductPage(o),e.appliedOptionSet=i,i){[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&1==e.enableAddOns&&!window.bss_admin_option&&await e.common.getVariantDataOnOptionSet(i,n),"function"==typeof bssFixSupportValidateAppliedOptionSet&&(i=await bssFixSupportValidateAppliedOptionSet(e,t,o,i));const a=e.po.getOptionHtml({appliedOptionSet:i,idProductOnHomePage:t});let s=!1;if("function"==typeof bssFixSupportChangeOptionSetPositionForProduct&&(s=bssFixSupportChangeOptionSetPositionForProduct(e,a,t,s)),s);else if(e.page.isHomePage()){let e=document.querySelector(`[bss-po-featured-product-key='${t}'] form[action*="/cart/add"]`);!e&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(e=document.querySelector(`[id*="product_form_${t}"]`)),e?.insertAdjacentHTML("afterbegin",a)}else window.bss_admin_option?document.querySelector('form[action="/cart/add"].bss-po-form').insertAdjacentHTML("afterbegin",a):document.querySelector(".preview-option")||(document.querySelector('.shopify-app-block form[action*="/cart/add"] .bss-po-option-set')?document.querySelector('.shopify-app-block form[action*="/cart/add"] .bss-po-option-set').insertAdjacentHTML("afterbegin",a):document.querySelector('form[action*="/cart/add"] .bss-po-option-set')?document.querySelector('form[action*="/cart/add"] .bss-po-option-set').insertAdjacentHTML("afterbegin",a):document.querySelector('form[action*="/cart/add"]').insertAdjacentHTML("afterbegin",a));await e.po.addMetaDataToOptionSet({appliedOptionSet:i,idProductOnHomePage:t,dataHomePage:o}),"function"==typeof bssFixSupportCustomOptionSetHTML&&bssFixSupportCustomOptionSetHTML(e,a,t,i)}else document.querySelector('.shopify-app-block form[action*="/cart/add"] .bss-po-option-set')&&e.previewMode&&document.querySelector('.shopify-app-block form[action*="/cart/add"] .bss-po-option-set').insertAdjacentHTML("afterbegin",'<span class="preview-option">The additional product options will appear here.</span>');return i},e.po.generateOptionSetForVariant=async function({variantId:o,idProductOnHomePage:i,dataHomePage:a}){let s=document.querySelector(".bss-po-product-page.bss-po-specific-variant");if(e.page.isHomePage()){const e=document.querySelector(`[bss-po-featured-product-key='${i}']`);s=e?.querySelector(".bss-po-product-page.bss-po-specific-variant")}if(s){if(t.size>0){const e=s.querySelectorAll('[id^="po_stack"]');Array.from(e).map((e=>e.id.replace("po_stack",""))).forEach((e=>{for(let o of t.keys())o.includes(e)&&t.delete(o)}))}s.remove()}let l=null;if(window.bss_admin_option||(l=e.po.getAppliedOptionSetOnProductPageForVariant({variantId:o,productData:a})),l&&(e.appliedOptionSet=l),l){[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&1==e.enableAddOns&&!window.bss_admin_option&&await e.common.getVariantDataOnOptionSet(l,n),"function"==typeof bssFixSupportValidateAppliedOptionSet&&(l=await bssFixSupportValidateAppliedOptionSet(e,i,a,l));const t=e.po.getOptionHtml({appliedOptionSet:l,idProductOnHomePage:i});let o=!1;if("function"==typeof bssFixSupportChangeOptionSetPositionForProduct&&(o=bssFixSupportChangeOptionSetPositionForProduct(e,t,i,o)),o);else if(e.page.isHomePage()){let o=document.querySelector(`[bss-po-featured-product-key='${i}']`);!o&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(o=document.querySelector(`[id*='product_form_${i}']`)),o?.querySelector(e.common.getSelectorVariantPicker().join(","))?.insertAdjacentHTML("afterend",t);let n=document.querySelector(`[bss-po-featured-product-key='${i}']`);!n&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(n=document.querySelector(`[id*='product_form_${i}']`)),n&&e.po.handleAddToCart(i,a)}else document.querySelector('.shopify-app-block form[action*="/cart/add"] .bss-po-option-set')?document.querySelector('.shopify-app-block form[action*="/cart/add"] .bss-po-option-set').insertAdjacentHTML("afterend",t):document.querySelector('form[action*="/cart/add"] .bss-po-option-set')?document.querySelector('form[action*="/cart/add"] .bss-po-option-set').insertAdjacentHTML("afterend",t):document.querySelector(e.common.getSelectorVariantPicker().join(",")).insertAdjacentHTML("afterend",t);await e.po.addMetaDataToOptionSet({appliedOptionSet:l,idProductOnHomePage:i}),"function"==typeof bssFixSupportCustomOptionSetHTML&&bssFixSupportCustomOptionSetHTML(e,t,i,l)}return l},e.po.addMetaDataToOptionSet=async function({appliedOptionSet:t,idProductOnHomePage:o=""}){const n=t.product_condition_type;e.common.disableDefaultEventInput(n),t.options.forEach((i=>{let a=e.common.getSeletorOfByOptionType(i.option_type,i.id),s=document.querySelector("#po_label"+i.id);if(e.page.isHomePage()||e.page.isCollectionPage()&&7019==e.storeId||1569==e.storeId){let e=`[bss-po-featured-product-key='${o}'] `,t=`[bss-po-featured-product-key='${o}'] #po_label`+i.id;s=document.querySelector(t),!s&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(t=`[id*='product_form_${o}'] #po_label`+i.id,e=`[id*='product_form_${o}'] `,s=document.querySelector(t)),a=e+a}let l=document.querySelector(a);[r.OPTION_TYPE.CHECKBOX,r.OPTION_TYPE.RADIO_BUTTON,r.OPTION_TYPE.SWATCH,r.OPTION_TYPE.BUTTON,r.OPTION_TYPE.SWITCH].includes(i.option_type)&&(l=document.querySelectorAll(a)),[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&e.common.addVariantDataToOption(t,i),e.common.addEventToOption({option:i,elementOfOption:l,currentLabel:s,selector:a,optionSetConditionType:n})})),e.common.isMobileSafari()&&setTimeout((()=>{e.lazyLoader=e.common.initLazyLoading()}),100)},e.common.initResponsiveLazyLoading=function(){if(!e.common.isMobileSafari())return null;const t=!0,o=(navigator.hardwareConcurrency<=2||navigator.deviceMemory&&navigator.deviceMemory,navigator.connection&&navigator.connection.saveData,navigator.connection&&("slow-2g"===navigator.connection.effectiveType||navigator.connection.effectiveType),window.matchMedia("(prefers-reduced-motion: reduce)").matches,{maxConcurrentLoads:500,loadDelay:1,maxQueueSize:2e3,batchSize:1e3,observerThrottle:10,priorityDelay:1,memoryCheckInterval:1e4,enableMemoryManagement:!1}),n=[];let r=!1,i=0,a=0,s=0,l=0,c=!1;const p=()=>{};let u;let d;const _=()=>{if(d)return;const e=Date.now()-l,t=c?2*o.loadDelay:o.loadDelay,n=Math.max(0,t-e);d=setTimeout((()=>{d=null,m()}),n)},m=()=>{if(c)return void setTimeout(m,2*o.loadDelay);if(r||s>=o.maxConcurrentLoads||0===n.length)return;const e=Math.min(o.batchSize,n.length,o.maxConcurrentLoads-s);for(let t=0;t<e&&0!==n.length;t++)h()},h=()=>{if(0===n.length||s>=o.maxConcurrentLoads)return;r=!0,s++;const{element:e,imageSrc:t,onComplete:i,priority:a}=n.shift();e.classList.add("bg-loading");const c=new Image;let p;p=setTimeout((()=>{c.onload=null,c.onerror=null,f(e,!1,i,a)}),15e3),c.onload=()=>{clearTimeout(p),e&&!e.classList.contains("bg-loaded")&&(e.style.backgroundImage=`url(${t})`,e.classList.add("bg-loaded"),e.classList.remove("bg-loading")),f(e,!0,i,a)},c.onerror=()=>{clearTimeout(p),e&&(e.classList.add("bg-error"),e.classList.remove("bg-loading")),f(e,!1,i,a)},l=Date.now(),c.src=t},f=(e,t,n,a="normal")=>{if(s--,i++,r=s>0,n)try{n()}catch(e){console.warn("BSS PO: Error in load completion callback:",e)}setTimeout((()=>{m()}),"high"===a?o.priorityDelay:o.loadDelay),b()};let y;const b=()=>{y||(y=setTimeout((()=>{y=null;const e=P(),t=new CustomEvent("bssImageLoadProgress",{detail:e});document.dispatchEvent(t)}),100))},g=e=>{const t=e.dataset.bgSrc,o=(e.dataset.bgSrcLg,e.dataset.bgSrcMd),n=e.dataset.bgSrcSm;return t?(window.innerWidth,window.devicePixelRatio,n||o||t):null},v=new IntersectionObserver(((e,t)=>{u&&clearTimeout(u),u=setTimeout((()=>{((e,t)=>{c=(()=>{if(!o.enableMemoryManagement)return!1;if(performance.memory){if(performance.memory.usedJSHeapSize/1048576/(performance.memory.totalJSHeapSize/1048576)>.8)return console.warn("BSS PO: High memory usage detected, throttling image loading"),!0}else{const e=document.querySelectorAll(".po-option__image-value.bg-loaded").length,t=document.querySelectorAll(".po-option__image-value[data-bg-src]").length;if(e>50&&e/t>.8)return!0}return!1})(),c?console.warn("BSS PO: Memory warning - deferring image loading"):e.forEach((e=>{if(e.isIntersecting){const r=e.target,i=g(r);if(i&&!r.classList.contains("bg-loaded")&&!r.classList.contains("bg-loading")){const e=r.dataset.priority||"normal";if(n.length>=o.maxQueueSize)return void console.log("BSS PO: Queue full, skipping image load");const a={element:r,imageSrc:i,priority:e,timestamp:Date.now(),onComplete:()=>t.unobserve(r)};"high"!==e||c?n.push(a):n.unshift(a),_()}}}))})(e,t)}),o.observerThrottle)}),{rootMargin:"50px 0px",threshold:[.1,.5]}),S=()=>{document.querySelectorAll('.po-option__image-value[data-priority="high"]').forEach(((e,t)=>{t<20&&v.observe(e)}))};setInterval(p,o.memoryCheckInterval),document.addEventListener("visibilitychange",(()=>{document.hidden?(d&&(clearTimeout(d),d=null),u&&(clearTimeout(u),u=null),r=!0):(r=!1,c=!1,setTimeout(m,500))})),window.addEventListener("pagehide",p);const O=document.querySelectorAll(".po-option__image-value[data-bg-src]");a=O.length,O.forEach(((e,t)=>{e.dataset.loadOrder=t+1,setTimeout((()=>{v.observe(e)}),5*t)}));let I,x=t;"function"==typeof bssFixSupportloadPriorityImagesWithSafari&&(x=bssFixSupportloadPriorityImagesWithSafari()),x?setTimeout(S,50):S(),window.addEventListener("resize",(()=>{clearTimeout(I),I=setTimeout((()=>{const e=window.innerWidth;Math.abs(e-(window.lastKnownViewport||e))>100&&(window.lastKnownViewport=e,document.querySelectorAll(".po-option__image-value.bg-loaded[data-bg-src-lg], .po-option__image-value.bg-loaded[data-bg-src-md], .po-option__image-value.bg-loaded[data-bg-src-sm]").forEach((e=>{const t=e.style.backgroundImage,r=g(e);r&&!t.includes(r)&&n.length<o.maxQueueSize&&(n.push({element:e,imageSrc:r,priority:"resize",onComplete:()=>{}}),_())})))}),100)}));const P=()=>({loaded:i,total:a,percentage:a>0?Math.round(i/a*100):0,inQueue:n.length,isLoading:r,activeLoads:s,memoryWarning:c,isSafariMobile:t,config:o});return{observer:v,loadQueue:n,getProgress:P,forceLoad:e=>{if(c)return void console.warn("BSS PO: Cannot force load - memory warning active");const t=document.querySelector(e);if(t&&t.dataset.bgSrc&&n.length<o.maxQueueSize){const e=g(t);n.unshift({element:t,imageSrc:e,priority:"forced",onComplete:()=>{}}),_()}},isComplete:()=>i>=a&&0===n.length&&!r,pause:()=>{r=!0,d&&(clearTimeout(d),d=null)},resume:()=>{r=!1,c=!1,_()},cleanup:p,getConfig:()=>o,isMemoryWarning:()=>c}},e.common.getResponsiveImageUrls=function(t){return e.common.isMobileSafari()?t.includes("cdn.shopify.com")?{large:t.replace(/\.(jpg|jpeg|png|webp)/i,"_1200x1200.$1"),medium:t.replace(/\.(jpg|jpeg|png|webp)/i,"_600x600.$1"),small:t.replace(/\.(jpg|jpeg|png|webp)/i,"_300x300.$1")}:t.includes("cloudinary.com")?{large:t.replace("/upload/","/upload/w_1200,h_1200,c_fit/"),medium:t.replace("/upload/","/upload/w_600,h_600,c_fit/"),small:t.replace("/upload/","/upload/w_300,h_300,c_fit/")}:t.includes("imagekit.io")?{large:t+"?tr=w-1200,h-1200",medium:t+"?tr=w-600,h-600",small:t+"?tr=w-300,h-300"}:{}:{}},e.po.hoverSwatchValuesElement=function({swatch_type:t,swatch_label:o,color_value:n,image_value:i,cdn_image_value:a,swatch_tooltip_style:s,i:l,extra_price:c,appliedOptionSet:p,helptext_option_value:u}){const d=p?.variants?.map((e=>({id:e.id.split("/").pop(),price:e.price})))||[];let _="",m=/[^0-9\.]+/g,h="";if(0!=c.swatch_extra_price_type[l]||0==e.settings.generals.swatches_hover||[r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan))1==c.swatch_extra_price_type[l]&&[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&c.swatch_extra_variant[l]&&d.forEach((t=>{if(t.id===c.swatch_extra_variant[l]){let o=e.common.convertRate(t.price);h=0!=e.money.addMoneyWithCurrencyFormat("0",parseFloat(o)).replace(m,"")?" (+"+e.money.addMoneyWithCurrencyFormat("0",parseFloat(o))+")":""}}));else{let t=e.common.convertRate(c.swatch_extra_price[l]);h=0!=e.money.addMoneyWithCurrencyFormat("0",parseFloat(t)).replace(m,"")?" (+"+e.money.addMoneyWithCurrencyFormat("0",parseFloat(t))+")":""}let f=o[l]+h;[8826].includes(e.storeId)&&(f=o[l]);let y="",b=`color: ${e.settings.colors.swatches_hover_text_color}; background-color: ${e.settings.colors.swatches_hover_color}; word-wrap: break-word;`;o[l].length>40&&"/cart"==window.location.pathname&&(y+="max-height: 100px;",f=o[l].substring(0,41)+"..."+h);const g=t=>{const o=[`data-bg-src="${t}"`];if(e.common.isMobileSafari()){if("function"==typeof e.common.getResponsiveImageUrls){const n=e.common.getResponsiveImageUrls(t);n.large&&o.push(`data-bg-src-lg="${n.large}"`),n.medium&&o.push(`data-bg-src-md="${n.medium}"`),n.small&&o.push(`data-bg-src-sm="${n.small}"`)}l<3&&o.push('data-priority="high"'),(10271===e.storeId||navigator.connection&&navigator.connection.saveData)&&o.push('data-sequential-load="true"'),i[l]&&a[l]&&i[l]!==a[l]&&o.push(`data-bg-src-fallback="${i[l]}"`)}return o.join(" ")};if("function"==typeof bssFixSupportCustomTooltipTitle&&(f=bssFixSupportCustomTooltipTitle(e,o[l],h)),[10271].includes(e.storeId)){const t=a[l]?a[l]:i[l];return e.common.isMobileSafari()?_+=`<div class="po-option__image-value" ${g(t)} style="margin-left: 10px">\n                                    </div>\n                                    <div class="po_description tooltip-swatch-label"> \n                                        <p class="po_option_value" style="margin-left: 10px; word-wrap: break-word;">${f}</p>\n                                        ${e.helper.isPrintableString(u)?`<p class="po_helptext_value">${u}</p>`:""}\n                                    </div>\n                                    `:_+=`<div class="po-option__image-value" style="background-image: url(${t}); margin-left: 10px">\n                                    </div>\n                                    <div class="po_description tooltip-swatch-label"> \n                                        <p class="po_option_value" style="margin-left: 10px; word-wrap: break-word;">${f}</p>\n                                        ${e.helper.isPrintableString(u)?`<p class="po_helptext_value">${u}</p>`:""}\n                                    </div>\n                                    `,_}if(3==e.settings.generals.swatches_hover)if(0==t[l]&&n[l])_+=`<div class="po-option__color-value" style="background-color:${n[l]}; "></div>\n                                <span class="tooltip-swatch-label" style="${s}; word-wrap: break-word;">\n                                    <div  class="tooltip-swatch-label__color" style="background-color:${n[l]};"></div>\n                                    <div class="po_description"> \n                                        <p class="po_option_value tooltip-swatch-label__title" style="${y}">${f}</p>\n                                        ${e.helper.isPrintableString(u)?`<p class="po_helptext_value">${u}</p>`:""}\n                                    </div>\n                                </span>\n                                `;else if(1==t[l]&&(a[l]||i[l])){const t=a[l]?a[l]:i[l];e.common.isMobileSafari()?_+=`<div class="po-option__image-value" ${g(t)} style=""></div>\n                                       <span class="tooltip-swatch-label" style="${s}; word-wrap: break-word;" >\n                                            <img src="${t}" width="100%" height="100%" class="tooltip-swatch-label__img">\n                                        <div class="po_description"> \n                                            <p style="${y}" class="po_option_value">${f}</p>\n                                            ${e.helper.isPrintableString(u)?`<p class="po_helptext_value">${u}</p>`:""}\n                                        </div>\n                                        </span>\n                                        `:_+=`<div class="po-option__image-value" style="background-image: url(${t}); "></div>\n                                       <span class="tooltip-swatch-label" style="${s}; word-wrap: break-word;" >\n                                            <img src="${t}" width="100%" height="100%" class="tooltip-swatch-label__img">\n                                            <div class="po_description"> \n                                                <p style="${y}" class="po_option_value">${f}</p>\n                                                ${e.helper.isPrintableString(u)?`<p class="po_helptext_value">${u}</p>`:""}\n                                            </div>\n                                        </span>\n                                        `}else _+=`<div class="po-option__color-value" style="background-color: #ffffff; "></div>\n                    <div class="po_description tooltip-swatch-label" style="${b};"> \n                        <p class="po_option_value" style="white-space:normal;">\n                            ${f}\n                        </p>\n                        ${e.helper.isPrintableString(u)?`<p class="po_helptext_value">${u}</p>`:""}\n                    </div>\n                    `;else if(2==e.settings.generals.swatches_hover)if(0==t[l]&&n[l])_+=`<div class="po-option__color-value" style="background-color:${n[l]}; "></div>\n                                   <span class="tooltip-swatch-label" style="${s}; word-wrap: break-word;">\n                                        <div class="tooltip-swatch-label__color" style="background-color:${n[l]};"></div>\n                                        ${e.helper.isPrintableString(u)?`<p class="po_helptext_value">${u}</p>`:""}\n                                    </span>\n                                    `;else if(1==t[l]&&(a[l]||i[l])){const t=a[l]?a[l]:i[l];e.common.isMobileSafari()?_+=`<div class="po-option__image-value" ${g(t)} style=""></div>\n                                        <span class="tooltip-swatch-label" style="${s}; word-wrap: break-word;" >\n                                            <img src="${t}" width="100%" height="100%" class="tooltip-swatch-label__img">\n                                            ${e.helper.isPrintableString(u)?`<p class="po_helptext_value">${u}</p>`:""}\n                                        </span>\n                                        `:_+=`<div class="po-option__image-value" style="background-image: url(${t}); "></div>\n                                        <span class="tooltip-swatch-label" style="${s}; word-wrap: break-word;" >\n                                            <img src="${t}" width="100%" height="100%" class="tooltip-swatch-label__img">\n                                            ${e.helper.isPrintableString(u)?`<p class="po_helptext_value">${u}</p>`:""}\n                                        </span>\n                                        `}else _+=`<div class="po-option__color-value" style="background-color: #ffffff; "></div>\n                                    <span class="tooltip-swatch-label" style="${b}">${o[l]}</span>\n                                    `;else if(0==t[l]&&n[l])s+="word-wrap: break-word;",_+=`<div class="po-option__color-value" style="background-color:${n[l]}; "></div>\n                    <div class="po_description tooltip-swatch-label" style="${s}"> \n                        <p class="po_option_value">${f}</p>\n                        ${e.helper.isPrintableString(u)?`<p class="po_helptext_value">${u}</p>`:""}\n                    </div>\n                                    `;else if(1==t[l]&&(a[l]||i[l])){const t=a[l]?a[l]:i[l];s+="word-wrap: break-word;",e.common.isMobileSafari()?_+=`<div class="po-option__image-value" ${g(t)} style=""></div>\n                        <div class="po_description tooltip-swatch-label" style="${s};"> \n                            <p class="po_option_value">${f}</p>\n                            ${e.helper.isPrintableString(u)?`<p class="po_helptext_value">${u}</p>`:""}\n                        </div>\n                                    `:_+=`<div class="po-option__image-value" style="background-image: url(${t}); "></div>\n                        <div class="po_description tooltip-swatch-label" style="${s};"> \n                            <p class="po_option_value">${f}</p>\n                            ${e.helper.isPrintableString(u)?`<p class="po_helptext_value">${u}</p>`:""}\n                        </div>\n                                    `}else _+=`<div class="po-option__color-value" style="background-color: #ffffff;"></div>\n                        <div class="po_description tooltip-swatch-label" style="${b}; margin-bottom: 0px; margin-top: 0px;" > \n                            <p class="po_option_value">${f}</p>\n                            ${e.helper.isPrintableString(u)?`<p class="po_helptext_value">${u}</p>`:""}\n                        </div>\n                `;return _},e.po.generateOptionSetOnCollectionPage=async function(){const t=await e.po.getAppliedOptionSetOnQVCollectionPage(),o=t?.appliedOptionSet;if(o){const t=o.product_condition_type,n=e.po.getOptionHtml({appliedOptionSet:o});"function"==typeof bssFixSupportGenerateOptionSetOnCollectionPage?bssFixSupportGenerateOptionSetOnCollectionPage(e,n):document.querySelectorAll('form[action*="/cart/add"] .bss-po-option-set').length?document.querySelectorAll('form[action*="/cart/add"] .bss-po-option-set').forEach((function(e){e.insertAdjacentHTML("afterbegin",n)})):document.querySelector('form[action*="/cart/add"]').insertAdjacentHTML("afterbegin",n),e.common.disableDefaultEventInput(t),o.options.forEach((o=>{const n=e.common.getSeletorOfByOptionType(o.option_type,o.id),i=document.querySelector("#po_label"+o.id);if(o.option_type==r.OPTION_TYPE.TEXT_BOX){const r=document.querySelector(n);e.common.addEventToOption({option:o,elementOfOption:r,currentLabel:i,selector:n,optionSetConditionType:t})}else if(o.option_type==r.OPTION_TYPE.NUMBER){const r=document.querySelector(n);e.common.addEventToOption({option:o,elementOfOption:r,currentLabel:i,selector:n,optionSetConditionType:t})}else if(o.option_type==r.OPTION_TYPE.CHECKBOX){const r=document.querySelectorAll(n);e.common.addEventToOption({option:o,elementOfOption:r,currentLabel:i,selector:n,optionSetConditionType:t})}else if(o.option_type==r.OPTION_TYPE.DROPDOWN){const r=document.querySelector(n);e.common.addEventToOption({option:o,elementOfOption:r,currentLabel:i,selector:n,optionSetConditionType:t})}else if(o.option_type==r.OPTION_TYPE.RADIO_BUTTON){let r=document.querySelectorAll(n);e.common.addEventToOption({option:o,elementOfOption:r,currentLabel:i,selector:n,optionSetConditionType:t})}else if(o.option_type==r.OPTION_TYPE.SWATCH){const r=document.querySelectorAll(n);e.common.addEventToOption({option:o,elementOfOption:r,currentLabel:i,selector:n,optionSetConditionType:t})}else if(o.option_type==r.OPTION_TYPE.BUTTON){const r=document.querySelectorAll(n);e.common.addEventToOption({option:o,elementOfOption:r,currentLabel:i,selector:n,optionSetConditionType:t})}else if(o.option_type==r.OPTION_TYPE.FILE_UPLOAD){const r=document.querySelector(n);e.common.addEventToOption({option:o,elementOfOption:r,currentLabel:i,selector:n,optionSetConditionType:t})}else if(o.option_type==r.OPTION_TYPE.DATE_PICKER&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)){e.po.dateTimePicker(o);const r=document.querySelector(n);e.common.addEventToOption({option:o,elementOfOption:r,currentLabel:i,selector:n,optionSetConditionType:t})}else if(o.option_type==r.OPTION_TYPE.COLOR_PICKER&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)){const r=document.querySelector(n);e.common.addEventToOption({option:o,elementOfOption:r,currentLabel:i,selector:n,optionSetConditionType:t})}else if(o.option_type==r.OPTION_TYPE.TEXT_AREA){const r=document.querySelector(n);e.common.addEventToOption({option:o,elementOfOption:r,currentLabel:i,selector:n,optionSetConditionType:t})}else if(o.option_type==r.OPTION_TYPE.DROPDOWN_THUMBNAIL){const r=document.querySelector(n);r&&e.common.addEventToOption({option:o,elementOfOption:r,currentLabel:i,selector:n,optionSetConditionType:t})}else if(o.option_type==r.OPTION_TYPE.EMAIL){const r=document.querySelector(n);e.common.addEventToOption({option:o,elementOfOption:r,currentLabel:i,selector:n,optionSetConditionType:t})}}))}},e.po.searchDropdownWithThumbnail=function(e,t){e.querySelectorAll(".po-dropdown-list .po-dropdown-thumbnail-option").forEach((e=>{"searchWithThumbnail"!=e.getAttribute("id")&&(e.getAttribute("data-value").toLowerCase().includes(t.value.toLowerCase().trim())?e.style.display="flex":e.style.display="none")}))},e.po.searchDropdown=function(e,t){e.querySelectorAll(".po-dropdown-list .po-dropdown-option").forEach((e=>{"searchWithDropdown"!=e.getAttribute("id")&&(e.getAttribute("data-value").toLowerCase().includes(t.value.toLowerCase().trim())?e.style.display="flex":e.style.display="none")}))},e.po.validateOptionOnProductPage=function({option:a,element:s,selector:l,optionSetConditionType:c,isATCValidate:p=!1}){let{requiredErrorMessage:u,minCharacterErrorMessage:d,maxCharacterWarningMessage:_,minValueErrorMessage:m,maxValueErrorMessage:h,minSelectorErrorMessage:f,maxSelectorWarningMessage:y,emailFormatErrorMessage:b,waitingUploadFileMessage:g}=e.common.getMessageFromSettings(a),v=`${l}:checked`;if([r.OPTION_TYPE.DROPDOWN,r.OPTION_TYPE.DROPDOWN_THUMBNAIL].includes(parseInt(a.option_type))&&(v=`${l} option[selected="true"]`),2554==e.storeId&&(u=a.label_on_product+` ${e.settings.translations.required_text}`),9324==e.storeId&&(u="L'opzione "+a.label_on_product+"  richiesta."),a.option_type==r.OPTION_TYPE.TEXT_BOX||a.option_type==r.OPTION_TYPE.TEXT_AREA||a.option_type==r.OPTION_TYPE.EMAIL){let e=!0;if(a.required&&0==s.value.trim().length?(t.set(l,u),e=!1):t.delete(l),a.min_character&&s.value.length&&s.value.length<a.min_character&&i?t.get(l)!==u&&(t.set(l,d),e=!1):t.get(l)==d&&t.delete(l),a.max_character&&s.value.length>a.max_character&&i?(s.value=s.value.substr(0,a.max_character),o.set(l,_),e=!1):o.delete(l),a.option_type==r.OPTION_TYPE.EMAIL&&e){let e=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;!s.value.match(e)&&s.value.length>0?t.set(l,b):t.delete(l)}}else if(a.option_type==r.OPTION_TYPE.NUMBER)a.required&&0==s.value.length?t.set(l,u):t.delete(l),a.min_value&&!isNaN(parseFloat(s.value))&&parseFloat(s.value)<a.min_value&&i?t.get(l)!==u&&t.set(l,m):t.get(l)==m&&t.delete(l),a.max_value&&!isNaN(parseFloat(s.value))&&parseFloat(s.value)>a.max_value&&i?t.get(l)!==u&&t.set(l,h):t.get(l)==h&&t.delete(l);else if([r.OPTION_TYPE.CHECKBOX,r.OPTION_TYPE.SWITCH].includes(parseInt(a.option_type))||[r.OPTION_TYPE.BUTTON,r.OPTION_TYPE.SWATCH].includes(parseInt(a.option_type))&&1!==a.max_selector&&i){let e=document.querySelectorAll(v);a.required&&0==e.length?t.set(l,u):t.delete(l),a.min_selector&&e?.length<a.min_selector&&i?t.get(l)!==u&&t.set(l,f):t.get(l)==f&&t.delete(l),a.max_selector&&e.length>a.max_selector&&i?(s.checked=!1,o.set(l,y)):o.delete(l)}else if([r.OPTION_TYPE.DROPDOWN,r.OPTION_TYPE.DROPDOWN_THUMBNAIL].includes(parseInt(a.option_type))){let e=document.querySelectorAll(v);a.required&&0==e.length?t.set(l,u):t.delete(l),parseInt(a.dropdown_multiple_select)&&(a.min_selector&&e.length<a.min_selector&&i?t.get(l)!==u&&t.set(l,f):t.get(l)==f&&t.delete(l),a.max_selector&&e.length==a.max_selector&&i&&!o.has(l)?o.set(l,y):o.delete(l))}else if(a.option_type==r.OPTION_TYPE.RADIO_BUTTON||[r.OPTION_TYPE.SWATCH,r.OPTION_TYPE.BUTTON,r.OPTION_TYPE.SWITCH].includes(a.option_type)&&1==a.max_selector&&i){let e=document.querySelectorAll(v);a.required&&0==e.length?t.set(l,u):t.delete(l)}else if(a.option_type==r.OPTION_TYPE.FILE_UPLOAD){const o=e.common.getLinkFileUploadedBySelector({selector:l,optionId:a.id,optionSetConditionType:c});p&&(!a.required||s.files.length||o?.length?a.required&&s.files.length&&!o?.length?t.set(l,g):t.delete(l):t.set(l,u))}else if(a.option_type==r.OPTION_TYPE.DATE_PICKER){const e=document.querySelector(l).value;a.required&&!e?t.set(l,u):t.delete(l)}else if(a.option_type==r.OPTION_TYPE.COLOR_PICKER){const e=document.querySelector(l).closest(4!==c||window.bss_admin_option?".bss-po-product-page:not(.bss-po-specific-variant)":".bss-po-product-page.bss-po-specific-variant").querySelector(`[name="po_color_picker_value${a.id}"]`);a.required&&!e.value?t.set(l,u):t.delete(l)}"function"==typeof bssFixSupportCustomValidate&&bssFixSupportCustomValidate(e,t,o,n,a,s,l,c,p)},e.po.validateQuantity=function(n,i,a){const{requiredErrorMessage:s,minQuantityErrorMessage:l,maxQuantityWarningMessage:c}=e.common.getMessageFromSettings(a),{min_quantity:p,max_quantity:u,select_quantity:d}=a;if(!d.includes(1))return;const _={2:"po-option--checkbox-wrapper",5:"po-option--swatch-wrapper",6:"po-option--button-wrapper",3:"po-option--dropdown-wrapper",4:"po-option--radioButton-wrapper",12:"po-option--dropdown-thumbnail-wrapper",17:"po-option--switch-wrapper"};let m=0,h=document.querySelectorAll(`#po_stack${a.id} input[name="quantity${a.id}"]`),f="";if(e.page.isHomePage()||e.page.isCollectionPage()&&7019==e.storeId||1569==e.storeId){let e=i.match(/'(\d+)'/);!e&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(e=i?.match(/product_form_(\d+)/)),f=e?e[1]:"",h=document.querySelectorAll(`[bss-po-featured-product-key='${f}'] #po_stack${a.id} input[name="quantity${a.id}"]`),h.length||(h=document.querySelectorAll(`[id*='product_form_${f}'] #po_stack${a.id} input[name="quantity${a.id}"]`))}if(h.length){if(m=[...h].reduce(((e,t)=>e+Number(t.value)),0),p&&(m<p?t.get(i)!==s&&t.set(i,l):t.get(i)==l&&t.delete(i)),u)if(m>u){if(o.set(i,c),n){let t=null;if(3!=a.option_type&&12!=a.option_type)t=n.closest(`.${_[a.option_type]}`);else{let o=a.option_type==r.OPTION_TYPE.DROPDOWN?"#po_dropdown":"#po_dropdown_thumbnail",i=function(e){const t=e.match(/\d+$/);return t?parseInt(t[0],10):-1}(n.id);t=document.querySelector(`${o}${a.id} ~ .${_[a.option_type]}#po_dropdown${i}`),(e.page.isHomePage()||e.page.isCollectionPage()&&7019==e.storeId||1569==e.storeId)&&(t=document.querySelector(`[bss-po-featured-product-key='${f}'] ${o}${a.id} ~ .${_[a.option_type]}#po_dropdown${i}`),!t&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(t=document.querySelector(`[id*='product_form_${f}'] ${o}${a.id} ~ .${_[a.option_type]}#po_dropdown${i}`)))}const o=t.querySelector("input.quantity-input"),i=parseInt(u)-Math.abs(parseInt(o.value)-parseInt(m));o.value=i}}else o.delete(i);e.po.generateMessageOnProductPage(i)}},e.po.validateBeforeAddSelectQuantity=function(t,n,r){const{max_quantity:i}=t,{maxQuantityWarningMessage:a}=e.common.getMessageFromSettings(t);let s=document.querySelectorAll(`#po_stack${t.id} input[name="quantity${t.id}"]`);if(e.page.isHomePage()||e.page.isCollectionPage()&&7019==e.storeId||1569==e.storeId){let e="",o=n.match(/'(\d+)'/);!o&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(o=n?.match(/product_form_(\d+)/)),e=o?o[1]:"",s=document.querySelectorAll(`[bss-po-featured-product-key='${e}'] #po_stack${t.id} input[name="quantity${t.id}"]`),s.length||(s=document.querySelectorAll(`[id*='product_form_${e}'] #po_stack${t.id} input[name="quantity${t.id}"]`))}s.length&&3!=t.option_type?[...s].reduce(((e,t)=>e+Number(t.value)),0)==i?(o.set(n,a),r.checked=!1,e.po.generateMessageOnProductPage(n)):o.set(n)===a&&o.delete(n):o.get(n)===a&&o.delete(n)},e.po.generateMessageOnProductPage=function(e){let n=document.querySelector(e).closest(".po-stack");if(n.querySelector(".bss-warning-msg")&&n.querySelector(".bss-warning-msg").remove(),n.querySelector(".bss-error-msg")&&n.querySelector(".bss-error-msg").remove(),void 0!==o.get(e)){let t=`<span class="bss-warning-msg"><small>${o.get(e)}</small></span>`;n.insertAdjacentHTML("beforeend",t)}if(void 0!==t.get(e)){let o=`<span class="bss-error-msg"><small>${t.get(e)}</small></span>`;n.insertAdjacentHTML("beforeend",o)}},e.po.renderOptionSetOnProductPageOnPlatinumPlan=function({firstVariant:t,shopData:o}){let n=o.product,r=0;const i=setInterval((()=>{if(r>7)if(clearInterval(i),t){let o;e.po.generateOptionSetOnProductPage({variantId:t});let a=100;if("function"==typeof bssFixSupportGetTimeoutGenerateOptionSet&&(a=bssFixSupportGetTimeoutGenerateOptionSet()),"function"==typeof bssFixSupportGenerateVariantOptionSet)bssFixSupportGenerateVariantOptionSet(e,n,a);else if("navigation"in window&&"function"==typeof window.navigation.addEventListener)window?.navigation?.addEventListener("navigate",(t=>{o=setTimeout((()=>{let t=e.common.getCurrentVariant(n),o=e.helper.getVarriantCurrentId();t&&!o&&(o=t.id),e.po.generateOptionSetForVariant({variantId:o}),e.po.handleAddToCart()}),a)}));else try{let s=JSON.parse(document.querySelector("#bss-po-store-data").innerHTML),l=s?.product??"";if(l){let c=document.querySelector('form[action*="/cart/add"] input[name="id"]');if("function"==typeof bssFixSupportGetTargetNode&&(c=bssFixSupportGetTargetNode(e,s)),!c)return;const p={attributes:!0},u=new MutationObserver((t=>{for(const o of t)"attributes"===o.type&&setTimeout((()=>{const t=e.common.getCurrentVariant(l);e.po.handleAddToCart(),e.po.generateOptionSetForVariant({variantId:t.id})}),a)}));c&&u.observe(c,p)}}catch(d){throw new Error(d)}if(13051==e.storeId){function _(t){t.forEach((t=>{"class"===t.attributeName&&(o&&clearTimeout(o),o=setTimeout((()=>{const t=new Proxy(new URLSearchParams(window.location.search),{get:(e,t)=>e.get(t)});let o=e.common.getCurrentVariant(n),r=t.variant;o&&!r&&(r=o.id),e.po.generateOptionSetForVariant({variantId:r}),e.po.handleAddToCart()}),a))}))}const m=document.querySelectorAll(".product-options__value"),h=new MutationObserver(_),f={attributes:!0};m.forEach((e=>{h.observe(e,f)}))}}else e.po.generateOptionSetOnProductPage({});r++}),300)},e.common.injectLazyLoadingCSS=function(){if(e.common.isMobileSafari()&&!document.querySelector("#bss-po-lazy-loading-css")){const e=document.createElement("style");e.id="bss-po-lazy-loading-css",e.innerHTML='\n    /* Lazy Loading Styles for po-option__image-value */\n    .po-option__image-value[data-bg-src] {\n        position: relative;\n        transition: opacity 0.3s ease-in-out;\n        background-size: cover;\n        background-position: center;\n        background-repeat: no-repeat;\n        min-height: 40px; /* Prevent layout shift */\n        min-width: 40px;\n    }\n    \n    /* Respect user preferences */\n    @media (prefers-reduced-motion: reduce) {\n        .po-option__image-value[data-bg-src] {\n            transition: none;\n        }\n    }\n    \n    /* Loading spinner */\n    .po-option__image-value[data-bg-src]:not(.bg-loaded):not(.bg-error):before {\n        content: \'\';\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        width: 16px;\n        height: 16px;\n        margin: -8px 0 0 -8px;\n        border: 2px solid #f3f3f3;\n        border-top: 2px solid #3498db;\n        border-radius: 50%;\n        animation: bss-po-spin 1s linear infinite;\n        opacity: 0.7;\n        z-index: 1;\n    }\n    \n    /* Priority images get faster animation */\n    .po-option__image-value[data-priority="high"]:before {\n        animation-duration: 0.8s;\n        border-top-color: #2ecc71;\n    }\n    \n    /* Hide spinner when loaded */\n    .po-option__image-value.bg-loaded:before {\n        display: none;\n    }\n    \n    /* Error state */\n    .po-option__image-value.bg-error {\n        background-color: #f8f8f8;\n        background-image: url(\'data:image/svg+xml;charset=utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23999"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>\');\n        background-size: 20px 20px;\n        background-position: center;\n        background-repeat: no-repeat;\n        opacity: 0.4;\n    }\n    \n    .po-option__image-value.bg-error:before {\n        display: none;\n    }\n    \n    /* Sequential loading indicator */\n    .po-option__image-value[data-sequential-load="true"]:before {\n        border-top-color: #f39c12;\n    }\n    \n    /* Responsive loading indicators */\n    @media (max-width: 768px) {\n        .po-option__image-value[data-bg-src]:before {\n            width: 12px;\n            height: 12px;\n            margin: -6px 0 0 -6px;\n            border-width: 1px;\n        }\n    }\n    \n    /* Save data mode styling */\n    @media (prefers-reduced-data: reduce) {\n        .po-option__image-value[data-bg-src] {\n            background-color: #f5f5f5;\n        }\n        \n        .po-option__image-value[data-bg-src]:before {\n            border-top-color: #95a5a6;\n        }\n    }\n    \n    /* Slow connection indicator */\n    @media (max-width: 768px) and (prefers-reduced-data: reduce) {\n        .po-option__image-value[data-bg-src]:after {\n            content: \'\';\n            position: absolute;\n            top: 2px;\n            right: 2px;\n            font-size: 10px;\n            opacity: 0.5;\n        }\n    }\n    \n    @keyframes bss-po-spin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n    }\n            ',document.head.appendChild(e)}},e.common.initLazyLoading=function(){if(!e.common.isMobileSafari())return null;e.common.injectLazyLoadingCSS(),e.lazyLoader=e.common.initResponsiveLazyLoading(),document.addEventListener("bssImageLoadProgress",(t=>{const{loaded:o,total:n,percentage:r,inQueue:i,isLoading:a}=t.detail;"function"==typeof e.onImageLoadProgress&&e.onImageLoadProgress(t.detail)}));const t=setInterval((()=>{if(e.lazyLoader&&e.lazyLoader.isComplete()){clearInterval(t);const o=new CustomEvent("bssAllImagesLoaded",{detail:{totalLoaded:e.lazyLoader.getProgress().loaded}});document.dispatchEvent(o),"function"==typeof e.onAllImagesLoaded&&e.onAllImagesLoaded()}}),200);return e.lazyLoader}}const _={PREMIUM:[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL],ADVANCED:[r.PRICING.CODE.ADVANCED,r.PRICING.CODE.NEW_ADVANCED]},m={TEXT_INPUTS:["text_box","email_box","text_area","number_field"],SELECTABLE:["checkbox","radio_button","color_swatch","button","switch"],DROPDOWN:["dropdown","dropdown_thumbnail"],SPECIAL:["color_picker","date_picker","file_upload"],FORM_ELEMENTS:[r.OPTION_TYPE.TEXT_BOX,r.OPTION_TYPE.NUMBER,r.OPTION_TYPE.CHECKBOX,r.OPTION_TYPE.DROPDOWN,r.OPTION_TYPE.RADIO_BUTTON,r.OPTION_TYPE.SWATCH,r.OPTION_TYPE.BUTTON,r.OPTION_TYPE.FILE_UPLOAD,r.OPTION_TYPE.DATE_PICKER,r.OPTION_TYPE.COLOR_PICKER,r.OPTION_TYPE.TEXT_AREA,r.OPTION_TYPE.DROPDOWN_THUMBNAIL,r.OPTION_TYPE.EMAIL,r.OPTION_TYPE.SWITCH]},h={[r.OPTION_TYPE.CHECKBOX]:{values:"checkbox_value",price:"checkbox_extra_price",variantPrice:"checkbox_extra_variant_price",variant:"checkbox_extra_variant",priceType:"checkbox_extra_price_type",isMultiValue:!0},[r.OPTION_TYPE.RADIO_BUTTON]:{values:"radio_button_value",price:"radio_button_extra_price",variantPrice:"radio_button_extra_variant_price",variant:"radio_button_extra_variant",priceType:"radio_button_extra_price_type",isMultiValue:!0},[r.OPTION_TYPE.DROPDOWN]:{values:"dropdown_value",price:"dropdown_extra_price",variantPrice:"dropdown_extra_variant_price",variant:"dropdown_extra_variant",priceType:"dropdown_extra_price_type",isMultiValue:!0},[r.OPTION_TYPE.DROPDOWN_THUMBNAIL]:{values:"dropdown_thumbnail_value",price:"dropdown_thumbnail_extra_price",variantPrice:"dropdown_thumbnail_extra_variant_price",variant:"dropdown_thumbnail_extra_variant",priceType:"dropdown_thumbnail_extra_price_type",isMultiValue:!0},[r.OPTION_TYPE.SWATCH]:{values:"swatch_label",price:"swatch_extra_price",variantPrice:"swatch_extra_variant_price",variant:"swatch_extra_variant",priceType:"swatch_extra_price_type",isMultiValue:!0},[r.OPTION_TYPE.BUTTON]:{values:"button_value",price:"button_extra_price",variantPrice:"button_extra_variant_price",variant:"button_extra_variant",priceType:"button_extra_price_type",isMultiValue:!0},[r.OPTION_TYPE.SWITCH]:{values:"switch_value",price:"switch_extra_price",variantPrice:"switch_extra_variant_price",variant:"switch_extra_variant",priceType:"switch_extra_price_type",isMultiValue:!0},[r.OPTION_TYPE.TEXT_BOX]:{price:"text_box_extra_price",variantPrice:"text_box_extra_variant_price",variant:"text_box_extra_variant",priceType:"text_box_extra_price_type",isMultiValue:!1},[r.OPTION_TYPE.EMAIL]:{price:"email_box_extra_price",variantPrice:"email_box_extra_variant_price",variant:"email_box_extra_variant",priceType:"email_box_extra_price_type",isMultiValue:!1},[r.OPTION_TYPE.TEXT_AREA]:{price:"text_area_extra_price",variantPrice:"text_area_extra_variant_price",variant:"text_area_extra_variant",priceType:"text_area_extra_price_type",isMultiValue:!1},[r.OPTION_TYPE.NUMBER]:{price:"number_field_extra_price",variantPrice:"number_field_extra_variant_price",variant:"number_field_extra_variant",priceType:"number_field_extra_price_type",isMultiValue:!1},[r.OPTION_TYPE.FILE_UPLOAD]:{price:"file_upload_extra_price",variantPrice:"file_upload_extra_variant_price",variant:"file_upload_extra_variant",priceType:"file_upload_extra_price_type",isMultiValue:!1},[r.OPTION_TYPE.COLOR_PICKER]:{price:"color_picker_extra_price",variantPrice:"color_picker_extra_variant_price",variant:"color_picker_extra_variant",priceType:"color_picker_extra_price_type",isMultiValue:!1},[r.OPTION_TYPE.DATE_PICKER]:{price:null,variantPrice:null,variant:null,priceType:null,isMultiValue:!1}};class f{constructor(e,t,o,n){this.BSS_PO=e,this.errorMap=t,this.checkFirst=o,this.optionValueList=n,this.elementCache=new Map,this.selectorCache=new Map,this.BSS_PO.currentSelectedOptions||(this.BSS_PO.currentSelectedOptions={byOptionId:{},byLabel:{},byOptionSetId:{},allValues:[],totalPriceAddOn:0,totalVariantPriceAddOn:0,priceBreakdown:{},validation:{isValid:!0,requiredOptions:[],missingOptions:[],validOptions:[],errors:[]}})}getElement(e,t=document){const o=`${t===document?"doc":"parent"}_${e}`;return this.elementCache.has(o)||this.elementCache.set(o,t.querySelector(e)),this.elementCache.get(o)}getElements(e,t=document){const o=`${t===document?"doc":"parent"}_${e}_all`;return this.elementCache.has(o)||this.elementCache.set(o,t.querySelectorAll(e)),this.elementCache.get(o)}clearCache(){this.elementCache.clear(),this.selectorCache.clear()}getOptionProperty(e,t,o){if(!e?.extra_price)return"priceType"===o||"price"===o||"variantPrice"===o?0:null;const n=h[parseInt(e.option_type)];if(!n||!n[o])return"priceType"===o||"price"===o||"variantPrice"===o?0:null;if(!n.isMultiValue){const t=e.extra_price[n[o]];return"price"===o||"variantPrice"===o?parseFloat(t||0):t}const r=e[n.values]?.indexOf(t)??-1;if(r<0)return"priceType"===o||"price"===o||"variantPrice"===o?0:null;const i=e.extra_price[n[o]];if(!i||r>=i.length)return"priceType"===o||"price"===o||"variantPrice"===o?0:null;const a=i[r];return"price"===o||"variantPrice"===o?""===a?0:parseFloat(a||0):"priceType"===o?parseInt(a??0):a}getOptionPriceAddOn(e,t){return this.getOptionProperty(e,t,"price")}getOptionVariantPriceAddOn(e,t){return this.getOptionProperty(e,t,"variantPrice")}getOptionVariantId(e,t){return this.getOptionProperty(e,t,"variant")}getOptionExtraPriceType(e,t){return this.getOptionProperty(e,t,"priceType")}validateRequiredOptions(){const e={isValid:!0,requiredOptions:[],missingOptions:[],validOptions:[],errors:[]},t=[];this.BSS_PO.appliedOptionSet&&t.push(this.BSS_PO.appliedOptionSet),this.BSS_PO.po?.appliedOptionSetForSpecificVariant&&t.push(this.BSS_PO.po.appliedOptionSetForSpecificVariant);const o=e=>this.BSS_PO.displayMap&&"flex"===this.BSS_PO.displayMap.get(e),r=e=>{const t=this.optionValueList.filter((t=>t.id===e.id||t.label===e.label_on_product));return 0!==t.length&&t.some((e=>{if(!e.value)return!1;const t=e.value;return"string"==typeof t?""!==t.trim():Array.isArray(t)?t.length>0:Boolean(t)}))};return t.forEach(((t,i)=>{t&&t.options&&(0,n.sortOptionsByIndexAscending)(t.options).forEach((n=>{if(o(n.id)&&(1===n.required||!0===n.required)){const o={id:n.id,label:n.label_on_product,optionType:n.option_type,optionSetId:t.id,isVariantSpecific:i>0};e.requiredOptions.push(o),r(n)?e.validOptions.push(o):(e.missingOptions.push(o),e.errors.push(`"${n.label_on_product}" is required and must be selected.`))}}))})),e.isValid=0===e.missingOptions.length,e}calculateTotalPriceAddOn(){let e=0,t=0;const o={},n=[],r=e=>this.BSS_PO.displayMap&&"flex"===this.BSS_PO.displayMap.get(e);return this.optionValueList.filter((e=>r(e.id))).forEach((r=>{const i=this.BSS_PO.optionSets.find((e=>e.options.some((e=>e.id===r.id))));if(i){const a=i.options.find((e=>e.id===r.id));if(a){const i=this.getOptionExtraPriceType(a,r.value);let s=0,l=0;if(0===i)s=this.getOptionPriceAddOn(a,r.value);else if(1===i&&(l=this.getOptionVariantPriceAddOn(a,r.value),l>0)){const e=this.getOptionVariantId(a,r.value);if(e){const t=n.find((t=>t.id===e));t?t.priceAddOn+=l:n.push({id:e,priceAddOn:l})}}o[r.label]||(o[r.label]={values:[],totalPrice:0,totalVariantPrice:0}),o[r.label].values.push({value:r.value,price:s,variantPrice:l,extraPriceType:i,variantId:1===i?this.getOptionVariantId(a,r.value):null}),o[r.label].totalPrice+=s,o[r.label].totalVariantPrice+=l,e+=s,t+=l}}})),{totalPrice:e,totalVariantPrice:t,priceBreakdown:o,variantPriceAddOn:n}}updateGlobalSelectedOptions(e=null){const{totalPrice:t,totalVariantPrice:o,priceBreakdown:n,variantPriceAddOn:r}=this.calculateTotalPriceAddOn(),i=this.validateRequiredOptions();this.BSS_PO.currentSelectedOptions={byOptionId:{},byLabel:{},byOptionSetId:{},allValues:[],totalPriceAddOn:t,totalVariantPriceAddOn:o,variantPriceAddOn:r,priceBreakdown:n,validation:i,timestamp:(new Date).toISOString()};const a=e=>this.BSS_PO.displayMap&&"flex"===this.BSS_PO.displayMap.get(e),s=this.optionValueList.filter((e=>a(e.id)));s.forEach((e=>{const t=this.BSS_PO.optionSets.find((t=>t.options.some((t=>t.id===e.id)))),o=t?t.options.find((t=>t.id===e.id)):null,n=o?this.getOptionPriceAddOn(o,e.value):0,r=o?this.getOptionVariantPriceAddOn(o,e.value):0;this.BSS_PO.currentSelectedOptions.byOptionId[e.id]||(this.BSS_PO.currentSelectedOptions.byOptionId[e.id]=[]),this.BSS_PO.currentSelectedOptions.byOptionId[e.id].push({value:e.value,label:e.label,index:e.index,price:n,variantPrice:r}),this.BSS_PO.currentSelectedOptions.byLabel[e.label]||(this.BSS_PO.currentSelectedOptions.byLabel[e.label]=[]),this.BSS_PO.currentSelectedOptions.byLabel[e.label].push({value:e.value,id:e.id,index:e.index,price:n,variantPrice:r}),this.BSS_PO.currentSelectedOptions.allValues.push({...e,price:n,variantPrice:r})})),e&&(this.BSS_PO.currentSelectedOptions.byOptionSetId[e]||(this.BSS_PO.currentSelectedOptions.byOptionSetId[e]=[]),this.BSS_PO.currentSelectedOptions.byOptionSetId[e]=this.optionValueList.filter((t=>{if(!a(t.id))return!1;const o=this.BSS_PO.optionSets.find((e=>e.options.some((e=>e.id===t.id))));return o&&o.id==e})).map((e=>{const t=this.BSS_PO.optionSets.find((t=>t.options.some((t=>t.id===e.id)))),o=t?t.options.find((t=>t.id===e.id)):null,n=o?this.getOptionPriceAddOn(o,e.value):0,r=o?this.getOptionVariantPriceAddOn(o,e.value):0;return{...e,price:n,variantPrice:r}})));const l=new CustomEvent("BSSOptionSelectionChanged",{detail:{selectedOptions:this.BSS_PO.currentSelectedOptions,optionValueList:s,totalPriceAddOn:t,totalVariantPriceAddOn:o,priceBreakdown:n,timestamp:(new Date).toISOString()},bubbles:!0});if(document.dispatchEvent(l),!i.isValid){const e=new CustomEvent("BSSOptionValidationFailed",{detail:{validation:i,missingOptions:i.missingOptions,errors:i.errors,timestamp:(new Date).toISOString()},bubbles:!0});document.dispatchEvent(e)}}buildSelector(e,t="",o=!1){const n=`${e.option_type}_${e.id}_${t}_${o}`;if(this.selectorCache.has(n))return this.selectorCache.get(n);let r=this.BSS_PO.common.getSeletorOfByOptionType(e.option_type,e.id);return o&&(r=`[bss-po-featured-product-key='${t}'] ${r}`,!this.getElement(r)&&this.hasManualInstallSupport()&&(r=`[id*='product_form_${t}'] ${r}`)),this.selectorCache.set(n,r),r}hasManualInstallSupport(){return"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct}customHideProp(e,t,o,r,i="",a=0){if(!e)return{customAttributes:t,totalExtraPrice:o,totalVariantExtraPrice:r};const s=this.getContext(e,i),l=(0,n.sortOptionsByIndexAscending)(e.options);for(const n of l)if("none"===this.getOptionDisplayStyle(n,s,a)){if(t=this.BSS_PO.helper.filterCustomAttributes(t,n),!s.isFreePlan&&void 0!==o){const t=this.BSS_PO.helper.adjustExtraPrices(n,o,r,s.isPlatinumPlan,this.buildSelector(n,i,s.isHomePage),e);o=t.totalExtraPrice,r=t.totalVariantExtraPrice}m.FORM_ELEMENTS.includes(parseInt(n.option_type))&&this.errorMap.delete(this.buildSelector(n,i,s.isHomePage))}return{customAttributes:t,totalExtraPrice:this.BSS_PO.enableAddOns?o:0,totalVariantExtraPrice:this.BSS_PO.enableAddOns?r:0}}getContext(e){return{isSpecificVariant:e.product_condition_type===r.APPLY_TO_PRODUCTS.SPECIFIC_VARIANT,isHomePage:this.BSS_PO.page.isHomePage(),isPlatinumPlan:_.PREMIUM.includes(this.BSS_PO.currentPlan),isFreePlan:this.BSS_PO.currentPlan===r.PRICING.CODE.FREE}}getOptionDisplayStyle(e,t,o){const n=t.isSpecificVariant?".bss-po-specific-variant":":not(.bss-po-specific-variant)",r=this.getElements(`.bss-po-product-page${n}`);return t.isHomePage?this.getHomePageDisplayStyle(e,t):this.getPageDisplayStyle(e,r,o)}getPageDisplayStyle(e,t,o){if(!t[o])return"";"function"==typeof bssFixEditOptionInMiniCart&&!t[o].querySelector(`#po_stack${e.id}`)&&t[1]&&(o=1);const n=t[o].querySelector(`#po_stack${e.id}`);return n?.style.display||""}getHomePageDisplayStyle(e,t){let o=[`[bss-po-featured-product-key] #po_stack${e.id}`,`[id*='product_form'] #po_stack${e.id}`];t?.idProductAddToCart&&(o=[`[bss-po-featured-product-key='${t.idProductAddToCart}'] #po_stack${e.id}`,`[id*='product_form_${t.idProductAddToCart}'] #po_stack${e.id}`]);for(const e of o){const t=this.getElement(e);if(t)return t.style.display}return""}handleChangeValue(e){const{selector:t,optionType:o,radioChecked:n=null,appliedOptionSetID:r,optionID:i,labelOnProduct:a,maxSelector:s,position:l,optionIdForCheckBoxOnly:c,optionSetConditionType:p,dropdown_multiple_select:u=0}=e,d=this.BSS_PO.optionSets.find((e=>e.id==r));if(!d)return;this.clearCache();const _=this.getOptionPosition(t,l);this.optionValueList=this.updateOptionValueList(this.optionValueList,_),"/cart"===window.location.pathname&&this.checkFirst&&(this.initializeCartOptions(d),this.checkFirst=!1);const m=this.getOptionSetBlockSelector(p);this.processOptionChange({optionType:o,optionValueList:this.optionValueList,labelOnProduct:a,optionSetBlockSelector:m,position:_,optionID:i,optionIdForCheckBoxOnly:c,maxSelector:s,dropdown_multiple_select:u,radioChecked:n,appliedOptionSet:d,appliedOptionSetID:r}),this.updateGlobalSelectedOptions(r),this.triggerPriceChangeEvent(r)}getOptionPosition(e,t){if(!this.BSS_PO.page.isHomePage())return t;const o=this.getHomepageElements();for(let t=0;t<o.length;t++)if(this.getKeyAttribute(o[t])===this.getSelectorAttribute(e))return this.BSS_PO.home.positionProductSelector=t,t;return t}getHomepageElements(){let e=this.getElements("[bss-po-featured-product-key]");return!e.length&&this.hasManualInstallSupport()&&(e=this.getElements('[id*="product_form"]')),e}getKeyAttribute(e){let t=e?.getAttribute("bss-po-featured-product-key");if(!t&&this.hasManualInstallSupport()){const o=e?.getAttribute("id")?.match(/product_form_(\d+)/);o&&(t=o[1])}return t}getSelectorAttribute(e){let t=e?.closest("[bss-po-featured-product-key]")?.getAttribute("bss-po-featured-product-key");if(!t&&this.hasManualInstallSupport()){const o=e?.closest('[id*="product_form"]')?.getAttribute("id")?.match(/product_form_(\d+)/);o&&(t=o[1])}return t}updateOptionValueList(e,t){return e.length?e.map((e=>({...e,index:t}))):e}getOptionSetBlockSelector(e){const t=4===e&&!window.bss_admin_option;let o=".bss-po-product-page"+(t?".bss-po-specific-variant":"");return this.BSS_PO.page.isHomePage()&&("function"==typeof bssFixEditOptionInMiniCart?o+=", .bss-po-product-page"+(t?".bss-po-specific-variant":""):(o="[bss-po-featured-product-key]",!this.getElement(o)&&this.hasManualInstallSupport()&&(o='[id*="product_form"]'))),o}initializeCartOptions(e){const t=[];e.options.forEach((e=>{this.BSS_PO.conditional.newArray.forEach((o=>{o.label===e.label_on_product&&this.getOptionValues(e,o).forEach((n=>{t.push({label:o.label,value:n,index:0,id:e.id})}))}))})),this.optionValueList=t,this.updateGlobalSelectedOptions(e.id)}getOptionValues(e,t){return e.option_type===r.OPTION_TYPE.SWATCH&&Array.isArray(t.value)?t.value:[r.OPTION_TYPE.CHECKBOX,r.OPTION_TYPE.BUTTON].includes(e.option_type)&&!Array.isArray(t.value)?t.value.split(", "):[t.value]}processOptionChange(e){const{optionType:t,optionValueList:o,labelOnProduct:n,optionSetBlockSelector:r,position:i,optionID:a,optionIdForCheckBoxOnly:s,maxSelector:l,dropdown_multiple_select:c,radioChecked:p,appliedOptionSet:u}=e,d={...Object.fromEntries(m.TEXT_INPUTS.map((e=>[e,"handleTextInput"]))),...Object.fromEntries(m.DROPDOWN.map((e=>[e,"handleDropdown"]))),color_picker:"handleColorPicker",date_picker:"handleDatePicker",file_upload:"handleFileUpload",checkbox:"handleCheckbox",switch:"handleSwitch",radio_button:"handleRadioButton",color_swatch:"handleSwatchButton",button:"handleSwatchButton"}[t];d&&this[d]&&(this.optionValueList=this[d]({optionType:t,optionValueList:o,labelOnProduct:n,optionSetBlockSelector:r,position:i,optionID:a,optionIdForCheckBoxOnly:s,maxSelector:l,dropdown_multiple_select:c})),"boolean"!=typeof p||p||(this.optionValueList=this.optionValueList.filter((e=>e.label!==n))),this.applyConditionalLogic(u,t,a,s,i,r)}handleTextInput(e){return this.BSS_PO.helper.updateOptionValueInputFields(e)}handleCheckbox(e){const{optionSetBlockSelector:t,position:o,optionID:n,optionIdForCheckBoxOnly:r,labelOnProduct:i,maxSelector:a,optionValueList:s}=e,l=this.getElements(t)[o].querySelector(`div#po_stack${r}`),c=l.querySelector(`input#po_checkbox${n}`),p=l.querySelectorAll(`input[name="${c.name}"]`),u=Array.from(p).filter((e=>e.checked)).length,d={label:i,value:c.value,index:o,id:r};return this.updateSelectableList(s,d,c.checked&&(u<=a||!a))}handleSwitch(e){const{optionSetBlockSelector:t,position:o,optionID:n,optionIdForCheckBoxOnly:r,labelOnProduct:i,maxSelector:a,optionValueList:s}=e,l=this.getElements(t)[o].querySelector(`div#po_stack${r}`),c=l.querySelector(`input#po_switch${n}`),p=l.querySelectorAll(`input[name="${c.name}"]`),u=Array.from(p).filter((e=>e.checked)).length,d={label:i,value:c.value,index:o,id:r};return this.updateSelectableList(s,d,c.checked&&(u<=a||!a))}handleDropdown(e){const{optionType:t,optionID:o,optionSetBlockSelector:n,position:r}=e,i=this.BSS_PO.helper.handleDropdown(e);if("dropdown"===t&&"function"==typeof bssFixSupportShowValueMenuDropdown){const i=this.getElements(n)[r].querySelector(`#po_${t}${o}`);bssFixSupportShowValueMenuDropdown({BSS_PO:this.BSS_PO,mounted:!1,valueOnChange:i.value,labelOnProduct:e.labelOnProduct,optionType:t})}return i}handleRadioButton(e){const{optionSetBlockSelector:t,position:o,optionID:n,optionIdForCheckBoxOnly:r,labelOnProduct:i,optionValueList:a}=e,s=this.getElements(t)[o].querySelector(`input[name="po_radio_button${r}"]#po_radio_button${n}`),l=a.filter((e=>e.label!==i));return l.push({label:i,value:s.value,index:o,id:r}),l}handleSwatchButton(e){const{optionType:t,optionSetBlockSelector:o,position:n,optionID:r,labelOnProduct:i,maxSelector:a,optionValueList:s,optionIdForCheckBoxOnly:l}=e,c=this.BSS_PO.appliedOptionSet.options.find((e=>e.label_on_product===i))?.id,p=this.getElements(o)[n],u="button"===t?"button":"swatch",d=p.querySelector(`input[name='po_${u}${c}']#po_${u}${r}`),_=p.querySelectorAll(`input[name='po_${t}${c}']`),m=this.BSS_PO.helper.handleBtnAndSwatch({elementTag:d,elementTagList:_,labelOnProduct:i,position:n,maxSelector:a,optionValueList:s,optionIdForCheckBoxOnly:l});return"button"===t&&"function"==typeof bssFixSupportChangeColorSwatchValueInTheMobile&&bssFixSupportChangeColorSwatchValueInTheMobile(),m}handleColorPicker(e){const{optionSetBlockSelector:t,position:o,optionID:n,labelOnProduct:r,optionValueList:i}=e,a=this.getElements(t)[o],s=a.querySelector(`#po_color_picker${n}`),l=a.querySelector(`input[name="po_color_picker_value${n}"]`);if(s&&l&&l.value){const e=i.filter((e=>e.label!==r));return l.value.trim()&&e.push({label:r,value:l.value,index:o,id:n}),e}return i}handleDatePicker(e){const{optionSetBlockSelector:t,position:o,optionID:n,labelOnProduct:r,optionValueList:i}=e,a=this.getElements(t)[o].querySelector(`input[name="po_datetime${n}"]`);if(a&&a.value){const e=i.filter((e=>e.label!==r));return a.value.trim()&&e.push({label:r,value:a.value,index:o,id:n}),e}return i}handleFileUpload(e){const{optionSetBlockSelector:t,position:o,optionID:n,labelOnProduct:r,optionValueList:i}=e;if(this.getElements(t)[o].querySelector(`input[name="po_file_upload${n}"]`)){const e=i.filter((e=>e.label!==r)),t=this.BSS_PO.common.getLinkFileUploadedBySelector({selector:`input[name="po_file_upload${n}"]`,optionId:n,optionSetConditionType:this.BSS_PO.appliedOptionSet.product_condition_type});if(t&&t.length>0){const i=t.map((e=>e.url)).join(", ");e.push({label:r,value:i,index:o,id:n})}return e}return i}updateSelectableList(e,t,o){const n=e.findIndex((e=>e.label===t.label&&e.value===t.value));return o&&-1===n?e.push(t):o||-1===n||e.splice(n,1),e}applyConditionalLogic(e,t,o,n,r,i){const a=new p(e.options,this.optionValueList,this.BSS_PO.displayMap,this.BSS_PO.po.idDependencyMap),s=m.SELECTABLE.includes(t)?n:o;a.handleChange(s);const l=this.getElements(i)[r];for(const[e,t]of this.BSS_PO.displayMap.entries()){const o=l.querySelector(`#po_stack${e}`);o&&(o.style.display=t)}}triggerPriceChangeEvent(e){if(("function"==typeof bssFixSupportCustomPriceIncreament||[..._.ADVANCED,..._.PREMIUM].includes(this.BSS_PO.currentPlan)&&this.BSS_PO.enableDisplayProductPrice&&this.BSS_PO.enableAddOns)&&document.dispatchEvent(new Event("BSSchangeProductPrice",{bubbles:!0})),"function"==typeof bssFixSupportAddSkuHtmlForProductPage&&e){const t=this.BSS_PO.optionSets.find((t=>t.id==e));t&&setTimeout((()=>bssFixSupportAddSkuHtmlForProductPage(this.BSS_PO,t.options,r.OPTION_SETTINGS_TYPE2)),0)}}}function y(e){e.po.dateTimePicker=function(t,o=""){let n=document.querySelector(`.flatpickr.datetime${t.id}`),i=document.querySelector(`#po_stack${t.id}`);if(!n||!i)return void console.warn("Required DOM elements not found for date time picker");let a=n.querySelector(".po-option--type-datepicker-input");if(a&&a.addEventListener("change",(()=>{const e=n.querySelector(".fa-cancel-custom"),t=n.querySelector(".fa-calendar-custom");if(e&&t)if(""!==a.value.trim()){if(e.style.display="inline-block",t.style.opacity="1","function"==typeof bssFixSupportChangeTextDateRange){let e=bssFixSupportChangeTextDateRange(a);a.value=e}}else e.style.display="none",t.style.opacity="0.5"})),e.page&&e.page.isHomePage&&e.page.isHomePage()){const e=`[bss-po-featured-product-key='${o}'] .flatpickr`;let t=document.querySelector(e);if(!t&&"function"==typeof bssFixSupportManualInstall){const e=bssFixSupportManualInstall();e&&e.featuredProduct&&(t=document.querySelector(`[id*='product_form_${o}'] .flatpickr`))}t&&(n=t)}const s=t.date_time_config||[],l=t.time_format||0,c=t.overall_format||0,p=t.display_date_time_type||0;let u;0==p?0==l?u=0==c?"d-m-Y h:i K":1==c?"m-d-Y h:i K":2==c?"J F, Y h:i K":"F J, Y h:i K":1==l&&(u=0==c?"d-m-Y H:i":1==c?"m-d-Y H:i":2==c?"J F, Y H:i":"F J, Y H:i"):1==p?u=0==c?"d-m-Y":1==c?"m-d-Y":2==c?"J F, Y":"F J, Y":2==p&&(u=0==l?"h:i K":"H:i"),u||(u="d-m-Y");const d=setTimeout((()=>{document.querySelectorAll(".flatpickr-calendar").forEach((e=>{e&&e.addEventListener("keydown",(function(e){["e","E","+","-"].includes(e.key)&&e.preventDefault()}))}))}),1e3);let _="default",m=!1,h=t.disable_past_date||0;const f=t.disable_past_date_type||r.DISABLE_PAST_DATE_TYPE.MINUTES,y=t.disable_specific_date||[],b=t.enable_cut_off_time||!1,g=t.date_time_mode||"date_picker",v=t.disable_date_range||[],S=t.disable_all_past_date||!1;if(b&&(f===r.DISABLE_PAST_DATE_TYPE.WEEKS?h*=7:f===r.DISABLE_PAST_DATE_TYPE.MONTHS&&(h*=30)),"function"==typeof bssFixSupportCustomLocale&&(_=bssFixSupportCustomLocale(e,_)),"function"==typeof bssFixSupportCustomDateFormatConfig){const t=bssFixSupportCustomDateFormatConfig(e,u,p);t&&(u=t,m=!0)}const O=()=>{const e=new Date;let t="",o=0,n=0,i=0;if(0==p||2==p){if(f==r.DISABLE_PAST_DATE_TYPE.MINUTES){const t=60*e.getHours()+e.getMinutes()+h;o=Math.floor(t/60),n=t%60,i=Math.floor(o/24),o%=24}else if(f==r.DISABLE_PAST_DATE_TYPE.HOURS){const t=e.getHours()+h;o=t%24,n=e.getMinutes(),i=Math.floor(t/24)}t=`${o<10?`0${o}`:`${o}`}:${n<10?`0${n}`:`${n}`}`}return{currentTime:t,hour:o,minute:n,dayDisable:i}},I=()=>{const e=new Date;let t=new Date(e);if(b&&h>=0)switch(f){case r.DISABLE_PAST_DATE_TYPE.MINUTES:const o=O();t.setDate(e.getDate()+o.dayDisable),t.setHours(o.hour,o.minute,0,0);break;case r.DISABLE_PAST_DATE_TYPE.HOURS:const n=O();t.setDate(e.getDate()+n.dayDisable),t.setHours(n.hour,n.minute,0,0);break;case r.DISABLE_PAST_DATE_TYPE.DAYS:t.setDate(e.getDate()+h),t.setHours(0,0,0,0);break;case r.DISABLE_PAST_DATE_TYPE.WEEKS:t.setDate(e.getDate()+7*h),t.setHours(0,0,0,0);break;case r.DISABLE_PAST_DATE_TYPE.MONTHS:t.setMonth(e.getMonth()+h),t.setHours(0,0,0,0)}return t},x=s&&Array.isArray(s)?s.filter((e=>e&&!e.selected)).map((e=>e.name)):[];let P,E=null,T=0;const C=(t,o,n)=>{if(!(t&&t.length&&o&&i))return;let a=t[0];2===t.length&&"date_range"===g&&(a=t[1]);const c=e.helper.convertDayOfWeek(a.getDay()),u=s&&Array.isArray(s)?s.filter((e=>e&&e.name===c)):[];if(0===u.length)return;const{selected:d=!1,allDay:_=!0,timeStart:m="00:00",timeEnd:h="23:59"}=u[0]||{};let y=w(a,m).getTime(),v=w(a,h).getTime();const S=i.querySelector(".time-picker--error");S&&(a.getTime()<y||a.getTime()>v?(S.innerHTML=`${e.settings?.translations?.error_cut_off_time||"Time must be between"} ${A(m,l)} ${e.settings?.translations?.and_text||"and"} ${A(h,l)}`,S.style.display="block"):S.style.display="none"),o.set("minTime",m),o.set("maxTime",h);const x=i.querySelector(".time-picker--error");if(b){if(f==r.DISABLE_PAST_DATE_TYPE.MINUTES||f==r.DISABLE_PAST_DATE_TYPE.HOURS){if(x&&(e=>{if(!e)return!1;const t=new Date(I());let o=t.getDate();return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&o===e.getDate()})(a)){const t=O();((e,t)=>{const o=new Date(I());return o.setHours(e),o.setMinutes(t),o.setSeconds(0),o.setMilliseconds(0),o.getTime()})(t.hour,t.minute)>a.getTime()?(function(e,t,o){if(!e||!t||!o)return!1;const n=e=>{const t=e.split(":");if(2!==t.length)return 0;const o=parseInt(t[0],10),n=parseInt(t[1],10);return isNaN(o)||isNaN(n)?0:60*o+n},r=n(e),i=n(t),a=n(o);return i>a?r>=i||r<=a:r>=i&&r<=a}(t.currentTime,m,h)&&(o.set("minTime",t.currentTime),o.set("maxTime",h)),x.innerHTML=`${e.settings?.translations?.error_cut_off_time||"Time must be between"} ${t.currentTime} ${e.settings?.translations?.and_text||"and"} ${h}`,x.style.display="block"):x.style.display="none"}}else if((f==r.DISABLE_PAST_DATE_TYPE.DAYS||f==r.DISABLE_PAST_DATE_TYPE.WEEKS||f==r.DISABLE_PAST_DATE_TYPE.MONTHS)&&a<I()){let e=I();e.setHours(a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()),o.setDate(e)}}else x.style.display="none";if("date_range"===g){const r=i.querySelector(".date-range--error");if(r)if(1!==t.length||o.isOpen)if(t.length>1){if(new Date(t[0]).getTime()===new Date(t[1]).getTime())r.innerHTML=e.settings?.translations?.error_date_range||"Please select a date range",r.style.display="block";else if(r.style.display="none","function"==typeof bssFixSupportChangeTextDateRange){let e=bssFixSupportChangeTextDateRange(o.input);e&&(o.input.value=e)}}else r.style.display="none";else r.innerHTML=e.settings?.translations?.error_date_range||"Please select a date range",r.style.display="block";n&&t.length>1&&"none"===i.querySelector(".date-range--error")?.style.display&&1===p&&(o.setDate(t),o.close())}};function w(e,t){if(!e||!t||"string"!=typeof t)return new Date;const o=t.split(":");if(2!==o.length)return new Date(e);const n=parseInt(o[0],10),r=parseInt(o[1],10);if(isNaN(n)||isNaN(r))return new Date(e);const i=new Date(e);return i.setHours(n),i.setMinutes(r),i}function A(e,t){if(!e||"string"!=typeof e)return"00:00";let o=e;if(0==t){const t=e.split(":");if(2!==t.length)return e;const n=parseInt(t[0],10),r=parseInt(t[1],10);if(isNaN(n)||isNaN(r))return e;const i=n>=12?"PM":"AM";o=`${n%12||12}:${r.toString().padStart(2,"0")} ${i}`}return o}const N=setInterval((()=>{T++,(()=>{if("undefined"==typeof flatpickr||null===flatpickr)return!1;if(!n)return console.warn("Date time input element not found"),!1;try{return E=flatpickr(n,{enableTime:0==p||2==p,dateFormat:u,allowInput:m,locale:_,time_24hr:1==l,wrap:!0,noCalendar:2==p,mode:"date_range"==g?"range":"single",disable:[function(t){if(!t)return!0;const o=t.getDay(),n=e.helper.convertDayOfWeek(o),i=s&&Array.isArray(s)?s.filter((e=>e&&e.name===n)):[];if(0===i.length)return;if(x.includes(n))return!0;if(y&&y.length>0)for(let e=0;e<y.length;e++)if(new Date(y[e]).getTime()==t.getTime())return!0;if(v&&v.length>0)for(let e=0;e<v.length;e++){let o=v[e].split(" to ")[0],n=v[e].split(" to ")[1];if(t.getTime()>=new Date(o).getTime()&&t.getTime()<=new Date(n).getTime())return!0}if(S){if("function"==typeof bssFixSupportDisablePastDate)return bssFixSupportDisablePastDate(t);{let e=new Date;e.setHours(0,0,0,0);let o=new Date(t);if(o.setHours(0,0,0,0),o.getTime()<e.getTime())return!0}}if(!b||h<0)return!1;const a=I();if((f==r.DISABLE_PAST_DATE_TYPE.MINUTES||f==r.DISABLE_PAST_DATE_TYPE.HOURS)&&(new Date(t).setHours(0,0,0,0),new Date(a).setHours(0,0,0,0),f==r.DISABLE_PAST_DATE_TYPE.MINUTES||f==r.DISABLE_PAST_DATE_TYPE.HOURS)){const e=new Date(t);e.setHours(0,0,0,0);const o=new Date(a);if(o.setHours(0,0,0,0),e.getTime()===o.getTime()){const{timeStart:t,timeEnd:o}=i[0],[n,r]=t.split(":").map(Number),[s,l]=o.split(":").map(Number);new Date(e).setHours(n,r,0,0);const c=new Date(e);return c.setHours(s,l,0,0),c.getTime()<a.getTime()}}return t<a}],onChange:function(t,o,n){if(t&&t[0]&&("date_picker"!==g&&(!n.isOpen&&P&&n.setDate(P),P=t[0]),C(t,n,!0),e.po.optionHandler&&n.input&&n.input.value)){const t=n.input.closest('[id^="po_stack"]');if(t){const o=parseInt(t.id.replace("po_stack","")),r=e.optionSets.find((e=>e.options.some((e=>e.id===o))));if(r){const t=r.options.find((e=>e.id===o));t&&e.po.handleChangeValue({selector:n.input,optionType:"date_picker",appliedOptionSetID:r.id,optionID:o,labelOnProduct:t.label_on_product,maxSelector:null,position:0,optionSetConditionType:r.product_condition_type})}}}},onOpen:function(t,o,n){(t=>{if(!t)return;const o=(new Date).getDay(),n=e.helper.convertDayOfWeek(o),r=s&&Array.isArray(s)?s.filter((e=>e&&e.name===n)):[];if(0===r.length)return t.set("minTime","00:00"),void t.set("maxTime","23:59");const{selected:i=!1,allDay:a=!0,timeStart:l="00:00",timeEnd:c="23:59"}=r[0]||{};0!=p&&2!=p||a?(t.set("minTime","00:00"),t.set("maxTime","23:59")):(t.set("minTime",l),t.set("maxTime",c)),x.includes(n)&&t.clear()})(n),t&&t.length>0&&C(t,n,!1)}}),!0}catch(e){return console.error("Error initializing flatpickr:",e),!1}})()?(clearInterval(N),console.log("FlatPickr initialized successfully")):T>=20&&(clearInterval(N),console.warn("Failed to initialize FlatPickr after maximum attempts"))}),500);window.addEventListener("beforeunload",(()=>{clearInterval(N),d&&clearTimeout(d)}))}}function b(){BSS_PO.helper.convertDayOfWeek=function(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]}}function g(){BSS_PO.helper.toggleModalEditOption=function(){document.getElementById("ajaxifyOptionsCart").style.display="none"}}var v=o(32);const S=e=>v.defaultDateTimeConfig.map((t=>e?.length?{...t,...e.find((e=>e.name==t.name))}:t));var O={grad:.9,turn:360,rad:360/(2*Math.PI)},I=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},x=function(e,t,o){return void 0===t&&(t=0),void 0===o&&(o=Math.pow(10,t)),Math.round(o*e)/o+0},P=function(e,t,o){return void 0===t&&(t=0),void 0===o&&(o=1),e>o?o:e>t?e:t},E=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},T=function(e){return{r:P(e.r,0,255),g:P(e.g,0,255),b:P(e.b,0,255),a:P(e.a)}},C=function(e){return{r:x(e.r),g:x(e.g),b:x(e.b),a:x(e.a,3)}},w=/^#([0-9a-f]{3,8})$/i,A=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},N=function(e){var t=e.r,o=e.g,n=e.b,r=e.a,i=Math.max(t,o,n),a=i-Math.min(t,o,n),s=a?i===t?(o-n)/a:i===o?2+(n-t)/a:4+(t-o)/a:0;return{h:60*(s<0?s+6:s),s:i?a/i*100:0,v:i/255*100,a:r}},D=function(e){var t=e.h,o=e.s,n=e.v,r=e.a;t=t/360*6,o/=100,n/=100;var i=Math.floor(t),a=n*(1-o),s=n*(1-(t-i)*o),l=n*(1-(1-t+i)*o),c=i%6;return{r:255*[n,s,a,a,l,n][c],g:255*[l,n,n,s,a,a][c],b:255*[a,a,l,n,n,s][c],a:r}},k=function(e){return{h:E(e.h),s:P(e.s,0,100),l:P(e.l,0,100),a:P(e.a)}},M=function(e){return{h:x(e.h),s:x(e.s),l:x(e.l),a:x(e.a,3)}},L=function(e){return D((o=(t=e).s,{h:t.h,s:(o*=((n=t.l)<50?n:100-n)/100)>0?2*o/(n+o)*100:0,v:n+o,a:t.a}));var t,o,n},R=function(e){return{h:(t=N(e)).h,s:(r=(200-(o=t.s))*(n=t.v)/100)>0&&r<200?o*n/100/(r<=100?r:200-r)*100:0,l:r/2,a:t.a};var t,o,n,r},F=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,q=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,B=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,j=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,H={string:[[function(e){var t=w.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?x(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?x(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=B.exec(e)||j.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:T({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=F.exec(e)||q.exec(e);if(!t)return null;var o,n,r=k({h:(o=t[1],n=t[2],void 0===n&&(n="deg"),Number(o)*(O[n]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return L(r)},"hsl"]],object:[[function(e){var t=e.r,o=e.g,n=e.b,r=e.a,i=void 0===r?1:r;return I(t)&&I(o)&&I(n)?T({r:Number(t),g:Number(o),b:Number(n),a:Number(i)}):null},"rgb"],[function(e){var t=e.h,o=e.s,n=e.l,r=e.a,i=void 0===r?1:r;if(!I(t)||!I(o)||!I(n))return null;var a=k({h:Number(t),s:Number(o),l:Number(n),a:Number(i)});return L(a)},"hsl"],[function(e){var t=e.h,o=e.s,n=e.v,r=e.a,i=void 0===r?1:r;if(!I(t)||!I(o)||!I(n))return null;var a=function(e){return{h:E(e.h),s:P(e.s,0,100),v:P(e.v,0,100),a:P(e.a)}}({h:Number(t),s:Number(o),v:Number(n),a:Number(i)});return D(a)},"hsv"]]},U=function(e,t){for(var o=0;o<t.length;o++){var n=t[o][0](e);if(n)return[n,t[o][1]]}return[null,void 0]},V=function(e,t){var o=R(e);return{h:o.h,s:P(o.s+100*t,0,100),l:o.l,a:o.a}},W=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},Y=function(e,t){var o=R(e);return{h:o.h,s:o.s,l:P(o.l+100*t,0,100),a:o.a}},z=function(){function e(e){this.parsed=function(e){return"string"==typeof e?U(e.trim(),H.string):"object"==typeof e&&null!==e?U(e,H.object):[null,void 0]}(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return x(W(this.rgba),2)},e.prototype.isDark=function(){return W(this.rgba)<.5},e.prototype.isLight=function(){return W(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=C(this.rgba)).r,o=e.g,n=e.b,i=(r=e.a)<1?A(x(255*r)):"","#"+A(t)+A(o)+A(n)+i;var e,t,o,n,r,i},e.prototype.toRgb=function(){return C(this.rgba)},e.prototype.toRgbString=function(){return t=(e=C(this.rgba)).r,o=e.g,n=e.b,(r=e.a)<1?"rgba("+t+", "+o+", "+n+", "+r+")":"rgb("+t+", "+o+", "+n+")";var e,t,o,n,r},e.prototype.toHsl=function(){return M(R(this.rgba))},e.prototype.toHslString=function(){return t=(e=M(R(this.rgba))).h,o=e.s,n=e.l,(r=e.a)<1?"hsla("+t+", "+o+"%, "+n+"%, "+r+")":"hsl("+t+", "+o+"%, "+n+"%)";var e,t,o,n,r},e.prototype.toHsv=function(){return e=N(this.rgba),{h:x(e.h),s:x(e.s),v:x(e.v),a:x(e.a,3)};var e},e.prototype.invert=function(){return G({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),G(V(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),G(V(this.rgba,-e))},e.prototype.grayscale=function(){return G(V(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),G(Y(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),G(Y(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?G({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):x(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=R(this.rgba);return"number"==typeof e?G({h:e,s:t.s,l:t.l,a:t.a}):x(t.h)},e.prototype.isEqual=function(e){return this.toHex()===G(e).toHex()},e}(),G=function(e){return e instanceof z?e:new z(e)};const{BSS_PO_ORDER_MARK:X,OLD_ADDON_MARK:Q}=o(338),{BSS_PO_ORDER_MARK:K,OLD_ADDON_MARK:J}=o(338);class Z{constructor(e){this.BSS_PO=e}init(){console.log("%cStart Cart Observer","background-color: darkblue; color: white; font-style: italic; border: 5px solid hotpink; font-size: 2em;"),this.emitCartChanges().then((()=>{this.observeCartChanges()})),window.addEventListener("cart_changed",BSS_PO.helper.debounce((e=>{const{changedCartItems:t,newCart:o,oldCart:n}=e.detail,r=JSON.parse(window.localStorage.getItem("__"))||[];t&&t.length&&t.forEach((e=>{if(r.every((({key:t})=>t!==e.encodeKeyData)))return;const t=JSON.parse(this.BSS_PO.helper.base64Decode(r.find((({key:t})=>t===e.encodeKeyData)).value));window.localStorage.setItem(e.key,JSON.stringify(t.option))})),o&&o.items&&o.items.forEach((e=>{const t=r.find((({key:t})=>t===e.encodeKeyData));if(t){const o=JSON.parse(this.BSS_PO.helper.base64Decode(t.value)),n=["bss-po-line-item-key","bss-po-cart-item-key","bss-po-line-properties"];if(o.keys.forEach((t=>{document.querySelectorAll(n.map((e=>`[${e}="${t}"]`)).join(",")).forEach((t=>{n.forEach((o=>{t.getAttribute(o)&&t.setAttribute(o,e.key)}))}))})),o.keys.some((t=>t===e.key)))return;const i=[...o.keys,e.key];o.keys=i;const a=r.map((t=>t.key===e.key?this.BSS_PO.helper.base64Encode(JSON.stringify(o)):t));window.localStorage.setItem("__",JSON.stringify(a))}})),"undefined"==typeof BSS_B2B&&1==this.BSS_PO.enableAddOns&&this.BSS_PO.cart.displayPriceAddOnsWithCartItems(o)}))),window.addEventListener("cart_changed",BSS_PO.helper.debounce((e=>{const{changedCartItems:t,newCart:o,oldCart:n}=e.detail;if(1===this.BSS_PO.enableDiscount&&([r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(BSS_PO.currentPlan)||"function"==typeof bssFixSupportCustomOpenFeature&&bssFixSupportCustomOpenFeature()?.discountBox)){const e=window.localStorage.getItem("appliedDiscount");if(e)if(0===o.items.length)window.localStorage.removeItem("appliedDiscount"),document.querySelector(".bss-po-discount-code-block")&&document.querySelector(".bss-po-discount-code-block").remove();else{let t=setInterval((async()=>{BSS_PO.cart.discount.utils.rendering||(BSS_PO.cart.discount.utils.showDiscountCodeFeature&&this.BSS_PO.cart.handleApplyDiscountCode(e),clearInterval(t))}),500)}}})))}async setBase64EncodeData(e){const t=JSON.stringify({customAttributes:e.properties,product_id:e.product_id,variant_id:e.variant_id}),o=this.BSS_PO.helper.base64Encode(t);e.encodeKeyData=o}async fetchCart(){const e=await fetch("/cart.js"),t=await e.json();return this.handleReturnCartItems(t.items),t}handleReturnCartItems(e){0===e.length&&this.clearEncodeData(),e.forEach((e=>{this.setBase64EncodeData(e)}))}clearEncodeData(){window.localStorage.removeItem("__")}storeCart(e){window.localStorage.setItem("cart",JSON.stringify(e))}storedCart(){return JSON.parse(window.localStorage.getItem("cart"))||{items:[]}}findCartChanges(e,t){const o=t.items,n=e.items;return o.filter((e=>n.every((t=>e.key!==t.key))))}async emitCartChanges(){const e=await this.fetchCart(),t=this.storedCart(),o=this.findCartChanges(t,e),n=new CustomEvent("cart_changed",{detail:{newCart:e,oldCart:t,changedCartItems:o}});window.dispatchEvent(n),this.storeCart(e)}observeCartChanges(){new PerformanceObserver((e=>{e.getEntries().forEach((e=>{const t=["xmlhttprequest","fetch"].includes(e.initiatorType),o=/\/cart\//.test(e.name);t&&o&&this.emitCartChanges()}))})).observe({entryTypes:["resource"]})}}var ee=o(958);async function te(e,o){console.log("PO script");let n={},i=new Map,a=new Map;e.errorMap=i,e.warningMap=a;let s=[];e.conditional={newArray:[]};e.marketStatus=!1,e.marketData={},e.checkToken=!!localStorage.getItem("bss_storefront_token");const{apiDomain:l}=e;let p=o?.shop?.domain||Shopify?.shop;if(!e.checkToken)try{const{data:o}=await t().post(`/apps/${e.proxySubpath}/check-storefront-token`,{domain:p},{headers:{"Content-Type":"application/json"}});o?.success&&(e.checkToken=!0,localStorage.setItem("bss_storefront_token","true"))}catch(e){console.error("Error checking storefront token:",e)}if(e?.metaobject?.storefrontAccessToken){let t=[],o='\n                {\n                    metaobject(handle: {\n                        handle: "bss_po_metaobject_option_sets",\n                        type: "$app:bss_po_option_set",\n                    }) {\n                        # Metaobject fields\n                        fields {\n                            key\n                            value\n                        }\n                    }\n                }';await fetch(`https://${e.metaobject.domain}/api/${e.metaobject.apiVersion}/graphql.json`,{method:"POST",headers:{"Content-Type":"application/json","X-Shopify-Storefront-Access-Token":e.metaobject.storefrontAccessToken},body:JSON.stringify({query:o})}).then((e=>e.json())).then((o=>{const n=o.data.metaobject.fields;for(const e of n)t=[...t,...JSON.parse(e.value)];e.optionSets=t})).catch((e=>{console.log(e)})),customFlatpickrCss()}"function"==typeof bssFixSupportUseOldAddOnLogic&&(e.checkToken=!1);const _=()=>{(function(e){e.page={},e.helper={},e.page.getPage=function(){return window.location.href.split("/")},e.page.isProductPage=function(){var t=e.page.getPage();return 8564==e.storeId?"products"==t[t.length-2]||"products"==t[t.length-3]:"products"==t[t.length-2]},e.page.isHomePage=function(){if("function"==typeof bssFixSupportCustomQVInHomePage&&bssFixSupportCustomQVInHomePage())return!1;var t=e.page.getPage();return"function"==typeof bssFixSupportShowOptionSetOnStoreDemo&&bssFixSupportShowOptionSetOnStoreDemo(e,t),"function"==typeof bssFixSupportFeatureProduct?bssFixSupportFeatureProduct(e):""==t[t.length-1]||t[t.length-1]==(Shopify&&Shopify.routes&&Shopify.routes.root.slice(1,Shopify.routes.root.length-1))},e.page.isProductPreviewPage=function(){var t=e.page.getPage();return t[t.length-1].includes("products_preview")},e.page.isProductPageWithAds=function(){var t=e.page.getPage();return"products"==t[t.length-3]&&t[t.length-1].includes("utm_")},e.page.isCollectionPage=function(){var t=e.page.getPage();return"collections"==t[t.length-2]},e.page.isCartPage=function(){var t=e.page.getPage();return t[t.length-1].split("?").length>1?"cart"==t[t.length-1].split("?")[0]:t[t.length-1].includes("cart")},e.page.windowMobileCheck=function(){let e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},e.helper.getShopifyLocaleParams=function(){let e="";return"undefined"!=typeof Shopify&&Shopify&&Shopify.locale&&(e="?locale="+Shopify.locale),e},e.helper.getEvenIndexElements=function(e){return e.filter(((e,t)=>t%2==0))},e.helper.getOddIndexElements=function(e){return e.filter(((e,t)=>t%2!=0))},e.helper.waitForElement=function(e,t=0){const o=(new Date).getTime();return new Promise(((n,r)=>{const i=setInterval((()=>{const a=(new Date).getTime();document.querySelector(e)?(clearInterval(i),n()):t&&a-o>=t&&(clearInterval(i),r())}),100)}))},e.helper.detectBuyItNowButtonInterVal=function(){let t=0,o=setInterval((function(){(e.page.isProductPage()||e.page.isHomePage())&&e.enable&&0!=e.optionSets.length&&1569!=e.storeId?(1722==e.storeId&&e.page.isProductPage()||t<=12?e.po.buyItNow():clearInterval(o),t++):clearInterval(o)}),500)},e.helper.callSearchLiquidApi=async function(e){const t="/search.js?q="+e.join(" OR ")+"&view=bss.po",o=encodeURI(t);try{const e=await fetch(o);return await e.json()}catch(e){console.log(e)}},e.helper.getCartData=async function(){try{const e=await fetch("/cart.js",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(200===e.status)return await e.json()}catch(e){console.log(e)}},e.helper.generateHtmlForUploadedFileLink=function(){let e=[];function t(e){const t=/(https?:\/\/[^\s]+)/g;return t.test(e)?e.replace(t,(function(e){if(e.toLowerCase().indexOf(".jpg")>0||e.toLowerCase().indexOf(".png")>0||e.toLowerCase().indexOf(".gif")>0||e.toLowerCase().indexOf(".svg")>0)return`<a href=${e} target="_blank" style="border: 0px;"><img src="${e}" style="width: 50px; border: 0px; -moz-border-radius: 5px; border-radius: 5px;" /></a>`;{const t=e.split("/").pop();return`<a href=${e} target="_blank"><span class="bss-po-cart-file">${t}</span></a>`}})):`${e}`}e=document.querySelectorAll(['form[action*="/cart"] .product-details__item span[data-cart-item-property-value]:not(a)','form[action*="/cart"] .cart__row.responsive-table__row td p']),e=[...e].filter((e=>!e.querySelector("a, img"))),e.forEach((e=>{if(e.innerHTML.split(",").length>1){const o=e.innerHTML.split(",").map((e=>t(e))).join();e.innerHTML=o}else e.innerHTML=t(e.innerHTML)}))},e.helper.getCartJsData=async function(){return await fetch("/cart.js").then((e=>e.json())).then((e=>e)).catch((e=>{console.log("Error:",e)}))},e.helper.updateCartJsData=async function(e){return await fetch("/cart/update.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>e)).catch((e=>{console.log("Error:",e)}))},e.helper.changeCartJsData=async function(e){return await fetch("/cart/change.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>e)).catch((e=>{console.error("Error:",e)}))},e.helper.autoResizeTextArea=async function(e){e.style.height="auto",e.style.height=e.scrollHeight+"px"},e.helper.autoResizeTextAreaOnEnter=async function(t,o){13===t.keyCode&&e.helper.autoResizeTextArea(o)},e.helper.eventListenersWhenCartActivities=function(e){const t=window.XMLHttpRequest.prototype.open;window.XMLHttpRequest.prototype.open=function(){return this.addEventListener("load",(function(){["/cart/add.js","/cart/update.js","/cart/change.js","/cart/clear.js"].includes(this._url)&&e()})),t.apply(this,arguments)}},e.helper.debounce=function(e,t=200){let o;return(...n)=>{clearTimeout(o),o=setTimeout((()=>{e.apply(this,n)}),t)}},e.helper.listenCartActivitiesByFetch=function(e,t=1e3){!function(o,n){"function"==typeof n&&(o.fetch=function(){const o=n.apply(this,arguments);return o.then((o=>{[`${window.location.origin}/cart/update`,`${window.location.origin}/cart/change`,`${window.location.origin}/cart/change.js`,`${window.location.origin}/cart/clear`].includes(o.url)&&setTimeout((()=>{e()}),t)})),o})}(window,window.fetch)},e.helper.getSkuItemBySkuType=function(t,o){const n=e.settings.generals.sku_type,i=e.settings.generals.sku_separator,a=e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan);return a&&0==n&&t&&o?`${t}${o}`:a&&(1==n||0==n&&!t)?o.substring(i.length):""},e.helper.checkPOCreateDraftOrder=function(t){let o=t.items;if(o.length)for(let t=0;t<o.length;t++){let n=o[t].key,r="0";if(localStorage.getItem(n)){let t=JSON.parse(localStorage.getItem(n));if(r=Number(t.totalExtraPrice),r=e.common.convertRate(r),t.skuOptionValueString&&t.skuOptionValueString.length||r>0)return!0}}return!1},e.helper.addEventListenerInput=function(e){e.value=e.value.replace(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,"")},e.helper.base64Encode=function(e=""){return window.btoa(window.encodeURIComponent(e))},e.helper.base64Decode=function(e=""){return window.decodeURIComponent(window.atob(e))},e.helper.formatOptionLabel=function(e){let t="";return e&&(t=e.replace(/(')|(")/g,"\\'")),t},e.helper.createNewAddToCart=function(e){let t=document.createElement("div");return t.className="bss-po-btn-addToCart",document.querySelector(e).appendChild(t),t},e.helper.cloneStyles=function({node:e,cloneNode:t}){const o=window.getComputedStyle(e);if(""!==o.cssText)t.style.cssText=o.cssText;else{const e=Array.from(o).reduce(((e,t)=>`${e}${t}:${o.getPropertyValue(t)};`),"");t.style.cssText=e}t.classList.add("bss-po-btn-addToCart")},e.helper.cloneButtonFunc=function(e,t){const o=e.cloneNode(!0);return e.parentNode.insertBefore(o,e),o.classList.add("bss-po-btn-checkout"),e.parentNode.removeChild(e),t.push(o),t},e.helper.decodeHTMLEntities=function(e){const t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&#39;":"'","&nbsp;":" "};return e.replace(/&[a-zA-Z0-9#]+;/g,(function(e){return t[e]||e}))},e.helper.addLoadingBtnCSS=(e,t)=>{if(e){const o=window.getComputedStyle(e).getPropertyValue("font-size");return"function"==typeof bssFixSupportCustomLoadingBtnCSS?bssFixSupportCustomLoadingBtnCSS(e,t):(e.classList.add("bss-po-button--loading"),e.style.fontSize="0px",e.disabled=!0,"addToCart"===t&&(e.style.border="1px solid")),o}return 0},e.helper.removeLoadingBtnCSS=(e,t=0,o)=>{e&&(e.classList.remove("bss-po-button--loading"),e.style.fontSize=t,e.disabled=!1,"addToCart"===o&&(e.style.border="0"))},e.helper.showErrorMsgAddToCart=({add_to_cart_btn:e,message:t})=>{if(!e)return;const o=(()=>{const e=document.querySelector("#bss-atc-error-element")||Object.assign(document.createElement("div"),{id:"bss-atc-error-element"});return e.innerHTML='\n                <svg xmlns="http://www.w3.org/2000/svg" fill="#dc2626" width="18px" height="18px" viewBox="0 0 24 24">\n                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>\n                </svg>\n                <span></span>\n            ',e.style.display="block",e})();o.querySelector("span").innerText=t+(t.includes("can't add more")?" Quantity exceeds available stock":""),e.insertAdjacentElement("beforeBegin",o)},e.helper.hideErrorMsgAddToCart=()=>{const e=document.querySelector("#bss-atc-error-element");e&&(e.style.display="none")},e.helper.getSectionsSelectorByThemeName=(e,t)=>{const o={1:["debut","narrative","venture","minimal"],2:["refresh","ride","colorblock","taste","studio","craft","crave","sense","dawn","theme-export-designand3dprinting-de-ride-05au"],3:[887,1356,1368,1363,1500,1434,1499,1567,1431,1864,1841,1891]};return"function"==typeof bssFixSupportGetSectionMiniCart?bssFixSupportGetSectionMiniCart("cart-drawer,cart-notification-product,cart-notification-button,cart-icon-bubble"):o[1].includes(e)?"cart-template":o[2].includes(e)||o[3].includes(t)?"main-cart-items":null},e.helper.cssForElementLineItemInCart=e=>{document.querySelectorAll("[bss-po-cart-item-key],[bss-po-cart-total-price],[bss-po-cart-discount-total],[data-cart-item-regular-price],span[data-cart-subtotal],.cart-table-price,.cart-table-line-price").forEach((t=>{t.style.visibility=e})),"undefined"!=typeof BSS_B2B&&setTimeout((()=>{document.querySelectorAll(".bss-qb-cart-subtotal,.bss-qb-price-item,.bss-qb-total-price-item,[bss-b2b-item-final-price],[bss-b2b-item-original-price],[bss-b2b-final-line-price],[bss-b2b-original-line-price], [bss-b2b-cart-total-price]").forEach((t=>{t.style.opacity="hidden"===e?0:1}))}),1e3)},e.helper.updateOptionValueInputFields=({optionType:e,optionValueList:t,labelOnProduct:o,optionSetBlockSelector:n,position:r,optionID:i})=>{const a={text_box:`#po_text_box${i}`,email_box:`#po_email_box${i}`,text_area:`#po_text_area${i}`,number_field:`#po_number_field${i}`};t=t.filter((e=>e.label!==o&&""!==e.value));const s=document.querySelectorAll(n)[r].querySelector(a[e]),l="number_field"===e?parseInt(s.value):s.value;return""!==l&&t.push({label:o,value:l,index:r,id:i}),t},e.helper.preventReAttachEvent=function e({callback:t=()=>{},nameCallback:o=""}){e?.[o]>1||(null==e?.[o]?e[o]=0:e[o]++,"function"==typeof t&&0==e?.[o]&&t())},e.helper.handleDropdown=({optionType:t,optionID:o,position:n,optionValueList:r,optionSetBlockSelector:i,labelOnProduct:a,dropdown_multiple_select:s,maxSelector:l})=>{const c="dropdown"===t?`#bss-po_dropdown${o}`:`#po_dropdown_thumbnail-div${o}`;let p=document.querySelector(c);"function"==typeof bssSupportGetDropdownListInMinicart&&"dropdown"===t&&([p,n]=bssSupportGetDropdownListInMinicart(p,c,n));const u=p.querySelector("dropdown"===t?"#bss-po-dropdown-selected-option":"#po-dropdown-selected-option"),d=p.querySelector(".po-dropdown-list"),_=p.querySelectorAll("dropdown"===t?".po-dropdown-option":".po-dropdown-thumbnail-option"),m="dropdown"===t?"po-dropdown-arrow":"po-dropdown-thumbnail-arrow",h="dropdown"===t?`#po_dropdown${o}`:`#po_dropdown_thumbnail${o}`,f=document.querySelectorAll(`${h} option[id*="po_dropdown"]`);if(s){function y({option:e,updateSelected:t}){e.addEventListener("keydown",(e=>"Enter"===e.key&&t()))}p.classList.contains("open-drop-list")||(p.classList.add("open-drop-list"),d.style.display="block"),_.forEach((t=>{const n=t.getAttribute("data-value");if("searchWithDropdown"!==t.id&&"searchWithThumbnail"!==t.id){const r=()=>{let e=(e=>Array.from(f).find((t=>t.getAttribute("value")==e)))(n),o="true"==e?.getAttribute("selected")?"false":"true",r=document.querySelectorAll(`${h} option[id*="po_dropdown"][selected="true"]`),i=!0;if("number"==typeof l&&(i=r.length<l),"false"==o||i){let n=_[1].querySelector("span").innerHTML;"true"==o&&(n=t.querySelector("span").innerHTML),u.innerHTML=`${n} <i class="${m} ${m}-down"></i>`,e.setAttribute("selected",o),t.classList.toggle("selected")}};e.helper.preventReAttachEvent({callback:()=>{t.addEventListener("click",r),y({option:t,updateSelected:r})},nameCallback:`add_event_dropdown_option_${o}_${n}`})}})),e.helper.preventReAttachEvent({callback:()=>{u.addEventListener("click",(e=>{e.preventDefault(),e.stopImmediatePropagation();let t="block"==d.style.display?"none":"block";d.style.display=t,p.classList.toggle("open-drop-list")}))},nameCallback:`close_dropdown_${o}`}),e.helper.preventReAttachEvent({callback:()=>{document.addEventListener("click",(e=>{p.contains(e.target)||(d.style.display="none",p.classList.remove("open-drop-list"))}))},nameCallback:`close_dropdown_document_${o}`}),r=r.filter((e=>e.label!==a));let b=document.querySelectorAll(`${h} option[id*="po_dropdown"][selected="true"]`),g=Array.from(b).map((e=>e.getAttribute("value")));for(let v of g){const S=r.findIndex((e=>e.label===a&&e.value===v));-1===S?r.push({label:a,value:v,index:n,id:o}):-1!==S&&r.splice(S,1)}}else{p.classList.toggle("open-drop-list"),d.style.display="block"===d.style.display?"none":"block",_.forEach((e=>{const t=e.getAttribute("data-value");if("searchWithDropdown"!==e.id&&"searchWithThumbnail"!==e.id){const o=()=>{const o=e.querySelector("span").innerHTML;u.innerHTML=`${o} <i class="${m} ${m}-down"></i>`,(e=>{Array.from(f).forEach((t=>{t.getAttribute("value")==e?t.setAttribute("selected","true"):t.setAttribute("selected","false")}))})(t)};e.addEventListener("click",o),e.addEventListener("keydown",(e=>"Enter"===e.key&&o()))}else e.addEventListener("click",(()=>{d.style.display="none",p.classList.remove("open-drop-list")}))})),document.addEventListener("click",(e=>{p.contains(e.target)||(d.style.display="none",p.classList.remove("open-drop-list"))})),r=r.filter((e=>e.label!==a));let O=document.querySelector(`${h} option[id*="po_dropdown"][selected="true"]`)?.value;O&&r.push({label:a,value:O,index:n,id:o})}return r},e.helper.handleBtnAndSwatch=({elementTag:e,elementTagList:t,labelOnProduct:o,position:n,maxSelector:r,optionValueList:i,optionIdForCheckBoxOnly:a})=>{if("checkbox"===e.type){let s=Array.from(t).filter((e=>e.checked)).length;if(e.checked&&s<=r)i.push({label:o,value:e.value,index:n,id:a});else{const t=i.findIndex((t=>t.label===o&&t.value===e.value));-1!==t&&i.splice(t,1)}}else"radio"==e.type&&(e.checked?(i=i.filter((e=>e.label!==o))).push({label:o,value:e.value,index:n,id:a}):e.checked||(i=i.filter((e=>e.label!==o))));return i},e.helper.filterCustomAttributes=(t,o)=>{if(Array.isArray(t))return t.filter((e=>e.key!==o.label_on_cart&&!(o.option_type===r.OPTION_TYPE.FILE_UPLOAD&&e.key===`Extra fee for "${o.label_on_cart}" option`)));if(delete t[` ${o.label_on_cart}`],o.option_type===r.OPTION_TYPE.FILE_UPLOAD){delete t[` Extra fee for "${o.label_on_cart}" option`];for(const e in t)e.includes(o.label_on_cart)&&delete t[e];980===e.storeId&&delete t[o.label_on_cart]}return t},e.helper.adjustExtraPrices=(t,o,n,i,a,s)=>{const l=(o,n)=>e.common.getQuantityByOptionValue(t,o)||1,c=(e,o)=>parseFloat(t.extra_price[e][o])||0,p=(e,t)=>e&&t?e*t:e,u=r.OPTION_KEYS.OPTION_TYPE[t?.option_type]||null,d=i=>{o-=e.common.getExtraPriceByOption(t),t.extra_price[i]===r.EXTRA_PRICE_TYPE.ASSIGN_TO_VARIANT&&(n-=e.common.getExtraPriceByOption(t))};if(u)switch(t.option_type){case r.OPTION_TYPE.EMAIL:case r.OPTION_TYPE.TEXT_AREA:case r.OPTION_TYPE.TEXT_BOX:case r.OPTION_TYPE.NUMBER:{const _=document.querySelector(`#po_${u}${t.id}`)?.value;([r.OPTION_TYPE.TEXT_BOX,r.OPTION_TYPE.TEXT_AREA,r.OPTION_TYPE.EMAIL].includes(t.option_type)?_?.trim():_?.trim()&&!isNaN(parseInt(_)))&&d(`${u}_extra_price_type`);break}case r.OPTION_TYPE.FILE_UPLOAD:case r.OPTION_TYPE.COLOR_PICKER:(t.option_type===r.OPTION_TYPE.FILE_UPLOAD?e.common.getLinkFileUploadedBySelector({selector:a,optionId:t.id,optionSetConditionType:s.product_condition_type}):e.po.getColorPickerValue({option:t,selector:a,optionSetConditionType:s.product_condition_type}))&&d(`${u}_extra_price_type`);break;case r.OPTION_TYPE.CHECKBOX:case r.OPTION_TYPE.RADIO_BUTTON:case r.OPTION_TYPE.SWATCH:case r.OPTION_TYPE.SWITCH:case r.OPTION_TYPE.BUTTON:document.querySelectorAll(a).forEach(((e,a)=>{if(e.checked){const s=l(e);if(t.extra_price[`${u}_extra_price_type`][a]===r.EXTRA_PRICE_TYPE.CREATE_FEE){const e=c(`${u}_extra_price`,a);o-=p(e,s)}else if(i&&t.extra_price[`${u}_extra_price_type`][a]===r.EXTRA_PRICE_TYPE.ASSIGN_TO_VARIANT){const e=c(`${u}_extra_variant_price`,a);n-=p(e,s),o-=p(e,s)}}}));break;case r.OPTION_TYPE.DROPDOWN_THUMBNAIL:case r.OPTION_TYPE.DROPDOWN:{function m(e){const t=e.match(/\d+$/);return t?parseInt(t[0],10):-1}const h=document.querySelector(`#po_${u}${t.id}`),f=h?.querySelectorAll('option[id*="po_dropdown"][selected="true"]');for(let y of f){const b=m(y.id);if(y&&b>=0&&h.value!==t.placeholder_dropdown){const g=l(y);if(t.extra_price[`${u}_extra_price_type`][b]===r.EXTRA_PRICE_TYPE.CREATE_FEE){const v=c(`${u}_extra_price`,b);o-=p(v,g)}else if(i&&t.extra_price[`${u}_extra_price_type`][b]===r.EXTRA_PRICE_TYPE.ASSIGN_TO_VARIANT){const S=c(`${u}_extra_variant_price`,b);n-=p(S,g),o-=p(S,g)}}}break}}return{totalExtraPrice:o,totalVariantExtraPrice:n}},e.helper.mapIdsWithDependencies=e=>{const t={};e.forEach((e=>{t[e.id]=[]}));const o=e.reduce(((e,t)=>(e[t.label_on_product]=t.id,e)),{});return e.forEach((e=>{e.conditional_options.forEach((n=>{const r=o[n.conditional_option_label];null!=r&&t[r].push(e.id)}))})),t},e.helper.isJSON=e=>{try{return JSON.parse(e),!0}catch(e){return!1}},e.helper.detectCycles=e=>{const t=new Set,o=new Set,n=[];function r(i){if(o.has(i)){const e=n.indexOf(i),t=n.slice(e).concat(i);return console.log("Circular dependency detected: ",t),!0}if(t.has(i))return!1;t.add(i),o.add(i),n.push(i);for(const t of e[i]||[])if(r(t))return!0;return o.delete(i),n.pop(),!1}for(const o in e)if(!t.has(o)&&r(o))return!0;return console.log("No circular dependency found."),!1},e.helper.getVarriantCurrentId=()=>{const e=window.location?.search?.split("variant=")[1];return e||window?.meta?.product?.variants[0]?.id},e.helper.escapeString=e=>e.replace(/[&<>"'`]/g,(e=>{switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&#39;";case"`":return"&#96;";default:return e}})),e.helper.isPrintableString=e=>"string"==typeof e&&""!==e.trim()})(e),function(e,t){e.money={},e.money.addMoneyWithCurrencyFormat=function(o,n){let r="",i=/\{\{\s*(\w+)\s*\}\}/,a=t.shop.money_format;function s(e,t){return void 0===e?t:e}function l(e,t,o,n,r){if(o=s(o,2),n=s(n,","),r=s(r,"."),isNaN(e)||null==e||isNaN(t)||null==t)return 0;let i=(e=(Number(e)+Number(t)).toFixed(o)).split(".");return i[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+n)+(i[1]?r+i[1]:"")}switch(a.match(i)[1]){case"amount":if("function"==typeof bssFixSupportFormatMoneyAmount){let t=bssFixSupportFormatMoneyAmount(e,o,n);o=t[0],n=t[1]}else Shopify.currency&&"INR"==Shopify.currency.active&&("string"==typeof o&&0==o.indexOf(".")&&(o=o.replace(".","")),"string"==typeof n&&0==n.indexOf(".")&&(n=n.replace(".","")));r=l(o,n,2);break;case"amount_no_decimals":r=l(o,n,0);break;case"amount_with_comma_separator":if("function"==typeof bssFixSupportFormatMoneyAmountWithCommaSeparator){let t=bssFixSupportFormatMoneyAmountWithCommaSeparator(e,o,n);o=t[0],n=t[1]}else"string"==typeof o&&o.includes(",")&&(o=o.replace(/\./g,"").replace(",",".")),"string"==typeof n&&(n=n.replace(/\./g,"").replace(",","."));r=l(o,n,2,".",",");break;case"amount_no_decimals_with_comma_separator":if("function"==typeof bssFixSupportFormatMoneyAmountNoDecimalsWithCommaSeparator){let t=bssFixSupportFormatMoneyAmountNoDecimalsWithCommaSeparator(e,o,n);o=t[0],n=t[1]}else"string"==typeof o&&(o=o.replace(/\./g,"")),"string"==typeof n&&(n=n.replace(/\./g,""));r=l(o,n,0,".",",");break;case"amount_with_apostrophe_separator":"string"==typeof o&&(o=o.replace(/\'/g,"")),"string"==typeof n&&(n=n.replace(/\'/g,"")),r=l(o,n,2,"'",".");break;case"amount_no_decimals_with_space_separator":"string"==typeof o&&(o=o.replace(/\'/g,"")),"string"==typeof n&&(n=n.replace(/\'/g,"")),r=l(o,n,2);break;case"amount_with_space_separator":case"amount_with_period_and_space_separator":"string"==typeof o&&(o=o.replace(/\s/g,"").replace(",",".")),"string"==typeof n&&(n=n.replace(/\s/g,"").replace(",",".")),r=l(o,n,2)}return"function"==typeof bssFixSupportSpecificFormatMoney&&(a=bssFixSupportSpecificFormatMoney(e,a)),a.replace(i,r)},e.money.addMoneyWithCurrencyFormatWithB2BApps=function(o){let n=t.shop.money_format;switch(o=o?o.toString():0,n.match(/\{\{\s*(\w+)\s*\}\}/)[1]){case"amount":o=o.replace(/\,/g,"");case"amount_no_decimals":o=o.replace(/\./g,"");case"amount_with_comma_separator":o=o.replace(/\./g,"").replace(",",".");case"amount_no_decimals_with_comma_separator":o=o.replace(/\./g,"");case"amount_with_apostrophe_separator":o=o.replace(/\'/g,"")}let r=Number(o)/100;return"function"==typeof bssB2BFixSupportSpecificFormatMoney&&(r=bssB2BFixSupportSpecificFormatMoney(e,o)),r}}(e,o),b(),function(e){e.common={},e.common.getSelectorVariant=function(){let t=[".single-option-selector.single-option-selector-product-template.product-form__input option:checked",".form__input.form__input--select",".single-option-selector option:checked",'.single-option-radio input[type="radio"]:checked','.js.product-form__input input[type="radio"]:checked',"select[data-variant-input]",".product-form__input .select select",".variant-wrapper .variant-input input:checked",".product-options select",'product-option-picker input[type="radio"]:checked',".form-field-input.form-field-select[data-product-option]",".option-swatch-value ",".ProductForm__Option .ProductForm__OptionName .ProductForm__SelectedValue",".swatch-wrapper input:checked","div.variations h4.swatch__title span.nt_name_current",".radio-wrapper select option:checked",".block-swatch__radio.product-form__single-selector:checked",".product-form__single-selector:checked",'.radio__button input[type="radio"]:checked',".form-vertical .wetheme-dropdown select",".margem-form-botoes .color-swatches .color-swatches-item input.product-option:checked",".row .product-form-option .wetheme-dropdown__wrapper span",".options-selection__select-wrapper .options-selection__select select option:checked",".shopify-section .product-page--root .product-page--top-panel select.product-form--variant-select option:checked",".product__meta .product__controls-group .product__color-chips button.product__chip.selected",".product-single__meta .product-blocks button.selected ",".product-page--form-container .product-form--root .product-form--variants .radios--input:checked",'product-variants input[type="radio"]:checked ',".product-page--form-container .product-form--variants select.product-form--variant-select option:checked",".product-form--regular .variant-selection .options-selection__option-values .options-selection__option-value-input:checked",'.swatch-items-wrapper input[type="radio"]:checked',".variant-input-wrap select option:checked",".product-options div[data-section-container] label span[data-label-value]",'.entry-content .swatches-wrapper input[type="radio"]:checked',".selector-wrapper select option:checked",".product-form__inner .product-form__controls-group .product-form__option-select-wrapper select option:checked",".detail .input-row .option-selectors .option-selector__btns input:checked",".\\#product-options-dropdown-toggle div[data-current]",'.product-options .cc-select__listbox .cc-select__option[aria-selected="true"]',"span.select-popout__value",".ProductForm__Item span.ProductForm__SelectedValue",".prod__option-label span.option-label",'.pf-option-swatches input[type="radio"]:checked',".selector-wrapper ul li a",'radio-swatch input[type="radio"]:checked',".swatches__container .swatches__option-value",'variant-radios input[type="radio"]:checked',".product-options__default-options :is(input, select)",".quick-order-list__table .variant-item .variant-item__inner .variant-item__name.h4.break","product-variant-selector input:checked","product-variant-selector option:checked","product-options input:checked","product-options option:checked",".product-options__default-options :is(input:checked, select)",".product-detail__options input:checked",".product-collection__options input:checked",".product-collection__options .product-options__value.active",".product-variant-selector input:checked",".product-variant-selector option:checked","variant-radios input:checked","variant-radios option:checked","variant-selects input:checked","variant-selects option:checked","variant-selects .swatch-selected-value",".variant-picker__option-values input:checked","product-options input:checked","product-options option:checked",'variant-picker button span[id*="variant-picker"]',".tt-swatches-container .current_option_name",".is--selected[data-swatch-item]"];return"function"==typeof bssFixSupportGetSelector&&"function"==typeof bssFixSupportGetSelector(e,t).getSelectorVariant&&(t=bssFixSupportGetSelector(e,t).getSelectorVariant()),t},e.common.getSelectorVariantPicker=function(){let t=["variant-radios.bss-po-variant","variant-selects.bss-po-variant","variant-radios","variant-selects",'[data-display][data-pf-type="ProductVariantSwatches"]'];return"function"==typeof bssFixSupportGetSelector&&"function"==typeof bssFixSupportGetSelector(e,t).getSelectorVariantPicker&&(t=bssFixSupportGetSelector(e,t).getSelectorVariantPicker()),t},e.common.findObjectInArrayByKey=function(e,t,o){return e.length?e.find((e=>e[t]==o)):null},e.common.disableButton=function(e,t){const o=document.querySelectorAll(e);t?o.forEach((e=>e.disabled=t)):o.forEach((e=>{e.removeAttribute("disabled")}))},e.common.checkHasMultipleFileUpload=function(e){return!(!e.includes("/po/")&&!e.includes("/cdn.shopify.com"))&&e.includes(", ")},e.common.checkAddOnIsAssignToVariant=function(e,t){return!!Object.keys(e?.properties).find((e=>e.includes(t)))},e.common.cleanProperties=function(e){const t={};for(let o in e){const n=o.trim();n&&(t[n]=e[o])}return Object.keys(t).length>0?t:{}}}(e),function(e,t,o){e.common.getOptionSelected=function(t,n="",i=!1,a=!1){let s=new Map,l=new Map,c=[],p=0;const u={};let d=0,_={},m="",h=!1;if((e.page.isCollectionPage()&&7019==e.storeId||1569==e.storeId)&&(h=!0),t){const o=t.product_condition_type;t.options.forEach((t=>{const f=e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)&&e.enableAddOns;let y=e.common.getSeletorOfByOptionType(t.option_type,t.id);if("function"==typeof bssFixEditOptionInMiniCart&&i&&(y=`#po-edit-option ${e.common.getSeletorOfByOptionType(t.option_type,t.id)}`),e.page.isHomePage()||h){const b=document.querySelector(`[bss-po-featured-product-key='${n}']`);"function"==typeof bssFixEditOptionInMiniCart&&y?b?y+=`,[bss-po-featured-product-key='${n}'] ${y}`:"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(y+=`,[id*='product_form_${n}'] ${y}`):b?y=`[bss-po-featured-product-key='${n}'] ${y}`:"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(y=`[id*='product_form_${n}'] ${y}`)}if(t.option_type==r.OPTION_TYPE.TEXT_BOX){let g=document.querySelector(y),v=g.value,S={};if(v.length>0&&""!=v.trim()){let O=0;f?(t.extra_price.text_box_extra_price_type==r.EXTRA_PRICE_TYPE.CREATE_FEE?O=t.extra_price.text_box_extra_price:[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&t.extra_price.text_box_extra_price_type==r.EXTRA_PRICE_TYPE.ASSIGN_TO_VARIANT&&(O=t.extra_price.text_box_extra_variant_price,O&&(d+=parseFloat(O)),S={id:t.extra_price.text_box_extra_variant,quantity:1}),O>0?(p+=parseFloat(O),O=e.common.convertRate(O),s.set(t.label_on_cart,v+" (+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(O))+")"),4784!=e.storeId&&"function"!=typeof bssFixSupportRemoveAddOnTextInCart||s.set(t.label_on_cart,v)):s.set(t.label_on_cart,v)):s.set(t.label_on_cart,v),Object.keys(S).length&&(_[t.label_on_cart]=S),l.set(t.label_on_cart,v),m+=e.common.concatSkuStringValue(t.sku_value[0]),c.push({label_on_product:t.label_on_product,value:v,extra_fee:O,extra_type:t.extra_price.text_box_extra_price_type,currency_extra_fee:e.money.addMoneyWithCurrencyFormat("0",parseFloat(O)),variant:S,sku:t.sku_value[0]})}e.po.validateOptionOnProductPage({option:t,element:g,selector:y,optionSetConditionType:o,isATCValidate:a})}else if(t.option_type==r.OPTION_TYPE.NUMBER){let I=document.querySelector(y),x=I.value,P={};if(!isNaN(parseInt(x))){let E=0;f?(t.extra_price.number_field_extra_price_type==r.EXTRA_PRICE_TYPE.CREATE_FEE?E=t.extra_price.number_field_extra_price:[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&t.extra_price.number_field_extra_price_type==r.EXTRA_PRICE_TYPE.ASSIGN_TO_VARIANT&&(E=t.extra_price.number_field_extra_variant_price,P={id:t.extra_price.number_field_extra_variant,quantity:1},d+=parseFloat(E)),E>0?(p+=parseFloat(E),E=e.common.convertRate(E),s.set(t.label_on_cart,x+" (+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(E))+")"),4784!=e.storeId&&"function"!=typeof bssFixSupportRemoveAddOnTextInCart||s.set(t.label_on_cart,x)):s.set(t.label_on_cart,x)):s.set(t.label_on_cart,x),Object.keys(P).length&&(_[t.label_on_cart]=P),l.set(t.label_on_cart,x),m+=e.common.concatSkuStringValue(t.sku_value[0]),c.push({label_on_product:t.label_on_product,value:x,extra_fee:E,extra_type:t.extra_price.number_field_extra_price_type,currency_extra_fee:e.money.addMoneyWithCurrencyFormat("0",parseFloat(E)),variant:P,sku:t.sku_value[0]})}e.po.validateOptionOnProductPage({option:t,element:I,selector:y,optionSetConditionType:o,isATCValidate:a})}else if(t.option_type==r.OPTION_TYPE.CHECKBOX){let T=document.querySelectorAll(y),C=0,w=0,A={},N={};const D={};if(T.forEach(((n,i)=>{if(n.checked){m+=e.common.concatSkuStringValue(t.sku_value[i]),A[i]=n.value;const o=e.common.getQuantityByOptionValue(t,n);if(o&&(D[n.value]=o),f)if(0==t.extra_price.checkbox_extra_price_type[i]){let e=parseFloat(t.extra_price.checkbox_extra_price[i]);e&&(C+=o?o*e:e)}else if([r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&1==t.extra_price.checkbox_extra_price_type[i]&&t.extra_price?.checkbox_extra_variant_price?.[i]){N[n.value]={id:t.extra_price.checkbox_extra_variant[i],quantity:o};let e=parseFloat(t.extra_price.checkbox_extra_variant_price[i]);o?(C+=o*e,w+=o*e):(C+=e,w+=e)}}e.po.validateOptionOnProductPage({option:t,element:n,selector:y,optionSetConditionType:o,isATCValidate:a})})),e.po.validateQuantity(null,y,t),Object.keys(D).length&&(u[t.label_on_cart]=D),Object.keys(A).length>0){const k=Object.keys(A).map((e=>D[A[e]]?`${D[A[e]]} x ${A[e]}`:`${A[e]}`)).join(", ");C&&f?(p+=C,d+=w,C=e.common.convertRate(C),s.set(t.label_on_cart,k+" (+ "+e.money.addMoneyWithCurrencyFormat("0",C)+")"),4784!=e.storeId&&"function"!=typeof bssFixSupportRemoveAddOnTextInCart||s.set(t.label_on_cart,k)):s.set(t.label_on_cart,k),Object.keys(N).length&&(_[t.label_on_cart]=N),c.push({label_on_product:t.label_on_product,value:k,extra_fee:C,extra_type:t.extra_price.checkbox_extra_price_type,currency_extra_fee:e.money.addMoneyWithCurrencyFormat("0",parseFloat(C)),variant:N,sku:t.sku_value}),l.set(t.label_on_cart,Object.values(A).join(", "))}}else if([r.OPTION_TYPE.DROPDOWN_THUMBNAIL,r.OPTION_TYPE.DROPDOWN].includes(parseInt(t.option_type))){const M=parseInt(t.option_type)===r.OPTION_TYPE.DROPDOWN_THUMBNAIL,L=M?"dropdown_thumbnail_extra_price":"dropdown_extra_price",$=M?"dropdown_thumbnail_extra_price_type":"dropdown_extra_price_type",R=M?"dropdown_thumbnail_extra_variant":"dropdown_extra_variant",F=M?"dropdown_thumbnail_extra_variant_price":"dropdown_extra_variant_price";let q=document.querySelector(y).querySelectorAll('option[name^="po"]'),B=0,j=0,H={},U={},V={};function W({index:o,dropdownOption:n,quantityDropdown:i}){if(0==t.extra_price[$][o]){let e=parseFloat(t.extra_price[L][o]);e&&(B+=i?i*e:e)}else if([r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&1==t.extra_price[$][o]){let e=t.extra_price[F];if(e?.[o]){let r=e[o];U[n.value]={id:t.extra_price[R][o],quantity:i};let a=parseFloat(r);i?(B+=i*a,j+=i*a):(B+=a,j+=a)}}}if(q.forEach(((n,r)=>{if("true"==n.getAttribute("selected")&&(m+=e.common.concatSkuStringValue(t.sku_value[r]),H[r]=n.value,n.value!=t.placeholder_dropdown)){const o=e.common.getQuantityByOptionValue(t,n);o&&(V[n.value]=o),f&&W({index:r,dropdownOption:n,quantityDropdown:o})}e.po.validateOptionOnProductPage({option:t,element:n,selector:y,optionSetConditionType:o,isATCValidate:a})})),e.po.validateQuantity(null,y,t),Object.keys(V).length&&(u[t.label_on_cart]=V),Object.keys(H).length>0){const Y=Object.keys(H).map((e=>V[H[e]]?`${V[H[e]]} x ${H[e]}`:`${H[e]}`)).join(", ");if(B&&f){p+=B,d+=j;const z=e.common.convertRate(B);s.set(t.label_on_cart,Y+" (+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(z))+")"),4784!=e.storeId&&"function"!=typeof bssFixSupportRemoveAddOnTextInCart||s.set(t.label_on_cart,Y)}else s.set(t.label_on_cart,Y);Object.keys(U).length&&(_[t.label_on_cart]=U),c.push({label_on_product:t.label_on_product,value:Y,extra_fee:B,extra_type:t.extra_price[$],currency_extra_fee:e.money.addMoneyWithCurrencyFormat("0",parseFloat(B)),variant:U,sku:t.sku_value}),l.set(t.label_on_cart,Object.values(H).join(", "))}}else if(t.option_type==r.OPTION_TYPE.RADIO_BUTTON){let X=document.querySelectorAll(y),Q=0,K=0,J={},Z={},ee={};if(X.forEach(((n,i)=>{if(n.checked){J[i]=n.value,m+=e.common.concatSkuStringValue(t.sku_value[i]);const o=e.common.getQuantityByOptionValue(t,n);if(o&&(ee[n.value]=o),f)if(0==t.extra_price.radio_button_extra_price_type[i]){let e=parseFloat(t.extra_price.radio_button_extra_price[i]);e&&(Q+=o?o*e:e)}else if([r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&1==t.extra_price.radio_button_extra_price_type[i]&&t.extra_price?.radio_button_extra_variant_price?.[i]){Z[n.value]={id:t.extra_price.radio_button_extra_variant[i],quantity:o};let e=parseFloat(t.extra_price.radio_button_extra_variant_price[i]);o?(Q+=o*e,K+=o*e):(Q+=e,K+=e)}}e.po.validateOptionOnProductPage({option:t,element:n,selector:y,optionSetConditionType:o,isATCValidate:a})})),e.po.validateQuantity(null,y,t),Object.keys(ee).length&&(u[t.label_on_cart]=ee),Object.keys(J).length>0){const te=Object.keys(J).map((e=>ee[J[e]]?`${ee[J[e]]} x ${J[e]}`:`${J[e]}`)).join(", ");Q&&f?(p+=Q,d+=K,Q=e.common.convertRate(Q),s.set(t.label_on_cart,te+" (+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(Q))+")"),4784!=e.storeId&&"function"!=typeof bssFixSupportRemoveAddOnTextInCart||s.set(t.label_on_cart,te)):s.set(t.label_on_cart,te),Object.keys(Z).length&&(_[t.label_on_cart]=Z),c.push({label_on_product:t.label_on_product,value:te,extra_fee:Q,extra_type:t.extra_price.radio_button_extra_price_type,currency_extra_fee:e.money.addMoneyWithCurrencyFormat("0",parseFloat(Q)),variant:Z,sku:t.sku_value}),l.set(t.label_on_cart,Object.values(J).join(", "))}}else if(t.option_type==r.OPTION_TYPE.SWATCH){let oe=[],ne=[],re=[];const ie=[],ae={};let se=document.querySelectorAll(y),le=document.querySelectorAll('input[name="po_swatch'+t.id+'"]:checked + .po-option__swatch-media'),ce={},pe=0,ue=0;se.forEach(((n,i)=>{if(n.checked){oe.push(n.value),m+=e.common.concatSkuStringValue(t.sku_value[i]);const o=e.common.getQuantityByOptionValue(t,n);if(o&&(ie.push(o),ae[n.value]=o),f)if(0==t.extra_price.swatch_extra_price_type[i]){let e=parseFloat(t.extra_price.swatch_extra_price[i]);e&&(pe+=o?o*e:e)}else if([r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&1==t.extra_price.swatch_extra_price_type[i]&&t.extra_price?.swatch_extra_variant_price?.[i]){let e=parseFloat(t.extra_price.swatch_extra_variant_price[i]);e&&(o?(pe+=o*e,ue+=o*e):(pe+=e,ue+=e)),ce[n.value]={id:t.extra_price.swatch_extra_variant[i],quantity:o}}}e.po.validateOptionOnProductPage({option:t,element:n,selector:y,optionSetConditionType:o,isATCValidate:a})})),e.po.validateQuantity(null,y,t),Object.keys(ae).length&&(u[t.label_on_cart]=ae),le.forEach((e=>{e.querySelector(".po-option__color-value")?ne.push(G(e.querySelector(".po-option__color-value").style.backgroundColor).toHex()):e.querySelector(".po-option__image-value")&&ne.push(e.querySelector(".po-option__image-value").style.backgroundImage)}));for(let de=0;de<ne.length;de++){const _e={title:oe[de],value:ne[de]};re.push(_e)}if(oe.length>0){let me=oe.join(", ");ie.length&&(me=oe.map(((e,t)=>ie[t]?`${ie[t]} x ${e}`:e)).join(", ")),pe&&f?(p+=pe,d+=ue,pe=e.common.convertRate(pe),s.set(t.label_on_cart,me+" (+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(pe))+")"),4784!=e.storeId&&"function"!=typeof bssFixSupportRemoveAddOnTextInCart||s.set(t.label_on_cart,me)):s.set(t.label_on_cart,me),re=re.map((e=>JSON.stringify(e))),Object.keys(ce).length&&(_[t.label_on_cart]=ce),c.push({label_on_product:t.label_on_product,value:me,extra_fee:pe,extra_type:t.extra_price.swatch_extra_price_type,currency_extra_fee:e.money.addMoneyWithCurrencyFormat("0",parseFloat(pe)),variant:ce,sku:t.sku_value}),l.set(t.label_on_cart,re)}}else if(t.option_type==r.OPTION_TYPE.BUTTON){let he={},fe={},ye=document.querySelectorAll(y),be=0,ge=0;const ve={};if(ye.forEach(((n,i)=>{if(n.checked){he[i]=n.value,m+=e.common.concatSkuStringValue(t.sku_value[i]);const o=e.common.getQuantityByOptionValue(t,n);if(o&&(ve[n.value]=o),f)if(0==t.extra_price.button_extra_price_type[i]){let e=parseFloat(t.extra_price.button_extra_price[i]);e&&(be+=o?o*e:e)}else if([r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&1==t.extra_price.button_extra_price_type[i]&&t.extra_price?.button_extra_variant_price?.[i]){fe[n.value]={id:t.extra_price.button_extra_variant[i],quantity:o};let e=parseFloat(t.extra_price.button_extra_variant_price[i]);o?(be+=o*e,ge+=o*e):(be+=e,ge+=e)}}e.po.validateOptionOnProductPage({option:t,element:n,selector:y,optionSetConditionType:o,isATCValidate:a})})),e.po.validateQuantity(null,y,t),Object.keys(ve).length&&(u[t.label_on_cart]=ve),Object.keys(he).length>0){const Se=Object.keys(he).map((e=>ve[he[e]]?`${ve[he[e]]} x ${he[e]}`:`${he[e]}`)).join(", ");be&&f?(p+=be,be=e.common.convertRate(be),s.set(t.label_on_cart,Se+" (+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(be))+")"),4784!=e.storeId&&"function"!=typeof bssFixSupportRemoveAddOnTextInCart||s.set(t.label_on_cart,Se),d+=ge):s.set(t.label_on_cart,Se),Object.keys(fe).length&&(_[t.label_on_cart]=fe),c.push({label_on_product:t.label_on_product,value:Se,extra_fee:be,extra_type:t.extra_price.button_extra_price_type,currency_extra_fee:e.money.addMoneyWithCurrencyFormat("0",parseFloat(be)),variant:fe,sku:t.sku_value}),l.set(t.label_on_cart,Object.values(he).join(", "))}}else if(t.option_type==r.OPTION_TYPE.FILE_UPLOAD){const Oe=document.querySelector(y),Ie=e.common.getLinkFileUploadedBySelector({selector:y,optionId:t.id,optionSetConditionType:o});let xe={},Pe=0;if(Ie?.length){let Ee=Ie.map((e=>e.url));const Te=Ee.join(", ");m+=e.common.concatSkuStringValue(t.sku_value[0]),Ee.forEach(((e,o)=>{s.set(`${t.label_on_cart} ${o+1}`,e)})),l.set(t.label_on_cart,Te),f&&(t.extra_price.file_upload_extra_price_type==r.EXTRA_PRICE_TYPE.CREATE_FEE?Pe=t.extra_price.file_upload_extra_price:[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&t.extra_price.file_upload_extra_price_type==r.EXTRA_PRICE_TYPE.ASSIGN_TO_VARIANT&&(Pe=t.extra_price.file_upload_extra_variant_price,xe={id:t.extra_price.file_upload_extra_variant,quantity:1},Pe&&(d+=parseFloat(t.extra_price.file_upload_extra_variant_price))),Pe>0&&""!=Pe&&(p+=parseFloat(Pe),Pe=e.common.convertRate(Pe),s.set(`Extra fee for "${t.label_on_cart}" option`,e.money.addMoneyWithCurrencyFormat("0",parseFloat(Pe))))),Object.keys(xe).length&&(_[t.label_on_cart]=xe),c.push({label_on_product:t.label_on_product,value:Te,extra_fee:Pe,extra_type:t.extra_price.file_upload_extra_price_type,currency_extra_fee:e.money.addMoneyWithCurrencyFormat("0",parseFloat(Pe)),variant:xe,sku:t.sku_value}),"undefined"!=typeof BSS_B2B&&(1==BSS_B2B.shopModules[0].status||1==BSS_B2B.shopModules[1].status||1==BSS_B2B.shopModules[15].status)&&p&&l.set(`BSS_POExtra fee for "${t.label_on_cart}" option`,e.money.addMoneyWithCurrencyFormat("0",parseFloat(t.extra_price.file_upload_extra_price)))}e.po.validateOptionOnProductPage({option:t,element:Oe,selector:y,optionSetConditionType:o,isATCValidate:a}),e.po.generateMessageOnProductPage(y)}else if(t.option_type==r.OPTION_TYPE.DATE_PICKER&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)){let Ce=document.querySelector(y),we=document.querySelector(`input[name="po_datetime${t.id}"]`).value;(e.page.isHomePage()||h)&&(we=document.querySelector(`[bss-po-featured-product-key='${n}'] input[name="po_datetime${t.id}"]`)?.value,!we&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(we=document.querySelector(`[id*="product_form_${n}"] input[name="po_datetime${t.id}"]`)?.value)),we&&(s.set(t.label_on_cart,we),l.set(t.label_on_cart,we)),c.push({label_on_product:t.label_on_product,value:we,extra_fee:0,extra_type:0,currency_extra_fee:"0",variant:!1,sku:t.sku_value}),e.po.validateOptionOnProductPage({option:t,element:Ce,selector:y,optionSetConditionType:o,isATCValidate:a})}else if(t.option_type==r.OPTION_TYPE.COLOR_PICKER&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)){let Ae=document.querySelector(`input[name="po_color_picker_value${t.id}"]`).value;(e.page.isHomePage()||h)&&(Ae=document.querySelector(`[bss-po-featured-product-key='${n}'] input[name="po_color_picker_value${t.id}"]`)?.value,Ae||(Ae=document.querySelector(`[id*="product_form_${n}"] input[name="po_color_picker_value${t.id}"]`)?.value));let Ne={};if(Ae.length>0&&""!=Ae.trim()){let De=0;f?(t.extra_price.color_picker_extra_price&&t.extra_price.color_picker_extra_price_type==r.EXTRA_PRICE_TYPE.CREATE_FEE?De=t.extra_price.color_picker_extra_price:[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&t.extra_price.color_picker_extra_price_type==r.EXTRA_PRICE_TYPE.ASSIGN_TO_VARIANT&&(De=t.extra_price.color_picker_extra_variant_price,De&&(d+=parseFloat(De)),Ne={id:t.extra_price.color_picker_extra_variant,quantity:1}),De>0?(p+=parseFloat(De),De=e.common.convertRate(De),s.set(t.label_on_cart,Ae+" (+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(De))+")"),4784!=e.storeId&&"function"!=typeof bssFixSupportRemoveAddOnTextInCart||s.set(t.label_on_cart,Ae)):s.set(t.label_on_cart,Ae)):s.set(t.label_on_cart,Ae),Object.keys(Ne).length&&(_[t.label_on_cart]=Ne),l.set(t.label_on_cart,Ae),m+=e.common.concatSkuStringValue(t.sku_value[0]),c.push({label_on_product:t.label_on_product,value:Ae,extra_fee:De,extra_type:t.extra_price.color_picker_extra_price_type,currency_extra_fee:e.money.addMoneyWithCurrencyFormat("0",parseFloat(De)),variant:Ne,sku:t.sku_value[0]})}e.po.validateOptionOnProductPage({option:t,element:Ae,selector:y,optionSetConditionType:o,isATCValidate:a})}else if(t.option_type==r.OPTION_TYPE.TEXT_AREA){let ke=document.querySelector(y),Me=ke.value,Le={};if(Me.length>0&&""!=Me.trim()){let $e=0;f?(t.extra_price.text_area_extra_price_type==r.EXTRA_PRICE_TYPE.CREATE_FEE?$e=t.extra_price.text_area_extra_price:[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&t.extra_price.text_area_extra_price_type==r.EXTRA_PRICE_TYPE.ASSIGN_TO_VARIANT&&($e=t.extra_price.text_area_extra_variant_price,$e&&(d+=parseFloat($e)),Le={id:t.extra_price.text_area_extra_variant,quantity:1}),$e>0?(p+=parseFloat($e),$e=e.common.convertRate($e),s.set(t.label_on_cart,Me+" (+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat($e))+")"),4784!=e.storeId&&"function"!=typeof bssFixSupportRemoveAddOnTextInCart||s.set(t.label_on_cart,Me)):s.set(t.label_on_cart,Me)):s.set(t.label_on_cart,Me),Object.keys(Le).length&&(_[t.label_on_cart]=Le),l.set(t.label_on_cart,Me),m+=e.common.concatSkuStringValue(t.sku_value[0]),c.push({label_on_product:t.label_on_product,value:Me,extra_fee:$e,extra_type:t.extra_price.text_area_extra_price_type,currency_extra_fee:e.money.addMoneyWithCurrencyFormat("0",parseFloat($e)),variant:Le,sku:t.sku_value[0]})}e.po.validateOptionOnProductPage({option:t,element:ke,selector:y,optionSetConditionType:o,isATCValidate:a})}else if(t.option_type==r.OPTION_TYPE.EMAIL){let Re=document.querySelector(y),Fe=Re.value,qe={};if(Fe.length>0&&""!=Fe.trim()){let Be=0;f?(t.extra_price.email_box_extra_price_type==r.EXTRA_PRICE_TYPE.CREATE_FEE?Be=t.extra_price.email_box_extra_price:[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&t.extra_price.email_box_extra_price_type==r.EXTRA_PRICE_TYPE.ASSIGN_TO_VARIANT&&(Be=t.extra_price.email_box_extra_variant_price,Be&&(d+=parseFloat(Be)),qe={id:t.extra_price.email_box_extra_variant,quantity:1}),Be>0?(p+=parseFloat(Be),Be=e.common.convertRate(Be),s.set(t.label_on_cart,Fe+" (+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(Be))+")"),4784!=e.storeId&&"function"!=typeof bssFixSupportRemoveAddOnTextInCart||s.set(t.label_on_cart,Fe)):s.set(t.label_on_cart,Fe)):s.set(t.label_on_cart,Fe),Object.keys(qe).length&&(_[t.label_on_cart]=qe),l.set(t.label_on_cart,Fe),m+=e.common.concatSkuStringValue(t.sku_value[0]),c.push({label_on_product:t.label_on_product,value:Fe,extra_fee:Be,extra_type:t.extra_price.email_box_extra_price_type,currency_extra_fee:e.money.addMoneyWithCurrencyFormat("0",Be),variant:qe,sku:t.sku_value[0]})}e.po.validateOptionOnProductPage({option:t,element:Re,selector:y,optionSetConditionType:o,isATCValidate:a})}else if(t.option_type==r.OPTION_TYPE.SWITCH){let je=document.querySelectorAll(y),He=0,Ue=0,Ve={},We={},Ye={};if(je.forEach(((n,i)=>{if(n.checked){Ve[i]=n.value,m+=e.common.concatSkuStringValue(t.sku_value[i]);const o=e.common.getQuantityByOptionValue(t,n);if(o&&(Ye[n.value]=o),f)if(t.extra_price.switch_extra_price_type[i]==r.EXTRA_PRICE_TYPE.CREATE_FEE){let e=parseFloat(t.extra_price.switch_extra_price[i]);e&&(He+=o?o*e:e)}else if([r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&t.extra_price.switch_extra_price_type[i]==r.EXTRA_PRICE_TYPE.ASSIGN_TO_VARIANT&&t.extra_price?.switch_extra_variant_price?.[i]){We[n.value]={id:t.extra_price.switch_extra_variant[i],quantity:o};let e=parseFloat(t.extra_price.switch_extra_variant_price[i]);o?(He+=o*e,Ue+=o*e):(He+=e,Ue+=e)}}e.po.validateOptionOnProductPage({option:t,element:n,selector:y,optionSetConditionType:o})})),e.po.validateQuantity(null,y,t),Object.keys(Ye).length&&(u[t.label_on_cart]=Ye),Object.keys(Ve).length>0){const ze=Object.keys(Ve).map((e=>Ye[Ve[e]]?`${Ye[Ve[e]]} x ${Ve[e]}`:`${Ve[e]}`)).join(", ");He&&f?(p+=He,d+=Ue,He=e.common.convertRate(He),s.set(t.label_on_cart,ze+" (+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(He))+")"),4784!=e.storeId&&"function"!=typeof bssFixSupportRemoveAddOnTextInCart||s.set(t.label_on_cart,ze)):s.set(t.label_on_cart,ze),Object.keys(We).length&&(_[t.label_on_cart]=We),c.push({label_on_product:t.label_on_product,value:ze,extra_fee:He,extra_type:t.extra_price.switch_extra_price_type,currency_extra_fee:e.money.addMoneyWithCurrencyFormat("0",parseFloat(He)),variant:We,sku:t.sku_value}),l.set(t.label_on_cart,Object.values(Ve).join(", "))}}}))}return l.set("optionQuantity",u),l.set("variantData",_),l.set("skuOptionValueString",m),{chosenOptions:s,chosenOptionsWithoutPriceAddOns:l,chosenOptionsProps:c,totalExtraPrice:p,errorMap:o,totalVariantExtraPrice:d,skuOptionValueString:m}},e.common.getCurrentVariant=function(t,o="",n=0){let r=!1;try{r=function(r){let i=[],a=document.querySelectorAll(e.common.getSelectorVariant());if(e.page.isHomePage()||e.page.isCollectionPage()&&7019==e.storeId){let t=e.common.getSelectorVariant().map((e=>{if(!e.includes("[bss-po-featured-product-key")){let t=`[bss-po-featured-product-key='${o}'] `+e;return!document.querySelector(t)&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(t=`[id*='product_form_${o}'] `+e),t}}));t.every((e=>!e))||(a=document.querySelectorAll(t))}return"function"==typeof bssFixSupportGetDefaultShopifyOptions&&(a=bssFixSupportGetDefaultShopifyOptions(e,a,o,t)),a.forEach(((o,r)=>{let a=!1;"function"==typeof bssFixSupportSetDefaultOptionValue&&(a=bssFixSupportSetDefaultOptionValue(e,o,i,a,t,n,r)),a||(o?.value?i.push(o.value):o?.getAttribute("data-option-value")?i.push(o.getAttribute("data-option-value")):o?.innerHTML?.trim()&&i.push(o.innerHTML.trim()))})),i=i.join(" / "),i&&(r=e.common.findObjectInArrayByKey(t.variants,"title",i)),r}(r)||function(o){try{let n=document.querySelector('form[action="/cart/add"]:has(.bss-po-product-page) input[name="id"]')?.value||document.querySelector('form[action*="/cart/add"] input[name="id"]')?.value;if("function"==typeof bssFixSupportGetDefaultVariantId&&(n=bssFixSupportGetDefaultVariantId(e,n,t)),n){const r=e.common.findObjectInArrayByKey(t?.variants,"id",n);r&&(o=r)}return o}catch(e){return!1}}(r)||function(o){try{let n=new Proxy(new URLSearchParams(window.location.search),{get:(e,t)=>e.get(t)}).variant;if(n){const r=e.common.findObjectInArrayByKey(t?.variants,"id",n);r&&(o=r)}return o}catch(e){return!1}}(r),"function"==typeof bssFixSupportFinalGetVariant&&(r=bssFixSupportFinalGetVariant(e,r,t,o,n)),r||(r=function(e){return t?.variants?.length&&(e=t.variants[0]),e}(r))}catch(e){console.log("BSS Error: Cannot find product variant",e)}return r},e.common.getCurrentQuantity=function(t){let o='input[name="quantity"]',n="";if(1959==e.storeId)o='form[action*="/cart/add"]#add-to-cart-form input[name="quantity"]';else if(1722==e.storeId)o=".my-8 select[name='quantity'], input[name='quantity']";else if(4341==e.storeId)o="input.input--small";else if(1612==e.storeId)o="input.product__input";else if(3096==e.storeId)o=".product-menu-quantity input.quantity-input";else if(3101==e.storeId)o=".\\#product-qty-selector-inner select[name='quantity']";else if(3793==e.storeId)o=".\\#product-qty-selector-inner select[name='quantity']";else if(6923==e.storeId)return n="undefined"===window.bss_quantity?1:parseInt(window.bss_quantity),n;return 1569==e.storeId&&(o=`[bss-po-featured-product-key='${t}'] `+o),e.page.isCollectionPage()&&7019==e.storeId&&(o=`[bss-po-featured-product-key='${t}'] `+o),e.page.isHomePage()&&(o=`[bss-po-featured-product-key='${t}'] `+o,!document.querySelector(o)&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(o=`[id*='product_form_${t}'] `+o)),n=document.querySelector(o),"function"==typeof bssFixSupportGetDefaultQuantity&&(n=bssFixSupportGetDefaultQuantity(e,n)),null!==n?n.value:1},e.common.getMessageFromSettings=function(t){let o=`${e.settings.translations.option_text} ${t.label_on_product} ${e.settings.translations.required_text}`;(o.includes("{{Option name}}")||""==e.settings.translations.option_text.trim())&&(o=`${e.settings.translations.required_text.replace("{{Option name}}",t.label_on_product)}`);const n=`${e.settings.translations.min_character_text}: ${t.min_character}`,r=`${e.settings.translations.max_character_text}: ${t.max_character}`,i=`${e.settings.translations.min_value_text}: ${t.min_value}`,a=`${e.settings.translations.max_value_text}: ${t.max_value}`,s=`${e.settings.translations.min_selector_text}: ${t.min_selector}`,l=`${e.settings.translations.max_selector_text}: ${t.max_selector}`,c=`${e.settings.translations.min_quantity_text}: ${t.min_quantity}`,p=`${e.settings.translations.max_quantity_text}: ${t.max_quantity}`,u=`${e.settings.translations.error_email_format_message}`;return"function"==typeof bssFixSupportGetMessageFromSettings?bssFixSupportGetMessageFromSettings(e,t):{requiredErrorMessage:o,minCharacterErrorMessage:n,maxCharacterWarningMessage:r,minValueErrorMessage:i,maxValueErrorMessage:a,minSelectorErrorMessage:s,maxSelectorWarningMessage:l,minQuantityErrorMessage:c,maxQuantityWarningMessage:p,emailFormatErrorMessage:u,waitingUploadFileMessage:"Please wait until file is uploaded."}},e.common.getSeletorOfByOptionType=function(e,t){const o={0:"po_text_box",1:"po_number_field",2:"po_checkbox",3:"po_dropdown",4:"po_radio_button",5:"po_swatch",6:"po_button",7:"po_file_upload",8:"po_datetime",10:"po_color_picker",11:"po_text_area",12:"po_dropdown_thumbnail",13:"po_email_box",17:"po_switch"}[Number(e)];return[0,1,3,11,12,13].includes(e)?`#${o}${t}`:`input[name="${o}${t}"]`},e.common.getCssAdvancedByOptionType=function(t,o=!1){const n=[r.PRICING.CODE.ADVANCED,r.PRICING.CODE.NEW_ADVANCED,r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan);if(5==t){let t;switch(e.settings.generals.swatches_hover){case 1:t=`background-color: ${e.settings.colors.swatches_hover_color};`;break;case 2:t=`background-color: ${e.settings.colors.swatches_hover_color}; width: 165px; z-index: 7; padding-bottom: 10px;`;break;case 3:t=`background-color: ${e.settings.colors.swatches_hover_color}; width: 165px; z-index: 7;`;break;default:t=""}return{swatch_input2_style:"",swatch_tooltip_style:e.currentPlan&&n?t:""}}},e.common.generateUniqueId=function(){return"xxxxxxxxxxxx5xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){let t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))+Math.floor(Date.now()).toString()},e.common.getLinkFileUploadedBySelector=function({selector:e,optionId:o,optionSetConditionType:n}){const r=document.querySelector(e).closest(4!==n||window.bss_admin_option?".bss-po-product-page:not(.bss-po-specific-variant)":".bss-po-product-page.bss-po-specific-variant").getAttribute("data-position");return t[`${r}-${o}`]},e.common.getQuantityByOptionValue=function(t,o,n){const{select_quantity:i}=t,a={2:"po-option--checkbox-wrapper",4:"po-option--radioButton-wrapper",3:"po-option--dropdown-wrapper",5:"po-option--swatch-wrapper",6:"po-option--button-wrapper",12:"po-option--dropdown-thumbnail-wrapper",17:"po-option--switch-wrapper"};if([r.OPTION_TYPE.SWATCH,r.OPTION_TYPE.CHECKBOX,r.OPTION_TYPE.DROPDOWN,r.OPTION_TYPE.RADIO_BUTTON,r.OPTION_TYPE.SWITCH,r.OPTION_TYPE.BUTTON,r.OPTION_TYPE.DROPDOWN_THUMBNAIL].includes(parseInt(t.option_type))){let s=null;if(3!=t.option_type&&12!=t.option_type)s=o?.closest(`.${a[t.option_type]}`);else{let i=t.option_type==r.OPTION_TYPE.DROPDOWN?"#po_dropdown":"#po_dropdown_thumbnail";s=o&&document.querySelector(`${i}${t.id} ~ .${a[t.option_type]}#${o.id}`),(e.page.isHomePage()&&n||1569==e.storeId)&&(s=o&&document.querySelector(`[bss-po-featured-product-key='${n}'] ${i}${t.id} ~ .${a[t.option_type]}#${o.id}`),!s&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(s=o&&document.querySelector(`[id*="product_form_${n}"] ${i}${t.id} ~ .${a[t.option_type]}#${o.id}`)?.value))}const l=o?.getAttribute("id")?.replace(/\D+/g,"");if(i[l]){const e=s.querySelector(".quantity-control");if(e){const t=e.querySelector("input.quantity-input");return t?Number(t.value):0}}return null}},e.common.getExtraPriceByOptionValue=function(t,o,n){let i=0;if(3!=t.option_type&&12!=t.option_type)o.forEach(((o,n)=>{if(o.checked){const a=e.common.getQuantityByOptionValue(t,o);let s=0;[r.OPTION_TYPE.CHECKBOX,r.OPTION_TYPE.RADIO_BUTTON,r.OPTION_TYPE.SWITCH,r.OPTION_TYPE.SWATCH,r.OPTION_TYPE.BUTTON].includes(parseInt(t.option_type))&&(s=e.common.getExtraPriceByOption(t,n)),s&&(i+=a?a*s:s)}}));else{if(!o)return;for(let r of o){const o=e.common.getQuantityByOptionValue(t,r,n);let a=parseInt(r.id.match(/\d+/)[0],10),s=0;s=e.common.getExtraPriceByOption(t,a),s&&(i+=o?o*s:s)}}return i},e.common.getVariantDataOnOptionSet=async function(t,o){let n=e.common.getAllExtraVariant(t).filter((e=>null!==e&&""!==e));if(!n.length)return[];await e.common.getDataExtraVariantByIds(n,o).then((e=>{t.variants=e}))},e.common.addVariantDataToOption=function(e,t){let o=[],n=[],i=[],a=[];t.option_type==r.OPTION_TYPE.TEXT_BOX?e.variants&&t.extra_price.text_box_extra_price_type==r.EXTRA_PRICE_TYPE.ASSIGN_TO_VARIANT&&t.extra_price.text_box_extra_variant&&e.variants.forEach((e=>{e.id.includes(t.extra_price.text_box_extra_variant)&&(t.extra_price.text_box_extra_variant_id=e.id,t.extra_price.text_box_extra_variant_price=e.price,t.extra_price.text_box_extra_variant_quantity=e.inventoryQuantity,t.extra_price.text_box_extra_variant_sku=e.sku)})):t.option_type==r.OPTION_TYPE.NUMBER?e.variants&&t.extra_price.number_field_extra_price_type==r.EXTRA_PRICE_TYPE.ASSIGN_TO_VARIANT&&t.extra_price.number_field_extra_variant&&e.variants.forEach((e=>{e.id.includes(t.extra_price.number_field_extra_variant)&&(t.extra_price.number_field_extra_variant_id=e.id,t.extra_price.number_field_extra_variant_price=e.price,t.extra_price.number_field_extra_variant_quantity=e.inventoryQuantity,t.extra_price.number_field_extra_variant_sku=e.sku)})):t.option_type==r.OPTION_TYPE.CHECKBOX?e.variants&&t.extra_price.checkbox_extra_price_type.includes(1)&&(t.extra_price.checkbox_extra_variant.forEach(((t,r)=>{let s=null;t&&(s=e.variants.find((e=>e.id.includes(t)))),s?(o.push(s.id),n.push(s.price),i.push(s.inventoryQuantity),a.push(s.sku)):(o.push(""),n.push(""),i.push(""),a.push(""))})),t.extra_price.checkbox_extra_variant_id=o,t.extra_price.checkbox_extra_variant_price=n,t.extra_price.checkbox_extra_variant_quantity=i,t.extra_price.checkbox_extra_variant_sku=a):t.option_type==r.OPTION_TYPE.DROPDOWN?e.variants&&t.extra_price.dropdown_extra_price_type.includes(1)&&(t.extra_price.dropdown_extra_variant.forEach(((t,r)=>{let s=null;t&&(s=e.variants.find((e=>e.id.includes(t)))),s?(o.push(s.id),n.push(s.price),i.push(s.inventoryQuantity),a.push(s.sku)):(o.push(""),n.push(""),i.push(""),a.push(""))})),t.extra_price.dropdown_extra_variant_id=o,t.extra_price.dropdown_extra_variant_price=n,t.extra_price.dropdown_extra_variant_quantity=i,t.extra_price.dropdown_extra_variant_sku=a):t.option_type==r.OPTION_TYPE.RADIO_BUTTON?e.variants&&t.extra_price.radio_button_extra_price_type.includes(1)&&(t.extra_price.radio_button_extra_variant.forEach(((t,r)=>{let s=null;t&&(s=e.variants.find((e=>e.id.includes(t)))),s?(o.push(s.id),n.push(s.price),i.push(s.inventoryQuantity),a.push(s.sku)):(o.push(""),n.push(""),i.push(""),a.push(""))})),t.extra_price.radio_button_extra_variant_id=o,t.extra_price.radio_button_extra_variant_price=n,t.extra_price.radio_button_extra_variant_quantity=i,t.extra_price.radio_button_extra_variant_sku=a):t.option_type==r.OPTION_TYPE.SWATCH?e.variants&&t.extra_price.swatch_extra_price_type.includes(1)&&(t.extra_price.swatch_extra_variant.forEach(((t,r)=>{let s=null;t&&(s=e.variants.find((e=>e.id.includes(t)))),s?(o.push(s.id),n.push(s.price),i.push(s.inventoryQuantity),a.push(s.sku)):(o.push(""),n.push(""),i.push(""),a.push(""))})),t.extra_price.swatch_extra_variant_id=o,t.extra_price.swatch_extra_variant_price=n,t.extra_price.swatch_extra_variant_quantity=i,t.extra_price.swatch_extra_variant_sku=a):t.option_type==r.OPTION_TYPE.BUTTON?e.variants&&t.extra_price.button_extra_price_type.includes(1)&&(t.extra_price.button_extra_variant.forEach(((t,r)=>{let s=null;t&&(s=e.variants.find((e=>e.id.includes(t)))),s?(o.push(s.id),n.push(s.price),i.push(s.inventoryQuantity),a.push(s.sku)):(o.push(""),n.push(""),i.push(""),a.push(""))})),t.extra_price.button_extra_variant_id=o,t.extra_price.button_extra_variant_price=n,t.extra_price.button_extra_variant_quantity=i,t.extra_price.button_extra_variant_sku=a):t.option_type==r.OPTION_TYPE.FILE_UPLOAD?e.variants&&t.extra_price.file_upload_extra_price_type==r.EXTRA_PRICE_TYPE.ASSIGN_TO_VARIANT&&t.extra_price.file_upload_extra_variant&&e.variants.forEach((e=>{e.id.includes(t.extra_price.file_upload_extra_variant)&&(t.extra_price.file_upload_extra_variant_id=e.id,t.extra_price.file_upload_extra_variant_price=e.price,t.extra_price.file_upload_extra_variant_quantity=e.inventoryQuantity,t.extra_price.file_upload_extra_variant_sku=e.sku)})):t.option_type==r.OPTION_TYPE.COLOR_PICKER?e.variants&&t.extra_price.color_picker_extra_price_type==r.EXTRA_PRICE_TYPE.ASSIGN_TO_VARIANT&&t.extra_price.color_picker_extra_variant&&e.variants.forEach((e=>{e.id.includes(t.extra_price.color_picker_extra_variant)&&(t.extra_price.color_picker_extra_variant_id=e.id,t.extra_price.color_picker_extra_variant_price=e.price,t.extra_price.color_picker_extra_variant_quantity=e.inventoryQuantity,t.extra_price.color_picker_extra_variant_sku=e.sku)})):t.option_type==r.OPTION_TYPE.TEXT_AREA?e.variants&&t.extra_price.text_area_extra_price_type==r.EXTRA_PRICE_TYPE.ASSIGN_TO_VARIANT&&t.extra_price.text_area_extra_variant&&e.variants.forEach((e=>{e.id.includes(t.extra_price.text_area_extra_variant)&&(t.extra_price.text_area_extra_variant_id=e.id,t.extra_price.text_area_extra_variant_price=e.price,t.extra_price.text_area_extra_variant_quantity=e.inventoryQuantity,t.extra_price.text_area_extra_variant_sku=e.sku)})):t.option_type==r.OPTION_TYPE.DROPDOWN_THUMBNAIL?e.variants&&t.extra_price.dropdown_thumbnail_extra_price_type.includes(1)&&(t.extra_price.dropdown_thumbnail_extra_variant.forEach(((t,r)=>{let s=null;t&&(s=e.variants.find((e=>e.id.includes(t)))),s?(o.push(s.id),n.push(s.price),i.push(s.inventoryQuantity),a.push(s.sku)):(o.push(""),n.push(""),i.push(""),a.push(""))})),t.extra_price.dropdown_thumbnail_extra_variant_id=o,t.extra_price.dropdown_thumbnail_extra_variant_price=n,t.extra_price.dropdown_thumbnail_extra_variant_quantity=i,t.extra_price.dropdown_thumbnail_extra_variant_sku=a):t.option_type==r.OPTION_TYPE.EMAIL?e.variants&&t.extra_price.email_box_extra_price_type==r.EXTRA_PRICE_TYPE.ASSIGN_TO_VARIANT&&t.extra_price.email_box_extra_variant&&e.variants.forEach((e=>{e.id.includes(t.extra_price.email_box_extra_variant)&&(t.extra_price.email_box_extra_variant_id=e.id,t.extra_price.email_box_extra_variant_price=e.price,t.extra_price.email_box_extra_variant_quantity=e.inventoryQuantity,t.extra_price.email_box_extra_variant_sku=e.sku)})):t.option_type==r.OPTION_TYPE.SWITCH&&e.variants&&t.extra_price.switch_extra_price_type.includes(r.EXTRA_PRICE_TYPE.ASSIGN_TO_VARIANT)&&(t.extra_price.switch_extra_variant.forEach(((t,r)=>{let s=null;t&&(s=e.variants.find((e=>e.id.includes(t)))),s?(o.push(s.id),n.push(s.price),i.push(s.inventoryQuantity),a.push(s.sku)):(o.push(""),n.push(""),i.push(""),a.push(""))})),t.extra_price.switch_extra_variant_id=o,t.extra_price.switch_extra_variant_price=n,t.extra_price.switch_extra_variant_quantity=i,t.extra_price.switch_extra_variant_sku=a)},e.common.getPriceAddOnValuesByOptionType=function(e,t){let o="",n="",i="",a=r.OPTION_KEYS.EXTRA_PRICE_TYPE[e.option_type],s=r.OPTION_KEYS.EXTRA_PRICE_VALUE.CREATE_FEE[e.option_type],l=r.OPTION_KEYS.EXTRA_PRICE_VALUE.VARIANT_FEE[e.option_type];try{r.OPTION_VALUE_TYPE.SINGLE.includes(parseInt(e.option_type))?(e.extra_price[a]&&(o=e.extra_price[a]),e.extra_price[s]&&(n=e.extra_price[s]),e.extra_price[l]&&(i=e.extra_price[l])):r.OPTION_VALUE_TYPE.MULTI.includes(parseInt(e.option_type))&&(e.extra_price[a]&&(o=e.extra_price[a][t]),e.extra_price[s]&&(n=e.extra_price[s][t]),e.extra_price[l]&&(i=e.extra_price[l][t]))}catch(e){console.log("getPriceAddOnValuesByOptionType - Error:",e)}return{extraPriceType:o,extraFee:n,variantExtraFee:i}},e.common.getFinalExtraPrice=function(t,o,n){let i=0;return t==r.EXTRA_PRICE_TYPE.CREATE_FEE&&o?i=parseFloat(o):[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&t==r.EXTRA_PRICE_TYPE.ASSIGN_TO_VARIANT&&n&&(i=parseFloat(n)),i},e.common.getExtraPriceByOption=function(t,o){let n=0;const{extraPriceType:r,extraFee:i,variantExtraFee:a}=e.common.getPriceAddOnValuesByOptionType(t,o);return n=e.common.getFinalExtraPrice(r,i,a),isNaN(n)?0:n},e.common.concatSkuStringValue=function(t){let o=e.settings.generals.sku_separator;return t?`${o}${t}`:""}}(e,n,i),function(e){const o=[r.PRICING.CODE.FREE,r.PRICING.CODE.ADVANCED,r.PRICING.CODE.NEW_ADVANCED,r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan),n=[r.PRICING.CODE.ADVANCED,r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan);e.common.checkAppliedOptionSet=function({optionSet:e,customer:t,collections:o,productId:r,tags:i,variantId:a}){let s=null,l=n?e.apply_to:0,c=e.customer_ids&&n?e.customer_ids.split(","):[],p=e.customer_tags&&n?e.customer_tags.split(","):[];if(1==l&&!t.id)return;if(2==l){if(null!==t.id)return}else if(3==l){if(null==t.id)return;if(-1==c.indexOf(String(t.id)))return}else if(4==l){if(null==t.tags)return;if(0==p.filter((e=>t.tags.includes(String(e)))).length)return}let u=e.product_condition_type,d=!1;if("function"==typeof bssFixSupportAppliedOptionSetByConditionalTypes){const e=bssFixSupportAppliedOptionSetByConditionalTypes();d=e?.includes(u)}const _=n||d;let m=e.product_ids?e.product_ids.split(","):[],h=_&&e.product_collections?e.product_collections.split(","):[],f=_&&e.product_tags?e.product_tags.split(","):[],y=_&&e.specific_variant_ids?e.specific_variant_ids.split(","):[];0==u?s=e:1==u?-1!==m.indexOf(String(r))&&(s=e):2==u&&_?o.filter((e=>h.includes(String(e)))).length>0&&(s=e):3==u&&_?i.filter((e=>f.includes(String(e)))).length>0&&(s=e):4==u&&_&&-1!==y.indexOf(String(a))&&(s=e);let b=e.exclude_product_type,g=e.exclude_product_tags?e.exclude_product_tags.split(","):[];return 1===b&&i.filter((e=>g.includes(String(e)))).length&&(s=null),s},e.common.getAllExtraVariant=function(e){let t=[];return e&&e.options.forEach((e=>{e.extra_price.text_box_extra_price_type!=r.EXTRA_PRICE_TYPE.ASSIGN_TO_VARIANT||""===e.extra_price.text_box_extra_variant||t.includes(e.extra_price.text_box_extra_variant)||t.push(e.extra_price.text_box_extra_variant),e.extra_price.email_box_extra_price_type!=r.EXTRA_PRICE_TYPE.ASSIGN_TO_VARIANT||""===e.extra_price.email_box_extra_variant||t.includes(e.extra_price.email_box_extra_variant)||t.push(e.extra_price.email_box_extra_variant),e.extra_price.number_field_extra_price_type!=r.EXTRA_PRICE_TYPE.ASSIGN_TO_VARIANT||""===e.extra_price.number_field_extra_variant||t.includes(e.extra_price.number_field_extra_variant)||t.push(e.extra_price.number_field_extra_variant),e.extra_price.checkbox_extra_price_type.includes(1)&&e.extra_price.checkbox_extra_variant&&e.extra_price.checkbox_extra_variant.forEach((e=>{""===e||t.includes(e)||t.push(e)})),e.extra_price.dropdown_extra_price_type.includes(1)&&e.extra_price.dropdown_extra_variant&&e.extra_price.dropdown_extra_variant.forEach((e=>{""===e||t.includes(e)||t.push(e)})),e.extra_price.dropdown_thumbnail_extra_variant&&e.extra_price.dropdown_thumbnail_extra_variant.forEach((e=>{""===e||t.includes(e)||t.push(e)})),e.extra_price.radio_button_extra_price_type.includes(1)&&e.extra_price.radio_button_extra_variant&&e.extra_price.radio_button_extra_variant.forEach((e=>{""===e||t.includes(e)||t.push(e)})),e.extra_price.switch_extra_price_type.includes(1)&&e.extra_price.switch_extra_variant&&e.extra_price.switch_extra_variant.forEach((e=>{""===e||t.includes(e)||t.push(e)})),e.extra_price.swatch_extra_price_type.includes(1)&&e.extra_price.swatch_extra_variant&&e.extra_price.swatch_extra_variant.forEach((e=>{""===e||t.includes(e)||t.push(e)})),e.extra_price.button_extra_price_type.includes(1)&&e.extra_price.button_extra_variant&&e.extra_price.button_extra_variant.forEach((e=>{""===e||t.includes(e)||t.push(e)})),e.extra_price.file_upload_extra_price_type!=r.EXTRA_PRICE_TYPE.ASSIGN_TO_VARIANT||""===e.extra_price.file_upload_extra_variant||t.includes(e.extra_price.file_upload_extra_variant)||t.push(e.extra_price.file_upload_extra_variant),e.extra_price.color_picker_extra_price_type!=r.EXTRA_PRICE_TYPE.ASSIGN_TO_VARIANT||""===e.extra_price.color_picker_extra_variant||t.includes(e.extra_price.color_picker_extra_variant)||t.push(e.extra_price.color_picker_extra_variant),e.extra_price.text_area_extra_price_type!=r.EXTRA_PRICE_TYPE.ASSIGN_TO_VARIANT||""===e.extra_price.text_area_extra_variant||t.includes(e.extra_price.text_area_extra_variant)||t.push(e.extra_price.text_area_extra_variant)})),t},e.common.getDataExtraVariantByIds=async function(o,n){const{apiDomain:r}=e,i=n.shop.domain;let a=[],s=250;if("function"==typeof bssFixSupportHandleFetchVariants){const t=bssFixSupportHandleFetchVariants(e,o,n),r=t?.chunkSize;"number"!=typeof r||isNaN(r)||(s=r)}if(o.length)if(o.length>s){const n=[];for(let e=0;e<o.length;e+=s)n.push(o.slice(e,e+s));(await Promise.allSettled(n.map((o=>t().post(`/apps/${e.proxySubpath}/get-variant-by-ids`,{shop:i,id:o}))))).forEach((e=>{if("fulfilled"===e.status&&e.value.data.success){let t=e.value.data.productVariants.data.productVariants.edges;t&&t.length&&t.forEach((e=>{e.node&&a.push(e.node)}))}else console.error("Error when calling API:",e.reason)}))}else{let n=await t().post(`/apps/${e.proxySubpath}/get-variant-by-ids`,{shop:i,id:o});if(n.data.success){let e=n.data.productVariants.data.productVariants.edges;e&&e.length&&e.forEach((e=>{e.node&&a.push(e.node)}))}}return a},e.common.disableDefaultEventInput=function(t){const o=4!==t||window.bss_admin_option?".bss-po-specific-variant:not(.bss-po-specific-variant)":".bss-po-product-page.bss-po-specific-variant",n=document.querySelectorAll(`${o} [id*="po_text_box"]`),r=document.querySelectorAll(`${o} [id*="po_number_field"]`),i=document.querySelectorAll(`${o}[id*="po_email_box"]`);function a(e){13==e.keyCode&&e.preventDefault()}n.forEach((t=>{4567!=e.storeId&&t.addEventListener("keydown",a),t.addEventListener("input",(()=>{e.helper.addEventListenerInput(t)}))})),i.forEach((t=>{t.addEventListener("keydown",a),t.addEventListener("input",(()=>{e.helper.addEventListenerInput(t)}))})),r.forEach((e=>{e.addEventListener("keydown",a)}))},e.common.addEventToOption=function({option:t,elementOfOption:n,currentLabel:i,selector:a,optionSetConditionType:s}){const l=t.option_type,c=t.id;document.querySelectorAll(".po-option__value.disabled").forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation()}))}));const p=e.settings?.generals?.add_ons_display_type??r.ADD_ONS_DISPLAY_TYPE.SHOW_AFTER_SELECTING;if(l==r.OPTION_TYPE.TEXT_BOX){const u=n;let d="#countCharacter"+c;e.po.displayPriceAddOnsWithChosenOptions({option:t,element:u,currentLabel:i,optionSetConditionType:s}),p===r.ADD_ONS_DISPLAY_TYPE.ALWAYS_SHOW&&e.po.displayPriceAddOnsForOptionValue({option:t,element:u,currentLabel:i,optionSetConditionType:s}),u&&(u.addEventListener("keydown",(function(e){"Enter"===e.key&&e.preventDefault()})),u.addEventListener("input",(function(){e.po.validateOptionOnProductPage({option:t,element:u,selector:a,optionSetConditionType:s}),e.po.generateMessageOnProductPage(a),e.po.displayPriceAddOnsWithChosenOptions({option:t,element:u,currentLabel:i,optionSetConditionType:s}),parseInt(e.settings.generals.count_character)&&t.max_character&&o&&(document.querySelector(d)?document.querySelector(d).innerHTML=u.value.length+"/"+t.max_character+" "+e.settings.translations.characters_text:t.min_character?t.min_character<u.value.length&&u.insertAdjacentHTML("afterend",`<span class="po-count-character" id="countCharacter${c}"  >\n                                        ${u.value.length+"/"+t.max_character+" "+e.settings.translations.characters_text}\n                                    </span>`):u.insertAdjacentHTML("afterend",`<span class="po-count-character" id="countCharacter${c}">\n                                    ${u.value.length+"/"+t.max_character+" "+e.settings.translations.characters_text}\n                                </span>`))})))}else if(l==r.OPTION_TYPE.NUMBER){let _=n;e.po.displayPriceAddOnsWithChosenOptions({option:t,element:_,currentLabel:i,optionSetConditionType:s}),p===r.ADD_ONS_DISPLAY_TYPE.ALWAYS_SHOW&&e.po.displayPriceAddOnsForOptionValue({option:t,element:_,currentLabel:i,optionSetConditionType:s}),_&&_.addEventListener("input",(function(){e.po.validateOptionOnProductPage({option:t,element:_,selector:a,optionSetConditionType:s}),e.po.generateMessageOnProductPage(a),e.po.displayPriceAddOnsWithChosenOptions({option:t,element:_,currentLabel:i,optionSetConditionType:s})}))}else if(l==r.OPTION_TYPE.CHECKBOX){let m=n,h=`${a}:checked`;e.po.handleSelectQuantityByOptionType({option:t,selector:a,checkedSelectors:h,optionSetConditionType:s}),e.po.displayPriceAddOnsWithChosenOptions({option:t,element:m,currentLabel:i,optionSetConditionType:s}),e.po.displayChosenSwatchOptionTitles({option:t,checkedSelectors:h,optionSetConditionType:s}),p===r.ADD_ONS_DISPLAY_TYPE.ALWAYS_SHOW&&e.po.displayPriceAddOnsForOptionValue({option:t,element:m,currentLabel:i,optionSetConditionType:s}),Array.prototype.forEach.call(m,(function(o){o&&o.addEventListener("click",(function(){e.po.validateOptionOnProductPage({option:t,element:o,selector:a,optionSetConditionType:s}),e.po.handleSelectQuantityByOptionType({option:t,selector:a,checkedSelectors:h,swatchSelected:o,optionSetConditionType:s}),e.po.generateMessageOnProductPage(a),e.po.displayChosenSwatchOptionTitles({option:t,checkedSelectors:h,optionSetConditionType:s}),e.po.displayPriceAddOnsWithChosenOptions({option:t,element:m,currentLabel:i,optionSetConditionType:s})}))}))}else if(l==r.OPTION_TYPE.SWITCH){let f=n,y=`${a}:checked`;e.po.handleSelectQuantityByOptionType({option:t,selector:a,checkedSelectors:y,optionSetConditionType:s}),e.po.displayPriceAddOnsWithChosenOptions({option:t,element:f,currentLabel:i,optionSetConditionType:s}),e.po.displayChosenSwatchOptionTitles({option:t,checkedSelectors:y,optionSetConditionType:s}),p===r.ADD_ONS_DISPLAY_TYPE.ALWAYS_SHOW&&e.po.displayPriceAddOnsForOptionValue({option:t,element:f,currentLabel:i,optionSetConditionType:s}),Array.prototype.forEach.call(f,(function(o){o&&o.addEventListener("click",(function(){e.po.validateOptionOnProductPage({option:t,element:o,selector:a,optionSetConditionType:s}),e.po.handleSelectQuantityByOptionType({option:t,selector:a,checkedSelectors:y,swatchSelected:o,optionSetConditionType:s}),e.po.generateMessageOnProductPage(a),e.po.displayChosenSwatchOptionTitles({option:t,checkedSelectors:y,optionSetConditionType:s}),e.po.displayPriceAddOnsWithChosenOptions({option:t,element:f,currentLabel:i,optionSetConditionType:s})}))}))}else if(l==r.OPTION_TYPE.DROPDOWN){let b=document.querySelector(`#bss-po_dropdown${t.id}`),g=null;b&&(g=b.querySelector("#bss-po-dropdown-selected-option"));let v=`${a} option[id*="po_dropdown"][selected="true"]`,S="";if(e.page.isHomePage()||e.page.isCollectionPage()&&7019==e.storeId||1569==e.storeId){let x=a.match(/'(\d+)'/);!x&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(x=a?.match(/product_form_(\d+)/)),S=x?x[1]:""}e.po.handleSelectQuantityByOptionType({option:t,selector:a,checkedSelectors:v,optionSetConditionType:s}),e.po.displayPriceAddOnsWithChosenOptions({option:t,element:b,currentLabel:i,optionSetConditionType:s,idProduct:S}),e.po.displayChosenSwatchOptionTitles({option:t,checkedSelectors:v,optionSetConditionType:s}),p===r.ADD_ONS_DISPLAY_TYPE.ALWAYS_SHOW&&e.po.displayPriceAddOnsForOptionValue({option:t,element:b,currentLabel:i,optionSetConditionType:s,idProduct:S});const O=document.querySelector(`#valueSearchWithDropdown${c}`);O&&O.addEventListener("input",(function(){e.po.searchDropdown(b,O)}));const I=new MutationObserver((o=>{o.forEach((o=>{e.po.validateOptionOnProductPage({option:t,element:b,selector:a,optionSetConditionType:s}),e.po.handleSelectQuantityByOptionType({option:t,selector:a,checkedSelectors:v,optionSetConditionType:s}),e.po.generateMessageOnProductPage(a),e.po.displayPriceAddOnsWithChosenOptions({option:t,element:b,currentLabel:i,optionSetConditionType:s,idProduct:S}),e.po.displayChosenSwatchOptionTitles({option:t,checkedSelectors:v,optionSetConditionType:s})}))}));g&&I.observe(g,{childList:!0})}else if(l==r.OPTION_TYPE.RADIO_BUTTON){let P=n,E=`${a}:checked`;e.po.handleSelectQuantityByOptionType({option:t,selector:a,checkedSelectors:E,optionSetConditionType:s}),e.po.displayPriceAddOnsWithChosenOptions({option:t,element:P,currentLabel:i,optionSetConditionType:s}),e.po.displayChosenSwatchOptionTitles({option:t,checkedSelectors:E,optionSetConditionType:s}),p===r.ADD_ONS_DISPLAY_TYPE.ALWAYS_SHOW&&e.po.displayPriceAddOnsForOptionValue({option:t,element:P,currentLabel:i,optionSetConditionType:s});let T=null;P.forEach((function(o,n){o&&(o.addEventListener("focus",(function(e){T=document.querySelector(E)?document.querySelector(E).id:null})),o.addEventListener("click",(function(){let r=!1;if("function"==typeof bssCustomDisableUnClickChosenOption&&(r=!1!==bssCustomDisableUnClickChosenOption(e,this,T,"radio")),!r)if(T&&T==this.id){this.checked=!1,T=null;const o=e.appliedOptionSet?.id,r=e.appliedOptionSet?.product_condition_type;e.po.handleChangeValue({selector:this,optionType:"radio_button",radioChecked:!1,appliedOptionSetID:o,optionID:n,labelOnProduct:e.helper.formatOptionLabel(t.label_on_product),maxSelector:t.max_selector,position:0,optionIdForCheckBoxOnly:t.id,optionSetConditionType:r})}else this.checked=!0,T=this.id;e.po.validateOptionOnProductPage({option:t,element:o,selector:a,optionSetConditionType:s}),e.po.handleSelectQuantityByOptionType({option:t,selector:a,checkedSelectors:E,swatchSelected:o,optionSetConditionType:s}),e.po.generateMessageOnProductPage(a),e.po.displayChosenSwatchOptionTitles({option:t,checkedSelectors:E,optionSetConditionType:s}),e.po.displayPriceAddOnsWithChosenOptions({option:t,element:P,currentLabel:i,optionSetConditionType:s})})))}))}else if(l==r.OPTION_TYPE.SWATCH){let C=`${a}:checked`,w=n;e.po.displayChosenSwatchOptionTitles({option:t,checkedSelectors:C,optionSetConditionType:s}),e.po.displayPriceAddOnsWithChosenOptions({option:t,element:w,currentLabel:i,optionSetConditionType:s}),e.po.handleSelectQuantityByOptionType({option:t,selector:a,checkedSelectors:C,optionSetConditionType:s}),p===r.ADD_ONS_DISPLAY_TYPE.ALWAYS_SHOW&&e.po.displayPriceAddOnsForOptionValue({option:t,element:w,currentLabel:i,optionSetConditionType:s});let A=null;w.forEach((function(o,n){o&&(o.addEventListener("focus",(function(e){"radio"==this.type&&(A=document.querySelector(C)?document.querySelector(C).id:null)})),o.addEventListener("click",(function(){if("radio"==this.type){let o=!1;if("function"==typeof bssCustomDisableUnClickChosenOption&&(o=!1!==bssCustomDisableUnClickChosenOption(e,this,A,"swatch")),!o)if(A&&A==this.id){this.checked=!1,A=null;const o=e.appliedOptionSet?.id,r=e.appliedOptionSet?.product_condition_type;"function"==typeof bssFixSupportCustomHandleChangeSwatch?bssFixSupportCustomHandleChangeSwatch(e,this,o,n,t,r):e.po.handleChangeValue({selector:this,optionType:"color_swatch",radioChecked:!1,appliedOptionSetID:o,optionID:n,labelOnProduct:e.helper.formatOptionLabel(t.label_on_product),maxSelector:t.max_selector,position:0,optionIdForCheckBoxOnly:t.id,optionSetConditionType:r})}else this.checked=!0,A=this.id}e.po.validateOptionOnProductPage({option:t,element:o,selector:a,optionSetConditionType:s}),e.po.handleSelectQuantityByOptionType({option:t,selector:a,checkedSelectors:C,swatchSelected:o,optionSetConditionType:s}),e.po.generateMessageOnProductPage(a),e.po.displayPriceAddOnsWithChosenOptions({option:t,element:w,currentLabel:i,optionSetConditionType:s}),e.po.displayChosenSwatchOptionTitles({option:t,checkedSelectors:C,optionSetConditionType:s})})))}))}else if(l==r.OPTION_TYPE.BUTTON){let N=n,D=`${a}:checked`;e.po.displayChosenSwatchOptionTitles({option:t,checkedSelectors:D,optionSetConditionType:s}),e.po.displayPriceAddOnsWithChosenOptions({option:t,element:N,currentLabel:i,optionSetConditionType:s}),e.po.handleSelectQuantityByOptionType({option:t,selector:a,checkedSelectors:D,optionSetConditionType:s}),p===r.ADD_ONS_DISPLAY_TYPE.ALWAYS_SHOW&&e.po.displayPriceAddOnsForOptionValue({option:t,element:N,currentLabel:i,optionSetConditionType:s});let k=null;N.forEach((function(o,n){o&&(o.addEventListener("focus",(function(e){"radio"==this.type&&(k=document.querySelector(D)?document.querySelector(D).id:null)})),o.addEventListener("click",(function(){if("radio"==this.type){let o=!1;if("function"==typeof bssCustomDisableUnClickChosenOption&&(o=!1!==bssCustomDisableUnClickChosenOption(e,this,k,"button")),!o)if(k&&k==this.id){this.checked=!1,k=null;const o=e.appliedOptionSet?.id,r=e.appliedOptionSet?.product_condition_type;e.po.handleChangeValue({selector:this,optionType:"button",radioChecked:!1,appliedOptionSetID:o,optionID:n,labelOnProduct:e.helper.formatOptionLabel(t.label_on_product),maxSelector:t.max_selector,position:0,optionIdForCheckBoxOnly:t.id,optionSetConditionType:r})}else this.checked=!0,k=this.id}e.po.handleSelectQuantityByOptionType({option:t,selector:a,checkedSelectors:D,swatchSelected:o,optionSetConditionType:s}),e.po.validateOptionOnProductPage({option:t,element:o,selector:a,optionSetConditionType:s}),e.po.generateMessageOnProductPage(a),e.po.displayPriceAddOnsWithChosenOptions({option:t,element:N,currentLabel:i,optionSetConditionType:s}),e.po.displayChosenSwatchOptionTitles({option:t,checkedSelectors:D,optionSetConditionType:s})})))}))}else if(l==r.OPTION_TYPE.FILE_UPLOAD){let M=n;if(p===r.ADD_ONS_DISPLAY_TYPE.ALWAYS_SHOW&&e.po.displayPriceAddOnsForOptionValue({option:t,element:M,currentLabel:i,optionSetConditionType:s}),M){if(M.addEventListener("change",(async function(){e.po.validateOptionOnProductPage({option:t,element:M,selector:a,optionSetConditionType:s}),e.po.generateMessageOnProductPage(a),await e.po.uploadFile({option:t,selector:a,optionSetConditionType:s})})),(e?.settings?.generals?.file_display_type??r.FILE_DISPLAY_TYPE.MULTIPLE_FILE_PER_ROW)===r.FILE_DISPLAY_TYPE.SINGLE_FILE_PER_ROW){const R=document.querySelector(`label[for="${M.id}"]`);R&&R.classList.contains("po-dropzone")&&(["dragenter","dragover","dragleave","drop"].forEach((e=>{R.addEventListener(e,(function(e){e.preventDefault(),e.stopPropagation()}),!1)})),["dragenter","dragover"].forEach((e=>{R.addEventListener(e,(function(){R.classList.add("po-dropzone-highlight")}),!1)})),["dragleave","drop"].forEach((e=>{R.addEventListener(e,(function(){R.classList.remove("po-dropzone-highlight")}),!1)})),R.addEventListener("drop",(function(e){const t=R.querySelector(".po-file-loading");if(t&&"block"===t.style.display)return;const o=e.dataTransfer.files;if(o.length>0){const e=new DataTransfer;for(let t=0;t<o.length;t++)e.items.add(o[t]);M.files=e.files;const t=new Event("change",{bubbles:!0});M.dispatchEvent(t)}}),!1))}const L=document.querySelector(`label[for=${M.id}]`);function $(e){"Enter"===e.key&&M.click()}L&&L.addEventListener("keypress",$)}}else if(l==r.OPTION_TYPE.DATE_PICKER&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)){let F="";if(e.page.isHomePage()||e.page.isCollectionPage()&&7019==e.storeId||1569==e.storeId){let B=a.match(/'(\d+)'/);!B&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(B=a?.match(/product_form_(\d+)/)),F=B?B[1]:""}e.po.dateTimePicker(t,F);let q=n;q&&q.addEventListener("input",(function(){e.po.validateOptionOnProductPage({option:t,element:q,selector:a,optionSetConditionType:s}),e.po.generateMessageOnProductPage(a)}))}else if(l==r.OPTION_TYPE.COLOR_PICKER&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)){let j=n,H=document.querySelector(`[name="po_color_picker_value${t.id}"]`);(e.page.isHomePage()||e.page.isCollectionPage()&&7019==e.storeId||1569==e.storeId)&&(H=j?.closest("[bss-po-featured-product-key]")?.querySelector(`[name="po_color_picker_value${t.id}"]`),!H&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(H=j?.closest('[id*="product_form"]')?.querySelector(`[name="po_color_picker_value${t.id}"]`))),e.po.displayPriceAddOnsWithChosenOptions({option:t,element:H,currentLabel:i,optionSetConditionType:s}),p===r.ADD_ONS_DISPLAY_TYPE.ALWAYS_SHOW&&e.po.displayPriceAddOnsForOptionValue({option:t,element:H,currentLabel:i,optionSetConditionType:s}),j&&j.addEventListener("change",(function(){e.po.displayColorPickerWithChosenValue(t,a),e.po.validateOptionOnProductPage({option:t,element:H,selector:a,optionSetConditionType:s}),e.po.generateMessageOnProductPage(a),e.po.displayPriceAddOnsWithChosenOptions({option:t,element:H,currentLabel:i,optionSetConditionType:s})}))}else if(l==r.OPTION_TYPE.TEXT_AREA){const U=n;let V="#countCharacter"+c;e.po.displayPriceAddOnsWithChosenOptions({option:t,element:U,currentLabel:i,optionSetConditionType:s}),p===r.ADD_ONS_DISPLAY_TYPE.ALWAYS_SHOW&&e.po.displayPriceAddOnsForOptionValue({option:t,element:U,currentLabel:i,optionSetConditionType:s}),U&&U.addEventListener("input",(function(){e.po.validateOptionOnProductPage({option:t,element:U,selector:a,optionSetConditionType:s}),e.po.generateMessageOnProductPage(a),e.po.displayPriceAddOnsWithChosenOptions({option:t,element:U,currentLabel:i,optionSetConditionType:s}),parseInt(e.settings.generals.count_character)&&t.max_character&&o&&(document.querySelector(V)?document.querySelector(V).innerHTML=U.value.length+"/"+t.max_character+" "+e.settings.translations.characters_text:t.min_character?t.min_character<U.value.length&&U.insertAdjacentHTML("afterend",`<span class="po-count-character" id="countCharacter${c}"  >\n                                        ${U.value.length}/${t.max_character} ${e.settings.translations.characters_text}\n                                    </span>`):U.insertAdjacentHTML("afterend",`<span class="po-count-character" id="countCharacter${c}"  >${U.value.length+"/"+t.max_character+" "+e.settings.translations.characters_text}</span>`))}))}else if(l==r.OPTION_TYPE.DROPDOWN_THUMBNAIL){let W=document.querySelector(`#po_dropdown_thumbnail-div${t.id}`),Y=null;W&&(Y=W.querySelector("#po-dropdown-selected-option"));let z=`${a} option[id*="po_dropdown"][selected="true"]`,G="";if(e.page.isHomePage()||e.page.isCollectionPage()&&7019==e.storeId||1569==e.storeId){let K=a.match(/'(\d+)'/);!K&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(K=a?.match(/product_form_(\d+)/)),G=K?K[1]:""}e.po.handleSelectQuantityByOptionType({option:t,selector:a,checkedSelectors:z,optionSetConditionType:s}),e.po.displayPriceAddOnsWithChosenOptions({option:t,element:W,currentLabel:i,optionSetConditionType:s,idProduct:G}),e.po.displayChosenSwatchOptionTitles({option:t,checkedSelectors:z,optionSetConditionType:s}),p===r.ADD_ONS_DISPLAY_TYPE.ALWAYS_SHOW&&e.po.displayPriceAddOnsForOptionValue({option:t,element:W,currentLabel:i,optionSetConditionType:s,idProduct:G});const X=document.querySelector(`#valueSearchWithThumbnail${c}`);X&&X.addEventListener("input",(function(){e.po.searchDropdownWithThumbnail(W,X)}));const Q=new MutationObserver((o=>{o.forEach((o=>{e.po.validateOptionOnProductPage({option:t,element:n,selector:a,optionSetConditionType:s}),e.po.handleSelectQuantityByOptionType({option:t,selector:a,checkedSelectors:z,optionSetConditionType:s}),e.po.generateMessageOnProductPage(a),e.po.displayPriceAddOnsWithChosenOptions({option:t,element:W,currentLabel:i,optionSetConditionType:s,idProduct:G}),e.po.displayChosenSwatchOptionTitles({option:t,checkedSelectors:z,optionSetConditionType:s})}))}));Y&&Q.observe(Y,{childList:!0})}if(l==r.OPTION_TYPE.EMAIL){const J=n;let Z="#countCharacter"+c;e.po.displayPriceAddOnsWithChosenOptions({option:t,element:J,currentLabel:i,optionSetConditionType:s}),p===r.ADD_ONS_DISPLAY_TYPE.ALWAYS_SHOW&&e.po.displayPriceAddOnsForOptionValue({option:t,element:J,currentLabel:i,optionSetConditionType:s}),J&&J.addEventListener("input",(function(){e.po.validateOptionOnProductPage({option:t,element:J,selector:a,optionSetConditionType:s}),e.po.generateMessageOnProductPage(a),e.po.displayPriceAddOnsWithChosenOptions({option:t,element:J,currentLabel:i,optionSetConditionType:s}),parseInt(e.settings.generals.count_character)&&t.max_character&&o&&(document.querySelector(Z)?document.querySelector(Z).innerHTML=J.value.length+"/"+t.max_character+" "+e.settings.translations.characters_text:t.min_character?t.min_character<J.value.length&&J.insertAdjacentHTML("afterend",`<span class="po-count-character" id="countCharacter${c}"  >${J.value.length+"/"+t.max_character+" "+e.settings.translations.characters_text}</span>`):J.insertAdjacentHTML("afterend",`<span class="po-count-character" id="countCharacter${c}"  >${J.value.length+"/"+t.max_character+" "+e.settings.translations.characters_text}</span>`))}))}},e.common.chosenOptionsMapToLinePropertiesObject=function(t){let o={};return t.forEach(((t,n)=>{980==e.storeId?o[n]=t:o[" "+n]=t})),o},e.common.buyItNowGetVariantLineItems=function(t,o,n){let r=[],i=o?Number(o):1,a=t.get("variantData"),s=t.get("optionQuantity");return t.forEach(((o,l)=>{if(!["totalExtraPrice","totalVariantExtraPrice","variantData","optionQuantity","skuOptionValueString","skuOptionValueString_1","variantProductIdApplyOptionSet"].includes(l))if(a[l])if(a[l].id){let t=o,n=s[l]&&s[l][t];n&&(t=`${n} x ${t}`);let c=[];e.marketStatus?r=e.common.convertObjVariantToLineItems(r,a[l],n||i):(e.common.checkHasMultipleFileUpload(t)?c=t.split(", ").map(((e,t)=>({key:`${l}-File${t+1}`,value:e}))):c.push({key:l,value:t}),r.push({variantId:`gid://shopify/ProductVariant/${a[l].id}`,quantity:n?n*i:i,customAttributes:c}))}else if("string"==typeof t.get(l)){let o=[];t.get(l).split(", ").forEach((t=>{let c=t,p=s[l]&&s[l][c];const u=p?`${p} x ${c}`:c;e.marketStatus?a[l][t]&&a[l][t].id&&(r=e.common.convertObjVariantToLineItems(r,a[l][t],p||i)):(a[l][t]?r.push({variantId:`gid://shopify/ProductVariant/${a[l][t].id}`,quantity:p?p*i:i,customAttributes:{key:l,value:u}}):o.push(u),n.push({key:l,value:o.join(", ").toString()}))}))}else{let o=[];t.get(l).forEach((t=>{let c=JSON.parse(t).title,p=s[l]&&s[l][c],u=p?`${p} x ${c}`:c;e.marketStatus?a[l][c]&&a[l][c].id&&(r=e.common.convertObjVariantToLineItems(r,a[l][c],p||i)):(a[l][c]?r.push({variantId:`gid://shopify/ProductVariant/${a[l][c].id}`,quantity:p?p*i:i,customAttributes:{key:l,value:u}}):o.push(u),n.push({key:l,value:o.join(", ").toString()}))}))}else if(!e.marketStatus)if("object"==typeof o){let e=[];t.get(l).forEach((t=>{let o=JSON.parse(t).title,n=s[l]&&s[l][o],r=n?`${n} x ${o}`:o;e.push(r)})),n.push({key:l,value:e.join(", ").toString()})}else{let e=t.get(l),o=s[l]&&s[l][e];o&&(e=`${o} x ${e}`),n.push({key:l,value:e})}})),r=e.cart.markOldVariantAddOn(r),r},e.common.getBuyItNowLineItems=function(t,o,n,i,a,s,l,c=0){let p=[],u=[],d=[];if(!e.checkToken){let o="0";Number(t)>0?o=r.OLD_ADDON_MARK.CREATE_FEE:Number(c)>0&&(o=r.OLD_ADDON_MARK.ASSIGN_TO_VARIANT),d=e.cart.markOrderCreatedByApp(s,o),u=e.cart.markOrderCreatedByApp(t?[]:s,Number(t||0)+Number(c||0))}if(e.marketStatus)p=e.common.marketBuyItNowLineItems(t,o,n,i,a,s,l);else{let e={variantId:`gid://shopify/ProductVariant/${a.id}`,quantity:n?Number(n):1,customAttributes:u};p.push(e),(t||l)&&p.push({title:o,originalUnitPrice:t,taxable:a.taxable,sku:l,quantity:n?Number(n):1,customAttributes:d}),i.length&&p.push(...i)}return p},e.common.marketBuyItNowLineItems=function(e,t,o,n,r,i,a=""){let s=[],l=o?Number(o):1;if(e>0){s=[{title:t,originalUnitPrice:e,taxable:r.taxable,sku:a||"",quantity:l,customAttributes:i}],n.length&&s.push(...n);let o=s.find((e=>e.variantId&&e.variantId.includes(r.id)));o?o.quantity+=item.quantity:s.push({variantId:`gid://shopify/ProductVariant/${r.id}`,quantity:l})}else if(n.length){s.push(...n);let e=s.find((e=>e.variantId&&e.variantId.includes(r.id)));e?(e.quantity+=item.quantity,e.customAttributes=i):s.push({variantId:`gid://shopify/ProductVariant/${r.id}`,quantity:l,customAttributes:i})}else s=[{variantId:`gid://shopify/ProductVariant/${r.id}`,quantity:l,customAttributes:i}];return s},e.common.convertObjVariantToLineItems=function(e,t,o){let n=e;return n.find((e=>e.variantId&&e.variantId.includes(t.id)))?n.find((e=>e.variantId&&e.variantId.includes(t.id))).quantity+=o:n.push({variantId:`gid://shopify/ProductVariant/${t.id}`,quantity:o}),n}}(e),function(e,o){e.common.getMarketDataByCountryCode=async function(){let n=[];if(sessionStorage.getItem("po_market_session")&&localStorage.getItem("po_market"))n=JSON.parse(function(e){return decodeURIComponent(escape(window.atob(e)))}(localStorage.getItem("po_market")));else try{const{apiDomain:i}=e,a=o.shop.domain,s={headers:{"Content-Type":"application/json"}},{data:l}=await t().get(`/apps/${e.proxySubpath}/market/get-data?domain=${a}`,s);l.success&&(localStorage.removeItem("po_market"),sessionStorage.setItem("po_market_session",!0),localStorage.setItem("po_market",(r=JSON.stringify(l.data),window.btoa(unescape(encodeURIComponent(r))))),n=l.data,l.data.length||console.log("PO market adjustment default"))}catch(e){console.log("Error:",e)}var r;const i=Shopify.country;let a=n.length&&n.find((e=>e.catalog&&Object.values(e.catalog).length&&e.catalog.markets.nodes[0].regions.includes(i)));e.marketData=a||{},Object.keys(e.marketData).length||1!=Shopify.currency.rate||(sessionStorage.setItem("po_market_session",!1),e.marketStatus=!1)},e.common.convertRate=function(t,o){let n=t;if(e.marketStatus&&Shopify&&Shopify.currency){let r=parseFloat(Shopify.currency.rate),i=e.marketData.parent&&e.marketData.parent.adjustment?e.marketData.parent.adjustment.value:0,a=e.marketData.parent&&e.marketData.parent.adjustment?e.marketData.parent.adjustment.type:"";n=a&&i?"PERCENTAGE_DECREASE"==a?"checkout"==o?parseFloat((Number(t)*(1-Number(i)/100)).toFixed(2)):parseFloat((Number(t)*Number(r)*(1-Number(i)/100)).toFixed(2)):"checkout"==o?parseFloat((Number(t)*(1+Number(i)/100)).toFixed(2)):parseFloat((Number(t)*Number(r)*(1+Number(i)/100)).toFixed(2)):"checkout"==o?parseFloat(Number(t).toFixed(2)):parseFloat((Number(t)*Number(r)).toFixed(2))}return n}}(e,o),u(e,o,s),d(e,i,a,o),e.common.initLazyLoading(),function(e,t,o,n){const r=new f(e,t,true,n);e.po.customHideProp=r.customHideProp.bind(r),e.po.handleChangeValue=r.handleChangeValue.bind(r),e.po.optionHandler=r,e.getSelectedOptions={all:()=>e.currentSelectedOptions?.allValues||[],byLabel:t=>e.currentSelectedOptions?.byLabel[t]||[],byId:t=>e.currentSelectedOptions?.byOptionId[t]||[],byOptionSet:t=>e.currentSelectedOptions?.byOptionSetId[t]||[],getValue:t=>{const o=e.currentSelectedOptions?.byLabel[t];return o&&o.length>0?o[0].value:null},getValues:t=>{const o=e.currentSelectedOptions?.byLabel[t];return o?o.map((e=>e.value)):[]},isSelected:(t,o)=>{const n=e.currentSelectedOptions?.byLabel[t];return!!n&&n.some((e=>e.value===o))},getPriceByLabel:t=>{const o=e.currentSelectedOptions?.priceBreakdown[t];return o?o.totalPrice:0},getPriceByValue:(t,o)=>{const n=e.currentSelectedOptions?.priceBreakdown[t];if(n&&n.values){const e=n.values.find((e=>e.value===o));return e?e.price:0}return 0},getVariantPriceByValue:(t,o)=>{const n=e.currentSelectedOptions?.priceBreakdown[t];if(n&&n.values){const e=n.values.find((e=>e.value===o));return e&&e.variantPrice||0}return 0},getVariantPriceByLabel:t=>{const o=e.currentSelectedOptions?.priceBreakdown[t];return o&&o.totalVariantPrice||0},getTotalPriceAddOn:()=>e.currentSelectedOptions?.totalPriceAddOn||0,getTotalVariantPriceAddOn:()=>e.currentSelectedOptions?.totalVariantPriceAddOn||0,getPriceBreakdown:()=>e.currentSelectedOptions?.priceBreakdown||{},isValid:()=>e.currentSelectedOptions?.validation?.isValid??!0,getRequiredOptions:()=>e.currentSelectedOptions?.validation?.requiredOptions||[],getMissingOptions:()=>e.currentSelectedOptions?.validation?.missingOptions||[],getValidOptions:()=>e.currentSelectedOptions?.validation?.validOptions||[],getValidationErrors:()=>e.currentSelectedOptions?.validation?.errors||[],getValidationSummary:()=>{const t=e.currentSelectedOptions?.validation;return t?{isValid:t.isValid,totalRequired:t.requiredOptions.length,totalMissing:t.missingOptions.length,totalValid:t.validOptions.length,message:t.isValid?"All required options are selected":`${t.missingOptions.length} required option(s) need to be selected`,missingLabels:t.missingOptions.map((e=>e.label)),errors:t.errors,details:{required:t.requiredOptions,missing:t.missingOptions,valid:t.validOptions}}:{isValid:!0,message:"No validation data available",details:{}}},isRequired:t=>(e.currentSelectedOptions?.validation?.requiredOptions||[]).some((e=>e.label===t)),isMissing:t=>(e.currentSelectedOptions?.validation?.missingOptions||[]).some((e=>e.label===t)),getFormattedSelectionsWithPrices:()=>{const t=e.currentSelectedOptions?.allValues||[],o={};return t.forEach((e=>{o[e.label]||(o[e.label]=[]),o[e.label].push({value:e.value,price:e.price||0,variantPrice:e.variantPrice||0})})),Object.entries(o).map((([e,t])=>`${e}: ${t.map((e=>{let t="";return e.price>0&&(t=`+${e.price.toFixed(2)}`),e.variantPrice>0&&(t+=t?` (+${e.variantPrice.toFixed(2)} variant)`:`+${e.variantPrice.toFixed(2)} variant`),t?`${e.value} (${t})`:e.value})).join(", ")}`)).join(" | ")},getPriceSummary:()=>{const t=e.currentSelectedOptions?.totalPriceAddOn||0,o=e.currentSelectedOptions?.totalVariantPriceAddOn||0,n=e.currentSelectedOptions?.priceBreakdown||{};return{total:t,totalVariant:o,grandTotal:t+o,formattedTotal:`${t.toFixed(2)}`,formattedVariantTotal:`${o.toFixed(2)}`,formattedGrandTotal:`${(t+o).toFixed(2)}`,details:Object.entries(n).map((([e,t])=>({label:e,price:t.totalPrice,variantPrice:t.totalVariantPrice||0,formattedPrice:`${t.totalPrice.toFixed(2)}`,formattedVariantPrice:`${(t.totalVariantPrice||0).toFixed(2)}`,values:t.values}))).filter((e=>e.price>0||e.variantPrice>0))}},clearAll:()=>{r.optionValueList=[],r.updateGlobalSelectedOptions()},clearByLabel:e=>{r.optionValueList=r.optionValueList.filter((t=>t.label!==e)),r.updateGlobalSelectedOptions()},clearById:e=>{r.optionValueList=r.optionValueList.filter((t=>t.id!==e)),r.updateGlobalSelectedOptions()}},n&&n.length>0&&r.updateGlobalSelectedOptions()}(e,i,0,s),function(e,o,n){e.po.toggleUploadContainerVisibility=function({option:t,selector:o=""}){const n=document.querySelector(o);if(!n)return;const i=n.closest("#po_stack"+t.id);if(!i)return;const a=i.querySelector(`.file-uploaded${t.id}`),s=a?a.querySelectorAll('[class*="file-upload-item-"]').length:0,l=t.max_number_file_upload||1;let c=null;c=(e?.settings?.generals?.file_display_type??r.FILE_DISPLAY_TYPE.MULTIPLE_FILE_PER_ROW)===r.FILE_DISPLAY_TYPE.SINGLE_FILE_PER_ROW?i.querySelector(".po-dropzone"):i.querySelector(".upload-frame"),c&&(c.style.display=s>=l?"none":"block")},e.po.removeFileUploaded=function({id:t,option:o,selector:i="",optionSetConditionType:a}){const s=document.querySelector(i),l=s.closest(4!==a||window.bss_admin_option?".bss-po-product-page:not(.bss-po-specific-variant)":".bss-po-product-page.bss-po-specific-variant"),c=l.getAttribute("data-position"),p=l.querySelector(`.file-uploaded${o.id}`),u=l.querySelector("#po_label"+o.id);l.querySelector(`#errorfile${o.id}`).style.cssText="display : none;",p.querySelector(`.file-upload-item-${t}`).remove();const d=n[`${c}-${o.id}`].findIndex((e=>e.id===t));if(-1!=d&&n[`${c}-${o.id}`].splice(d,1),(o.extra_price.file_upload_extra_price||o.extra_price.file_upload_extra_variant_price)&&0===n[`${c}-${o.id}`].length&&(s&&s.value&&(s.value=""),u.querySelector(".po-extra-price")&&u.querySelector(".po-extra-price").parentNode.removeChild(u.querySelector(".po-extra-price"))),[r.PRICING.CODE.ADVANCED,r.PRICING.CODE.NEW_ADVANCED,r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&e.enableDisplayProductPrice&&e.enableAddOns){let e=new Event("BSSchangeProductPrice",{bubbles:!0});document.dispatchEvent(e)}if(e.po.toggleUploadContainerVisibility({option:o,selector:i}),e.po.optionHandler){const t=e.optionSets.find((e=>e.options.some((e=>e.id===o.id))));t&&e.po.handleChangeValue({selector:s,optionType:"file_upload",appliedOptionSetID:t.id,optionID:o.id,labelOnProduct:o.label_on_product,maxSelector:null,position:0,optionSetConditionType:t.product_condition_type})}},e.po.uploadFile=async function({option:i,selector:a="",optionSetConditionType:s}){const l=e?.settings?.generals?.file_display_type??r.FILE_DISPLAY_TYPE.MULTIPLE_FILE_PER_ROW,c=document.querySelector(a),p=c.closest(".bss-po-product-page"),u=p.getAttribute("data-position"),d=p.querySelector(`.file-uploaded${i.id}`),_=document.querySelector("#po_label"+i.id),{apiDomain:m,storeId:h}=e,f=o.shop.domain,y=["image/gif","image/jpeg","image/png","image/svg+xml","image/webp"],b=p.querySelector(`#errorfile${i.id}`),g=c.files;let v=0;const S=d.querySelector(".po-file-loading"),O=c.labels[0];let I;if(S.style.display="block",c.disabled=!0,O.classList.add("disabled"),l===r.FILE_DISPLAY_TYPE.SINGLE_FILE_PER_ROW&&(I=d.closest(".po-dropzone-container").querySelector(".po-dropzone"),I.classList.add("po-dropzone-highlight"),I.classList.add("po-dropzone-uploading"),g&&g.length>0)){const e=S.querySelector(".po-dropzone-uploading-filename");e&&(e.textContent=g[0].name)}n[`${u}-${i.id}`]||(n[`${u}-${i.id}`]=[]),b.style.cssText="display : none;";const x=e=>(b.textContent=`File type must be: ${e}`,P(),"cancel");function P(){b.style.display="flex",b.style.gridColumn="span 3",b.style.color="red",c.value="",c.disabled=!1,S.style.display="none",O.classList.remove("disabled"),l===r.FILE_DISPLAY_TYPE.SINGLE_FILE_PER_ROW&&(I.classList.remove("po-dropzone-highlight"),I.classList.remove("po-dropzone-uploading"))}const E=()=>(b.style.display="none","accept");function T(e){switch(i.file_type){case"all":return E();case"image":return["jpeg","jpg","png","svg","tiff","tif"].includes(e)?E():x("JPEG, JPG, PNG, SVG, TIFF, TIF");case"document":return["pdf","doc","docx","html","htm","xls","xlsx","txt"].includes(e)?E():x("PDF, DOC, DOCX, HTML, HTM, XLS, XLSX, TXT");case"custom":return i.custom_file_type&&!i.custom_file_type.split(",").map((e=>e.trim().toLowerCase())).includes(e)?x(i.custom_file_type.split(",").map((e=>e.trim().toUpperCase())).join(", ")):E()}}const C=p.querySelectorAll(`.file-uploaded${i.id} [class*='file-upload-item']`);if(C.length>0){const e=C[C.length-1].classList.item(0);v=parseInt(e.slice(-1))}const w=Array.from(C).map((e=>e.outerHTML));if(g&&g.length>0){let o=g.length;if([r.PRICING.CODE.ADVANCED,r.PRICING.CODE.NEW_ADVANCED,r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)?i.max_number_file_upload:i.max_number_file_upload=1,o+C.length>i.max_number_file_upload)b.textContent=`${e.settings.translations.max_number_uploaded_text}: ${i.max_number_file_upload}`,P();else{const p=50,S=20,O=5;let x=0;x="function"==typeof bssFixSupportCustomSizeCompareFileUpload?bssFixSupportCustomSizeCompareFileUpload(e,i,a,x):[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)?p:[r.PRICING.CODE.ADVANCED,r.PRICING.CODE.NEW_ADVANCED].includes(e.currentPlan)?S:O;for(let a=0;a<o;a++)if(g[a]){let o=g[a].size/1024/1024;if("cancel"==T(g[a].name.substring(g[a].name.lastIndexOf(".")+1).toLowerCase()))break;if(o>x){b.textContent=`${e.settings.translations.check_size_text} ${x}MB`,P();break}const s=g[a].type,c=new FormData;c.append("filetoupload",g[a]);try{const{data:o}=await t().post(`${m}/upload-image/uploadFile?shopId=${h}&domain=${f}`,c,{headers:{"Content-Type":"multipart/form-data"}});if(o.success){let t=o?.cdn_url;"function"==typeof bssFixSupportUsePublicImage&&(t=o.public_url);const c=decodeURI(t),p=y.includes(s);n[`${u}-${i.id}`].push({id:a+1+v,url:c});let _="";if(l===r.FILE_DISPLAY_TYPE.MULTIPLE_FILE_PER_ROW){_=`<div class='file-upload-item-${a+1+v} po-frame-uploaded'>`,_+='<div class="po-frame-uploaded--action">',_+=`<span class='see-file-${a+1+v}' class="po-upload-see">\n                                                                <a  href=${c} target="_blank">\n                                                                    <i class="fa-see-custom"></i>\n                                                                </a>\n                                                            </span>`,_+=`<span class='remove-file-${a+1+v}' class="po-upload-remove">\n                                                                <i class="fa-trash-custom"></i>\n                                                            </span>`,_+="</div>",_+=p?`<div class="po-upload-frame-img"><img src=${c} alt=${o.fileName} class="po-upload-img" title=${o.fileName}/></div>`:`<div class="po-upload-frame-document">\n                                    <svg xmlns="http://www.w3.org/2000/svg" class="fa-document-file" width="31" height="39" viewBox="0 0 31 39" fill="none">\n                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M5.16667 2.05263C4.3445 2.05263 3.556 2.37702 2.97464 2.95443C2.39327 3.53185 2.06667 4.31499 2.06667 5.13158V33.8684C2.06667 34.685 2.39327 35.4682 2.97464 36.0456C3.556 36.623 4.3445 36.9474 5.16667 36.9474H25.8333C26.6555 36.9474 27.444 36.623 28.0254 36.0456C28.6067 35.4681 28.9333 34.685 28.9333 33.8684V14.1921C28.9332 13.92 28.8243 13.6589 28.6306 13.4665L17.4415 2.35345C17.2478 2.16102 16.985 2.05275 16.7111 2.05263H5.16667ZM1.51328 1.503C2.48222 0.540647 3.79638 0 5.16667 0H16.7111C17.5331 0.000174405 18.3217 0.324636 18.9029 0.902022M18.9029 0.902022L30.0917 12.0149C30.673 12.5921 30.9998 13.3752 31 14.1917V33.8684C31 35.2294 30.4557 36.5346 29.4867 37.497C28.5178 38.4594 27.2036 39 25.8333 39H5.16667C3.79638 39 2.48222 38.4594 1.51328 37.497C0.544344 36.5346 0 35.2294 0 33.8684V5.13158C0 3.7706 0.544343 2.46536 1.51328 1.503" fill="#203888"/>\n                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M7.23333 16.4211C7.23333 15.8542 7.69597 15.3947 8.26667 15.3947H22.7333C23.304 15.3947 23.7667 15.8542 23.7667 16.4211C23.7667 16.9879 23.304 17.4474 22.7333 17.4474H8.26667C7.69597 17.4474 7.23333 16.9879 7.23333 16.4211ZM7.23333 22.5789C7.23333 22.0121 7.69597 21.5526 8.26667 21.5526H18.6C19.1707 21.5526 19.6333 22.0121 19.6333 22.5789C19.6333 23.1458 19.1707 23.6053 18.6 23.6053H8.26667C7.69597 23.6053 7.23333 23.1458 7.23333 22.5789ZM7.23333 28.7368C7.23333 28.17 7.69597 27.7105 8.26667 27.7105H14.4667C15.0374 27.7105 15.5 28.17 15.5 28.7368C15.5 29.3037 15.0374 29.7632 14.4667 29.7632H8.26667C7.69597 29.7632 7.23333 29.3037 7.23333 28.7368Z" fill="#203888"/>\n                                    </svg>\n                                    <span class="po-file-uploaded-name">${o.fileName}</span>\n                                    </div>`,_+="</div>",w.push(_);const t=w.join("");let n="Uploading";"function"==typeof bssFixSupportCustomUploading&&(n=bssFixSupportCustomUploading(e)),d.innerHTML=t+`\n                                <div class="po-file-loading" style="display: block;">\n                                    <div>${n} </div>\n                                    <progress value="100" max="100"  style="--value: 100; --max: 100;" class="po-progress"></progress>\n                                </div>`}else{_=`<div class='file-upload-item-${a+1+v} dropzone-file-upload-item'>`,_+='<div class="po-dropzone-uploaded-content">',p?(_+=`<div class="po-frame-uploaded po-dropzone-frame-uploaded"><img src=${c} alt=${o.fileName} class="po-upload-img po-dropzone-upload-img"  title=${o.fileName}/></div>`,_+='<div class="po-dropzone-uploaded--action">',_+=`<a href=${c} target="_blank" class="po-file-uploaded-name po-dropzone-uploaded-name">${o.fileName}</a>`,_+=`<span class='remove-file-${a+1+v} po-dropzone-uploaded-remove'>\n                                                                <i class="fa-trash-custom dropzone-fa-trash-custom"></i>\n                                                            </span>`,_+="</div>"):(_+='<div class="po-upload-frame-document po-dropzone-frame-document">\n                                                                        <svg xmlns="http://www.w3.org/2000/svg" class="fa-document-file" width="31" height="39" viewBox="0 0 31 39" fill="none">\n                                                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M5.16667 2.05263C4.3445 2.05263 3.556 2.37702 2.97464 2.95443C2.39327 3.53185 2.06667 4.31499 2.06667 5.13158V33.8684C2.06667 34.685 2.39327 35.4682 2.97464 36.0456C3.556 36.623 4.3445 36.9474 5.16667 36.9474H25.8333C26.6555 36.9474 27.444 36.623 28.0254 36.0456C28.6067 35.4681 28.9333 34.685 28.9333 33.8684V14.1921C28.9332 13.92 28.8243 13.6589 28.6306 13.4665L17.4415 2.35345C17.2478 2.16102 16.985 2.05275 16.7111 2.05263H5.16667ZM1.51328 1.503C2.48222 0.540647 3.79638 0 5.16667 0H16.7111C17.5331 0.000174405 18.3217 0.324636 18.9029 0.902022M18.9029 0.902022L30.0917 12.0149C30.673 12.5921 30.9998 13.3752 31 14.1917V33.8684C31 35.2294 30.4557 36.5346 29.4867 37.497C28.5178 38.4594 27.2036 39 25.8333 39H5.16667C3.79638 39 2.48222 38.4594 1.51328 37.497C0.544344 36.5346 0 35.2294 0 33.8684V5.13158C0 3.7706 0.544343 2.46536 1.51328 1.503" fill="#203888"/>\n                                                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M7.23333 16.4211C7.23333 15.8542 7.69597 15.3947 8.26667 15.3947H22.7333C23.304 15.3947 23.7667 15.8542 23.7667 16.4211C23.7667 16.9879 23.304 17.4474 22.7333 17.4474H8.26667C7.69597 17.4474 7.23333 16.9879 7.23333 16.4211ZM7.23333 22.5789C7.23333 22.0121 7.69597 21.5526 8.26667 21.5526H18.6C19.1707 21.5526 19.6333 22.0121 19.6333 22.5789C19.6333 23.1458 19.1707 23.6053 18.6 23.6053H8.26667C7.69597 23.6053 7.23333 23.1458 7.23333 22.5789ZM7.23333 28.7368C7.23333 28.17 7.69597 27.7105 8.26667 27.7105H14.4667C15.0374 27.7105 15.5 28.17 15.5 28.7368C15.5 29.3037 15.0374 29.7632 14.4667 29.7632H8.26667C7.69597 29.7632 7.23333 29.3037 7.23333 28.7368Z" fill="#203888"/>\n                                                                        </svg>\n                                                                    </div>',_+='<div class="po-dropzone-uploaded--action">',_+=`<a href=${c} target="_blank" class="po-file-uploaded-name po-dropzone-uploaded-name">${o.fileName}</a>`,_+=`<span class='remove-file-${a+1+v} po-dropzone-uploaded-remove'>\n                                                                <i class="fa-trash-custom dropzone-fa-trash-custom"></i>\n                                                            </span>`,_+="</div>"),_+="</div>",_+="</div>",w.push(_);const t=w.join("");let n="Uploading";"function"==typeof bssFixSupportCustomUploading&&(n=bssFixSupportCustomUploading(e)),d.innerHTML=t+`\n                                <div class="po-file-loading po-dropzone-file-loading" style="display: block;">\n                                    <div class="po-dropzone-file-loading-container">\n                                        <div class="po-dropzone-placeholder-file-loading"></div>\n                                        <div class="po-dropzone-content-file-loading">\n                                            <div class="po-dropzone-uploading-filename-container">${n} <span class="po-dropzone-uploading-filename">${g[a+1]?.name||""}</span> </div>\n                                            <progress value="100" max="100"  style="--value: 100; --max: 100;" class="po-progress po-dropzone-progress"></progress>\n                                        </div>\n                                </div>`}}}catch(e){console.log("Cant upload file to server",e)}}l===r.FILE_DISPLAY_TYPE.SINGLE_FILE_PER_ROW&&(I.classList.remove("po-dropzone-highlight"),I.classList.remove("po-dropzone-uploading"));const E=d.querySelectorAll(".po-file-loading");E[E.length-1].style.display="none",n[`${u}-${i.id}`].forEach(((t,o)=>{d.querySelector(`.remove-file-${t.id}`).addEventListener("click",(o=>{o.stopPropagation(),o.preventDefault(),e.po.removeFileUploaded({id:t.id,option:i,selector:a,optionSetConditionType:s})}))})),e.po.displayPriceAddOnsWithChosenOptions({option:i,element:c,currentLabel:_,optionSetConditionType:s}),e.po.toggleUploadContainerVisibility({option:i,selector:a})}}if([r.PRICING.CODE.ADVANCED,r.PRICING.CODE.NEW_ADVANCED,r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&e.enableDisplayProductPrice&&e.enableAddOns){let e=new Event("BSSchangeProductPrice",{bubbles:!0});document.dispatchEvent(e)}c.disabled=!1,c.value="",S.style.display="none",O.classList.remove("disabled")}}(e,o,n),y(e),function(e){e.po.displayColorPickerWithChosenValue=function(t,o=""){const n=document.querySelector(o),i=n.closest(`#po_stack${t.id}`),a=i.querySelector(`[name="po_color_picker_value${t.id}"]`),s=i.querySelector("#po_label"+t.id),l=i.querySelector(`.po-color-picker-clear-btn${t.id}`);if(a.setAttribute("value",n.value),e.po.optionHandler){const o=e.optionSets.find((e=>e.options.some((e=>e.id===t.id))));o&&e.po.handleChangeValue({selector:n,optionType:"color_picker",appliedOptionSetID:o.id,optionID:t.id,labelOnProduct:t.label_on_product,maxSelector:null,position:0,optionSetConditionType:o.product_condition_type})}""!=a.value.trim()?i.querySelector(".fa-cancel-custom").style.display="inline-block":i.querySelector(".fa-cancel-custom").style.display="none",l.addEventListener("click",(()=>{if((t.extra_price.color_picker_extra_price||t.extra_price.color_picker_extra_variant_price)&&s.querySelector(".po-extra-price")&&s.querySelector(".po-extra-price").parentNode.removeChild(s.querySelector(".po-extra-price")),n.value="#ffffff",a.setAttribute("value",""),i.querySelector(".fa-cancel-custom").style.display="none",e.po.optionHandler&&e.po.optionHandler.updateGlobalSelectedOptions(),[r.PRICING.CODE.ADVANCED,r.PRICING.CODE.NEW_ADVANCED,r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&e.enableDisplayProductPrice&&e.enableAddOns){let e=new Event("BSSchangeProductPrice",{bubbles:!0});document.dispatchEvent(e)}})),a.addEventListener("change",(()=>{if(e.po.optionHandler){const o=e.optionSets.find((e=>e.options.some((e=>e.id===t.id))));o&&e.po.handleChangeValue({selector:n,optionType:"color_picker",appliedOptionSetID:o.id,optionID:t.id,labelOnProduct:t.label_on_product,maxSelector:null,position:0,optionSetConditionType:o.product_condition_type})}}))},e.po.getColorPickerValue=function({option:e,selector:t="",optionSetConditionType:o}){return document.querySelector(t).closest(4!==o||window.bss_admin_option?".bss-po-product-page:not(.bss-po-specific-variant)":".bss-po-product-page.bss-po-specific-variant").querySelector(`[name="po_color_picker_value${e.id}"]`).value}}(e)};if(window.bss_admin_option){_(),e.optionSets=[JSON.parse(JSON.stringify({...window.bss_admin_option}))],e.settings=window.bss_admin_option.settings,e.currentPlan=window.bss_admin_option.currentPlan,e.enableAddOns=window.bss_admin_option.settings.enableAddOns;const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"),document.getElementsByTagName("head")[0].appendChild(t),e.po.generateOptionSetOnProductPage({}),e.po.idDependencyMap=e.helper.mapIdsWithDependencies(window.bss_admin_option.options),document.addEventListener("option-set-preview",(()=>{s=[],e.optionSets=[JSON.parse(JSON.stringify({...window.bss_admin_option}))],_(),e.po.generateOptionSetOnProductPage({}),e.po.idDependencyMap=e.helper.mapIdsWithDependencies(window.bss_admin_option.options)}))}else(()=>{try{if(!e?.settings?.generals&&e.settings){const t={generals:{...ee.DEFAULT_SETTINGS.generals,count_character:e.settings.count_character||ee.DEFAULT_SETTINGS.generals.count_character,swatches_hover:e.settings.swatches_hover||ee.DEFAULT_SETTINGS.generals.swatches_hover,swatches_shape:e.settings.swatches_shape||ee.DEFAULT_SETTINGS.generals.swatches_shape,sku_type:e.settings.sku_type||ee.DEFAULT_SETTINGS.generals.sku_type,sku_separator:e.settings.sku_separator||ee.DEFAULT_SETTINGS.generals.sku_separator,add_ons_display_type:r.ADD_ONS_DISPLAY_TYPE.SHOW_AFTER_SELECTING,file_display_type:e.settings.file_display_type||r.FILE_DISPLAY_TYPE.MULTIPLE_FILE_PER_ROW},colors:{...ee.DEFAULT_SETTINGS.colors,option_title:e.settings.title_color||ee.DEFAULT_SETTINGS.colors.option_title,option_value:e.settings.value_color||ee.DEFAULT_SETTINGS.colors.option_value,text_tooltip:e.settings.text_tooltip_color||ee.DEFAULT_SETTINGS.colors.text_tooltip,text_tooltip_background:e.settings.text_tooltip_background_color||ee.DEFAULT_SETTINGS.colors.text_tooltip_background,button_hover:e.settings.button_hover_color||ee.DEFAULT_SETTINGS.colors.button_hover,button_hover_text:e.settings.button_hover_text_color||ee.DEFAULT_SETTINGS.colors.button_hover_text,swatches_hover_color:e.settings.swatches_hover_color||ee.DEFAULT_SETTINGS.colors.swatches_hover_color,swatches_hover_text_color:e.settings.swatches_hover_text_color||ee.DEFAULT_SETTINGS.colors.swatches_hover_text_color},borders:ee.DEFAULT_SETTINGS.borders,sizes:{...ee.DEFAULT_SETTINGS.sizes,title_font_size:e.settings.title_size||ee.DEFAULT_SETTINGS.sizes.title_font_size,title_font_weight:e.settings.title_font_weight||ee.DEFAULT_SETTINGS.sizes.title_font_weight,text_tooltip_font_size:e.settings.text_tooltip_size||ee.DEFAULT_SETTINGS.sizes.text_tooltip_font_size,text_tooltip_font_weight:e.settings.text_tooltip_font_weight||ee.DEFAULT_SETTINGS.sizes.text_tooltip_font_weight,value_font_size:e.settings.value_size||ee.DEFAULT_SETTINGS.sizes.value_font_size,value_font_weight:e.settings.value_font_weight||ee.DEFAULT_SETTINGS.sizes.value_font_weight,textbox_number_width:e.settings.textbox_number_width||ee.DEFAULT_SETTINGS.sizes.textbox_number_width,textbox_number_height:e.settings.textbox_number_height||ee.DEFAULT_SETTINGS.sizes.textbox_number_height,checkbox_radio_width:e.settings.checkbox_radio_width||ee.DEFAULT_SETTINGS.sizes.checkbox_radio_width,dropdown_width:e.settings.dropdown_width||ee.DEFAULT_SETTINGS.sizes.dropdown_width,dropdown_height:e.settings.dropdown_height||ee.DEFAULT_SETTINGS.sizes.dropdown_height,swatches_width:e.settings.swatches_width||ee.DEFAULT_SETTINGS.sizes.swatches_width,swatches_height:e.settings.swatches_height||ee.DEFAULT_SETTINGS.sizes.swatches_height},css_selectors:{buy_it_now_btn_selector:e.settings.buy_it_now_btn_selector||ee.DEFAULT_SETTINGS.css_selectors.buy_it_now_btn_selector,cart_selector:e.settings.cart_selector||ee.DEFAULT_SETTINGS.css_selectors.cart_selector},translations:{option_text:e.settings.option_text,required_text:e.settings.required_text,min_character_text:e.settings.min_character_text,max_character_text:e.settings.max_character_text,characters_text:e.settings.characters_text,min_value_text:e.settings.min_value_text,max_value_text:e.settings.max_value_text,min_selector_text:e.settings.min_selector_text,max_selector_text:e.settings.max_selector_text,min_quantity_text:e.settings.min_quantity_text,max_quantity_text:e.settings.max_quantity_text,check_size_text:e.settings.check_size_text,max_number_uploaded_text:e.settings.max_number_uploaded_text,error_cut_off_time:e.settings.error_cut_off_time,and_text:e.settings.and_text,error_date_range:e.settings.error_date_range,error_email_format_message:e.settings.error_email_format_message,button_choose_file_text:e.settings.button_choose_file_text,edit_options_text:e.settings.edit_options_text,in_cart_update_button_text:e.settings.in_cart_update_button_text,in_cart_cancel_button_text:e.settings.in_cart_cancel_button_text,discount_button:e.settings.discount_button,discount_input_placeholder:e.settings.discount_input_placeholder,discount_error_empty:e.settings.discount_error_empty,discount_error_invalid:e.settings.discount_error_invalid,discount_value_text:e.settings.discount_value_text,add_ons_text:e.settings.add_ons_text}};e.settings=t}e.settings&&(e.settings=(0,ee.validateAndFormatAdvancedSettings)(e.settings)),e.cartSelector=e.settings.css_selectors.cart_selector,e.buyItNowBtnSelector=e.settings.css_selectors.buy_it_now_btn_selector}catch(e){console.log("convertOldSettingsToNewStructure ~ error:",e)}})(),function(e){if(e?.optionSets?.length)for(let t=0;t<e.optionSets.length;t++){e.optionSets[t]={...v.defaultOptionSet,...e.optionSets[t]},"free"===e.currentPlan&&(e.optionSets[t].options=e.optionSets[t].options.filter((e=>![r.OPTION_TYPE.FILE_UPLOAD,r.OPTION_TYPE.DATE_PICKER,r.OPTION_TYPE.COLOR_PICKER,r.OPTION_TYPE.DROPDOWN_THUMBNAIL,r.OPTION_TYPE.EMAIL].includes(parseInt(e.option_type)))));for(let o=0;o<e.optionSets[t].options.length;o++)e.optionSets[t].options[o]={...v.defaultOption,...e.optionSets[t].options[o]},e.optionSets[t].options[o].conditional_options=e.optionSets[t].options[o].conditional_options.map((e=>({...v.defaultConditionalOptions,...e}))),e.optionSets[t].options[o].extra_price={...v.defaultExtraPrice,...e.optionSets[t].options[o].extra_price},e.optionSets[t].options[o].date_time_config=S(e.optionSets[t].options[o].date_time_config)}}(e),_(),function(e,t){e.po.priceElements=function(t){const o=e.page.isHomePage(),n=`[bss-po-product-id="${t}"]`;return((e,o)=>{let n=document.querySelectorAll(e),r=!1;return!n.length&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().priceIncrease&&(r=!0,n=function(e,t=document){const o=[],n=document.evaluate(e,t,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);for(let e=0;e<n.snapshotLength;e++)o.push(n.snapshotItem(e));return o}(o?`//*[contains(@class, "featured-product") or contains(@id, "featured-product")][.//form[@id='product_form_${t}']]//*[contains(@class, "money") or contains(@id, "money") or contains(@class, "product-price") or contains(@id, "product-price") or @product-price or contains(@class, "price-item") or contains(@id, "price-item")]`:'//*[contains(@class, "money") or contains(@id, "money") or contains(@class, "product-price") or contains(@id, "product-price") or @product-price or contains(@class, "price-item") or contains(@id, "price-item")]')),Array.from(n).filter((e=>{const t=window.getComputedStyle(e),o=e.getBoundingClientRect();return r?null!==e.offsetParent&&"none"!==t.display&&"hidden"!==t.visibility&&"0"!==t.opacity&&o.top>=0&&o.left>=0&&o.bottom<=window.innerHeight&&o.right<=window.innerWidth:e}))})((o?[`[bss-po-featured-product-key="${t}"] ${n}[bss-po-product-price]`,`[bss-po-featured-product-key="${t}"] ${n}[bss-po-product-compare-price]`,`[bss-po-featured-product-key="${t}"] ${n}[bss-po-product-sale-price]`,`[id*="product_form_${t}"] ${n}[bss-po-product-price]`,`[id*="product_form_${t}"] ${n}[bss-po-product-compare-price]`,`[id*="product_form_${t}"] ${n}[bss-po-product-sale-price]`]:[`${n}[bss-po-product-price]`,`${n}[bss-po-product-compare-price]`,`${n}[bss-po-product-sale-price]`]).join(","),o)},e.po.handleProductPriceElement=function(o,n=""){const r=(o.product?o.product:{}).id;e.po.priceElements(r).forEach((e=>{const t=e.parentNode;t.setAttribute("bss-po-parent-price","true"),t.setAttribute("bss-po-product-id",r)})),e.po.handleChangePrice(o,n,t),e.po.handleChangeVariant(o,n),t=!1},e.po.handleChangePrice=async function(t,o="",n){let i=t.product?t.product:t,a=i.variants;const s=i.id;let l=e.po.priceElements(s),c=e.po.appliedOptionSetForOneProduct,p=e.po.appliedOptionSetForSpecificVariant,u=e.po.variantProductIdApplyOptionSet;if(e.home.productsData&&e.home.productsData.length&&e.home.productsData.forEach((t=>{t.id==o&&(c=e.po.getAppliedOptionSetOnProductPage(t),p=e.po.getAppliedOptionSetOnProductPageForVariant({variantId:t.variantId,productData:t}),u=t.variantId)})),"function"!=typeof bssFixSupportCustomPriceIncreament&&(![r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL,r.PRICING.CODE.NEW_ADVANCED].includes(e.currentPlan)||!e.enableAddOns||window.bssCaculatingPrice||!c&&!p))return l.forEach((e=>{e.style.visibility="visible"})),void(window.bssCaculatingPrice=!1);if(p)if(e.page.isHomePage()){let e=document.querySelector(`[bss-po-featured-product-key='${o}']`);if(!e&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(e=document.querySelector(`[id*='product_form_${o}']`)),e){let t=e?.querySelector(`[bss-po-featured-product-key='${o}'] .bss-po-product-page.bss-po-specific-variant`);if(!t&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(t=e?.querySelector(`[id*='product_form_${o}'] .bss-po-product-page.bss-po-specific-variant`)),!t)return}}else if(!document.querySelector(".bss-po-product-page.bss-po-specific-variant"))return;window.bssCaculatingPrice=!0;let d=!1,_=i.price;const m=Shopify.theme.name.toLowerCase()||"";a.length>1&&(d=e.common.getCurrentVariant(i,o),_=d.price),"undefined"!=typeof BSS_B2B&&(1==BSS_B2B.shopModules[0].status||1==BSS_B2B.shopModules[1].status)&&BSS_B2B.cp&&BSS_B2B.cp.productAfterUseCP&&await new Promise((e=>{let t=setInterval((function(){try{const o=BSS_B2B.cp.productAfterUseCP.filter((e=>e.id==i.id));o.length&&(_=o[0].price),"number"==typeof Number(_)&&(clearInterval(t),e(_))}catch(e){console.error(e),clearInterval(t)}}),500)}));let{chosenOptions:h,totalExtraPrice:f,totalVariantExtraPrice:y}=e.po.getSelectedOptionSet({appliedOptionSet:c,appliedOptionSetForSpecificVariant:p,variantProductIdApplyOptionSet:u,idProductAddToCart:o}),b=e.common.chosenOptionsMapToLinePropertiesObject(h),g=e.po.customHideProp(c,b,f,y,o);g=e.po.customHideProp(p,g.customAttributes,g.totalExtraPrice,g.totalVariantExtraPrice,o),f=g.totalExtraPrice,f=e.common.convertRate(f);let v=Number(_/100)+Number(f),S=e.money.addMoneyWithCurrencyFormat("0",v);if(!n&&["debut"].includes(m)){const e=document.querySelectorAll(`[bss-po-parent-price][data-sale-price][bss-po-product-id="${s}"],[bss-po-parent-price][data-regular-price][bss-po-product-id="${s}"]`);l=[...l,...e]}"function"==typeof bssFixSupportGetPriceElementProduct&&"function"==typeof bssFixSupportGetPriceElementProduct().getNewPriceElement&&(l=bssFixSupportGetPriceElementProduct().getNewPriceElement(e,s,f)),l.forEach(((t,o)=>{"function"==typeof bssFixSupportGetPriceElementProduct&&"function"==typeof bssFixSupportGetPriceElementProduct().getNewModifiedPriceWithCurrency&&(S=bssFixSupportGetPriceElementProduct().getNewModifiedPriceWithCurrency(e,"undefined"!=typeof BSS_B2B?BSS_B2B:{},v,f,t,n,o,s)),t.innerHTML=S,t.style.visibility="visible"}));let O=document.querySelectorAll('[bss-po-product-id="'+s+'"][bss-po-product-compare-price]');e.page.isHomePage()&&(O=document.querySelectorAll('div[bss-po-featured-product-key="'+s+'"] [bss-po-product-id="'+s+'"][bss-po-product-compare-price]')),"function"==typeof bssFixSupportGetPriceElementProduct&&"function"==typeof bssFixSupportGetPriceElementProduct().getNewComparePriceElement&&(O=bssFixSupportGetPriceElementProduct().getNewComparePriceElement(e,s)),O.length&&O.forEach((t=>{try{const o=d?d.compare_at_price:i.compare_at_price,n=Number(o/100)+Number(f);let r=e.money.addMoneyWithCurrencyFormat("0",n);"function"==typeof bssFixSupportGetPriceElementProduct&&"function"==typeof bssFixSupportGetPriceElementProduct().getNewModifiedCompareAtPriceWithCurrency&&(r=bssFixSupportGetPriceElementProduct().getNewModifiedCompareAtPriceWithCurrency(e,r)),t.innerHTML=r}catch(e){console.log("Error compare at price: ",e);const o=t.parentNode;t.style.visibility="hidden",o.style.display="none"}})),window.bssCaculatingPrice=!1},e.po.handleChangeVariant=function(t,o=""){let n=t.product?t.product:t,r=document.querySelectorAll(e.common.getSelectorVariant());if(e.page.isHomePage()){let t=e.common.getSelectorVariant().map((e=>{if(!e.includes("[bss-po-featured-product-key")){let t=`[bss-po-featured-product-key='${o}'] `+e;return!document.querySelector(t)&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(t=`[id*='product_form_${o}'] `+e),t}}));t.every((e=>!e))||(r=document.querySelectorAll(t))}"function"==typeof bssFixSupportGetVariantSelectors&&(r=bssFixSupportGetVariantSelectors(e,r)),r.forEach((t=>{let r=800,i="change";if("function"==typeof bssFixSupportEventChangeVariant){let t=bssFixSupportEventChangeVariant(e,r,i,n,o,r);r=t[0],i=t[1]}t.parentNode.addEventListener(i,e.helper.debounce((()=>e.po.handleChangePrice(n,o)),r))}))}}(e,!0),g(),function(e,t,o){e.home={},e.home.formActionCartHomePage=function(){return document.querySelectorAll(['[bss-po-featured-product-key] form[id*="product_form"]',"#page-content .shopify-section .product-area",".bss-po-custom-quick-buy-drawer"])},e.po.generateOptionSetOnHomePage=async function(){let t=document.querySelectorAll("[bss-po-featured-product-key]");!t.length&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(t=document.querySelectorAll("form[id^='product_form_']"));const o=[];if(t.length&&e.enableFeaturedProduct){t.forEach((e=>{let t=e.getAttribute("bss-po-featured-product-key");if(!t&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct){const o=e?.getAttribute("id")?.match(/product_form_(\d+)/);o&&(t=o[1])}o.push(`id:"${t}"`)}));const n=await e.helper.callSearchLiquidApi(o);e.home.productsData=n,n.length&&n.forEach((async t=>{e.home.idProduct=t.id,e.home.productData=t;let o=null;const n=document.querySelector(`[bss-po-featured-product-key='${t.id}']`);if([r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&n){o=n.getAttribute("bss-po-featured-product-variant-id-first-load"),t.variantId=o;const r=n.querySelector('product-form form[action="/cart/add"] input[name="id"]');if(r){let o;r.addEventListener("change",(n=>{o&&clearTimeout(o),o=setTimeout((()=>{const o=n.target.value;o&&(t.variantId=o,e.po.generateOptionSetForVariant({variantId:o,idProductOnHomePage:t.id,dataHomePage:t}))}),200)}))}}await e.po.generateOptionSetOnProductPage({variantId:o,idProductOnHomePage:t.id,dataHomePage:t}),("function"==typeof bssFixSupportCustomPriceIncreament||[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&e.enableDisplayProductPrice&&e.enableAddOns)&&document.addEventListener("BSSchangeProductPrice",e.helper.debounce((()=>e.po.handleChangePrice(t,t.id))))}))}},e.po.getOptionsSelected=function(n=!1){let i=e.po.getAppliedOptionSetOnProductPage();if(!i)return;let a=t.product,s=new Map,l=new Map,c=0,p=0;i.options.forEach((t=>{let n=t.required,{requiredErrorMessage:a}=e.common.getMessageFromSettings(t);if(t.option_type==r.OPTION_TYPE.TEXT_BOX){let i=document.querySelector("#po_text_box"+t.id).value;i.length>0&&""!=i.trim()&&(t.extra_price.text_box_extra_price&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)&&e.enableAddOns?(s.set(t.label_on_cart,i+" (+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(t.extra_price.text_box_extra_price))+")"),c+=parseFloat(t.extra_price.text_box_extra_price)):s.set(t.label_on_cart,i),l.set(t.label_on_cart,i)),1==n&&0==i.length&&o.set("#po_text_box"+t.id,a)}else if(t.option_type==r.OPTION_TYPE.NUMBER){let i=document.querySelector("#po_number_field"+t.id).value;isNaN(parseInt(i))||(t.extra_price.number_field_extra_price&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)&&e.enableAddOns?(s.set(t.label_on_cart,i+" (+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(t.extra_price.number_field_extra_price))+")"),c+=parseFloat(t.extra_price.number_field_extra_price)):s.set(t.label_on_cart,i),l.set(t.label_on_cart,i)),1==n&&0==i.length&&o.set("#po_number_field"+t.id,a)}else if(t.option_type==r.OPTION_TYPE.CHECKBOX){let i=[],p=[];document.querySelectorAll('input[name="po_checkbox'+t.id+'"]').forEach(((e,t)=>{e.checked&&(p.push(t),i.push(e.value))}));let u=0;p.forEach((e=>{t.extra_price.checkbox_extra_price[e]&&(u+=parseFloat(t.extra_price.checkbox_extra_price[e]))})),i.length>0&&(u&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)&&e.enableAddOns?(s.set(t.label_on_cart,i.join(", ")+" (+ "+e.money.addMoneyWithCurrencyFormat("0",u)+")"),c+=u):s.set(t.label_on_cart,i.join(", ")),l.set(t.label_on_cart,i.join(", "))),1==n&&0==i.length&&o.set('input[name="po_checkbox'+t.id+'"]',a)}else if(t.option_type==r.OPTION_TYPE.DROPDOWN){let i=[],p=[];document.querySelectorAll(`#po_dropdown${t.id} option[id*="po_dropdown"]`).forEach(((e,t)=>{"true"==e.getAttribute("selected")&&(p.push(t),i.push(e.value))}));let u=0;p.forEach((e=>{t.extra_price.dropdown_extra_price[e]&&(u+=parseFloat(t.extra_price.dropdown_extra_price[e]))})),i.length>0&&(u&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)&&e.enableAddOns?(s.set(t.label_on_cart,i.join(", ")+" (+ "+e.money.addMoneyWithCurrencyFormat("0",u)+")"),c+=u):s.set(t.label_on_cart,i.join(", ")),l.set(t.label_on_cart,i.join(", "))),1==n&&0==i.length&&o.set("#po_dropdown"+t.id,a)}else if(t.option_type==r.OPTION_TYPE.RADIO_BUTTON){let i=!1,p=document.querySelectorAll('input[name="po_radio_button'+t.id+'"]');p.forEach(((e,t)=>{e.checked&&(i=t)}));let u=p[i];null!=u&&(t.extra_price.radio_button_extra_price[i]&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)&&e.enableAddOns?(s.set(t.label_on_cart,u.value+" (+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(t.extra_price.radio_button_extra_price[i]))+")"),c+=parseFloat(t.extra_price.radio_button_extra_price[i])):s.set(t.label_on_cart,u.value),l.set(t.label_on_cart,u.value)),1==n&&null==u&&o.set('input[name="po_radio_button'+t.id+'"]',a)}else if(t.option_type==r.OPTION_TYPE.SWATCH){let i=[],p=[],u=[];document.querySelectorAll('input[name="po_swatch'+t.id+'"]').forEach(((e,t)=>{e.checked&&(p.push(t),i.push(e.value))}));let d=0;p.forEach((e=>{t.extra_price.swatch_extra_price[e]&&(d+=parseFloat(t.extra_price.swatch_extra_price[e]))})),i.length>0&&(d&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)&&e.enableAddOns?(s.set(t.label_on_cart,i.join(", ")+" (+ "+e.money.addMoneyWithCurrencyFormat("0",d)+")"),c+=d):s.set(t.label_on_cart,i.join(", ")),u=u.map((e=>JSON.stringify(e))),l.set(t.label_on_cart,u)),1==n&&0==i.length&&o.set('input[name="po_swatch'+t.id+'"]',a)}else if(t.option_type==r.OPTION_TYPE.BUTTON){let i=[],p=[];document.querySelectorAll('input[name="po_button'+t.id+'"]').forEach(((e,t)=>{e.checked&&(p.push(t),i.push(e.value))}));let u=0;p.forEach((e=>{t.extra_price.button_extra_price[e]&&(u+=parseFloat(t.extra_price.button_extra_price[e]))})),i.length>0&&(u&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)&&e.enableAddOns?(s.set(t.label_on_cart,i.join(", ")+" (+ "+e.money.addMoneyWithCurrencyFormat("0",u)+")"),c+=u):s.set(t.label_on_cart,i.join(", ")),l.set(t.label_on_cart,i.join(", "))),1==n&&0==i.length&&o.set('input[name="po_button'+t.id+'"]',a)}else if(t.option_type==r.OPTION_TYPE.FILE_UPLOAD){const p=i.product_condition_type;let u=e.common.getSeletorOfByOptionType(t.option_type,t.id);const d=e.common.getLinkFileUploadedBySelector({selector:u,optionId:t.id,optionSetConditionType:p});if(d&&d.length){const i=d.map((e=>e.url)).join(", ");i?(t.extra_price.file_upload_extra_price&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)&&e.enableAddOns?(s.set(t.label_on_cart,i),s.set(`Extra fee for "${t.label_on_cart}" option`,e.money.addMoneyWithCurrencyFormat("0",parseFloat(t.extra_price.file_upload_extra_price))),c+=parseFloat(t.extra_price.file_upload_extra_price)):s.set(t.label_on_cart,i),l.set(t.label_on_cart,i)):!i&&n&&o.set('input[name="po_file_upload'+t.id+'"]',a)}}else if(t.option_type==r.OPTION_TYPE.DATE_PICKER&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)){let r=document.querySelector(`input[name="po_datetime${t.id}"]`).value;"function"==typeof bssFixSupportDateTimeFeaturedProduct?r=bssFixSupportDateTimeFeaturedProduct(e,t,r):e.page.isHomePage()&&(r=document.querySelector(`[bss-po-featured-product-key='${e.home.idProductAddToCart}'] input[name="po_datetime${t.id}"]`)?.value,!r&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(r=document.querySelector(`[id*='product_form_${e.home.idProductAddToCart}'] input[name="po_datetime${t.id}"]`)?.value)),r?(s.set(t.label_on_cart,r),l.set(t.label_on_cart,r)):1!=n||r||o.set(`input[name="po_datetime${t.id}"]`,a)}else if(t.option_type==r.OPTION_TYPE.COLOR_PICKER&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)){let i=document.querySelector(`[name="po_color_picker_value${t.id}"]`).value;i.length>0&&""!=i.trim()&&(t.extra_price.color_picker_extra_price&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)&&e.enableAddOns?(s.set(t.label_on_cart,numberValue+" (+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(t.extra_price.color_picker_extra_price))+")"),c+=parseFloat(t.extra_price.color_picker_extra_price)):s.set(t.label_on_cart,i),l.set(t.label_on_cart,i)),1==n&&0==i.length&&o.set("#po_color_picker"+t.id,a)}else if(t.option_type==r.OPTION_TYPE.TEXT_AREA){let i=document.querySelector("#po_text_area"+t.id).value;i.length>0&&""!=i.trim()&&(t.extra_price.text_area_extra_price&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)&&e.enableAddOns?(s.set(t.label_on_cart,i+" (+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(t.extra_price.text_area_extra_price))+")"),c+=parseFloat(t.extra_price.text_area_extra_price)):s.set(t.label_on_cart,i),l.set(t.label_on_cart,i)),1==n&&0==i.length&&o.set("#po_text_area"+t.id,a)}else if(t.option_type==r.OPTION_TYPE.DROPDOWN_THUMBNAIL){let i=[],p=[];document.querySelectorAll(`#po_dropdown_thumbnail${t.id} option[id*="po_dropdown"]`).forEach(((e,t)=>{"true"==e.getAttribute("selected")&&(p.push(t),i.push(e.value))}));let u=0;p.forEach((e=>{t.extra_price.dropdown_thumbnail_extra_price[e]&&(u+=parseFloat(t.extra_price.dropdown_thumbnail_extra_price[e]))})),i.length>0&&(u&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)&&e.enableAddOns?(s.set(t.label_on_cart,i.join(", ")+" (+ "+e.money.addMoneyWithCurrencyFormat("0",u)+")"),c+=u):s.set(t.label_on_cart,i.join(", ")),l.set(t.label_on_cart,i.join(", "))),1==n&&0==i.length&&o.set("#po_dropdown_thumbnail"+t.id,a)}else if(t.option_type==r.OPTION_TYPE.EMAIL){let i=document.querySelector("#po_email_box"+t.id).value;i.length>0&&""!=i.trim()&&(t.extra_price.email_box_extra_price&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)&&e.enableAddOns?(s.set(t.label_on_cart,i+" (+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(t.extra_price.email_box_extra_price))+")"),c+=parseFloat(t.extra_price.email_box_extra_price)):s.set(t.label_on_cart,i),l.set(t.label_on_cart,i)),1==n&&0==i.length&&o.set("#po_email_box"+t.id,a)}else if(t.option_type==r.OPTION_TYPE.SWITCH){let i=!1,p=document.querySelectorAll('input[name="po_switch'+t.id+'"]');p.forEach(((e,t)=>{e.checked&&(i=t)}));let u=p[i];null!=u&&(t.extra_price.switch_extra_price[i]&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)&&e.enableAddOns?(s.set(t.label_on_cart,u.value+" (+ "+e.money.addMoneyWithCurrencyFormat("0",parseFloat(t.extra_price.switch_extra_price[i]))+")"),c+=parseFloat(t.extra_price.switch_extra_price[i])):s.set(t.label_on_cart,u.value),l.set(t.label_on_cart,u.value)),1==n&&null==u&&o.set('input[name="po_switch'+t.id+'"]',a)}})),c&&l.set("totalExtraPrice",parseFloat(c.toFixed(2)));let u=[];document.querySelectorAll('.single-option-selector.single-option-selector-product-template.product-form__input,.form__input.form__input--select,.single-option-selector,.single-option-radio input[type="radio"]:checked,.js.product-form__input input[type="radio"]:checked, .product-form__input .select select, .variant-wrapper .variant-input input:checked, div.variations h4.swatch__title span.nt_name_current, .form-vertical .wetheme-dropdown select, .options-selection__select-wrapper .options-selection__select select option:checked, .product__meta .product__controls-group .product__color-chips button.product__chip.selected, .product-page--form-container .product-form--variants select.product-form--variant-select option:checked, .product-form--regular .variant-selection .options-selection__option-values .options-selection__option-value-input:checked, .variant-input-wrap select option:checked, .product-options div[data-section-container] label span[data-label-value], .entry-content .swatches-wrapper input[type="radio"]:checked, .pf-container div[data-option-buttons] select option:checked, .product-form__inner .product-form__controls-group .product-form__option-select-wrapper select option:checked').forEach((e=>{u.push(e.value)})),u=u.join(" / ");let d=!1;0==u.length?d=a.variants[0]:a.variants.forEach((e=>{e.title==u&&(d=e)}));let _=document.querySelector('input[name="quantity"]'),m=[];s.forEach(((e,t)=>{m.push({key:t,value:e})}));let h=e.po.customHideProp(i,m,c,p,0);m=h.customAttributes,c=h.totalExtraPrice,p=h.totalVariantExtraPrice;let f=[],y=u?`${a.title}-${u}`:`${a.title}`;if(f=c&&_?[{variantId:`gid://shopify/ProductVariant/${d.id}`,quantity:Number(_.value)},{title:y,originalUnitPrice:c,taxable:d.taxable,sku:"",quantity:Number(_.value),customAttributes:m}]:c&&!_?[{variantId:`gid://shopify/ProductVariant/${d.id}`,quantity:1},{title:y,originalUnitPrice:c,taxable:d.taxable,sku:"",quantity:1,customAttributes:m}]:!c&&_?[{variantId:`gid://shopify/ProductVariant/${d.id}`,quantity:Number(_.value),customAttributes:m}]:[{variantId:`gid://shopify/ProductVariant/${d.id}`,quantity:1,customAttributes:m}],n)return f;if(0==o.size)return f;if(document.querySelectorAll(".bss-error-msg").forEach((e=>e.remove())),o.forEach(((e,t)=>{let o=document.querySelector(t).closest(".po-stack"),n=`<span class="bss-error-msg"><small>${e}</small></span>`;0==o.querySelectorAll(".bss-error-msg").length&&o.insertAdjacentHTML("beforeend",n)})),o.size&&1==e.settings?.generals?.scroll_to_error){const[e]=o.keys();document.querySelector(e).focus()}return null}}(e,o,i),function(e){e.cart={},e.cart.discount={},e.cart.selectQuantity={},e.cart.priceOfItemElements=function(e){return['[bss-po-cart-item-key="'+e+'"][bss-po-item-original-price]','[data-cart-item-id="'+e+'"] [data-cart-item-price-container] .cart-item__original-price','[data-cart-item-key="'+e+'"] [data-cart-item-regular-price]','[bss-po-cart-item-key="'+e+'"][bss-po-item-final-price]','[data-cart-item-key="'+e+'"] .cart-table-price .money','[data-cart-item-key="'+e+'"] .CartItem__Price']},e.cart.totalPriceOfItemElements=function(e){return['[bss-po-cart-item-key="'+e+'"][bss-po-original-line-price]','[data-cart-item-id="'+e+'"] [data-cart-item-line-price-container] .cart-item__original-price','[data-cart-item-key="'+e+'"] [data-cart-item-line-price] [data-cart-item-regular-price]','[bss-po-cart-item-key="'+e+'"][bss-po-final-line-price]','[data-cart-item-key="'+e+'"] .cart-table-line-price .money','[bss-po-cart-item-key="'+e+'"][bss-po-item-final-price]',".cart__item .cart_content_info .price_total .money",'[data-cart-item-key="'+e+'"] price-money bdi','[data-hulkapps-line-price] [data-ymq-item-key="'+e+'"]','[data-cart-item-key="'+e+'"] .CartItem__Price']},e.cart.cartSubtotalPriceElement=["[bss-po-cart-total-price]","span[data-cart-subtotal]",".cart_tot_price",".mini-cart__footer .subtotal .price",".ajaxcart .row .value","[data-hulkapps-cart-total] .ymq_cart_total_price"],e.cart.formActionCart=function(){let t=document.querySelector(["[bss-po-original-line-price]","[bss-po-item-original-price]","[bss-po-final-line-price]","[bss-po-item-final-price]","[data-cart-item-line-price-container] .cart-item__original-price","[data-cart-item-line-price] [data-cart-item-regular-price]","[data-cart-item-key]","[data-cart-item]","cart-items .cart__contents .cart__items",".cart-item .cart-item__price-wrapper",".cart__item-price-col .cart__price",".content-cart-page tr.cart_item"].join(",")),o=null;return t&&(o=t.closest('form[action*="/cart"]')),"function"==typeof bssFixSupportFixFormActionCart&&(o=bssFixSupportFixFormActionCart(e,o)),o},e.cart.quantityInputElements=['form[action="/cart"]:not(.cart-drawer__form) input[name="updates[]"]','input[aria-label="Quantity"]','input[aria-label="Mengde"]','.sf-cart__table-quantity input[name="updates[]"]','.quantity-input[name="quantity"]',"input.cart-item-qty-input",".quantity-selector input.quantity-selector__value",".cart-item--quantity .form-field .form-field-select-wrapper select.form-field-input",".product-quantity .quantity__main .quantity_num .quantity__input",'td.quantity input[name="updates[]"]','input[id^="cart-qty"]','input[aria-label="quantity"].js-qty__num'],e.cart.quantityChangeButtons=[".quantity__button.no-js-hidden","button.js-qty__adjust","span.js--qty-adjuster","button.quantity-selector__button",".quantity-controls button.alt-focus","button.plus","button.minus:not(.qty_1)","span.plus-btn","span.minus-btn","button.icon.btn",'button[name="plus"]','button[name="minus"]',"cart-qty-button a.\\#cart-item-controls-button",".QuantitySelector a.QuantitySelector__Button","span.quantity-adjuster__button",'.sf-cart__table-quantity button.scd-item__btn[data-qty-change="dec"]','.sf-cart__table-quantity button.scd-item__btn[data-qty-change="inc"]',".quantity.buttoned-input .notabutton",".cart-plus-minus .qtybutton","button.qty-adjust",".cart--item--quantity .cart--quantity--container .cart--minus",".cart--item--quantity .cart--quantity--container .cart--plus",".purchase-details__quantity .control.minus-control",".purchase-details__quantity .control.plus-control",".\\#cart-drawer-product-qty-button","cart-qty-button.\\#cart-item-quantity-controls-item",".btn-quantity",".quantity__button",".cart-item-quantity .quantity-button",".qty-button","button.ajaxcart__qty-adjust",".button-wrapper .adjust",".cart__item__quantity-plus",".cart__item__quantity-minus",".product-quantity .quantity__main button","tr.cart-item td.quantity a",".cart-product-item .qty-group .update-cart--template",'button[aria-label="button-plus"]','button[aria-label="button-minus"]',"button.qty_plus","button.qty_minus"],e.cart.checkoutButton=['form[action*="/cart"] [type="submit"][name="checkout"]',".cart__checkout-button.button","a.checkout-button.button","#cart-notification-form .button",".cart__checkout-button.button",".cart-total .proceed-to-checkout .btn",".cart--totals .cart--nav .cart--checkout-button",'button[type="submit"][name="checkout"].cart__checkout-button','button[name="checkout"][type="submit"].\\#button','button[type="submit"].cart__checkout-button','button[type="submit"][name="checkout"].button','button[type="submit"].wcp_checkout_btn','.button-checkout[data-href="/checkout"]',"#update-cart"],e.cart.removeButtons=['cart-remove-button[id^="Remove"]',"[data-cart-remove]","a.cart__remove","a.btn-link.cart-item__remove","p.txt--minor.cart__remove a","p.cart__product-meta a","a.remove","a.line-item__quantity-remove.link",".cart-table-item-remove a","button.minus.qty_1","a.cart_ac_remove","a.tt-btn-close.svg-icon-delete","a.remove_item_multi","cart-qty-button a.\\#cart-item-remove-button",".CartItem__Actions a.CartItem__Remove",".cart-column--remove a.cart-remove",".sf-cart__item-product-info button.scd-item__remove","tr[data-line] .text-left .input-group .btn.btn-danger","a.cart__product-remove",".CartItem a.CartItem__Remove",".button.button--tertiary",".cart-drawer__line-items .v-stack .text-xs.text-center",".\\#cart-drawer-product-remove",".cart__product-information .cart__remove","cart-remove-button.cart__remove","button.cart__form-item-remove",".cart__items__remove",".total-product cart-remove-button",".cart-remove .remove-icon.line_item_remove",".cart__items .cart__items__remove a",".cart__item .cart_content_info .cart__remove-btn",".cart-item cart-remove-button",'button[aria-label^="button-remove"]',"td.product-remove",".delete-item a"],e.cart.updateCartButton=[".btn-secondary.update-cart",".btn--secondary.update-cart",'.cart__actions input[name="update"]','.cart__footer button[name="update"]',".btn--secondary.cart__update",".btn--link.cart-update","row.cart-page--bottom #update_quantities"],e.cart.miniCartDrawerBox=[".drawer"],e.cart.miniCartIcon=[".header__icon--cart",".cart_icon.btn",".tap-area.relative",".\\#header-toolbar-item cart-drawer-trigger .\\#header-toolbar-item-icon",".site-cart-handle",".navlink--cart","a#cart-counter",".icon-cart:not(svg)","#cart-drawer-toggle","#cart-icon-bubble"],e.cart.miniCartNotificationBox=[".cart-notification"],e.cart.markOrderCreatedByApp=function(e,t){if("function"==typeof bssFixSupportTurnOffRevenueTracking)return e;try{let o=JSON.parse(JSON.stringify(e)),n=[Q.CREATE_FEE,Q.ASSIGN_TO_VARIANT].includes(t)?t:Number(t)||0;return Array.isArray(o)?o.push({key:X.key,value:`${n||X.value}`}):!o||!Object.keys(o)?.length||1==Object.keys(o)?.length&&o.hasOwnProperty("")||(o[X.key]=`${n||X.value}`),o}catch(t){return console.error("Failed when mark order created by PO:",t),e}},e.cart.markOldVariantAddOn=function(t){try{if(!e.checkToken)return t.map((t=>(t.customAttributes&&(t.customAttributes=e.cart.markOrderCreatedByApp(Array.isArray(t.customAttributes)?t.customAttributes:[t.customAttributes],Q.ASSIGN_TO_VARIANT)),t)))}catch(e){return console.log(e),t}return t}}(e),function(e){e.pdp={},e.dynamicPaymentUI=()=>{let t={shopPayUI:'<style>.accelerated-checkout-button{height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 44px),55px);min-height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 44px),55px);border-radius:var(--shopify-accelerated-checkout-button-border-radius, 0px);box-shadow:var(--shopify-accelerated-checkout-button-box-shadow);min-width:150px}:host([page-type="cart_page"]) .accelerated-checkout-button{height:100%;width:100%;border-radius:var(--shopify-accelerated-checkout-button-border-radius, 4px);box-shadow:var(--shopify-accelerated-checkout-button-box-shadow)}@media (forced-colors: active){.accelerated-checkout-button{border:1px solid transparent!important}:host([page-type="cart_page"]) .accelerated-checkout-button{border:1px solid transparent!important}}\n    .accelerated-checkout-button{--gravity-button-height: clamp( 25px, var(--shopify-accelerated-checkout-button-block-size, 44px), 55px );--gravity-button-min-height: clamp( 25px, var(--shopify-accelerated-checkout-button-block-size, 44px), 55px );--gravity-button-border-radius: var( --shopify-accelerated-checkout-button-border-radius, 0px );--gravity-button-padding: 0px 10px;--gravity-button-width: 100%}:host([page-type="cart_page"]) .accelerated-checkout-button{--gravity-button-height: 100%;--gravity-button-min-height: 100%;--gravity-button-border-radius: var( --shopify-accelerated-checkout-button-border-radius, 4px );--gravity-button-width: 100%}\n    .button-content{display:flex;align-items:center;justify-content:center;width:100%;height:100%;gap:3px;white-space:nowrap;container-type:inline-size;container-name:bc}.ShopPromise>.separator{margin:0 8px}@container bc (width <= 338px){.ShopPromise{display:none!important}}gravity-button{display:block}</style> <gravity-button aria-hidden="true" class="accelerated-checkout-button"><div class="button-content"><span>Buy with </span><svg xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="shop-pay-logo" viewBox="0 -2 341 81" height="20px" width="85px">\n      <title id="shop-pay-logo">Shop Pay</title>\n      <path fill-rule="evenodd" clip-rule="evenodd" d="M227.297 0C220.448 0 214.896 5.47237 214.896 12.2229V67.8125C214.896 74.563 220.448 80.0354 227.297 80.0354H328.357C335.206 80.0354 340.758 74.563 340.758 67.8125V12.2229C340.758 5.47237 335.206 0 328.357 0H227.297ZM244.999 55.8917V41.8012H253.993C262.21 41.8012 266.579 37.2604 266.579 30.379C266.579 23.4976 262.21 19.3782 253.993 19.3782H239.205V55.8917H244.999ZM244.999 24.8084H252.663C257.982 24.8084 260.595 26.9617 260.595 30.5663C260.595 34.1708 258.077 36.3242 252.9 36.3242H244.999V24.8084ZM276.795 56.6407C281.212 56.6407 284.109 54.7214 285.439 51.4445C285.819 55.0959 288.052 56.9684 292.896 55.7044L292.944 51.819C290.996 52.0063 290.616 51.3041 290.616 49.2912V39.7415C290.616 34.124 286.864 30.8003 279.93 30.8003C273.09 30.8003 269.148 34.1708 269.148 39.8819H274.468C274.468 37.1668 276.415 35.5284 279.835 35.5284C283.444 35.5284 285.107 37.0732 285.059 39.7415V40.9586L278.932 41.614C272.045 42.3629 268.246 44.9376 268.246 49.4316C268.246 53.1298 270.905 56.6407 276.795 56.6407ZM277.982 52.4276C274.99 52.4276 273.803 50.836 273.803 49.2443C273.803 47.091 276.273 46.1079 281.117 45.5462L284.917 45.1249C284.679 49.2443 281.877 52.4276 277.982 52.4276ZM310.537 57.7174C308.115 63.5221 304.22 65.2541 298.141 65.2541H295.528V60.4793H298.331C301.655 60.4793 303.27 59.4494 305.028 56.5002L294.246 31.5493H300.23L307.925 49.7593L314.764 31.5493H320.606L310.537 57.7174Z" fill="white"></path>\n      <path d="M29.5136 35.1798C21.5797 33.4835 18.0451 32.8197 18.0451 29.8064C18.0451 26.9722 20.4371 25.5604 25.221 25.5604C29.4282 25.5604 32.5036 27.3726 34.7674 30.9232C34.9382 31.1972 35.2906 31.292 35.5789 31.1445L44.506 26.6983C44.8263 26.5402 44.9438 26.1399 44.7623 25.8343C41.0569 19.5022 34.2121 16.0358 25.1996 16.0358C13.3574 16.0358 6 21.7885 6 30.9338C6 40.648 14.9591 43.1029 22.9038 44.7992C30.8484 46.4955 34.3936 47.1592 34.3936 50.1725C34.3936 53.1858 31.8095 54.6082 26.6518 54.6082C21.8893 54.6082 18.3548 52.4589 16.2191 48.2866C16.059 47.981 15.6852 47.8546 15.3756 48.0127L6.46985 52.364C6.16017 52.5221 6.03203 52.8908 6.19221 53.2069C9.72673 60.2134 16.9773 64.1538 26.6625 64.1538C38.996 64.1538 46.4494 58.496 46.4494 49.0663C46.4494 39.6365 37.4476 36.8972 29.5136 35.2009V35.1798Z" fill="white"></path>\n      <path d="M77.3525 16.0358C72.291 16.0358 67.8168 17.8059 64.6026 20.9561C64.3997 21.1458 64.0687 21.0088 64.0687 20.7349V0.621625C64.0687 0.273937 63.791 0 63.4387 0H52.2692C51.9168 0 51.6391 0.273937 51.6391 0.621625V63.0476C51.6391 63.3952 51.9168 63.6692 52.2692 63.6692H63.4387C63.791 63.6692 64.0687 63.3952 64.0687 63.0476V35.6644C64.0687 30.3754 68.1798 26.319 73.7219 26.319C79.2639 26.319 83.279 30.2911 83.279 35.6644V63.0476C83.279 63.3952 83.5566 63.6692 83.909 63.6692H95.0785C95.4309 63.6692 95.7085 63.3952 95.7085 63.0476V35.6644C95.7085 24.1591 88.0628 16.0464 77.3525 16.0464V16.0358Z" fill="white"></path>\n      <path d="M118.389 14.2552C112.324 14.2552 106.622 16.0779 102.542 18.7224C102.265 18.9016 102.169 19.2703 102.34 19.5548L107.262 27.8466C107.444 28.1416 107.828 28.247 108.127 28.0679C111.224 26.2241 114.769 25.2653 118.389 25.2864C128.138 25.2864 135.303 32.0716 135.303 41.0377C135.303 48.6763 129.569 54.3342 122.297 54.3342C116.371 54.3342 112.26 50.9311 112.26 46.1266C112.26 43.3767 113.445 41.122 116.531 39.5311C116.851 39.3625 116.969 38.9727 116.777 38.6671L112.132 30.9126C111.982 30.6598 111.662 30.5439 111.373 30.6492C105.148 32.925 100.78 38.4037 100.78 45.7579C100.78 56.8839 109.761 65.1863 122.287 65.1863C136.916 65.1863 147.434 55.1876 147.434 40.8481C147.434 25.476 135.197 14.2446 118.368 14.2446L118.389 14.2552Z" fill="white"></path>\n      <path d="M180.098 15.9515C174.449 15.9515 169.409 18.006 165.725 21.6304C165.522 21.8306 165.191 21.6831 165.191 21.4092V17.0473C165.191 16.6996 164.914 16.4256 164.561 16.4256H153.68C153.328 16.4256 153.05 16.6996 153.05 17.0473V79.3784C153.05 79.7261 153.328 80 153.68 80H164.849C165.202 80 165.48 79.7261 165.48 79.3784V58.9385C165.48 58.6645 165.811 58.5276 166.013 58.7067C169.687 62.0782 174.545 64.0485 180.109 64.0485C193.211 64.0485 203.43 53.5862 203.43 39.9947C203.43 26.4032 193.2 15.941 180.109 15.941L180.098 15.9515ZM177.995 53.4914C170.541 53.4914 164.892 47.6439 164.892 39.9104C164.892 32.177 170.53 26.3295 177.995 26.3295C185.459 26.3295 191.086 32.0822 191.086 39.9104C191.086 47.7387 185.533 53.4914 177.984 53.4914H177.995Z" fill="white"></path>\n    </svg></div></gravity-button>',googlePayUI:'<style>.accelerated-checkout-button{height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 44px),55px);min-height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 44px),55px);border-radius:var(--shopify-accelerated-checkout-button-border-radius, 0px);box-shadow:var(--shopify-accelerated-checkout-button-box-shadow);min-width:150px}:host([page-type="cart_page"]) .accelerated-checkout-button{height:100%;width:100%;border-radius:var(--shopify-accelerated-checkout-button-border-radius, 4px);box-shadow:var(--shopify-accelerated-checkout-button-box-shadow)}@media (forced-colors: active){.accelerated-checkout-button{border:1px solid transparent!important}:host([page-type="cart_page"]) .accelerated-checkout-button{border:1px solid transparent!important}}\n    .button{display:flex;justify-content:center;align-items:center;width:100%;border:none}.button:hover:not(:disabled){filter:brightness(92%);cursor:pointer}.button:disabled{opacity:.5;cursor:not-allowed}.logo-only>svg{width:50px}.dark{background:#000;color:#fff}.light{background:#fff;color:#000;outline:1px solid #3c4043}@media (forced-colors: active){.light{outline:none}}.content{display:flex;justify-content:center;align-items:center;white-space:pre}</style><button type="button" aria-label="Google Pay" class="button accelerated-checkout-button light logo-only" style="font: 16px / 24px &quot;DIN Next&quot;, sans-serif;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 41 17" width="45px" id="google-pay-logo">\n      <path d="M19.526 2.635v4.083h2.518q.9 0 1.488-.605.605-.604.605-1.437 0-.816-.605-1.422-.588-.62-1.488-.62h-2.518zm0 5.52v4.736h-1.504V1.198h3.99q1.519 0 2.582 1.012 1.08 1.013 1.08 2.466 0 1.487-1.08 2.482-1.046.997-2.583.996zm7.668 2.287q0 .587.499.98.498.39 1.168.391.949 0 1.692-.701.745-.703.744-1.65-.704-.555-1.962-.555-.916 0-1.528.442-.613.44-.613 1.093m1.946-5.815q1.668 0 2.633.89.964.891.964 2.442v4.932h-1.439v-1.11h-.065q-.933 1.372-2.486 1.372-1.323 0-2.215-.784t-.891-1.96q0-1.242.94-1.976c.94-.734 1.463-.735 2.51-.735q1.34 0 2.206.49v-.344q0-.784-.621-1.33a2.13 2.13 0 0 0-1.455-.547q-1.26 0-1.995 1.062l-1.324-.834q1.095-1.568 3.238-1.568m11.853.262-5.02 11.53H34.42l1.864-4.034-3.302-7.496h1.635l2.387 5.749h.032l2.322-5.75z" style="fill: #000000"></path>\n      <path d="M13.448 7.134q-.001-.71-.116-1.366H6.988v2.588h3.634a3.1 3.1 0 0 1-1.344 2.042v1.68h2.169c1.27-1.17 2.001-2.9 2.001-4.944" style="fill: #4285f4"></path>\n      <path d="M6.988 13.7c1.816 0 3.344-.595 4.459-1.621l-2.169-1.681c-.603.406-1.38.643-2.29.643-1.754 0-3.244-1.182-3.776-2.774H.978v1.731a6.73 6.73 0 0 0 6.01 3.703" style="fill: #34a853"></path>\n      <path d="M3.212 8.267a4.03 4.03 0 0 1 0-2.572V3.964H.978A6.7 6.7 0 0 0 .261 6.98c0 1.085.26 2.11.717 3.017z" style="fill: #fbbc05"></path>\n      <path d="M6.988 2.921c.992 0 1.88.34 2.58 1.008v.001l1.92-1.918C10.324.928 8.804.262 6.989.262a6.73 6.73 0 0 0-6.01 3.702l2.234 1.731c.532-1.592 2.022-2.774 3.776-2.774" style="fill: #ea4335"></path>\n    </svg></button>',applePayUI:'<style>.accelerated-checkout-button{height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 44px),55px);min-height:clamp(25px,var(--shopify-accelerated-checkout-button-block-size, 44px),55px);border-radius:var(--shopify-accelerated-checkout-button-border-radius, 0px);box-shadow:var(--shopify-accelerated-checkout-button-box-shadow);min-width:150px}:host([page-type="cart_page"]) .accelerated-checkout-button{height:100%;width:100%;border-radius:var(--shopify-accelerated-checkout-button-border-radius, 4px);box-shadow:var(--shopify-accelerated-checkout-button-box-shadow)}@media (forced-colors: active){.accelerated-checkout-button{border:1px solid transparent!important}:host([page-type="cart_page"]) .accelerated-checkout-button{border:1px solid transparent!important}}\n    .apple-pay-button{display:flex;align-items:center;justify-content:center;width:100%;padding:0!important;cursor:pointer;border:none}.apple-pay-button:hover:not(:disabled){filter:brightness(92%)}.apple-pay-button:disabled{opacity:.5;cursor:not-allowed}.apple-pay-button svg{height:100%;flex-shrink:0}.apple-pay--content{font-size:16px;font-family:San Francisco,sans-serif;width:100%;height:100%;flex-grow:1;display:flex;align-items:center;justify-content:center;white-space:pre}.apple-pay--light{background:#fff;color:#000}.apple-pay--light svg{fill:#000}.apple-pay--dark{background:#000;color:#fff}.apple-pay--dark svg{fill:#fff}</style><button type="button" aria-label="Buy with Apple Pay" class="apple-pay-button apple-pay--dark accelerated-checkout-button"><div class="apple-pay--content"><span aria-hidden="true">Buy with </span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 43 19" width="45px" style="width: 45px;">\n    <path d="M6.948 1.409C7.934.147 9.305.147 9.305.147s.193 1.18-.771 2.316c-1.05 1.2-2.228.993-2.228.993s-.236-.93.642-2.047zM3.82 3.663c-1.735 0-3.6 1.51-3.6 4.363 0 2.916 2.186 6.555 3.943 6.555.6 0 1.543-.6 2.485-.6.922 0 1.607.559 2.464.559 1.907 0 3.322-3.826 3.322-3.826s-2.015-.744-2.015-2.936c0-1.944 1.629-2.73 1.629-2.73s-.836-1.447-2.936-1.447c-1.22 0-2.164.661-2.656.661-.622.021-1.5-.6-2.636-.6zM19.64 1.426c2.453 0 4.188 1.788 4.188 4.396 0 2.608-1.755 4.417-4.248 4.417h-2.932v4.564h-1.974V1.426h4.966zm-2.992 7.067h2.473c1.695 0 2.693-.967 2.693-2.65 0-1.683-.978-2.671-2.693-2.671h-2.473v5.321zm7.559 3.429c0-1.767 1.296-2.777 3.65-2.945l2.572-.147v-.78c0-1.156-.738-1.787-1.994-1.787-1.037 0-1.795.568-1.955 1.43h-1.775c.06-1.788 1.656-3.092 3.79-3.092 2.333 0 3.829 1.304 3.829 3.281v6.9h-1.815v-1.684h-.04c-.519 1.094-1.715 1.788-3.012 1.788-1.934.021-3.25-1.178-3.25-2.965zm6.222-.905v-.778l-2.313.168c-1.297.084-1.975.59-1.975 1.494 0 .862.718 1.409 1.815 1.409 1.396-.021 2.473-.968 2.473-2.293zm3.969 7.383v-1.64c.14.041.438.041.598.041.897 0 1.416-.4 1.735-1.472l.14-.526L33.4 4.707h2.054l2.453 8.224h.04L40.4 4.707h1.994l-3.57 10.538c-.818 2.419-1.715 3.197-3.67 3.197-.14.02-.598-.021-.757-.042z"></path>\n    </svg></div></button>',payPalUI:'<style>\n            .paypal-button-row {\n                background-color: #ffc439;\n                padding: 10px;\n                cursor: pointer;\n            }\n            .paypal-button-row:hover {\n                filter: brightness(0.95);\n                overflow: inherit;\n            }\n            .paypal-logo {\n                max-width: 70px\n            }\n            .paypal-button {\n                display: flex;\n                justify-content: center;\n                align-items: center;\n            }\n        </style>\n        <div class="paypal-button-row">\n          <div class="paypal-button" aria-label="PayPal">\n            <img \n              src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAxcHgiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAxMDEgMzIiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaW5ZTWluIG1lZXQiIHhtbG5zPSJodHRwOiYjeDJGOyYjeDJGO3d3dy53My5vcmcmI3gyRjsyMDAwJiN4MkY7c3ZnIj48cGF0aCBmaWxsPSIjMDAzMDg3IiBkPSJNIDEyLjIzNyAyLjggTCA0LjQzNyAyLjggQyAzLjkzNyAyLjggMy40MzcgMy4yIDMuMzM3IDMuNyBMIDAuMjM3IDIzLjcgQyAwLjEzNyAyNC4xIDAuNDM3IDI0LjQgMC44MzcgMjQuNCBMIDQuNTM3IDI0LjQgQyA1LjAzNyAyNC40IDUuNTM3IDI0IDUuNjM3IDIzLjUgTCA2LjQzNyAxOC4xIEMgNi41MzcgMTcuNiA2LjkzNyAxNy4yIDcuNTM3IDE3LjIgTCAxMC4wMzcgMTcuMiBDIDE1LjEzNyAxNy4yIDE4LjEzNyAxNC43IDE4LjkzNyA5LjggQyAxOS4yMzcgNy43IDE4LjkzNyA2IDE3LjkzNyA0LjggQyAxNi44MzcgMy41IDE0LjgzNyAyLjggMTIuMjM3IDIuOCBaIE0gMTMuMTM3IDEwLjEgQyAxMi43MzcgMTIuOSAxMC41MzcgMTIuOSA4LjUzNyAxMi45IEwgNy4zMzcgMTIuOSBMIDguMTM3IDcuNyBDIDguMTM3IDcuNCA4LjQzNyA3LjIgOC43MzcgNy4yIEwgOS4yMzcgNy4yIEMgMTAuNjM3IDcuMiAxMS45MzcgNy4yIDEyLjYzNyA4IEMgMTMuMTM3IDguNCAxMy4zMzcgOS4xIDEzLjEzNyAxMC4xIFoiPjwvcGF0aD48cGF0aCBmaWxsPSIjMDAzMDg3IiBkPSJNIDM1LjQzNyAxMCBMIDMxLjczNyAxMCBDIDMxLjQzNyAxMCAzMS4xMzcgMTAuMiAzMS4xMzcgMTAuNSBMIDMwLjkzNyAxMS41IEwgMzAuNjM3IDExLjEgQyAyOS44MzcgOS45IDI4LjAzNyA5LjUgMjYuMjM3IDkuNSBDIDIyLjEzNyA5LjUgMTguNjM3IDEyLjYgMTcuOTM3IDE3IEMgMTcuNTM3IDE5LjIgMTguMDM3IDIxLjMgMTkuMzM3IDIyLjcgQyAyMC40MzcgMjQgMjIuMTM3IDI0LjYgMjQuMDM3IDI0LjYgQyAyNy4zMzcgMjQuNiAyOS4yMzcgMjIuNSAyOS4yMzcgMjIuNSBMIDI5LjAzNyAyMy41IEMgMjguOTM3IDIzLjkgMjkuMjM3IDI0LjMgMjkuNjM3IDI0LjMgTCAzMy4wMzcgMjQuMyBDIDMzLjUzNyAyNC4zIDM0LjAzNyAyMy45IDM0LjEzNyAyMy40IEwgMzYuMTM3IDEwLjYgQyAzNi4yMzcgMTAuNCAzNS44MzcgMTAgMzUuNDM3IDEwIFogTSAzMC4zMzcgMTcuMiBDIDI5LjkzNyAxOS4zIDI4LjMzNyAyMC44IDI2LjEzNyAyMC44IEMgMjUuMDM3IDIwLjggMjQuMjM3IDIwLjUgMjMuNjM3IDE5LjggQyAyMy4wMzcgMTkuMSAyMi44MzcgMTguMiAyMy4wMzcgMTcuMiBDIDIzLjMzNyAxNS4xIDI1LjEzNyAxMy42IDI3LjIzNyAxMy42IEMgMjguMzM3IDEzLjYgMjkuMTM3IDE0IDI5LjczNyAxNC42IEMgMzAuMjM3IDE1LjMgMzAuNDM3IDE2LjIgMzAuMzM3IDE3LjIgWiI+PC9wYXRoPjxwYXRoIGZpbGw9IiMwMDMwODciIGQ9Ik0gNTUuMzM3IDEwIEwgNTEuNjM3IDEwIEMgNTEuMjM3IDEwIDUwLjkzNyAxMC4yIDUwLjczNyAxMC41IEwgNDUuNTM3IDE4LjEgTCA0My4zMzcgMTAuOCBDIDQzLjIzNyAxMC4zIDQyLjczNyAxMCA0Mi4zMzcgMTAgTCAzOC42MzcgMTAgQyAzOC4yMzcgMTAgMzcuODM3IDEwLjQgMzguMDM3IDEwLjkgTCA0Mi4xMzcgMjMgTCAzOC4yMzcgMjguNCBDIDM3LjkzNyAyOC44IDM4LjIzNyAyOS40IDM4LjczNyAyOS40IEwgNDIuNDM3IDI5LjQgQyA0Mi44MzcgMjkuNCA0My4xMzcgMjkuMiA0My4zMzcgMjguOSBMIDU1LjgzNyAxMC45IEMgNTYuMTM3IDEwLjYgNTUuODM3IDEwIDU1LjMzNyAxMCBaIj48L3BhdGg+PHBhdGggZmlsbD0iIzAwOWNkZSIgZD0iTSA2Ny43MzcgMi44IEwgNTkuOTM3IDIuOCBDIDU5LjQzNyAyLjggNTguOTM3IDMuMiA1OC44MzcgMy43IEwgNTUuNzM3IDIzLjYgQyA1NS42MzcgMjQgNTUuOTM3IDI0LjMgNTYuMzM3IDI0LjMgTCA2MC4zMzcgMjQuMyBDIDYwLjczNyAyNC4zIDYxLjAzNyAyNCA2MS4wMzcgMjMuNyBMIDYxLjkzNyAxOCBDIDYyLjAzNyAxNy41IDYyLjQzNyAxNy4xIDYzLjAzNyAxNy4xIEwgNjUuNTM3IDE3LjEgQyA3MC42MzcgMTcuMSA3My42MzcgMTQuNiA3NC40MzcgOS43IEMgNzQuNzM3IDcuNiA3NC40MzcgNS45IDczLjQzNyA0LjcgQyA3Mi4yMzcgMy41IDcwLjMzNyAyLjggNjcuNzM3IDIuOCBaIE0gNjguNjM3IDEwLjEgQyA2OC4yMzcgMTIuOSA2Ni4wMzcgMTIuOSA2NC4wMzcgMTIuOSBMIDYyLjgzNyAxMi45IEwgNjMuNjM3IDcuNyBDIDYzLjYzNyA3LjQgNjMuOTM3IDcuMiA2NC4yMzcgNy4yIEwgNjQuNzM3IDcuMiBDIDY2LjEzNyA3LjIgNjcuNDM3IDcuMiA2OC4xMzcgOCBDIDY4LjYzNyA4LjQgNjguNzM3IDkuMSA2OC42MzcgMTAuMSBaIj48L3BhdGg+PHBhdGggZmlsbD0iIzAwOWNkZSIgZD0iTSA5MC45MzcgMTAgTCA4Ny4yMzcgMTAgQyA4Ni45MzcgMTAgODYuNjM3IDEwLjIgODYuNjM3IDEwLjUgTCA4Ni40MzcgMTEuNSBMIDg2LjEzNyAxMS4xIEMgODUuMzM3IDkuOSA4My41MzcgOS41IDgxLjczNyA5LjUgQyA3Ny42MzcgOS41IDc0LjEzNyAxMi42IDczLjQzNyAxNyBDIDczLjAzNyAxOS4yIDczLjUzNyAyMS4zIDc0LjgzNyAyMi43IEMgNzUuOTM3IDI0IDc3LjYzNyAyNC42IDc5LjUzNyAyNC42IEMgODIuODM3IDI0LjYgODQuNzM3IDIyLjUgODQuNzM3IDIyLjUgTCA4NC41MzcgMjMuNSBDIDg0LjQzNyAyMy45IDg0LjczNyAyNC4zIDg1LjEzNyAyNC4zIEwgODguNTM3IDI0LjMgQyA4OS4wMzcgMjQuMyA4OS41MzcgMjMuOSA4OS42MzcgMjMuNCBMIDkxLjYzNyAxMC42IEMgOTEuNjM3IDEwLjQgOTEuMzM3IDEwIDkwLjkzNyAxMCBaIE0gODUuNzM3IDE3LjIgQyA4NS4zMzcgMTkuMyA4My43MzcgMjAuOCA4MS41MzcgMjAuOCBDIDgwLjQzNyAyMC44IDc5LjYzNyAyMC41IDc5LjAzNyAxOS44IEMgNzguNDM3IDE5LjEgNzguMjM3IDE4LjIgNzguNDM3IDE3LjIgQyA3OC43MzcgMTUuMSA4MC41MzcgMTMuNiA4Mi42MzcgMTMuNiBDIDgzLjczNyAxMy42IDg0LjUzNyAxNCA4NS4xMzcgMTQuNiBDIDg1LjczNyAxNS4zIDg1LjkzNyAxNi4yIDg1LjczNyAxNy4yIFoiPjwvcGF0aD48cGF0aCBmaWxsPSIjMDA5Y2RlIiBkPSJNIDk1LjMzNyAzLjMgTCA5Mi4xMzcgMjMuNiBDIDkyLjAzNyAyNCA5Mi4zMzcgMjQuMyA5Mi43MzcgMjQuMyBMIDk1LjkzNyAyNC4zIEMgOTYuNDM3IDI0LjMgOTYuOTM3IDIzLjkgOTcuMDM3IDIzLjQgTCAxMDAuMjM3IDMuNSBDIDEwMC4zMzcgMy4xIDEwMC4wMzcgMi44IDk5LjYzNyAyLjggTCA5Ni4wMzcgMi44IEMgOTUuNjM3IDIuOCA5NS40MzcgMyA5NS4zMzcgMy4zIFoiPjwvcGF0aD48L3N2Zz4" \n              data-v-fd53f700="" alt="" role="presentation" \n              class="paypal-logo paypal-logo-paypal paypal-logo-color-blue" />\n          </div>\n        </div>\n        \n        '};return"function"==typeof bssFixSupportDynamicPaymentUI&&(t=bssFixSupportDynamicPaymentUI(e,t)),t},e.dynamicPaymentButton=()=>{const{shopPayUI:t,googlePayUI:o,applePayUI:n,payPalUI:r}=e.dynamicPaymentUI();return[{name:"shop-pay-wallet-button",newName:"shop-pay-wallet-bss-button",ui:t},{name:"shop-pay-wallet-bss-button",newName:"shop-pay-wallet-bss-button",ui:t},{name:"shopify-google-pay-button",newName:"shopify-google-pay-bss-button",ui:o},{name:"shopify-google-pay-bss-button",newName:"shopify-google-pay-bss-button",ui:o},{name:"shopify-apple-pay-button",newName:"shopify-apple-pay-bss-button",ui:n},{name:"shopify-apple-pay-bss-button",newName:"shopify-apple-pay-bss-button",ui:n},{name:"shopify-paypal-button",newName:"shopify-paypal-bss-button",ui:r},{name:"shopify-paypal-bss-button",newName:"shopify-paypal-bss-button",ui:r}]},e.pdp.buyItNowSpecialBtn=["form[action*='/cart/add'] shop-pay-wallet-button","form[action*='/cart/add'] shopify-google-pay-button","form[action*='/cart/add'] shopify-apple-pay-button","form[action*='/cart/add'] shopify-paypal-button","form[action*='/cart/add'] shop-pay-wallet-bss-button","form[action*='/cart/add'] shopify-google-pay-bss-button","form[action*='/cart/add'] shopify-apple-pay-bss-button","form[action*='/cart/add'] shopify-paypal-bss-button"],e.pdp.buyItNowBtn=[...e.pdp.buyItNowSpecialBtn,"form[action*='/cart/add'] more-payment-options-link","form[action*='/cart/add'] .shopify-payment-button__button:not([disabled]):not(.bss-po-btn-buyitnow):not(.bss-b2b-btn-buyitnow)","form[action*='/cart/add'] .shopify-payment-button__button.shopify-payment-button__button--unbranded:not([disabled]):not(.bss-po-btn-buyitnow):not(.bss-b2b-btn-buyitnow)","form[action*='/cart/add'] .shopify-payment-button:not([disabled]):not(.bss-po-btn-buyitnow):not(.bss-b2b-btn-buyitnow)"],e.pdp.getPaymentMethodForCheckout=(e,t="&")=>{const o=e.tagName?.toLowerCase();if(!o)return"";const n=[{selector:"shop-pay-wallet-bss-button",payment:`${t}payment=shop_pay`},{selector:"shopify-google-pay-bss-button",payment:`${t}payment=google_pay`},{selector:"shopify-apple-pay-bss-button",payment:`${t}payment=apple_pay`},{selector:"shopify-paypal-bss-button",payment:`${t}payment=paypal`}];for(const e of n)if(o?.includes(e.selector))return e.payment;return""},e.pdp.cloneBuyItNow=t=>{const o=e.dynamicPaymentButton().find((e=>t.tagName?.toLowerCase()===e.name));if(!o)return{cloneBtnBuyItNow:t.cloneNode(!0),isASpecialButton:!1};const{name:n,newName:r,ui:i}=o,a=document.querySelector(n),s=document.createElement(r);return[...a.attributes].forEach((e=>{s.setAttribute(e.name,e.value)})),a.replaceWith(s),s.attachShadow({mode:"closed"}).innerHTML=i,{cloneBtnBuyItNow:document.querySelector(r),isASpecialButton:!0}}}(e),function(e,o){e.cart.handleCartCheckoutBtn=function(n){if(e.checkToken)return;if("undefined"!=typeof BSS_B2B&&(1==BSS_B2B.shopModules[1].status&&BSS_B2B.cart.cpPricingList&&BSS_B2B.cart.cpPricingList.size>0||1==BSS_B2B.shopModules[0].status&&BSS_B2B.cart.qbPricingList&&BSS_B2B.cart.qbPricingList.size>0||1==BSS_B2B.shopModules[15].status&&BSS_B2B.cart?.efList?.length>0))return;let r=document.querySelectorAll(e.cart.checkoutButton.join(","))[0],i=document.querySelector("button.tdf_cta_btn"),a=[];if(document.querySelectorAll(e.cart.checkoutButton.join(",")).length>1&&(r=document.querySelectorAll(e.cart.checkoutButton.join(","))[1]),"function"==typeof bssFixSupportGetButtonCheckOut){let t=bssFixSupportGetButtonCheckOut(e,r,i);r=t.checkoutBtn,i=t.sellyCheckoutBtn}(r||i)&&("function"==typeof bssFixSupportCloneButtonCheckOut?a=bssFixSupportCloneButtonCheckOut(e,r,i,a):(r&&e.helper.cloneButtonFunc(r,a),i&&e.helper.cloneButtonFunc(i,a))),a.forEach((r=>{r&&("function"==typeof bssFixSupportPreventRemovingCheckoutEvent&&bssFixSupportPreventRemovingCheckoutEvent(r),r.addEventListener("click",(async function(r){if(r.preventDefault(),r.stopPropagation(),[8937].includes(e.storeId)&&document.querySelector("#supertime-date-picker")&&!document.querySelector("#supertime-date-picker").value)return;let i=[],a=[],s={},l={},c={},p=!1,u="",d="",_=0,m=0,h="",f=document.querySelector(".bss-po-discount-code--applied-wrapper--applied-remove"),y=f?f.getAttribute("data-code"):"";if(window.Zapiet&&window.ZapietCachedSettings&&!Zapiet.Widget.checkoutEnabled())return ZapietEvent.fire("checkout_error","Please select a date/time"),r.preventDefault(),r.stopPropagation(),r.stopImmediatePropagation(),!1;try{if(void 0!==window.storePickup&&void 0!==window.storePickupSettings&&0==storePickup.submitForm().valid())return}catch(e){console.log("Integrate with store pickup:",e)}if(8518==e.storeId&&e.page.isCartPage()){let e=document.querySelector("#CartTerms");if(e.setCustomValidity(theme.strings.requiresTerms),!e.checked)return e.reportValidity(),e.focus(),r.preventDefault(),!1}if(n.items.forEach((t=>{let o=[],n=JSON.parse(localStorage.getItem(t.key));n&&(n[K.key]=`${n?.totalExtraPrice||K.value}`);let r=0,s=`${e.settings.translations.add_ons_text} ${e.helper.decodeHTMLEntities(t.title)}`,l=0,c=[],u="";if(2398==e.storeId&&(s=`${e.settings.translations.add_ons_text} above print`),n){r=[3758,5701,6536,6191].includes(e.storeId)&&1==e.enableAddOns?null==t.properties._totalExtraPrice?n.totalExtraPrice:t.properties._totalExtraPrice:n.totalExtraPrice,l=n.totalVariantExtraPrice,n.skuOptionValueString&&(u=n.skuOptionValueString),n.skuOptionValueString_1&&(u?u+=e.settings.generals.sku_separator+n.skuOptionValueString_1:u=n.skuOptionValueString_1);let i=n.optionQuantity,a=n.variantData;if(Object.keys(a).length)Object.keys(n).forEach((r=>{if(e.common.checkAddOnIsAssignToVariant(t,` ${r}`))if(a[r])if(a[r].id){let o=n[r],s=i[r]&&i[r][o];if(e.marketStatus)c=e.common.convertObjVariantToLineItems(c,a[r],s?s*t.quantity:t.quantity);else{s&&(o=`${s} x ${o}`);let n=[];n=e.common.checkHasMultipleFileUpload(o)?o.split(", ").map(((e,t)=>({key:`${r}-File${t+1}`,value:e}))):[{key:r,value:o}],c.push({variantId:`gid://shopify/ProductVariant/${a[r].id}`,quantity:s?s*t.quantity:t.quantity,customAttributes:n})}}else if("string"==typeof n[r]){let s=[];n[r].split(", ").forEach((o=>{let n=o,l=i[r]&&i[r][n];const p=l?`${l} x ${n}`:n;e.marketStatus?a[r][o]&&a[r][o].id&&(c=e.common.convertObjVariantToLineItems(c,a[r][o],l?l*t.quantity:t.quantity)):a[r][o]?c.push({variantId:`gid://shopify/ProductVariant/${a[r][o].id}`,quantity:l?l*t.quantity:t.quantity,customAttributes:{key:r,value:p}}):s.push(p)})),s.length&&!e.marketStatus&&o.push({key:r,value:s.join(", ").toString()})}else{let s=[];n[r].forEach((o=>{let n=JSON.parse(o).title,l=i[r]&&i[r][n],p=l?`${l} x ${n}`:n;e.marketStatus?a[r][n]&&a[r][n].id&&(c=e.common.convertObjVariantToLineItems(c,a[r][n],l||t.quantity)):a[r][n]?c.push({variantId:`gid://shopify/ProductVariant/${a[r][n].id}`,quantity:l?l*t.quantity:t.quantity,customAttributes:{key:r,value:p}}):s.push(p)})),s.length&&!e.marketStatus&&o.push({key:r,value:s.join(", ").toString()})}else if(!e.marketStatus)if("object"==typeof n[r]){let e=[];n[r].forEach((t=>{let o=JSON.parse(t).title,n=i[r]&&i[r][o];const a=n?`${n} x ${o}`:o;e.push(a)})),o.push({key:r,value:e.join(", ").toString()})}else{let e=n[r],t=i[r]&&i[r][e];t&&(e=`${t} x ${e}`),o.push({key:r,value:e})}}));else for(const n in t.properties)"_totalExtraPrice"!=n&&(e.common.checkHasMultipleFileUpload(t.properties[n])?t.properties[n].split(", ").map(((e,t)=>o.push({key:`${n}-File${t+1}`,value:e}))):o.push({key:n,value:t.properties[n]}))}else for(const n in t.properties)11877==e.storeId&&o.push({key:n,value:JSON.stringify(t.properties[n])}),"_totalExtraPrice"!=n&&11877!=e.storeId?o.push({key:n,value:t.properties[n]}):[3758,5701,6536,3171,6191,8699,10294].includes(e.storeId)&&1==e.enableAddOns&&null!=t.properties._totalExtraPrice&&(r=t.properties._totalExtraPrice);if(e.marketStatus&&c.length)for(const e in t.properties)"_totalExtraPrice"!=e&&o.push({key:e,value:t.properties[e]});let d=o.some((({key:e})=>e))?e.helper.getSkuItemBySkuType(t.sku,u):"";d&&a.push(d),r-=l,r=e.common.convertRate(r,"checkout");let _=e.cart.markOrderCreatedByApp(o,J.CREATE_FEE),m=e.cart.markOrderCreatedByApp(r?[]:o,Number(r||0)+Number(l||0));!e.marketStatus||[11130,11066].includes(e.storeId)?(i.push({variantId:`gid://shopify/ProductVariant/${t.variant_id}`,quantity:t.quantity,customAttributes:m}),r&&r>0||d&&!r?(p=!0,i.push({title:s,originalUnitPrice:r,taxable:t.taxable,sku:d,quantity:t.quantity,customAttributes:_}),l>0&&i.push(...e.cart.markOldVariantAddOn(c))):l>0&&(p=!0,[11130].includes(e.storeId)&&(c=c.map((e=>(e.customAttributes&&delete e.customAttributes,e)))),i.push(...e.cart.markOldVariantAddOn(c)))):r||l?(p=!0,i.push({title:s,originalUnitPrice:r,taxable:t.taxable,sku:"",quantity:t.quantity,customAttributes:_}),c.length&&i.push(...e.cart.markOldVariantAddOn(c)),i.find((e=>e.variantId&&e.variantId.includes(t.variant_id)))?i.find((e=>e.variantId&&e.variantId.includes(t.variant_id))).quantity+=t.quantity:i.push({variantId:`gid://shopify/ProductVariant/${t.variant_id}`,quantity:t.quantity,customAttributes:m})):i.push({variantId:`gid://shopify/ProductVariant/${t.variant_id}`,quantity:t.quantity,customAttributes:m})})),e.enableDiscount&&y){const n=await e.helper.getCartData();if(n.item_count<1)return;if(e.enableAddOns?(n.bss_items_subtotal_price=window.bssProductOptionsPrices.cart_subtotal,n.items.forEach((e=>{e.bss_final_line_price=window.bssProductOptionsPrices[e.key],e.bss_final_price=window.bssProductOptionsPrices[e.key]/e.quantity}))):(n.bss_items_subtotal_price=n.items_subtotal_price,n.items.forEach((e=>{e.bss_final_line_price=e.final_line_price,e.bss_final_price=e.final_price}))),!e.cart.checkDataBeforeCheckout(n))return;const r={domain:o.shop.domain,cart:n,discountCode:y,customerId:o.customer.id},a={headers:{"Content-Type":"application/json"}};if(e.marketStatus){let t=e.marketData.parent&&e.marketData.parent.adjustment?e.marketData.parent.adjustment.value:0,o=e.marketData.parent&&e.marketData.parent.adjustment?e.marketData.parent.adjustment.type:"";r.marketData={priceAdjustment:t,adjustmentType:o},r.marketRate=parseFloat(Shopify.currency.rate)}const{data:s}=await t().post(`/apps/${e.proxySubpath}/check-discount-code`,r,a);if(s.success){let t=Number(s.discount_amount)/100;e.marketStatus&&(t=(Number(t)/Number(Shopify.currency.rate)).toFixed(2));const o={title:s.discount.title,description:s.discount.title,amount:Number(t),value:Number(t),valueType:"FIXED_AMOUNT"};c={lineItems:i,appliedDiscount:o}}}else if(window.discountOnCartProAppLoaded&&!e.enableDiscount){var b=document.cookie.split(";");let e={};for(var g=0;g<b.length;g++){var v=b[g].split("=");"docapp-coupon"==v[0].trim()&&(e=JSON.parse(decodeURIComponent(v[1])))}let t=e.codes;await fetch(window.Shopify.routes.root+"cart.js").then((e=>e.json())).then((e=>fetch(window.Shopify.routes.root+"apps/discount-on-cart-pro/cart-discounts",{method:"POST",body:JSON.stringify({cart:e,codes:t,bssProductOptionsPrices:window.bssProductOptionsPrices}),headers:{"Content-Type":"application/json"}}))).then((e=>e.json())).then((e=>{u=e.discount_name,d=e.discount_name,_=Number(e.discount_amount)/100,m=Number(e.discount_amount_default_currency)/100,h=e.free_shipping_discount?e.free_shipping_discount:null})).catch((e=>{console.log("Error:",e)})),s={title:u,description:d,amount:_,value:m,valueType:"FIXED_AMOUNT"},h?(l={title:h,shippingRateHandle:"",price:"0"},c={lineItems:i,appliedDiscount:s,shippingLine:l}):c={lineItems:i,appliedDiscount:s}}else c={lineItems:i};if(window.Zapiet&&window.ZapietCachedSettings){let e;await fetch(window.Shopify.routes.root+"cart.js").then((e=>e.json())).then((t=>{e=t})),c={customAttributes:Object.entries(e.attributes).map((e=>({key:e[0],value:e[1]}))),lineItems:i}}if(6909==e.storeId){let t=await e.helper.getCartData(),o=document.querySelector(".cart__footer .text-area--resize-vertical").value;const n=Object.entries(t.attributes).map((e=>({key:e[0],value:e[1]})));c.customAttributes=n,c.note=o}else if(9392==e.storeId&&document.querySelector(".cart__footer .cart__note textarea")){let e=document.querySelector(".cart__footer .cart__note textarea").value;c.note=e}if("function"==typeof bssFixSupportCartNote&&(c.note=bssFixSupportCartNote(e,c)),!p&&!a.length&&!c.note)return 7966==e.storeId&&"undefined"!=typeof BSS_B2B&&(1==BSS_B2B.shopModules[1].status&&BSS_B2B.cart.cpPricingList&&BSS_B2B.cart.cpPricingList.size>0||1==BSS_B2B.shopModules[0].status&&BSS_B2B.cart.qbPricingList&&BSS_B2B.cart.qbPricingList.size>0||1==BSS_B2B.shopModules[15].status&&BSS_B2B.cart?.efList?.length>0)?void 0:void(window.location="/checkout"+e.helper.getShopifyLocaleParams());e.marketStatus&&"undefined"!=typeof Shopify&&Shopify&&Shopify.country&&(c.marketRegionCountryCode=Shopify.country),c.acceptAutomaticDiscounts=!0,e.enableDiscount||(c.allowDiscountCodesInCheckout=!0),"function"==typeof bssFixParamPriceAddOnDraftOrder&&(c=bssFixParamPriceAddOnDraftOrder("undefined"!=typeof $?$:null,e,c));const S={domain:o.shop.domain,draftOrderInput:c};try{const o={headers:{"Content-Type":"application/json"}},{data:n}=await t().post(`/apps/${e.proxySubpath}/create-draft-order`,S,o);n.draftOrder&&(window.location=n.draftOrder.invoiceUrl+e.helper.getShopifyLocaleParams())}catch(e){console.log("Error:",e)}})),r.setAttribute("po-btn-checkout",!0))}))}}(e,o),function(e,t){e.cart.checkEventListener=0,e.cart.displayPriceAddOnsWithCartItems=async function(o){let n={},r=/[^0-9\.]+/g;"amount_with_comma_separator"==t.shop.money_format.match(/\{\{\s*(\w+)\s*\}\}/)[1]&&(r=/[^0-9\.\,]+/g);let i=document.querySelectorAll(e.cart.cartSubtotalPriceElement.join(",")),a=o.items,s="0";if(e.totalCartExtraPrice=0,a.length)for(let t=0;t<a.length;t++){let o=a[t],l=o.quantity,c=o.key,p=String(o.final_price/100),u=String(o.final_line_price/100),d=document.querySelectorAll(e.cart.priceOfItemElements(o.key).join(",")),_=null;if(_=822!=e.storeId||e.page.isCartPage()?document.querySelectorAll(e.cart.totalPriceOfItemElements(o.key).join(",")):document.querySelectorAll(`.bss-total-price-${t+1}`),"undefined"!=typeof BSS_B2B&&!e.checkToken){let t=document.querySelector('[data-cart-item-key="'+c+'"]');"function"==typeof bssFixSupportParentLineItem&&(t=bssFixSupportParentLineItem(e,t,c)),d=t.querySelectorAll(".bss-qb-price-item"),_=t.querySelectorAll(".bss-qb-total-price-item"),i=document.querySelectorAll(".bss-qb-cart-subtotal"),t.querySelector(e.cart.quantityInputElements.join(","))&&(l=t.querySelector(e.cart.quantityInputElements.join(",")).value),d.length||(d=t.querySelectorAll(":not(data-cart-item-discounted-price-group) [bss-b2b-item-final-price] span span"),d.length||(d=t.querySelectorAll(":not(data-cart-item-discounted-price-group) [bss-b2b-item-final-price] span")),d.length||(d=t.querySelectorAll(':not(data-cart-item-discounted-price-group) [bss-b2b-item-final-price]:not([style*="display: none"])')),d.length||(d=t.querySelectorAll(":not(data-cart-item-discounted-price-group) [bss-b2b-item-original-price] span span")),d.length||(d=t.querySelectorAll(":not(data-cart-item-discounted-price-group) [bss-b2b-item-original-price] span")),d.length||(d=t.querySelectorAll(':not(data-cart-item-discounted-price-group) [bss-b2b-item-original-price]:not([style*="display: none"])'))),_.length||(_=t.querySelectorAll(":not(data-cart-item-discounted-price-group) [bss-b2b-final-line-price] span span"),_.length||(_=t.querySelectorAll(":not(data-cart-item-discounted-price-group) [bss-b2b-final-line-price] span")),_.length||(_=t.querySelectorAll(':not(data-cart-item-discounted-price-group) [bss-b2b-final-line-price]:not([style*="display: none"])')),_.length||(_=t.querySelectorAll(":not(data-cart-item-discounted-price-group) [bss-b2b-original-line-price] span span")),_.length||(_=t.querySelectorAll(":not(data-cart-item-discounted-price-group) [bss-b2b-original-line-price] span")),_.length||(_=t.querySelectorAll(':not(data-cart-item-discounted-price-group) [bss-b2b-original-line-price]:not([style*="display: none"])'))),i.length||(i=document.querySelectorAll("[bss-b2b-cart-total-price] span span"),i.length||(i=document.querySelectorAll("[bss-b2b-cart-total-price] span")),i.length||(i=document.querySelectorAll("[bss-b2b-cart-total-price]")),i.length||(i=document.querySelectorAll(e.cart.cartSubtotalPriceElement.join(",")))),12493===e.storeId&&(i=document.querySelectorAll(e.cart.cartSubtotalPriceElement.join(","))),d.length?p=e.money.addMoneyWithCurrencyFormatWithB2BApps(d[0].innerHTML.replace(r,"")):(p=String(o.final_price/100),d=document.querySelectorAll(e.cart.priceOfItemElements(o.key).join(","))),_.length?u=e.money.addMoneyWithCurrencyFormatWithB2BApps(_[0].innerHTML.replace(r,"")):(u=String(o.final_line_price/100),_=document.querySelectorAll(e.cart.totalPriceOfItemElements(o.key).join(",")))}if(window.Zapiet&&window.ZapietCachedSettings){let e=0;if(o.properties._ZapietId){let t={...o.properties};delete t._ZapietId;for(const[o,n]of Object.entries(t)){const r=n.indexOf(" (+ "),i=n.indexOf(")");e+=+n.substring(r+2,i).replace(/\D/g,""),t[o]=n.substring(0,r)}t.totalExtraPrice=e,localStorage.setItem(c,JSON.stringify(t))}}let m=0;localStorage.getItem(c)&&(m=Number(JSON.parse(localStorage.getItem(c)).totalExtraPrice),m=e.common.convertRate(m)),m>=0&&(e.totalCartExtraPrice+=m*l);let h=e.money.addMoneyWithCurrencyFormat(p,m),f=e.money.addMoneyWithCurrencyFormat(u,m*l);1!=e.enableAddOns||e.checkToken||(3793!==e.storeId&&d.forEach((e=>{e.innerHTML=e.innerHTML.replace(e.innerHTML,h)})),_.forEach((e=>{e.innerHTML=e.innerHTML.replace(e.innerHTML,f)}))),s=5068==e.storeId?m?e.money.addMoneyWithCurrencyFormat(s.replace("Rs. ","").replace(",",""),f.replace("Rs. ","").replace(",","")):e.money.addMoneyWithCurrencyFormat(s.replace("Rs. ","").replace(",",""),u):e.money.addMoneyWithCurrencyFormat(s.replace(r,""),f.replace(r,"")),1!=e.enableAddOns||e.checkToken||i.forEach((e=>{e.innerHTML=e.innerHTML.replace(e.innerHTML,s)}));let y=0,b=0;[7845].includes(e.storeId)?(y=s.replace("Rs. ","").match(/[\d,.]+/g)[0],b=f.replace("Rs. ","").match(/[\d,.]+/g)[0]):(y=s.match(/[\d,.]+/g)[0],b=f.match(/[\d,.]+/g)[0]);let g=2===y.length?y:(y.replaceAll(",",".").substr(0,y.length-3).replaceAll(".","")+y.substr(y.length-3,y.length)).replace(",",".");n.cart_subtotal=Math.round(100*Number(g));let v=2===b.length?b:(b.replaceAll(",",".").substr(0,b.length-3).replaceAll(".","")+b.substr(b.length-3,b.length)).replace(",",".");n[`${o.key}`]=Math.round(100*Number(v))}const l=new CustomEvent("po-get-total-extra-price-in-cart",{detail:{cartTotalExtra:e.totalCartExtraPrice}});document.dispatchEvent(l),console.log("BSS_PO.totalCartExtraPrice:",e.totalCartExtraPrice),document.querySelectorAll("[bss-po-cart-item-key],[bss-po-cart-total-price],[bss-po-cart-discount-total],[data-cart-item-regular-price],span[data-cart-subtotal],.cart-table-price,.cart-table-line-price").forEach((e=>{e.style.visibility="visible"})),"undefined"!=typeof BSS_B2B&&setTimeout((()=>{document.querySelectorAll(".bss-qb-cart-subtotal,.bss-qb-price-item,.bss-qb-total-price-item,[bss-b2b-item-final-price],[bss-b2b-item-original-price],[bss-b2b-final-line-price],[bss-b2b-original-line-price], [bss-b2b-cart-total-price]").forEach((e=>{e.style.opacity="1"}))}),1e3),window.bssProductOptionsPrices=n;let c=new Event("bss_po_handleCartPrice",{detail:{}});document.dispatchEvent(c),document.getElementsByTagName("head")[0].innerHTML.indexOf("d5zu2f4xvqanl")&&setTimeout((()=>{let e=document.querySelectorAll(".tdf_dialog_content .tdf_cart_amount, .tdf_price_normal");e.length&&e.forEach((e=>{let t=e&&e.querySelector(":scope > span.tdf_money");t&&(t.innerHTML=t.innerHTML.replace(t.innerHTML,s))}))}),1500),375==e.storeId&&123598667911==Shopify.theme.id&&document.querySelector(".cart_total_price")&&(document.querySelector(".cart_total_price").innerText=s,localStorage.setItem("bss-subtotal",s))},e.cart.resetFeaturesOnCartPage=function(t){if(e.checkCpQb||0===t.items.length)return;let o=e.cart.formActionCart();const n=t=>{fetch(window.Shopify.routes.root+"cart.js").then((e=>e.json())).then((o=>{let n=0;const r=setInterval((()=>{n++,document.querySelector(t)&&(e.cart.resetFeaturesOnCartPage(o),e.cart.generateEditCartOnCartPage(o),clearInterval(r)),n>6&&clearInterval(r)}),500)}))};let r=o?.querySelectorAll(e.cart.removeButtons.join(",")),i=o?.querySelectorAll(e.cart.quantityInputElements.join(",")),a=o?.querySelectorAll(e.cart.quantityChangeButtons.join(",")),s=document.querySelector(e.cart.updateCartButton.join(","));if(3667==e.storeId&&document.querySelectorAll(".quick-cart__form .quick-cart__item-remove").length&&(r=[...r,...document.querySelectorAll(".quick-cart__form .quick-cart__item-remove")]),7250==e.storeId&&document.querySelectorAll(".mini-cart__quantity-remove").length&&(r=[...r,...document.querySelectorAll(".mini-cart__quantity-remove")]),5056==e.storeId&&(i=document.querySelectorAll(".cart-item--inner .form-field-input")),r?.length)for(let t=0;t<r.length;t++)r[t].addEventListener("click",(function(){if(e.cart.cartQtyOnChange(),5378==e.storeId&&1==e.enableInCart&&n(".yv-cart-table tbody[data-cart-items]:not(.disabled)"),7250==e.storeId&&1==e.enableInCart){var o=JSON.parse(localStorage.getItem("_ssw_cart_data"));o.items.splice(t,1),localStorage.setItem("_ssw_cart_data",JSON.stringify(o))}}));(!s||s&&"none"==getComputedStyle(s).display)&&(i?.forEach((t=>{t.addEventListener("keypress",(function(e){"Enter"===e.key&&e.preventDefault()})),t.addEventListener("change",(function(){e.cart.checkEventListener++,e.cart.checkEventListener>1&&5378!=e.storeId||11326==e.storeId||(e.cart.cartQtyOnChange(),5378==e.storeId&&1==e.enableInCart&&n(".yv-cart-table tbody[data-cart-items]:not(.disabled)"))}))})),a?.forEach((t=>{t.addEventListener("click",(function(){e.cart.checkEventListener++,e.cart.checkEventListener>1&&5378!=e.storeId||11326==e.storeId||(e.cart.cartQtyOnChange(),5378==e.storeId&&1==e.enableInCart&&n(".yv-cart-table tbody[data-cart-items]:not(.disabled)"))}))})))},e.cart.cartQtyOnChange=function(){if(e.checkCpQb)return;"function"==typeof bssFixSupportB2BChangeQuantity&&location.reload();let t=e.cart.formActionCart();document.querySelectorAll("[bss-po-cart-item-key],[bss-po-cart-total-price],[bss-po-cart-discount-total],[data-cart-item-regular-price],span[data-cart-subtotal],.cart-item__original-price,.cart-table-price,.cart-table-line-price").forEach((e=>{e.style.visibility="hidden"}));let o=e.cart.removeButtons.join(",")+","+e.cart.quantityInputElements.join(",")+","+e.cart.quantityChangeButtons.join(",");t.querySelectorAll(o).forEach((e=>e.style.pointerEvents="none"));let n=!0;if("function"==typeof bssFixSupportNotRerenderTheme&&(n=bssFixSupportNotRerenderTheme(e,n,t,o)),n){let n=setInterval((function(){t=e.cart.formActionCart(),t&&t.querySelectorAll(o).forEach((e=>{if(!e.style.pointerEvents){let e=new Event("disabled",{bubbles:!0});return document.dispatchEvent(e),void clearInterval(n)}}))}),100)}},e.cart.customUpdateCartBtn=function(t){let o=document.querySelectorAll(e.cart.quantityInputElements.join(",")),n=document.querySelector("#checkout-buttons #update_quantities"),r=n.cloneNode(!0);n.parentNode.insertBefore(r,n),r.classList.add("bss-po-btn-checkout"),n.parentNode.removeChild(n);let i=[];r.addEventListener("click",(async function(e){e.preventDefault(),e.stopPropagation(),t.items.forEach(((e,t)=>{let n=Number(o[t].value);i[t]=n}));const n={updates:i};try{fetch(window.Shopify.routes.root+"cart/update.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>{window.location.pathname="/cart"}))}catch(e){console.log("Error:",e)}}))},window.addEventListener("disabled",(function(){let t=e.cart.formActionCart();t.querySelectorAll(e.cart.removeButtons.join(",")+","+e.cart.quantityInputElements.join(",")+","+e.cart.quantityChangeButtons.join(",")).forEach((e=>{e.style.pointerEvents="none"}));let o=0;"function"==typeof bssFixSupportTimeOutWhenEventDisable&&(o=bssFixSupportTimeOutWhenEventDisable(e,o));let n="";n=[6277].includes(e.storeId)?"/cart.js":window.Shopify.routes.root+"cart.js",setTimeout((async function(){if(7819===e.storeId)return window.location.pathname="/cart";await fetch(n).then((e=>e.json())).then((o=>{e.cart.checkEventListener=0,1==e.enableInCart&&e.cart.generateEditCartOnCartPage(o),1==e.enableAddOns&&(e.cart.renderDiscountCodeFeature(),e.cart.handleCartCheckoutBtn(o),e.cart.displayPriceAddOnsWithCartItems(o)),t.querySelectorAll(e.cart.removeButtons.join(",")+","+e.cart.quantityInputElements.join(",")+","+e.cart.quantityChangeButtons.join(",")).forEach((e=>{e.style.pointerEvents=""})),e.cart.resetFeaturesOnCartPage(o)})).catch((e=>{}))}),o)}))}(e,o),function(e,t,o){e.po.handleAddToCart=function(o="",n=""){let r=null,i=null,a=e.po.appliedOptionSetForOneProduct,s=e.po.appliedOptionSetForSpecificVariant,l=e.po.variantProductIdApplyOptionSet,c=t.product;"function"==typeof bssFixSupportATCInCollectionQuickView&&(c=bssFixSupportATCInCollectionQuickView(e,t,c));let p=!1;if(a||s){if("function"==typeof bssSupportCustomCondition&&(p=bssSupportCustomCondition(e,p)),(e.page.isHomePage()&&n||p)&&(a=e.po.getAppliedOptionSetOnProductPage(n)),"function"==typeof bssSupportGetCurrentProduct&&(c=bssSupportGetCurrentProduct(e,c)),r=""==e.cartSelector.trim()||0==e.cartSelector.trim().length?document.querySelector('form[action*="/cart/add"] button[type="submit"], form[action*="/cart/add"] input[type="submit"], form[action*="/cart/add"] button[name="add"], form[action*="/cart/add"] button.product-form--add-to-cart, form[action*="/cart/add"] button.product-form--add-to-cart, form[action*="/cart/add"] button#AddToCart, form[action*="/cart/add"] .tt-row-custom-01 button.btn-addtocart, form[action*="/cart/add"] button.btn-addtocart, .actions-primary .btn.btn-cart, form[action*="/cart/add"] .product-buy-buttons--primary, form[action*="/cart/add"] button[data-checkout="cart"], form[action*="/cart/add"] button.button--addToCart'):document.querySelector(e.cartSelector),null!=r&&0!=r?.length||(r=document.querySelector(".product-form__cart-submit, #AddToCart-product-template, .product-atc-btn, .product-menu-button.product-menu-button-atc, .button-cart, .product-add, .add-to-cart input, .btn-addtocart, [name=add]")),"function"==typeof bssFixSupportActionAddToCart){const t=bssFixSupportActionAddToCart(e,r,i,u);r=t.add_to_cart_btn,i=t.sticky_add_to_btn}if(e.page.isHomePage()||p)if(c=n,""==e.cartSelector.trim()||0==e.cartSelector.trim().length)if(7019==e.storeId)document.querySelector(`[bss-po-featured-product-key='${o}'] .bss-po-product-page`)&&(document.querySelector(`[bss-po-featured-product-key='${o}'] .bss-po-btn-addToCart`).style.display="block"),r=document.querySelector(`[bss-po-featured-product-key='${o}'] .bss-po-btn-addToCart`);else{let e=`[bss-po-featured-product-key='${o}'] form[action*="/cart/add"] button[type="submit"], \n                        [bss-po-featured-product-key='${o}'] form[action*="/cart/add"] input[type="submit"], \n                        [bss-po-featured-product-key='${o}'] form[action*="/cart/add"] button[name="add"], \n                        [bss-po-featured-product-key='${o}'] form[action*="/cart/add"] button.product-form--add-to-cart, \n                        [bss-po-featured-product-key='${o}'] form[action*="/cart/add"] button.product-form--add-to-cart, \n                        [bss-po-featured-product-key='${o}'] form[action*="/cart/add"] button#AddToCart, \n                        [bss-po-featured-product-key='${o}'] form[action*="/cart/add"] .tt-row-custom-01 button.btn-addtocart, \n                        [bss-po-featured-product-key='${o}'] form[action*="/cart/add"] button.btn-addtocart,\n                        [bss-po-featured-product-key='${o}'] .actions-primary .btn.btn-cart, \n                        [bss-po-featured-product-key='${o}'] form[action*="/cart/add"] .product-buy-buttons--primary, \n                        [bss-po-featured-product-key='${o}'] form[action*="/cart/add"] button[data-checkout="cart"], \n                        [bss-po-featured-product-key='${o}'] form[action*="/cart/add"] button.button--addToCart`;"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct&&(e+=`,\n                            [class*="featured-product"]:has(form#product_form_${o}) form[action*="/cart/add"] button[type="submit"], \n                            [class*="featured-product"]:has(form#product_form_${o}) form[action*="/cart/add"] input[type="submit"], \n                            [class*="featured-product"]:has(form#product_form_${o}) form[action*="/cart/add"] button[name="add"], \n                            [class*="featured-product"]:has(form#product_form_${o}) form[action*="/cart/add"] button.product-form--add-to-cart, \n                            [class*="featured-product"]:has(form#product_form_${o}) form[action*="/cart/add"] button.product-form--add-to-cart, \n                            [class*="featured-product"]:has(form#product_form_${o}) form[action*="/cart/add"] button#AddToCart, \n                            [class*="featured-product"]:has(form#product_form_${o}) form[action*="/cart/add"] .tt-row-custom-01 button.btn-addtocart, \n                            [class*="featured-product"]:has(form#product_form_${o}) form[action*="/cart/add"] button.btn-addtocart,\n                            [class*="featured-product"]:has(form#product_form_${o}) .actions-primary .btn.btn-cart, \n                            [class*="featured-product"]:has(form#product_form_${o}) form[action*="/cart/add"] .product-buy-buttons--primary, \n                            [class*="featured-product"]:has(form#product_form_${o}) form[action*="/cart/add"] button[data-checkout="cart"], \n                            [class*="featured-product"]:has(form#product_form_${o}) form[action*="/cart/add"] button.button--addToCart,\n                            [id*="featured-product"]:has(form#product_form_${o}) form[action*="/cart/add"] button[type="submit"], \n                            [id*="featured-product"]:has(form#product_form_${o}) form[action*="/cart/add"] input[type="submit"], \n                            [id*="featured-product"]:has(form#product_form_${o}) form[action*="/cart/add"] button[name="add"], \n                            [id*="featured-product"]:has(form#product_form_${o}) form[action*="/cart/add"] button.product-form--add-to-cart, \n                            [id*="featured-product"]:has(form#product_form_${o}) form[action*="/cart/add"] button.product-form--add-to-cart, \n                            [id*="featured-product"]:has(form#product_form_${o}) form[action*="/cart/add"] button#AddToCart, \n                            [id*="featured-product"]:has(form#product_form_${o}) form[action*="/cart/add"] .tt-row-custom-01 button.btn-addtocart, \n                            [id*="featured-product"]:has(form#product_form_${o}) form[action*="/cart/add"] button.btn-addtocart,\n                            [id*="featured-product"]:has(form#product_form_${o}) .actions-primary .btn.btn-cart, \n                            [id*="featured-product"]:has(form#product_form_${o}) form[action*="/cart/add"] .product-buy-buttons--primary, \n                            [id*="featured-product"]:has(form#product_form_${o}) form[action*="/cart/add"] button[data-checkout="cart"], \n                            [id*="featured-product"]:has(form#product_form_${o}) form[action*="/cart/add"] button.button--addToCart`,r=document.querySelector(e),r?.setAttribute("bss-po-atc-id",o))}else{const t=`[bss-po-featured-product-key='${o}']`+e.cartSelector;r=document.querySelector(t)}"function"==typeof bssFixSupportIntegrationLineItems&&(e.integrate={},e.integrate.supportIntegrationLineItems=async function(e,t=!0){return{addToCartLineItems:await e.po.addToCart({add_to_cart_btn:r,appliedOptionSet:a,appliedOptionSetForSpecificVariant:s,variantProductIdApplyOptionSet:l,currentProduct:c,customCondition:p,dataHomePage:n,integration:t,numbericBtnAddToCart:0})}}),r?.parentNode&&!r?.parentNode?.querySelector("[po-btn-atc]")&&("function"==typeof bssFixSupportDisableCloneATCBtn||[1722,11877].includes(e.storeId)||(r=function(e){const t=e.cloneNode(!0),o=document.createElement(t.nodeName);for(Array.from(t.attributes).forEach((e=>{o.setAttribute(e.nodeName,e.nodeValue)}));t.firstChild;)o.appendChild(t.firstChild);return o.classList.add("po-atc-btn"),e.parentNode.insertBefore(o,e),e.style.visibility="hidden",e.style.width="0px",e.style.display="none",o}(r)),"function"==typeof bssFixSupportCustomAddATCEvent?bssFixSupportCustomAddATCEvent(e,r,i,u):u([r,i]))}function u(t){t.forEach(((t,o)=>{t&&(4389!=e.storeId&&"function"!=typeof bssFixSupportATCInMobile||t.addEventListener("touchstart",(o=>{s=e.po.appliedOptionSetForSpecificVariant,l=e.po.variantProductIdApplyOptionSet,e.po.addToCart({e:o,add_to_cart_btn:t,appliedOptionSet:a,appliedOptionSetForSpecificVariant:s,variantProductIdApplyOptionSet:l,currentProduct:c,customCondition:p,dataHomePage:n})})),12568===e.storeId?t.addEventListener("click",(o=>{s=e.po.appliedOptionSetForSpecificVariant,l=e.po.variantProductIdApplyOptionSet;const r=document.querySelector("buy-buttons > button:nth-child(1) > div > span.button__loader"),i=document.querySelector("buy-buttons > button:nth-child(1) > div > div");r&&(r.style.transform="translateY(0)",r.style.opacity="1",i.style.transform="translateY(-10px)",i.style.opacity="0"),e.po.addToCart({e:o,add_to_cart_btn:t,appliedOptionSet:a,appliedOptionSetForSpecificVariant:s,variantProductIdApplyOptionSet:l,currentProduct:c,customCondition:p,dataHomePage:n}),setTimeout((()=>{r&&(i.style.transform="translateY(0)",i.style.opacity="1",r.style.transform="translateY(-10px)",r.style.opacity="0")}),2e3)})):t.addEventListener("click",(r=>{r.stopImmediatePropagation(),s=e.po.appliedOptionSetForSpecificVariant,l=e.po.variantProductIdApplyOptionSet,(1051==e.storeId&&"A"!=t.tagName||1051!=e.storeId)&&e.po.addToCart({e:r,add_to_cart_btn:t,appliedOptionSet:a,appliedOptionSetForSpecificVariant:s,variantProductIdApplyOptionSet:l,currentProduct:c,customCondition:p,dataHomePage:n,integration:!1,numbericBtnAddToCart:o})})),1051==e.storeId&&"A"==t.tagName&&t.addEventListener("click",(o=>{o.preventDefault(),s=e.po.appliedOptionSetForSpecificVariant,l=e.po.variantProductIdApplyOptionSet;let{chosenOptions:n}=e.po.getSelectedOptionSet({appliedOptionSet:a,appliedOptionSetForSpecificVariant:s,variantProductIdApplyOptionSet:l,isATCValidate:!0}),r="Salve, ci piacerebbe ricevere un preventivo inerente al prodotto in oggetto. \n";n.forEach(((e,t)=>{r+=`${t}: ${e} \n`}));let i=t.href.substring(0,t.href.search("Salve"));t.href=i+encodeURI(r),window.location=t.href})),t.setAttribute("po-btn-atc",!0))})),"function"==typeof bssFixSupportEnableATC&&bssFixSupportEnableATC(e,t)}},e.po.addToCart=async function({e:n,add_to_cart_btn:r,appliedOptionSet:i,appliedOptionSetForSpecificVariant:a,variantProductIdApplyOptionSet:s,currentProduct:l,customCondition:c,dataHomePage:p,integration:u=!1,numbericBtnAddToCart:d=0}){let _,m=!1;if("function"==typeof bssFixSupportDisableAddToCart){if(m=bssFixSupportDisableAddToCart(e,r,n,m),m)return}else if(r.hasAttribute("disable"))return;if(u||(n.preventDefault(),n.stopPropagation(),_=e.helper.addLoadingBtnCSS(r,"addToCart")),7458==e.storeId){let e=document.querySelector(".options-selection__option-values");if(e&&"false"==e?.getAttribute("data-variant-option-chosen-value"))return}7250==e.storeId&&fetch(window.Shopify.routes.root+"cart.json").then((e=>e.json())).then((e=>{let t=JSON.parse(localStorage.getItem("_ssw_cart_data"));t.items=e.items,localStorage.setItem("_ssw_cart_data",JSON.stringify(t))}));let h="";(e.page.isHomePage()||c)&&(h=r?.getAttribute("bss-po-atc-id"),e.home.productsData&&e.home.productsData.forEach((t=>{t.id==h&&(a=e.po.getAppliedOptionSetOnProductPageForVariant({variantId:t.variantId,productData:p}),s=t.variantId)})),document.querySelectorAll("[bss-po-featured-product-key]").length>1&&(e.errorMap.clear(),e.warningMap.clear())),"function"==typeof bssFixSupportDisableButtonAddToCart&&bssFixSupportDisableButtonAddToCart(e,r);let{chosenOptions:f,chosenOptionsWithoutPriceAddOns:y,totalExtraPrice:b,totalVariantExtraPrice:g,skuOptionValueString:v}=e.po.getSelectedOptionSet({appliedOptionSet:i,appliedOptionSetForSpecificVariant:a,variantProductIdApplyOptionSet:s,idProductAddToCart:h,isATCValidate:!0});if(y=e.po.filterchosenOptions(y,i,a),"function"==typeof bssFixSupportCustomAttributeWhenAddToCart){let t=bssFixSupportCustomAttributeWhenAddToCart(e,f,y);f=t.chosenOptions,y=t.chosenOptionsWithoutPriceAddOns}if(9171===e.storeId){const e=/\[(.*?)\]/;document.querySelectorAll('input[name*="properties["]').forEach((t=>{let o=e.exec(t.name);const n=o&&o.length>1&&o[1],r=t.value;n&&(f.set(`${n}`,` ${r}`),y.set(`${n}`,` ${r}`))}))}let S=e.common.chosenOptionsMapToLinePropertiesObject(f),O=e.po.customHideProp(i,S,b,g,h);O=e.po.customHideProp(a,O.customAttributes,O.totalExtraPrice,O.totalVariantExtraPrice,h),S=O.customAttributes,b=O.totalExtraPrice,g=O.totalVariantExtraPrice;for(const t in S)if((0==parseFloat(b.toFixed(2))||parseFloat(b.toFixed(2))<0||0==parseFloat(g.toFixed(2))||parseFloat(g.toFixed(2))<0)&&e.common.checkHasMultipleFileUpload(S[t])){const e=S[t].split(", ");delete S[t],e.forEach(((e,o)=>{S[`${t}-File ${o+1}`]=e}))}if("undefined"!=typeof BSS_B2B&&(1==BSS_B2B.shopModules[0].status||1==BSS_B2B.shopModules[1].status||1==BSS_B2B.shopModules[15].status)&&b){const e=new Map;y.forEach(((t,o)=>{e.set(o,t),o.includes("BSS_POExtra")||e.set(`BSS_PO${o}`,t)})),y=e}y.set("totalExtraPrice",parseFloat(b.toFixed(2))),y.set("totalVariantExtraPrice",parseFloat(g.toFixed(2))),0!==Object.keys(S).length||S.constructor!==Object||[8633].includes(e.storeId)||(S={"":""}),[3758,5701,6536,3171,6191,8699,10294].includes(e.storeId)&&1==e.enableAddOns&&(S._totalExtraPrice=parseFloat(b.toFixed(2)),y.get("variantData")&&(S._variantData=JSON.stringify(y.get("variantData"))));const I=e.common.getCurrentVariant(l,h,d),x=e.common.getCurrentQuantity(h);let P,E=S||{};if("function"==typeof bssFixSupportEditFormatProperties&&(E=bssFixSupportEditFormatProperties(e,E)),v&&(E.SKU=e.helper.getSkuItemBySkuType(I.sku,v)||""),"function"==typeof bssFixSupportEditFormatSKU&&(E=bssFixSupportEditFormatSKU(e,E)),E=e.cart.markOrderCreatedByApp(E,b),"function"==typeof bssFixSupportCustomExtraPriceForKeepPriceWhenChangeQuantity&&(b=bssFixSupportCustomExtraPriceForKeepPriceWhenChangeQuantity(b,x)),e.checkToken&&(b||y.get("variantData")&&Object.keys(y.get("variantData")).length>0)?(E={...E,_bssPrice:JSON.stringify({extra:e.common.convertRate(b)}),_bssVariants:JSON.stringify(y.get("variantData")),_bssCustomAttributes:JSON.stringify(E)},P={items:[{id:I.id,quantity:x,properties:E}]}):P={items:[{id:I.id,quantity:x,properties:E}]},[4784].includes(e.storeId)&&document.querySelector(".rc-selling-plans")){let e=document.querySelector(".bss-po-selling-id").innerHTML;P.items[0].selling_plan=e}if([8633].includes(e.storeId)&&document.querySelector(".appstle_subscription_wrapper")){let e=document.querySelector("#appstle_selling_plan_label_20").value;P.items[0].selling_plan=e}"function"==typeof bssFixSupportIntegrateSellingPlan&&(P.items[0].selling_plan=bssFixSupportIntegrateSellingPlan(e,P));let T="cart-drawer,cart-notification-product,cart-notification-button,cart-icon-bubble";"function"==typeof bssFixSupportGetSectionMinicartWhenAddToCart&&(T=bssFixSupportGetSectionMinicartWhenAddToCart(e,T));let C=Array.from(document.querySelectorAll(".date-time-error")).some((e=>"block"==e.style.display));if(0!=o.size||C){if(document.querySelectorAll(".bss-error-msg").forEach((e=>e.remove())),o.forEach(((e,t)=>{let o=document.querySelector(t).closest(".po-stack"),n=`<span class="bss-error-msg"><small>${e}</small></span>`;0==o.querySelectorAll(".bss-error-msg").length&&o.insertAdjacentHTML("beforeend",n)})),o.size&&1==e.settings?.generals?.scroll_to_error){const[e]=o.keys();document.querySelector(e).focus()}if(u&&"function"==typeof bssFixSupportIntegrationLineItems)return{success:!1,errorMsgs:o};e.helper.removeLoadingBtnCSS(r,_,"addToCart")}else{if(u&&"function"==typeof bssFixSupportIntegrationLineItems)return e.integrate.setLineItemAfterAddToCart=function(t){try{let o=t.items;const n=JSON.parse(localStorage.getItem("__"))||[],r=e.helper.base64Encode(JSON.stringify({customAttributes:S,product_id:o[0].product_id,variant_id:o[0].variant_id})),i=e.helper.base64Encode(JSON.stringify({option:Object.fromEntries(y),keys:[o[0].key]}));if(n.every((({key:e})=>e!==r))&&n.push({key:r,value:i}),"function"==typeof bssFixSupportIntegrationEditInCart);else{const e=o[0].product_id,t=o[0].id;y.set("product_id",e),y.set("item_id",t),localStorage.setItem(o[0].key,JSON.stringify(Object.fromEntries(y))),localStorage.setItem("__",JSON.stringify(n))}}catch(e){console.error("setLineItemAfterAddToCart: ",e)}},{success:!0,addToCartLineItems:P};"function"==typeof bssFixSupportIntegrateThemeATC&&await bssFixSupportIntegrateThemeATC(e,P);let o={...P};e.enableMiniCart&&(o={...P,sections:T,sections_url:window.location.pathname}),"function"==typeof bssFixSupportUpdateFormatBody&&(o=bssFixSupportUpdateFormatBody(e,o)),e.helper.hideErrorMsgAddToCart(),fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((e=>e.json())).then((o=>{if(o.status&&200!=o.status){let t=!1;return"function"==typeof bssFixSupportCustomAddToCartError&&(bssFixSupportCustomAddToCartError(e,o),t=!0),void(t||(e.helper.showErrorMsgAddToCart({add_to_cart_btn:r,message:o?.description||o?.message}),e.helper.removeLoadingBtnCSS(r,_)))}let n=o.items;const i=JSON.parse(localStorage.getItem("__"))||[],a=e.helper.base64Encode(JSON.stringify({customAttributes:S,product_id:n[0].product_id,variant_id:n[0].variant_id})),s=e.helper.base64Encode(JSON.stringify({option:Object.fromEntries(y),keys:[n[0].key]}));if(i.every((({key:e})=>e!==a))&&i.push({key:a,value:s}),7789==e.storeId){const e=n[n.length-1].product_id,t=n[n.length-1].id;y.set("product_id",e),y.set("item_id",t),localStorage.setItem(n[n.length-1].key,JSON.stringify(Object.fromEntries(y))),localStorage.setItem("__",JSON.stringify(i))}else{const e=n[0].product_id,t=n[0].id;y.set("product_id",e),y.set("item_id",t),localStorage.setItem(n[0].key,JSON.stringify(Object.fromEntries(y))),localStorage.setItem("__",JSON.stringify(i))}if(578==e.storeId)document.querySelector(".site-header-icon.site-header-cart-icon").click();else if(1030==e.storeId){let n=`<p class="noti_add_to_cart">\n                                    The item has been added to <a href="https://${t.shop.domain}/cart">cart</a>\n                                </p>`,r=document.querySelector(".product-form__buttons");r.innerHTML.includes(n)||(r.innerHTML=n+r.innerHTML),e.enableMiniCart&&e.cart.handleMiniCart(o)}else"function"==typeof bssFixSupportCustomAfterAddToCart?bssFixSupportCustomAfterAddToCart(e,o,r,_):e.enableMiniCart?(e.cart.handleMiniCart(o),e.helper.removeLoadingBtnCSS(r,_)):window.location.pathname=window.Shopify.routes.root+"cart";return o})).catch((e=>{console.log("Error:",e)}))}},e.cart.updateToCart=function({appliedOptionSetForProduct:t,appliedOptionSetForVariant:n,variantProductIdApplyOptionSet:r,lineIndex:i,productData:a}){let s=document.getElementById("updateCart");const l=s.getAttribute("bss-po-line-item-key");s.style.position="relative",s.addEventListener("click",(async function(c){let p;c.preventDefault(),p=e.helper.addLoadingBtnCSS(s);let u=!1;"function"==typeof bssFixEditOptionInMiniCart&&(u=bssFixEditOptionInMiniCart());let{chosenOptions:d,chosenOptionsWithoutPriceAddOns:_,totalExtraPrice:m,totalVariantExtraPrice:h,skuOptionValueString:f}=e.po.getSelectedOptionSet({appliedOptionSet:t,appliedOptionSetForSpecificVariant:n,variantProductIdApplyOptionSet:r,editOptionInCart:u,isATCValidate:!0});if("function"==typeof bssFixSupportCustomAttributeWhenUpdateCart){let t=bssFixSupportCustomAttributeWhenUpdateCart({BSS_PO:e,chosenOptions:d,chosenOptionsWithoutPriceAddOns:_,oldLineItemKey:l});d=t.chosenOptions,_=t.chosenOptionsWithoutPriceAddOns}let y=e.common.chosenOptionsMapToLinePropertiesObject(d),b=e.po.customHideProp(t,y,m,h);if(b=e.po.customHideProp(n,b.customAttributes,b.totalExtraPrice,b.totalVariantExtraPrice),y=b.customAttributes,m=b.totalExtraPrice,h=b.totalVariantExtraPrice,_.set("totalExtraPrice",parseFloat(m.toFixed(2))),_.set("totalVariantExtraPrice",parseFloat(h.toFixed(2))),0!==Object.keys(y).length||y.constructor!==Object||[8633].includes(e.storeId)||(y={"":""}),[3758,5701,6536,6191].includes(e.storeId)&&1==e.enableAddOns&&(y._totalExtraPrice=parseFloat(m.toFixed(2)),_.get("variantData")&&(y._variantData=JSON.stringify(_.get("variantData")))),0==o.size){let o=1,r=document.querySelectorAll(e.cart.quantityInputElements.join(","));r.length>0&&(o=r[i].value),localStorage.removeItem(l);const s=Shopify.theme.name.toLowerCase(),c=Shopify.theme.theme_store_id;let p=e.helper.getSectionsSelectorByThemeName(s,c),u={line:Number(i+1),quantity:o};if(y=e.cart.markOrderCreatedByApp(y,m),e.checkToken&&(m||_.get("variantData")&&Object.keys(_.get("variantData")).length>0)){let t={...y,_bssPrice:JSON.stringify({extra:e.common.convertRate(m)}),_bssCustomAttributes:JSON.stringify(y),_bssVariants:JSON.stringify(_.get("variantData"))};f&&(t.SKU=e.helper.getSkuItemBySkuType(a.sku,f)||""),u.properties=t}else u.properties=y;p&&(u.sections=p),6667===e.storeId&&(u.sections_url="/cart"),"function"==typeof bssFixSupportCheckDataBeforeUpdateCart&&(u=bssFixSupportCheckDataBeforeUpdateCart(e,u));let d=!1;0==Object.keys(u.properties).length&&(d=!0),fetch("/cart/change.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then((e=>e.json())).then((o=>{let r=o.items;const a=r[i].key;if("function"==typeof bssFixSupportChangeCartAgain&&bssFixSupportChangeCartAgain(e,r,u,d),_=e.po.filterchosenOptions(_,t,n),localStorage.setItem(a,JSON.stringify(Object.fromEntries(_))),6667===e.storeId)p.forEach((e=>{let t;"cart-counter"===e?(t=document.querySelector("#cart-counter"),t.innerHTML=o.sections[e].replace(/^<div>|<\/div>$/g,"")):(t=document.querySelector("[bss-po-line-properties]")?.closest(".shopify-section"),t.innerHTML=o.sections[e])}));else if(10053===e.storeId){let e;"s_cart"===p?(e=document.querySelector('form[action*="/cart"]'),e.innerHTML=o.sections[p].slice(o.sections[p].indexOf("<form action"),o.sections[p].indexOf("</form>"))):(e=document.querySelector("[bss-po-line-properties]")?.closest(".shopify-section"),e.innerHTML=o.sections[p])}else if(p&&o?.sections[p])if("function"==typeof bssFixSupportUpdateUIAfterEditOptions)bssFixSupportUpdateUIAfterEditOptions(e,p,o);else{let e=document.querySelector("[bss-po-line-properties]")?.closest(".shopify-section");!e&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().cartEditOption&&(e=document.querySelector("[href*='/change?id=']")?.closest(".shopify-section")),e.innerHTML=o.sections[p]}return 1==e.enableAddOns&&(e.cart.renderDiscountCodeFeature(),e.checkToken||(e.cart.handleCartCheckoutBtn(o),e.cart.displayPriceAddOnsWithCartItems(o))),e.cart.resetFeaturesOnCartPage(o),e.cart.generateEditCartOnCartPage(o),e.helper.toggleModalEditOption(),o})).catch((e=>{console.error("Error:",e)}))}else if(document.querySelectorAll(".bss-error-msg").forEach((e=>e.remove())),o.forEach(((e,t)=>{let o=document.querySelector(t).closest(".po-stack"),n=`<span class="bss-error-msg"><small>${e}</small></span>`;0==o.querySelectorAll(".bss-error-msg").length&&o.insertAdjacentHTML("beforeend",n)})),o.size&&1==e.settings?.generals?.scroll_to_error){const[e]=o.keys();document.querySelector(e).focus()}e.helper.removeLoadingBtnCSS(s,p)}))},e.po.disableAddToCart=function(t){try{e.common.disableButton(".po-atc-btn",t),e.common.disableButton(".bss-po-btn-buyitnow",t)}catch(e){console.error("Error when disable add to cart",e)}}}(e,o,i),function(e,o,n){e.po.buyItNow=function(r=""){let i=e.po.appliedOptionSetForOneProduct,a=e.po.appliedOptionSetForSpecificVariant;if(!i&&!a)return;let s=o.product;(e.page.isHomePage()||1569==e.storeId)&&(s=r);let l=e.pdp.buyItNowBtn;"function"==typeof bssFixSupportBuyItNowSelector&&(l=bssFixSupportBuyItNowSelector(e,l)),e.helper.waitForElement(l,3e3).then((function(){let c=document.querySelectorAll(l),p=null;if(c.forEach((e=>{e.querySelector(".bss-b2b-btn-buyitnow")&&(p=!0)})),!p){if("function"==typeof bssFixSupportEventBuyItNow&&(c=bssFixSupportEventBuyItNow(e,c)),""!=e.buyItNowBtnSelector.trim()){let t=document.querySelector(e.buyItNowBtnSelector);t&&(c=[...c,...t])}c.length>0&&c.forEach((function(l){const c=l;let{cloneBtnBuyItNow:p,isASpecialButton:u}=e.pdp.cloneBuyItNow(l);if(e.page.isHomePage()&&r||1569==e.storeId){let t=l.closest("[bss-po-featured-product-key]")?.getAttribute("bss-po-featured-product-key");if(!t&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct){const e=l.closest("[id*='featured-product'], [class*='featured-product']").querySelector("form[id*='product_form']"),t=e?.getAttribute("id")?.match(/product_form_(\d+)/);t&&(productId=t[1])}Object.keys(r).length&&r.id==t&&(s=r,i=e.po.getAppliedOptionSetOnProductPage(r),i&&!u&&(l.parentNode.insertBefore(p,l),p.classList.add("bss-po-btn-buyitnow"),p.style.display="block",p.style.position="relative",l.parentNode.removeChild(l)))}else u||(l.parentNode.insertBefore(p,l),p.classList.add("bss-po-btn-buyitnow"),p.style.display="block",p.style.position="relative",l.parentNode.removeChild(l));p.addEventListener("click",(async function(r){let l,u=!1;if("function"==typeof bssFixSupportDisableBuyItNow){if(u=bssFixSupportDisableBuyItNow(e,this,r,u),u)return}else if(this.hasAttribute("disable"))return;r.preventDefault();let d="",_=e.po.variantProductIdApplyOptionSet;if(a=e.po.appliedOptionSetForSpecificVariant,e.page.isHomePage()||1569==e.storeId){if(d=p.closest("[bss-po-featured-product-key]")?.getAttribute("bss-po-featured-product-key"),!d&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().featuredProduct){const e=p.closest("[id*='featured-product'], [class*='featured-product']")?.querySelector("form[id*='product_form']"),t=e?.getAttribute("id")?.match(/product_form_(\d+)/);t&&(d=t[1])}e.home.productsData.length&&e.home.productsData.forEach((t=>{t.id==d&&(s=t,i=e.po.getAppliedOptionSetOnProductPage(t),a=e.po.getAppliedOptionSetOnProductPageForVariant({variantId:t.variantId,productData:t}),_=t.variantId)}))}2951==e.storeId?(p.classList.add("bss-po-button--loading"),p.style.color="#000",p.style.backgroundColor="#000",p.style.borderRadius="10px",p.disabled=!0):l=e.helper.addLoadingBtnCSS(p);let{chosenOptions:m,chosenOptionsWithoutPriceAddOns:h,totalExtraPrice:f,totalVariantExtraPrice:y,skuOptionValueString:b}=e.po.getSelectedOptionSet({appliedOptionSet:i,appliedOptionSetForSpecificVariant:a,variantProductIdApplyOptionSet:_,idProductAddToCart:d,isATCValidate:!0});if(m=e.po.filterchosenOptions(m,i,a),"function"==typeof bssFixSupportCustomAttributeWhenBuyItNow){let t=bssFixSupportCustomAttributeWhenBuyItNow(e,m,h);m=t.chosenOptions,h=t.chosenOptionsWithoutPriceAddOns}[5960].includes(e.storeId)&&document.querySelector("div[data-ph_storename]")&&window.ph_check_cart()&&Array.from(document.querySelectorAll("[id^='imageFiles_']")).forEach((e=>{const t=e.getAttribute("data-main");let o=/\[(.*?)\]/;const n=e.querySelectorAll("input[name^='properties']")[0],r=o.exec(n.name)[1];m.set(`${r}`,`${n.value}`);const i=document.querySelectorAll(`input[data-ph-textarea="${t}"]`)[0],a=o.exec(i.name)[1];m.set(`${a}`,`${i.value}`)})),h.set("totalExtraPrice",parseFloat(f.toFixed(2))),h.set("totalVariantExtraPrice",parseFloat(y.toFixed(2)));const g=e.common.getCurrentVariant(s,d),v=e.common.getCurrentQuantity(d);let S=[],O=[];y&&(O=e.common.buyItNowGetVariantLineItems(h,v,S)),y&&!e.marketStatus||m.forEach(((t,o)=>{e.common.checkHasMultipleFileUpload(t)?t.split(", ").map(((e,t)=>S.push({key:`${o}-File${t+1}`,value:e}))):S.push({key:o,value:t})}));let I=e.po.customHideProp(i,S,f,y,d);I=e.po.customHideProp(a,I.customAttributes,I.totalExtraPrice,I.totalVariantExtraPrice,d),S=I.customAttributes,f=I.totalExtraPrice,y=I.totalVariantExtraPrice;let x=`${e.settings.translations.add_ons_text} ${s.title}`,P=S.some((({key:e})=>e))?e.helper.getSkuItemBySkuType(g.sku,b):"";(e.page.isHomePage()||1569==e.storeId)&&(x=`${e.settings.translations.add_ons_text} ${s.handle}`),2398==e.storeId&&(x=`${e.settings.translations.add_ons_text} above print`),f-=y,f=e.common.convertRate(f,"checkout");let E=e.common.getBuyItNowLineItems(f,x,v,O,g,S,P,y),T=Array.from(document.querySelectorAll(".date-time-error")).some((e=>"block"==e.style.display));if(0!=n.size||T){if(document.querySelectorAll(".bss-error-msg").forEach((e=>e.remove())),n.forEach(((e,t)=>{let o=document.querySelector(t).closest(".po-stack"),n=`<span class="bss-error-msg"><small>${e}</small></span>`;0==o.querySelectorAll(".bss-error-msg").length&&o.insertAdjacentHTML("beforeend",n)})),n.size&&1==e.settings?.generals?.scroll_to_error){const[e]=n.keys();document.querySelector(e).focus()}e.helper.removeLoadingBtnCSS(p,l)}else{if("undefined"!=typeof BSS_B2B&&(1==BSS_B2B.shopModules[1].status&&BSS_B2B.cart.cpPricingList&&BSS_B2B.cart.cpPricingList.size>0||1==BSS_B2B.shopModules[0].status&&BSS_B2B.cart.qbPricingList&&BSS_B2B.cart.qbPricingList.size>0||1==BSS_B2B.shopModules[15].status&&BSS_B2B.cart?.efList?.length>0)){e.po.lineItems=E;let t=new Event("bss_po_lineItems_ProductPage",{detail:{}});return void document.dispatchEvent(t)}const n=o.shop.domain;try{const o=parseFloat(f+y);if(e.checkToken){S=e.common.chosenOptionsMapToLinePropertiesObject(m),"function"==typeof bssFixSupportEditFormatProperties&&(S=bssFixSupportEditFormatProperties(e,S));let r=e.cart.markOrderCreatedByApp(S,o);o>0&&(r={...r,_bssPrice:JSON.stringify({extra:e.common.convertRate(o)}),_bssVariants:JSON.stringify(h.get("variantData")),_bssCustomAttributes:JSON.stringify(r)}),P&&(r.SKU=P);const i={items:[{id:g.id,quantity:v,properties:r}]},a={headers:{"Content-Type":"application/json"}},{data:s}=await t().post(`/apps/${e.proxySubpath}/bss-checkout`,{productData:i,domain:n},a);return void(s&&(window.location.href=s.data+e.pdp.getPaymentMethodForCheckout(p)))}{let o={lineItems:E,acceptAutomaticDiscounts:!0};e.enableDiscount||(o.allowDiscountCodesInCheckout=!0),e.marketStatus&&"undefined"!=typeof Shopify&&Shopify?.country&&(o.marketRegionCountryCode=Shopify.country),"function"==typeof bssFixParamPriceAddOnDraftOrder&&(o=bssFixParamPriceAddOnDraftOrder("undefined"!=typeof $?$:null,e,o));const r={domain:n,draftOrderInput:o},i={headers:{"Content-Type":"application/json"}},{data:a}=await t().post(`/apps/${e.proxySubpath}/create-draft-order`,r,i);if(a.draftOrder){let t="",o="?";"undefined"!=typeof Shopify&&Shopify&&Shopify?.locale&&(t="?locale="+Shopify.locale,o="&"),e.helper.removeLoadingBtnCSS(p,l),window.location=a.draftOrder.invoiceUrl+t+e.pdp.getPaymentMethodForCheckout(p,o)}}}catch(t){console.log("Error:",t),p.parentNode.insertBefore(c,p),p.parentNode.removeChild(p),e.helper.removeLoadingBtnCSS(p,l)}}})),p.setAttribute("po-btn-buy-it-now",!0)}))}})).catch((()=>{}))}}(e,o,i),function(e,t){e.cart.handleMiniCart=function(t){try{let o=!1;if("function"==typeof bssFixSupportHandleMinicart&&(o=bssFixSupportHandleMinicart(e,t,o)),!o)if(t.sections["cart-drawer"]&&t.sections["cart-notification-product"]&&t.sections["cart-icon-bubble"]){const o=new DOMParser,n=t.sections["cart-notification-product"],r=o.parseFromString(n,"text/html");let i=t.sections["cart-drawer"].indexOf('<div id="CartDrawer"'),a=t.sections["cart-drawer"].indexOf("</div></cart-drawer>"),s=t.sections["cart-icon-bubble"].indexOf("<svg"),l=t.sections["cart-icon-bubble"].indexOf("</a>"),c=t.sections["cart-drawer"].slice(i,a),p=t.sections["cart-icon-bubble"].slice(s,l),u=r.getElementById(`cart-notification-product-${t.items[0].key}`).innerHTML,d=document.querySelector(e.cart.miniCartIcon.join(",")),_=document.querySelector(e.cart.miniCartDrawerBox.join(",")),m=document.querySelector(e.cart.miniCartNotificationBox.join(","));if(d&&(d.innerHTML=p),_){d.click(),_.innerHTML=c,_.classList.contains("is-empty")&&_.classList.remove("is-empty");let e=document.querySelector("#CartDrawer-Overlay");e.addEventListener("click",(()=>{e.closest("cart-drawer").close()}))}m&&(d.classList.add("active"),m.classList.add("active"),document.querySelector(".cart-notification-product").innerHTML=u,document.querySelector("#cart-notification-button").innerHTML=t.sections["cart-notification-button"],setTimeout((async function(){const t=await e.helper.getCartData();1==e.enableAddOns&&e.cart.handleCartCheckoutBtn(t)}),1e3)),"function"==typeof bssFixSupportHanleMiniCartAfterShow&&bssFixSupportHanleMiniCartAfterShow(e,d,_,m,t),e.cart.initMiniCart(1e3)}else if(t.sections["mini-cart"])document.querySelector(".mini-cart").innerHTML=t.sections["mini-cart"],document.querySelector(".header__action-item-link.header__cart-toggle")&&document.querySelector(".header__action-item-link.header__cart-toggle").click();else if(t.sections["bss-po-mini-cart"]&&3910!=e.storeId){let o=t.sections["bss-po-mini-cart"].indexOf("<form"),n=t.sections["bss-po-mini-cart"].indexOf("</form>"),r=t.sections["bss-po-mini-cart"].slice(o,n);document.querySelector(".Cart-Drawer").classList.add("show"),document.querySelector(".Cart.Drawer__Content").outerHTML=r,document.querySelector("#shopify-section-header").outerHTML=t.sections.header,e.cart.initMiniCart(1e3)}else if(t.sections.api__minicart)document.querySelector(".minicart__label").click();else if(13051==e.storeId)document.querySelector(".minicart .push_side.header-icon").click();else{if(9661==e.storeId)return;if("function"==typeof bssFixSupportAutoNavigateCartPage)return bssFixSupportAutoNavigateCartPage(e,t);window.location.pathname="/cart"}}catch(e){console.log("Handle mini-cart error: ",e),window.location.pathname="/cart"}},e.cart.initMiniCart=function(o){setTimeout((async function(){const o=await e.helper.getCartData();o.item_count>0&&(1==e.enableAddOns&&(e.cart.displayPriceAddOnsWithCartItems(o),e.cart.handleCartCheckoutBtn(o)),t&&"drawer"===t.cart_type&&e.cart.resetFeaturesOnCartPage(o),"function"==typeof bssFixSupportHandleDiscountMiniCart&&bssFixSupportHandleDiscountMiniCart(e))}),o)}}(e,o),function(e,t,o){e.cart.generateEditCartOnCartPage=async function(t){let o=[];const n=t.items,r=n.map((e=>`id:"${e.product_id}"`));if("function"==typeof bssFixEditOptionInMiniCart);else if(!e.page.isCartPage())return;if(n&&n.length>0){o=n.map((e=>{const{product_id:t,key:o,properties:n,price:r,title:i,variant_id:a,variant_title:s,image:l}=e;return{productId:t,key:o,properties:n,price:r,title:i,variant_id:a,variant_title:s,image:l}}));const t=await e.helper.callSearchLiquidApi(r);t.length&&e.cart.addEditOptionsButtonToLineItem(t,o)}},e.cart.addEditOptionsButtonToLineItem=function(t,o){document.getElementsByTagName("BODY")[0].insertAdjacentHTML("beforeend",' <div style="display:none; justify-content: center; align-items: center;" id="ajaxifyOptionsCart"><div id="ajaxifyOptionsCart-overlay" style="text-indent: -9999px">editoptions</div><div class="po-edit-options" id="po-edit-options"><button class="ajaxifyCart--close">Close Cart</button><div id="po-edit-option" style="padding: 1px 20px;"></div></div></div>');let n=document.querySelectorAll("[bss-po-line-properties]");!n.length&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().cartEditOption&&(n=document.querySelectorAll("[href*='/change?id=']")),n.forEach((function(n){let r=n.getAttribute("bss-po-line-properties"),i=n;if(!r){const e=n.getAttribute("href").match(/id=([^&]+)/);e&&(r=e[1])}const a=o.find((e=>e.key===r));if(!document.querySelectorAll("[bss-po-line-properties]").length&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().cartEditOption){const e=function(e,t,o){if(!e)return;const n=Object.keys(e).filter((e=>!t?.includes(e.trim()))),r=n[n.length-1];if(n.length){if(r)return{key:r,value:e[r]}}else if(o.length){const e=o[o.length-1];if(e)return{key:e?.name,value:e?.value}}return null}(a?.properties,["_bssPrice","_bssVariants","_bssCustomAttributes","SKU","_bssIntegrate","__bss_po_addons"],a?.options_with_values);if(e){const t=function(e,t){if(!e||!t)return null;const o=e.querySelectorAll("*"),n=t.value,r=t.key;return Array.from(o).find((e=>{const t=e.textContent.trim();return t.includes(`${r}:`)&&(n.includes(e?.querySelector(".bss-po-cart-file img")?.getAttribute("src")?.trim())||e?.querySelector(".bss-po-cart-file")?.textContent?.trim()||t.includes(n))}))||null}(function(e,t){const o=t.value,n=t.key;for(;e;){if(e.innerHTML?.replaceAll("&amp;","&")?.includes(n)&&e.innerHTML?.replaceAll("&amp;","&")?.includes(o))return e;e=e.parentElement}return null}(n,e),e);t&&(i=t)}}"function"==typeof bssFixSupportReloadPageWhenEditOptions&&bssFixSupportReloadPageWhenEditOptions(e,a),"function"!=typeof bssFixSupportReloadPageWhenEditOptions&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().cartEditOption&&(a||window.location.reload());const s=t.find((e=>{if(a)return e.id===a.productId})),l=JSON.parse(localStorage.getItem(r)),{appliedOptionSetForProduct:c,appliedOptionSetForVariant:p}=e.cart.getAppliedOptionSetOnCartPage({responProdProduct:s,localCartItem:l});if((c||p)&&!i.querySelector('button[name="po-edit-options-in-cart"]')){let t=e.settings.translations.edit_options_text;const o=`<button name="po-edit-options-in-cart" type="button" bss-po-line-item-key=${r}>${t}</button>`;i.insertAdjacentHTML("beforeend",o);let n=500;"function"==typeof bssFixSupportSetTimerDebounce&&(n=bssFixSupportSetTimerDebounce(e,n)),i.querySelector('button[name="po-edit-options-in-cart"]').addEventListener("click",e.helper.debounce((()=>{e.cart.modalEditOptions({itemKey:r,appliedOptionSetForProduct:c,appliedOptionSetForVariant:p}),c&&(e.appliedOptionSet=c,e.po.idDependencyMap=e.helper.mapIdsWithDependencies(c.options)),p&&(e.appliedOptionSet=p,e.po.idDependencyMap=e.helper.mapIdsWithDependencies(p.options))}),n))}}))},e.cart.getAppliedOptionSetOnCartPage=function({responProdProduct:o,localCartItem:n}){let r=null,i=null,a=e.optionSets,s=t.customer,l=o.collections,c=o.tags,p=o.id;for(let t=0;t<a.length;t++){const o=a[t];if(r=e.common.checkAppliedOptionSet({optionSet:o,customer:s,collections:l,productId:p,tags:c}),r)break}if(n&&n.variantProductIdApplyOptionSet)for(let t=0;t<a.length;t++){const o=a[t];if(4===o.product_condition_type&&(i=e.common.checkAppliedOptionSet({optionSet:o,customer:s,collections:l,productId:p,tags:c,variantId:n.variantProductIdApplyOptionSet}),i))break}return{appliedOptionSetForProduct:r,appliedOptionSetForVariant:i}},e.cart.getOptionHtmlCartPage=function(t,o){let n=e.po.validateOptionSetBeforeRenderHtml({appliedOptionSet:t});e.conditional.newArray=n.flatMap((t=>{if(o[t.label_on_cart]){const n=o[t.label_on_cart];return Array.isArray(n)?n.map((o=>{let n;return e.helper.isJSON(o)&&(n=JSON.parse(o).title),{label:t.label_on_product,value:n,id:t.id}})):n.includes(", ")&&t.option_type==r.OPTION_TYPE.CHECKBOX||t.option_type==r.OPTION_TYPE.BUTTON||t.option_type==r.OPTION_TYPE.SWITCH?n.split(", ").map((e=>({label:t.label_on_product,value:e,id:t.id}))):{label:t.label_on_product,value:n,id:t.id}}return null})).filter((e=>null!==e));const i=e.common.generateUniqueId();t.uniqueId||(t.uniqueId=i);const a=t.uniqueId?t.uniqueId:0,s=t.product_condition_type;let l=`<div class="${"bss-po-product-page"+(4!==s||window.bss_admin_option?"":" bss-po-specific-variant")}" data-position=${a}>`;l+='<form class="po-col-span-12 po-form-option-container">';const p=new c(t,e.displayMap,e.conditional.newArray,!0);return n.forEach((t=>{let o="flex";p.canShow(t.label_on_product)||(o="none"),e.displayMap.set(t.id,o)})),n.forEach((o=>{const n=t.id;let i="po-col-span-12";switch(o?.option_setting_width){case r.OPTION_WIDTH_SETTING.WIDTH_25:i="po-col-span-3";break;case r.OPTION_WIDTH_SETTING.WIDTH_33:i="po-col-span-4";break;case r.OPTION_WIDTH_SETTING.WIDTH_50:i="po-col-span-6";break;case r.OPTION_WIDTH_SETTING.WIDTH_66:i="po-col-span-8";break;case r.OPTION_WIDTH_SETTING.WIDTH_75:i="po-col-span-9";break;case r.OPTION_WIDTH_SETTING.WIDTH_100:default:i="po-col-span-12"}let a="flex";p.canShow(o.label_on_product)||(a="none"),e.displayMap.set(o.id,a);let c=o.required?'<span class="po-required">*</span>':"",u=o.help_text&&""!==o.help_text.trim?`<div class="po-helptext-tooltip"><i class="fa-info-custom"></i><span class="tooltip-text">${o.help_text}</span></div>`:"",d=o.help_text&&""!==o.help_text.trim?`<div class="po-helptext-content"><p>${o.help_text}</p></div>`:"";l+=`<div class="po-stack ${i} po-stack--vertical" id="po_stack${o.id}" style="display: ${a}">`,o.option_type==r.OPTION_TYPE.TEXT_BOX?l+=e.po.getTextBoxHtml({option:o,requiredSpan:c,help_text_tooltip:u,help_text_content:d,appliedOptionSetID:n,optionSetConditionType:s}):o.option_type==r.OPTION_TYPE.NUMBER?l+=e.po.getNumberFieldHtml({option:o,requiredSpan:c,help_text_tooltip:u,help_text_content:d,appliedOptionSetID:n,optionSetConditionType:s}):o.option_type==r.OPTION_TYPE.CHECKBOX?l+=e.po.getCheckboxHtml({option:o,requiredSpan:c,help_text_tooltip:u,help_text_content:d,appliedOptionSetID:n,optionSetConditionType:s}):o.option_type==r.OPTION_TYPE.DROPDOWN?l+=e.po.getDropdownMenuHtml({option:o,requiredSpan:c,help_text_tooltip:u,help_text_content:d,appliedOptionSetID:n,optionSetConditionType:s}):o.option_type==r.OPTION_TYPE.RADIO_BUTTON?l+=e.po.getRadioButtonHtml({option:o,requiredSpan:c,help_text_tooltip:u,help_text_content:d,appliedOptionSetID:n,optionSetConditionType:s}):o.option_type==r.OPTION_TYPE.SWATCH?l+=e.po.getSwatchHtml({option:o,requiredSpan:c,help_text_tooltip:u,help_text_content:d,appliedOptionSetID:n,appliedOptionSet:t,optionSetConditionType:s}):o.option_type==r.OPTION_TYPE.BUTTON?l+=e.po.getButtonHtml({option:o,requiredSpan:c,help_text_tooltip:u,help_text_content:d,appliedOptionSetID:n,optionSetConditionType:s}):o.option_type==r.OPTION_TYPE.FILE_UPLOAD?l+=e.po.getFileUploadHtml({option:o,requiredSpan:c,help_text_tooltip:u,help_text_content:d,optionSetConditionType:s}):o.option_type==r.OPTION_TYPE.DATE_PICKER&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)?l+=e.po.getDateTimePickerHtml({option:o,requiredSpan:c,help_text_tooltip:u,help_text_content:d,optionSetConditionType:s}):o.option_type==r.OPTION_TYPE.INSTRUCTION?l+=e.po.getInstructionHtml({option:o,optionSetConditionType:s}):o.option_type==r.OPTION_TYPE.COLOR_PICKER&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)?l+=e.po.getColorPickerHtml({option:o,requiredSpan:c,help_text_tooltip:u,help_text_content:d,appliedOptionSetID:n,optionSetConditionType:s}):o.option_type==r.OPTION_TYPE.TEXT_AREA?l+=e.po.getTextAreaHtml({option:o,requiredSpan:c,help_text_tooltip:u,help_text_content:d,appliedOptionSetID:n,optionSetConditionType:s}):o.option_type==r.OPTION_TYPE.DROPDOWN_THUMBNAIL?l+=e.po.getDropdownWithThumbnailMenuHtml({option:o,requiredSpan:c,help_text_tooltip:u,help_text_content:d,appliedOptionSetID:n,optionSetConditionType:s}):o.option_type==r.OPTION_TYPE.EMAIL&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)?l+=e.po.getEmailBoxHtml({option:o,requiredSpan:c,help_text_tooltip:u,help_text_content:d,appliedOptionSetID:n,optionSetConditionType:s}):o.option_type==r.OPTION_TYPE.SWITCH&&(l+=e.po.getSwitchHtml({option:o,requiredSpan:c,help_text_tooltip:u,help_text_content:d,appliedOptionSetID:n,optionSetConditionType:s})),l+="</div>"})),l+="</form>",l+="</div>",l},e.cart.modalEditOptions=async function({itemKey:o,appliedOptionSetForProduct:n,appliedOptionSetForVariant:i}){const a=document.getElementById("ajaxifyOptionsCart");if(a.querySelector(".ajaxifyCart--close").addEventListener("click",(()=>e.helper.toggleModalEditOption())),[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&1==e.enableAddOns&&(n&&await e.common.getVariantDataOnOptionSet(n,t),i&&await e.common.getVariantDataOnOptionSet(i,t)),"none"===a.style.display){const t=document.getElementById("po-edit-option");for(;t.firstChild;)t.removeChild(t.lastChild);const r=await e.helper.getCartData(),s=r.items.find((e=>e.key===o)),l=s.key,c=r.items.map((e=>e.key)).indexOf(l),p=JSON.parse(localStorage.getItem(l));let u=null,d=null;n&&(u=e.cart.getOptionHtmlCartPage(n,p)),i&&(d=e.cart.getOptionHtmlCartPage(i,p)),e.cart.selectQuantity=p.optionQuantity;let _=e.settings.translations.in_cart_cancel_button_text,m=e.settings.translations.in_cart_update_button_text;document.getElementById("po-edit-option").insertAdjacentHTML("beforeend",`<h1 style="text-align: center" class="product-single__title">${s.title}</h1><img class="po-cart__image" src=${s.image?s.image:""} ></img>`),u&&(document.getElementById("po-edit-option").insertAdjacentHTML("beforeend",u),e.common.disableDefaultEventInput(n.product_condition_type)),d&&(document.getElementById("po-edit-option").insertAdjacentHTML("beforeend",d),e.common.disableDefaultEventInput(i.product_condition_type)),document.getElementById("po-edit-option").insertAdjacentHTML("beforeend",`<div style="margin-bottom: 40px;"><button type="submit" name="update" id="updateCart" bss-po-line-item-key=${l}>${m}</button><button class="cancel-update-edit-options">${_}</button></div>`),document.querySelector(".cancel-update-edit-options").addEventListener("click",(()=>e.helper.toggleModalEditOption())),n&&e.cart.addMetaDataToOptionSet({appliedOptionSet:n,localGetItem:p}),i&&e.cart.addMetaDataToOptionSet({appliedOptionSet:i,localGetItem:p});try{e.cart.updateToCart({appliedOptionSetForVariant:i,appliedOptionSetForProduct:n,variantProductIdApplyOptionSet:p.variantProductIdApplyOptionSet,lineIndex:c,productData:s})}catch(e){console.log(e)}a.style.display="flex"}},e.cart.addMetaDataToOptionSet=function({appliedOptionSet:t,localGetItem:n}){const i=t.product_condition_type;t.options.forEach((a=>{let s=e.common.getSeletorOfByOptionType(a.option_type,a.id);"function"==typeof bssFixEditOptionInMiniCart&&(s=`#po-edit-option ${e.common.getSeletorOfByOptionType(a.option_type,a.id)}`);const l=document.querySelector("#po_label"+a.id),c=a.label_on_cart;if(a.option_type==r.OPTION_TYPE.TEXT_BOX){const o=document.querySelector(s);n[c]&&(o.value=n[c]),[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&e.common.addVariantDataToOption(t,a),e.common.addEventToOption({option:a,elementOfOption:o,currentLabel:l,selector:s,optionSetConditionType:i})}else if(a.option_type==r.OPTION_TYPE.NUMBER){const o=document.querySelector(s);n[c]&&(o.value=n[c]),[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&e.common.addVariantDataToOption(t,a),e.common.addEventToOption({option:a,elementOfOption:o,currentLabel:l,selector:s,optionSetConditionType:i})}else if(a.option_type==r.OPTION_TYPE.CHECKBOX){let o=document.querySelectorAll(s),d=o.length;for(var p=0;p<1<<d;p++){let e=[];for(var u=0;u<d;u++)p&1<<u&&e.push(o[u].value);if(n[c]&&e.join(", ")==n[c]){Array.prototype.forEach.call(o,(function(t,o){var n=0;e.includes(t.value)&&n!==e.length&&(n+=1,t.checked="true")}));break}}[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&e.common.addVariantDataToOption(t,a),e.common.addEventToOption({option:a,elementOfOption:o,currentLabel:l,selector:s,optionSetConditionType:i})}else if(a.option_type==r.OPTION_TYPE.DROPDOWN){let o=document.querySelectorAll(`${s} option[id*="po_dropdown"]`),p="";"function"==typeof bssSupportGetMinicartSelector&&(p=bssSupportGetMinicartSelector());const u=`${p} #bss-po_dropdown${a.id} .po-dropdown-selected-option`;let d=document.querySelector(u);if(n[c]){d.innerHTML=n[c]+'<i class="po-dropdown-arrow po-dropdown-arrow-down">';let e=n[c]?.split(", ")||[];o.forEach((t=>{let o=e?.includes(t.value)?"true":"false";t.setAttribute("selected",o)}))}[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&e.common.addVariantDataToOption(t,a),e.common.addEventToOption({option:a,elementOfOption:o,currentLabel:l,selector:s,optionSetConditionType:i})}else if(a.option_type==r.OPTION_TYPE.RADIO_BUTTON){let o=document.querySelectorAll(s);n[c]&&o.forEach((e=>{e.value==n[c]&&(e.checked="true")})),[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&e.common.addVariantDataToOption(t,a),e.common.addEventToOption({option:a,elementOfOption:o,currentLabel:l,selector:s,optionSetConditionType:i})}else if(a.option_type==r.OPTION_TYPE.SWATCH){let o=document.querySelectorAll(s);o.forEach(((e,t)=>{if(n[c]){let t=n[c];for(var o=0;o<t.length;o++){let n=JSON.parse(t[o]);if(e.value==n.title){var r=e.closest(".po-option__value").children[1].children;G(r[0].style.backgroundColor).toHex()!=n.value&&r[0].style.backgroundImage!=n.value||(e.checked="true")}}}})),[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&e.common.addVariantDataToOption(t,a),e.common.addEventToOption({option:a,elementOfOption:o,currentLabel:l,selector:s,optionSetConditionType:i})}else if(a.option_type==r.OPTION_TYPE.BUTTON){let o=document.querySelectorAll(s),d=o.length;for(p=0;p<1<<d;p++){let e=[];for(u=0;u<d;u++)p&1<<u&&e.push(o[u].value);if(n[c]&&e.join(", ")==n[c]){Array.prototype.forEach.call(o,(function(t,o){var n=0;e.includes(t.value)&&n!==e.length&&(t.checked="true",n+=1)}));break}}[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&e.common.addVariantDataToOption(t,a),e.common.addEventToOption({option:a,elementOfOption:o,currentLabel:l,selector:s,optionSetConditionType:i})}else if(a.option_type==r.OPTION_TYPE.FILE_UPLOAD){const l=document.querySelector(s),c=l.closest(4!==i||window.bss_admin_option?".bss-po-product-page:not(.bss-po-specific-variant)":".bss-po-product-page.bss-po-specific-variant"),p=c.getAttribute("data-position"),u=c.querySelector("#po_label"+a.id);let d=document.querySelector(`.file-uploaded${a.id}`),_=n[a.label_on_cart];const m=(_?_.includes(", ")?_.split(", "):[_]:[]).map(((e,t)=>{const o=t,n=e.split("/").pop(),r=null!==e.match(/^https?:\/\/.+\.(jpeg|jpg|gif|png|svg|xml|webp)/),i=`<div class='file-upload-item-${o}'><div> <a href=${e} target="_blank">${n}</a> <span class='remove-file-${o}'  style="cursor:pointer"> <i class="fas fa-trash"></i> </span></div>${r?`<img src=${e} style="max-width: 250px; height: auto" />`:""}</div>`;return d.innerHTML+=i,{id:o,url:e}}));m.forEach((({id:t})=>{d.querySelector(`.remove-file-${t}`).addEventListener("click",(()=>{e.po.removeFileUploaded({id:t,option:a,selector:s,optionSetConditionType:i})}))})),o[`${p}-${a.id}`]=m,[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&e.common.addVariantDataToOption(t,a),e.common.addEventToOption({option:a,elementOfOption:l,currentLabel:u,selector:s,optionSetConditionType:i}),e.po.displayPriceAddOnsWithChosenOptions({option:a,element:l,currentLabel:u,optionSetConditionType:i}),e.po.toggleUploadContainerVisibility&&e.po.toggleUploadContainerVisibility({option:a,selector:s})}else if(a.option_type==r.OPTION_TYPE.DATE_PICKER&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)){e.po.dateTimePicker(a);const t=document.querySelector(s);let o=n[c];t.value=o,e.common.addEventToOption({option:a,elementOfOption:t,currentLabel:l,selector:s,optionSetConditionType:i})}else if(a.option_type==r.OPTION_TYPE.COLOR_PICKER&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)){const o=document.querySelector(s),p=o.closest(`#po_stack${a.id}`).querySelector(`[name="po_color_picker_value${a.id}"]`);n[c]&&(o.value=n[c],p.setAttribute("value",n[c]),e.po.displayColorPickerWithChosenValue(a,s)),[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&e.common.addVariantDataToOption(t,a),e.common.addEventToOption({option:a,elementOfOption:o,currentLabel:l,selector:s,optionSetConditionType:i})}else if(a.option_type==r.OPTION_TYPE.TEXT_AREA){const o=document.querySelector(s);setTimeout((function(){o&&(o.style.height=o.scrollHeight+"px")}),50),n[c]&&(o.value=n[c]),[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&e.common.addVariantDataToOption(t,a),e.common.addEventToOption({option:a,elementOfOption:o,currentLabel:l,selector:s,optionSetConditionType:i})}else if(a.option_type==r.OPTION_TYPE.DROPDOWN_THUMBNAIL){let o=document.querySelectorAll(`${s} option[id*="po_dropdown"]`),p=document.querySelector(`#po_dropdown_thumbnail-div${a.id} .po-dropdown-selected-option`);if(n[c]){p.innerHTML=n[c]+'<i class="po-dropdown-thumbnail-arrow po-dropdown-thumbnail-arrow-down">';let e=n[c]?.split(", ")||[];o.forEach((t=>{let o=e?.includes(t.value)?"true":"false";t.setAttribute("selected",o)}))}[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&e.common.addVariantDataToOption(t,a),e.common.addEventToOption({option:a,elementOfOption:o,currentLabel:l,selector:s,optionSetConditionType:i})}else if(a.option_type==r.OPTION_TYPE.EMAIL){const o=document.querySelector(s);n[c]&&(o.value=n[c]),[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&e.common.addVariantDataToOption(t,a),e.common.addEventToOption({option:a,elementOfOption:o,currentLabel:l,selector:s,optionSetConditionType:i})}else if(a.option_type==r.OPTION_TYPE.SWITCH){let o=document.querySelectorAll(s);o.forEach((e=>{e.checked=n[c]?.includes(e.value)})),[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&e.common.addVariantDataToOption(t,a),e.common.addEventToOption({option:a,elementOfOption:o,currentLabel:l,selector:s,optionSetConditionType:i})}}))}}(e,o,n),function(e,o){e.cart.discount.utils={rendering:!1,showDiscountCodeFeature:!1,renderDiscountErrorMessage({status:e="error",message:t=""}){const o=document.querySelector("#bss-po-discount-code--message");o.innerHTML=t,o.style.color="error"===e?"red":"green"},toggleApplyDiscountCodeLoading(e="loading"){const t=document.querySelector("div.bss-po-loader"),o=document.querySelector(".bss-po-discount-code-input--button"),n=document.querySelector("#bss-po-discount-code--message");"loading"===e?(n.innerHTML="",o.classList.add("bss-po-button-active"),o.style.pointerEvents="none",t.classList.add("bss-po-button--loading")):(o.classList.remove("bss-po-button-active"),o.style.pointerEvents="auto",t.classList.remove("bss-po-button--loading"))}},e.cart.getDiscountCodeHTML=function(t,o,n){let{discount_button:r,discount_input_placeholder:i}=e.settings.translations,a="";return(e.page.isCartPage()&&t[2].includes(n)||[887].includes(o))&&(a="page-width"),"function"==typeof bssFixSupportCustomButtonDiscountBox&&(customButtonDiscountBox=bssFixSupportCustomButtonDiscountBox(e,r,i),r=customButtonDiscountBox.discount_button,i=customButtonDiscountBox.discount_input_placeholder),`\n            <div class="bss-po-discount-code-block ${a}">\n                <div class="bss-po-discount-code-wrapper">\n                    <div class="bss-po-discount-code-input--input-container">\n                        <input type="text" class="bss-po-discount-code-input--input" placeholder="${i}">\n\n                        <div class="bss-po-discount-code-input--button" tabindex="0">\n                            <div class="bss-po-discount-code-input--button-text">${r}</div>\n                            <div class="bss-po-loader"></div>\n                        </div>\n                    </div>\n                    <div id="bss-po-discount-code--message"></div>\n                    <div class="bss-po-discount-code--applied-wrapper"></div>\n                    <div class="bss-po-discount-code--summary-wrapper"></div>\n                </div>\n            </div>\n        `},e.cart.renderApplyDiscountCodeRes=function(t){const{discount_error_invalid:o}=e.settings.translations,n=document.querySelector(".bss-po-discount-code--applied-wrapper"),r=document.querySelector(".bss-po-discount-code--summary-wrapper");if(t.success){e.money.addMoneyWithCurrencyFormat(t.cart.original_total_price/100,0);const o=`-${e.money.addMoneyWithCurrencyFormat(t.discount_amount/100,0)}`,i=(e.money.addMoneyWithCurrencyFormat(t.cart.items_subtotal_price/100,0),`\n                    <div class="bss-po-discount-code--applied-wrapper--applied">\n                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" fill="currentColor"><path d="M17.78 3.09C17.45 2.443 16.778 2 16 2h-5.165c-.535 0-1.046.214-1.422.593l-6.82 6.89c0 .002 0 .003-.002.003-.245.253-.413.554-.5.874L.738 8.055c-.56-.953-.24-2.178.712-2.737L9.823.425C10.284.155 10.834.08 11.35.22l4.99 1.337c.755.203 1.293.814 1.44 1.533z" fill-opacity=".55"></path><path d="M10.835 2H16c1.105 0 2 .895 2 2v5.172c0 .53-.21 1.04-.586 1.414l-6.818 6.818c-.777.778-2.036.782-2.82.01l-5.166-5.1c-.786-.775-.794-2.04-.02-2.828.002 0 .003 0 .003-.002l6.82-6.89C9.79 2.214 10.3 2 10.835 2zM13.5 8c.828 0 1.5-.672 1.5-1.5S14.328 5 13.5 5 12 5.672 12 6.5 12.672 8 13.5 8z"></path>\n                        </svg>${t.discount.title}<div class="bss-po-discount-code--applied-wrapper--applied-remove" data-code="${t.discount.title}"></div>\n                    </div>\n                `),a=`\n                    <div class="bss-po-discount-code--summary-discount">\n                        <span>Discount</span>\n                        <span class="bss-po-discount-code--summary-discount-value">${o}</span>\n                    </div>\n                `;6536==e.storeId||8109==e.storeId?setTimeout((()=>{document.querySelector(".bss-po-discount-code--applied-wrapper").innerHTML=i,document.querySelector(".bss-po-discount-code--summary-wrapper").innerHTML=a,e.cart.discount.utils.renderDiscountErrorMessage({status:"success",message:`Coupon code '${t.discount.title}' applied`}),document.querySelector(".bss-po-discount-code--applied-wrapper--applied-remove").addEventListener("click",e.cart.handleDeleteDiscountCode)}),1500):(n.innerHTML=i,r.innerHTML=a,e.cart.discount.utils.renderDiscountErrorMessage({status:"success",message:`Coupon code '${t.discount.title}' applied`}),document.querySelector(".bss-po-discount-code--applied-wrapper--applied-remove").addEventListener("click",e.cart.handleDeleteDiscountCode)),window.localStorage.setItem("appliedDiscount",t.discount.title)}else e.cart.discount.utils.renderDiscountErrorMessage({message:o}),n.innerHTML="",r.innerHTML="",window.localStorage.removeItem("appliedDiscount")},e.cart.handleDeleteDiscountCode=function(){const e=document.querySelector(".bss-po-discount-code--applied-wrapper"),t=document.querySelector(".bss-po-discount-code--summary-wrapper"),o=document.querySelector("#bss-po-discount-code--message");e&&t&&o&&(e.innerHTML="",t.innerHTML="",o.innerHTML="",window.localStorage.removeItem("appliedDiscount"))},e.cart.checkRenderDiscountCodeFeature=async function(){const t=(await e.helper.getCartData()).items.some((e=>{let t=JSON.parse(localStorage.getItem(e.key));return t&&(0!==t.totalExtraPrice||0!==t.totalVariantExtraPrice)}));return t},e.cart.renderDiscountCodeFeature=async function(){e.cart.discount.utils.rendering=!0;let t=!1;try{if(document.querySelector(".bss-po-discount-code-block")&&document.querySelector(".bss-po-discount-code-block").remove(),!e.enableDiscount)return;const o={1:["debut","narrative","venture","minimal","simple","express","supply","boundless","brooklyn"],2:["refresh","ride","colorblock","taste","studio","craft","crave","sense","dawn","origin","publisher"]},n=Shopify.theme.theme_store_id,r=Shopify.theme.name.toLowerCase()||"",i=e.cart.getDiscountCodeHTML(o,n,r);if(t=await e.cart.checkRenderDiscountCodeFeature(),t){if(e.page.isCartPage())if(o[2].includes(r)||[887].includes(n))document.querySelector("main .shopify-section").insertAdjacentHTML("afterend",i);else if(o[1].includes(r))document.querySelector('form[action="/cart"] table').insertAdjacentHTML("afterend",i);else{let t=document.querySelectorAll('form[action="/cart"]');"function"==typeof bssFixSupportAppendDiscountBox?bssFixSupportAppendDiscountBox(e,t,i):(t=[...t].filter((e=>!e.closest("cart-notification,cart-drawer"))),t.length&&t[0].insertAdjacentHTML("beforeend",i))}else"function"==typeof bssFixSupportAppendDiscountBoxSpecialPage&&bssFixSupportAppendDiscountBoxSpecialPage(e,i);document.querySelector("input.bss-po-discount-code-input--input").addEventListener("keydown",(e=>{13==e.keyCode&&(e.preventDefault(),e.stopPropagation())})),document.querySelector(".bss-po-discount-code-input--button").addEventListener("click",(async function(){const t=document.querySelector(".bss-po-discount-code-wrapper input.bss-po-discount-code-input--input"),o=t.value.trim();await e.cart.handleApplyDiscountCode(o),t.value=""}))}}catch(e){console.error(e.message)}finally{e.cart.discount.utils.rendering=!1,e.cart.discount.utils.showDiscountCodeFeature=t}},e.cart.handleApplyDiscountCode=async function(n=""){const{discount_error_empty:r}=e.settings.translations;if(!n)return e.cart.discount.utils.renderDiscountErrorMessage({message:r});e.cart.discount.utils.toggleApplyDiscountCodeLoading();const i=await e.helper.getCartData();if(0===i.items.length)return e.cart.discount.utils.renderDiscountErrorMessage({message:"Can not apply discount code with empty cart"});e.enableAddOns?(i.bss_items_subtotal_price=window.bssProductOptionsPrices.cart_subtotal,i.items.forEach((e=>{e.bss_final_line_price=window.bssProductOptionsPrices[e.key],e.bss_final_price=window.bssProductOptionsPrices[e.key]/e.quantity}))):(i.bss_items_subtotal_price=i.items_subtotal_price,i.items.forEach((e=>{e.bss_final_line_price=e.final_line_price,e.bss_final_price=e.final_price})));const{apiDomain:a}=e,s={domain:o.shop.domain,cart:i,discountCode:n,customerId:o.customer.id};if(e.marketStatus){let t=e.marketData.parent&&e.marketData.parent.adjustment?e.marketData.parent.adjustment.value:0,o=e.marketData.parent&&e.marketData.parent.adjustment?e.marketData.parent.adjustment.type:"";s.marketData={priceAdjustment:t,adjustmentType:o},s.marketRate=parseFloat(Shopify.currency.rate)}try{const o={headers:{"Content-Type":"application/json"}},{data:n}=await t().post(`/apps/${e.proxySubpath}/check-discount-code`,s,o);await e.cart.renderApplyDiscountCodeRes(n)}catch(e){console.log("Error:",e)}e.cart.discount.utils.toggleApplyDiscountCodeLoading("loaded")},e.cart.initDC=async function(){if(e.cart.renderDiscountCodeFeature(),![r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan))return;if(window){if(window.bssCaculatingDC)return;window.bssCaculatingDC=!0}let n=document.querySelector(".bss-po-discount-code--applied-wrapper--applied-remove"),i=n?n.getAttribute("data-code"):"";const a=await e.helper.getCartData();if(!i||a.item_count<1)return window.bssCaculatingDC=!1,void e.cart.handleDeleteDiscountCode();e.enableAddOns?(a.bss_items_subtotal_price=window.bssProductOptionsPrices.cart_subtotal,a.items.forEach((e=>{e.bss_final_line_price=window.bssProductOptionsPrices[e.key],e.bss_final_price=window.bssProductOptionsPrices[e.key]/e.quantity}))):(a.bss_items_subtotal_price=a.items_subtotal_price,a.items.forEach((e=>{e.bss_final_line_price=e.final_line_price,e.bss_final_price=e.final_price})));const{apiDomain:s}=e,l={domain:o.shop.domain,cart:a,discountCode:i,customerId:o.customer.id};try{const o={headers:{"Content-Type":"application/json"}},{data:n}=await t().post(`/apps/${e.proxySubpath}/check-discount-code`,l,o);if(n.success){const o=n.discount.shareableUrls;await t().get(o);const r=document.querySelector(".bss-po-discount-code--applied-wrapper"),i=document.querySelector(".bss-po-discount-code--summary-wrapper"),a=(e.money.addMoneyWithCurrencyFormat(n.cart.original_total_price/100,0),`-${e.money.addMoneyWithCurrencyFormat(n.discount_amount/100,0)}`),s=(e.money.addMoneyWithCurrencyFormat(n.cart.items_subtotal_price/100,0),`\n                    <div class="bss-po-discount-code--applied-wrapper--applied">\n                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" fill="currentColor"><path d="M17.78 3.09C17.45 2.443 16.778 2 16 2h-5.165c-.535 0-1.046.214-1.422.593l-6.82 6.89c0 .002 0 .003-.002.003-.245.253-.413.554-.5.874L.738 8.055c-.56-.953-.24-2.178.712-2.737L9.823.425C10.284.155 10.834.08 11.35.22l4.99 1.337c.755.203 1.293.814 1.44 1.533z" fill-opacity=".55"></path><path d="M10.835 2H16c1.105 0 2 .895 2 2v5.172c0 .53-.21 1.04-.586 1.414l-6.818 6.818c-.777.778-2.036.782-2.82.01l-5.166-5.1c-.786-.775-.794-2.04-.02-2.828.002 0 .003 0 .003-.002l6.82-6.89C9.79 2.214 10.3 2 10.835 2zM13.5 8c.828 0 1.5-.672 1.5-1.5S14.328 5 13.5 5 12 5.672 12 6.5 12.672 8 13.5 8z"></path>\n                        </svg>${n.discount.title}<div class="bss-po-discount-code--applied-wrapper--applied-remove" data-code="${n.discount.title}"></div>\n                    </div>\n                `),l=`\n                    <div class="bss-po-discount-code--summary-discount">\n                        <span>Discount</span>\n                        <span class="bss-po-discount-code--summary-discount-value">${a}</span>\n                    </div>\n                `;r.innerHTML=s,i.innerHTML=l,document.querySelector(".bss-po-discount-code--applied-wrapper--applied-remove").addEventListener("click",e.cart.handleDeleteDiscountCode)}else e.cart.handleDeleteDiscountCode()}catch(e){console.log("Error:",e)}window&&(window.bssCaculatingDC=!1)},e.cart.getKeyData=function(e){const t=[];let o=e.items;if(o.length){for(let e=0;e<o.length;e++){let n=o[e].key;t.push(n)}return t}},e.cart.changeKeyItem=async function(t){try{const n=await e.helper.getCartData(),r=e.cart.getKeyData(n),i=window.bssProductOptionsPrices;for(const e in i)if("cart_subtotal"!==e){const n=t.indexOf(e);if(i[r[n]]=i[e],r[n]!==e){delete i[e];const t=document.querySelectorAll('[bss-po-cart-item-key="'+e+'"]');for(var o=0;o<t.length;o++)t[o].setAttribute("bss-po-cart-item-key",r[n]);document.querySelector('[bss-po-line-properties="'+e+'"]').setAttribute("bss-po-line-properties",r[n])}const a=localStorage.getItem(e);a&&(localStorage.removeItem(e),localStorage.setItem(r[n],a),document.querySelector('[bss-po-line-item-key="'+e+'"]').remove())}window.bssProductOptionsPrices=i,1==e.enableAddOns&&e.cart.handleCartCheckoutBtn(n),e.cart.resetFeaturesOnCartPage(n),e.cart.generateEditCartOnCartPage(n)}catch(e){console.log(e)}},e.cart.checkDataBeforeCheckout=async function(e){try{let t=!1,o=e.items;const n=[];return o.map((e=>{const t=JSON.parse(localStorage.getItem(e.key));let o=1;!t||e.product_id==t.product_id&&e.id==t.item_id||(o=0),n.push(o)})),n.every((e=>1==e))&&(t=!0),t}catch(e){console.log(e)}}}(e,o),function(e){function t(e,t){const o=t.value,n=t.key;for(;e;){if(e.innerHTML?.replaceAll("&amp;","&")?.includes(n)&&e.innerHTML?.replaceAll("&amp;","&")?.includes(o))return e;e=e.parentElement}return null}e.cart.manualProcessFileUpload=function(e=[]){if(document.querySelectorAll(".bss-po-cart-file").length)return;let o=["jpg","jpeg","webp","gif","png","apng","avif","svg","bmp","ico","tiff"];e.forEach(((e,n)=>{const r=e?.properties;for(let e in r){let i="",a=r[e];if(!e.startsWith("_")&&(a.includes("/po/")||a.includes("/cdn.shopify.com"))){let e=a.split(", ");if(e&&e.length){i+="<div aria-label='BSS po list file' style=\"display: flex; gap: 4px; flex-direction: column;\">";for(let t of e){i+=`<a target="_blank" href="${t}">`;let e=!1;for(let n of o)t.includes(n)&&(e=!0);i+=e?`<span style="display:block" class="bss-po-cart-file">\n                         <img src="${t}" style="max-width: 50px; height: auto;"/>\n                       </span>`:`<span class="bss-po-cart-file">${t.split("/").pop().split(".")[0]}</span>`,i+="</a>"}i+="</div>"}}if(i){const o=t(document.querySelectorAll("[href*='/change?id=']")[n],{key:e,value:r[e]});o.innerHTML=o.innerHTML?.replaceAll("&amp;","&")?.replace(r[e],i)}}}))}}(e);if("function"==typeof bssFixSupportForSpecificStore&&bssFixSupportForSpecificStore(o,e),e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)&&1==e.enableAddOns&&Shopify&&Shopify.currency&&1!=Shopify.currency.rate&&(e.marketStatus=!0,e.common.getMarketDataByCountryCode()),setTimeout((function(){if((e.page.isProductPage()||e.page.isProductPreviewPage()||e.page.isProductPageWithAds())&&1==e.enable&&e.optionSets.length>0){"function"==typeof bssFixSupportGenerateProductPage&&bssFixSupportGenerateProductPage(e),("function"==typeof bssFixSupportCustomPriceIncreament||[r.PRICING.CODE.NEW_ADVANCED,r.PRICING.CODE.ADVANCED,r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&e.enableDisplayProductPrice&&e.enableAddOns)&&document.addEventListener("BSSchangeProductPrice",e.helper.debounce((()=>e.po.handleChangePrice(o))));const t=document.querySelectorAll(".product-form__input:not(.product-form__quantity)");t.length&&t.forEach((t=>{t.addEventListener("change",(function(){e.po.buyItNow()}))}));let n=0;"function"==typeof bssFixSupportGetTimeoutGenerateOptionSet&&(n=bssFixSupportGetTimeoutGenerateOptionSet({BSS_PO:e})),setTimeout((()=>{const t=e.optionSets.some((e=>4==e.product_condition_type)),n=document.querySelector("#bss-po-variant-id-first-load");let i=n&&JSON.parse(n.innerText)&&JSON.parse(n.innerText).variant_id;i||(i=e.helper.getVarriantCurrentId()),"undefined"!=typeof __pagefly_helper_init&&__pagefly_helper_init?document.querySelector("[data-pf-type][data-default-variant]")&&(i=document.querySelector("[data-pf-type][data-default-variant]").getAttribute("data-default-variant")):document.querySelector(".bss-po-option-set[po-default-variant-id]")&&document.querySelector(".bss-po-option-set[po-default-variant-id]")&&(i=document.querySelector(".bss-po-option-set[po-default-variant-id]").getAttribute("po-default-variant-id")),[r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)&&e.enable&&t&&(e.enableSpecificVariant||null==e.enableSpecificVariant)&&i?e.po.renderOptionSetOnProductPageOnPlatinumPlan({firstVariant:i,shopData:o}):e.po.generateOptionSetOnProductPage({})}),n)}if(e.page.isHomePage()&&1==e.enable&&e.optionSets.length>0){e.po.generateOptionSetOnHomePage();const t=document.querySelectorAll(".product-form__input:not(.product-form__quantity)");t.length&&t.forEach((t=>{t.addEventListener("change",(function(){e.po.buyItNow()}))}))}if("function"==typeof bssFixSupportGenerateHomePage&&bssFixSupportGenerateHomePage(),1569==e.storeId&&e.page.isProductPage()&&(e.po.generateOptionSetOnHomePage(),[...document.querySelectorAll(".horizontal-product-list button.button--subdued"),...document.querySelectorAll('.product-card__quick-buy button[aria-controls*="quick-buy-template"]')].forEach((t=>{t.addEventListener("click",(function(){const t=setInterval((async()=>{"visible"===window.getComputedStyle(document.querySelector(".bss-po-custom-quick-buy-drawer")).visibility&&(e.po.generateOptionSetOnHomePage(),clearInterval(t))}),200)}))}))),7019==e.storeId&&e.page.isCollectionPage()&&1==e.enable&&e.optionSets.length>0&&e.po.generateOptionSetOnHomePage(),e.page.isCartPage()&&"function"==typeof bssFixSupportManualInstall&&bssFixSupportManualInstall().fileUpload&&e.cart.manualProcessFileUpload(o.cart?.items||[]),1==e.enable&&1==e.enableInCart&&(e.page.isCartPage()||"function"==typeof bssFixEditOptionInMiniCart)&&e.optionSets.length>0&&e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)&&e.cart.generateEditCartOnCartPage(o.cart),!e.optionSets.length&&1==e.previewMode){const e=document.querySelector('.shopify-app-block[data-block-handle="option-set"] .bss-po-option-set');e&&(e.innerHTML="The additional product options will appear here.")}}),300),(e.page.isCartPage()||e.enableMiniCart)&&1==e.enable&&e.optionSets.length>0){document.querySelectorAll(['form[action*="/cart"] tbody[data-cart-line-items]','form[action*="/cart"] table.responsive-table']).forEach((t=>t.addEventListener("click",(()=>{setTimeout((()=>e.helper.generateHtmlForUploadedFileLink()),2500)}))));let t=0;if("function"==typeof bssFixSupportSetTimeOutInit&&(t=bssFixSupportSetTimeOutInit(t)),setTimeout((function(){if(e.currentPlan&&![r.PRICING.CODE.FREE,r.PRICING.CODE.NEW_FREE].includes(e.currentPlan)){if(e.enableAddOns){if("undefined"!=typeof BSS_B2B){e.changeQuantity=null,e.checkCpQb=!1;let n=500;"function"==typeof bssFixSupportCustomTimeoutForB2BApp&&(n=bssFixSupportCustomTimeoutForB2BApp());var t='[bss-b2b-cart-total-price]:not([style*="display: none"])';1==BSS_B2B.shopModules[0].status&&BSS_B2B.cart.qbPricingList&&BSS_B2B.cart.qbPricingList.size>0&&BSS_B2B.qbRules&&BSS_B2B.qbRules.length>0?document.addEventListener("bss_b2b_doneCheckQb",(t=>{e.checkCpQb=!0,e.changeQuantity>0||(10147!=e.storeId&&(e.changeQuantity+=1),fetch(window.Shopify.routes.root+"cart.js").then((e=>e.json())).then((t=>{1==e.enableInCart&&e.cart.generateEditCartOnCartPage(t),e.cart.displayPriceAddOnsWithCartItems(t),e.cart.handleCartCheckoutBtn(o.cart)})))})):1==BSS_B2B.shopModules[1].status&&BSS_B2B.cart.cpPricingList&&BSS_B2B.cart.cpPricingList.size>0&&BSS_B2B.configData&&BSS_B2B.configData.length>0?document.addEventListener("bss_b2b_doneCheckCp",(r=>{e.checkCpQb=!0,e.changeQuantity>0||(e.changeQuantity+=1,e.helper.waitForElement(t,3e3).then(setTimeout((()=>{fetch(window.Shopify.routes.root+"cart.js").then((e=>e.json())).then((t=>{1==e.enableInCart&&e.cart.generateEditCartOnCartPage(t),e.cart.displayPriceAddOnsWithCartItems(t),e.cart.handleCartCheckoutBtn(o.cart)}))}),n)))})):document.addEventListener("bss_b2b_cart_fixer_done",(r=>{e.helper.waitForElement(t,3e3).then(setTimeout((()=>{fetch(window.Shopify.routes.root+"cart.js").then((e=>e.json())).then((t=>{1==e.enableInCart&&e.cart.generateEditCartOnCartPage(t),3182!=e.storeId&&e.cart.displayPriceAddOnsWithCartItems(t),e.cart.handleCartCheckoutBtn(o.cart)}))}),n))}))}else e.cart.displayPriceAddOnsWithCartItems(o.cart);3350==e.storeId&&document.querySelector("form.cart-template__wrapper .cart-template__terms input[type=checkbox]").addEventListener("change",(function(){this.checked&&e.cart.handleCartCheckoutBtn(o.cart)})),2136==e.storeId?document.querySelector(".form.nopad.radiobox input[type=checkbox]").addEventListener("change",(function(){this.checked&&e.cart.handleCartCheckoutBtn(o.cart)})):"undefined"==typeof BSS_B2B&&e.cart.handleCartCheckoutBtn(o.cart)}if(e.enableInCart||e.enableAddOns)if(2869==e.storeId)e.cart.customUpdateCartBtn(o.cart);else{let t=0;3219==e.storeId&&(t=1e3),setTimeout((function(){e.cart.resetFeaturesOnCartPage(o.cart)}),t)}}}),t),10294==e.storeId&&(e.enableDiscount=1),([r.PRICING.CODE.NEW_PLATINUM,r.PRICING.CODE.PLATINUM,r.PRICING.CODE.UNLIMITED,r.PRICING.CODE.UNLIMITED_SPECIAL].includes(e.currentPlan)||"function"==typeof bssFixSupportCustomOpenFeature&&bssFixSupportCustomOpenFeature()?.discountBox)&&e.enableDiscount&&e.cart.renderDiscountCodeFeature(),-1!==document.getElementsByTagName("head")[0].innerHTML.indexOf("d5zu2f4xvqanl")){const t=()=>{fetch(window.Shopify.routes.root+"cart.js").then((e=>e.json())).then((t=>{e.cart.displayPriceAddOnsWithCartItems(t),e.cart.handleCartCheckoutBtn(t)}))};setTimeout((function(){e.cart.handleCartCheckoutBtn(o.cart)}),1500),e.helper.eventListenersWhenCartActivities(t)}}if(e.helper.detectBuyItNowButtonInterVal(),(e.enableMiniCart||[3667,6136,8144].includes(e.storeId))&&1==e.enable&&1==e.enableAddOns){let t=!1;"function"==typeof bssFixSupportCustomInitMinicart&&(t=bssFixSupportCustomInitMinicart(e,t)),t||e.cart.initMiniCart(2e3);const o=document.querySelector(e.cart.miniCartIcon.join(",")),n={attributes:!0,childList:!0,subtree:!0};if(o&&(new MutationObserver(((t,o)=>{for(const o of t)"childList"===o.type&&e.cart.initMiniCart(1e3)})).observe(o,n),"function"==typeof bssFixSupportHandlePriceOnMiniCart&&bssFixSupportHandlePriceOnMiniCart(e),5048==e.storeId&&""==document.querySelector(".cart-drawer").style.visibility)){const e=document.querySelector(".cart-drawer").querySelectorAll(["[bss-po-item-final-price]","[bss-po-cart-total-price]"]);e.length&&e.forEach((e=>{e.style.opacity=0}))}}setTimeout((()=>{document.querySelector(".po-option__swatch-media")&&document.querySelector(".tooltip-swatch-label")&&function(){function t(){!function(e,t){const o=document.querySelector(`.${t}`).getBoundingClientRect(),n={top:o.height,left:o.width/2,right:o.width/2,bottom:o.height};document.querySelectorAll(".po-option__swatch-media").forEach((e=>{let o=function(e,t={top:0,right:0,bottom:0,left:0}){const o=e.getBoundingClientRect(),n=window.innerWidth,r=window.innerHeight;let i={};return o.top-t.top<=0&&(i.top=!0),o.left-t.left<=0&&(i.left=!0),o.bottom+t.bottom>=r&&(i.bottom=!0),o.right+t.right>=n&&(i.right=!0),i}(e,n),r=e.querySelector(`.${t}`);r.style.bottom="110%",r.style.top="auto",r.style.left=o?.left?"150%":"50%",o?.right&&(r.style.left="0"),o?.top&&(r.style.bottom="auto",r.style.top="110%")}))}(0,"tooltip-swatch-label")}t(),window.addEventListener("resize",e.helper.debounce((()=>t()),300)),window.addEventListener("scroll",e.helper.debounce((()=>t()),500))}()}),2e3),window.bss_admin_option||new Z(e).init()}window&&void 0===window.BSS_PO&&(window.BSS_PO={}),window.bss_admin_option&&(window.Shopify={}),window.self!==window.top?BSS_PO.previewMode=!0:BSS_PO.previewMode=!1,console.log("Merge Init PO");const oe=document.querySelectorAll('script[src*="bss-po-js.js"]');let ne=oe&&1==oe.length;BSS_PO&&14478==BSS_PO.storeId&&(ne=oe?.length),ne||window.bss_admin_option?function(){var e={};if(document.querySelector("#bss-po-store-data")){let t=!1;if("function"==typeof bssFixSupportGetShopData){const o=bssFixSupportGetShopData(e,t);e=o.shopData,t=o.getShopData}if(!t){const t=(e=JSON.parse(document.querySelector("#bss-po-store-data").innerHTML)).shop.money_format.replace(/<\/?[^>]+>/gi,"");e.shop.money_format=t}}window.bss_admin_option&&(e={shop:{domain:"product-options.myshopify.com",permanent_domain:"product-options.myshopify.com",url:"https://product-options.myshopify.com",secure_url:"https://product-options.myshopify.com",money_format:JSON.parse(JSON.stringify(window.bss_admin_option.money_format))}});let t=500;"function"==typeof bssFixSupportTimeoutInit&&(t=bssFixSupportTimeoutInit()),setTimeout((function(){1051===BSS_PO.storeId?window.location.pathname.includes("/products")&&te(BSS_PO,e):te(BSS_PO,e)}),t)}():document.querySelectorAll("span[bss-po-product-price]").forEach((e=>{e.style.visibility="visible"}))})()})();